var f5=Object.defineProperty;var d5=(r,e,t)=>e in r?f5(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var Bd=(r,e,t)=>d5(r,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();/**
 * @license
 * Copyright 2010-2024 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const Gc="168",Xs={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Os={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},Q1=0,Nu=1,e0=2,p5=3,m5=0,xf=1,t0=2,si=3,mi=0,un=1,zn=2,hi=0,Ys=1,ro=2,Uu=3,Ou=4,n0=5,ji=100,i0=101,s0=102,r0=103,a0=104,o0=200,l0=201,c0=202,h0=203,nc=204,ic=205,u0=206,f0=207,d0=208,p0=209,m0=210,g0=211,_0=212,x0=213,y0=214,v0=0,M0=1,S0=2,ao=3,b0=4,T0=5,A0=6,w0=7,qo=0,E0=1,R0=2,Di=0,yf=1,vf=2,Mf=3,Sf=4,C0=5,bf=6,Tf=7,Fu="attached",P0="detached",Wc=300,Ni=301,os=302,oo=303,lo=304,ma=306,ls=1e3,Pn=1001,ea=1002,Nt=1003,Xc=1004,g5=1004,Fs=1005,_5=1005,St=1006,Yr=1007,x5=1007,kn=1008,y5=1008,gi=1009,Af=1010,wf=1011,ta=1012,Yc=1013,Ui=1014,_n=1015,ui=1016,Kc=1017,Zc=1018,tr=1020,Ef=35902,Rf=1021,Cf=1022,hn=1023,Pf=1024,If=1025,Ks=1026,nr=1027,$c=1028,Lo=1029,qf=1030,Jc=1031,v5=1032,jc=1033,Va=33776,Ga=33777,Wa=33778,Xa=33779,sc=35840,rc=35841,ac=35842,oc=35843,lc=36196,cc=37492,hc=37496,uc=37808,fc=37809,dc=37810,pc=37811,mc=37812,gc=37813,_c=37814,xc=37815,yc=37816,vc=37817,Mc=37818,Sc=37819,bc=37820,Tc=37821,Ya=36492,Ac=36494,wc=36495,Lf=36283,Ec=36284,Rc=36285,Cc=36286,I0=2200,q0=2201,L0=2202,na=2300,ia=2301,Zl=2302,Bs=2400,zs=2401,co=2402,Qc=2500,Df=2501,D0=0,Nf=1,Pc=2,N0=3200,U0=3201,M5=3202,S5=3203,fs=0,O0=1,Ii="",Xt="srgb",Ht="srgb-linear",eh="display-p3",Do="display-p3-linear",ho="linear",ot="srgb",uo="rec709",fo="p3",b5=0,Ls=7680,T5=7681,A5=7682,w5=7683,E5=34055,R5=34056,C5=5386,P5=512,I5=513,q5=514,L5=515,D5=516,N5=517,U5=518,Bu=519,F0=512,B0=513,z0=514,Uf=515,k0=516,H0=517,V0=518,G0=519,po=35044,O5=35048,F5=35040,B5=35045,z5=35049,k5=35041,H5=35046,V5=35050,G5=35042,W5="100",zu="300 es",oi=2e3,mo=2001;class xi{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const n=this._listeners;return n[e]!==void 0&&n[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const s=i.indexOf(t);s!==-1&&i.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const n=this._listeners[e.type];if(n!==void 0){e.target=this;const i=n.slice(0);for(let s=0,a=i.length;s<a;s++)i[s].call(this,e);e.target=null}}}const Zt=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let zd=1234567;const Zs=Math.PI/180,sa=180/Math.PI;function qn(){const r=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,n=Math.random()*4294967295|0;return(Zt[r&255]+Zt[r>>8&255]+Zt[r>>16&255]+Zt[r>>24&255]+"-"+Zt[e&255]+Zt[e>>8&255]+"-"+Zt[e>>16&15|64]+Zt[e>>24&255]+"-"+Zt[t&63|128]+Zt[t>>8&255]+"-"+Zt[t>>16&255]+Zt[t>>24&255]+Zt[n&255]+Zt[n>>8&255]+Zt[n>>16&255]+Zt[n>>24&255]).toLowerCase()}function Mt(r,e,t){return Math.max(e,Math.min(t,r))}function Of(r,e){return(r%e+e)%e}function X5(r,e,t,n,i){return n+(r-e)*(i-n)/(t-e)}function Y5(r,e,t){return r!==e?(t-r)/(e-r):0}function Ka(r,e,t){return(1-t)*r+t*e}function K5(r,e,t,n){return Ka(r,e,1-Math.exp(-t*n))}function Z5(r,e=1){return e-Math.abs(Of(r,e*2)-e)}function $5(r,e,t){return r<=e?0:r>=t?1:(r=(r-e)/(t-e),r*r*(3-2*r))}function J5(r,e,t){return r<=e?0:r>=t?1:(r=(r-e)/(t-e),r*r*r*(r*(r*6-15)+10))}function j5(r,e){return r+Math.floor(Math.random()*(e-r+1))}function Q5(r,e){return r+Math.random()*(e-r)}function eg(r){return r*(.5-Math.random())}function tg(r){r!==void 0&&(zd=r);let e=zd+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function ng(r){return r*Zs}function ig(r){return r*sa}function sg(r){return(r&r-1)===0&&r!==0}function rg(r){return Math.pow(2,Math.ceil(Math.log(r)/Math.LN2))}function ag(r){return Math.pow(2,Math.floor(Math.log(r)/Math.LN2))}function og(r,e,t,n,i){const s=Math.cos,a=Math.sin,o=s(t/2),l=a(t/2),c=s((e+n)/2),h=a((e+n)/2),u=s((e-n)/2),f=a((e-n)/2),d=s((n-e)/2),m=a((n-e)/2);switch(i){case"XYX":r.set(o*h,l*u,l*f,o*c);break;case"YZY":r.set(l*f,o*h,l*u,o*c);break;case"ZXZ":r.set(l*u,l*f,o*h,o*c);break;case"XZX":r.set(o*h,l*m,l*d,o*c);break;case"YXY":r.set(l*d,o*h,l*m,o*c);break;case"ZYZ":r.set(l*m,l*d,o*h,o*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function cn(r,e){switch(e.constructor){case Float32Array:return r;case Uint32Array:return r/4294967295;case Uint16Array:return r/65535;case Uint8Array:return r/255;case Int32Array:return Math.max(r/2147483647,-1);case Int16Array:return Math.max(r/32767,-1);case Int8Array:return Math.max(r/127,-1);default:throw new Error("Invalid component type.")}}function He(r,e){switch(e.constructor){case Float32Array:return r;case Uint32Array:return Math.round(r*4294967295);case Uint16Array:return Math.round(r*65535);case Uint8Array:return Math.round(r*255);case Int32Array:return Math.round(r*2147483647);case Int16Array:return Math.round(r*32767);case Int8Array:return Math.round(r*127);default:throw new Error("Invalid component type.")}}const Ff={DEG2RAD:Zs,RAD2DEG:sa,generateUUID:qn,clamp:Mt,euclideanModulo:Of,mapLinear:X5,inverseLerp:Y5,lerp:Ka,damp:K5,pingpong:Z5,smoothstep:$5,smootherstep:J5,randInt:j5,randFloat:Q5,randFloatSpread:eg,seededRandom:tg,degToRad:ng,radToDeg:ig,isPowerOfTwo:sg,ceilPowerOfTwo:rg,floorPowerOfTwo:ag,setQuaternionFromProperEuler:og,normalize:He,denormalize:cn};class G{constructor(e=0,t=0){G.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6],this.y=i[1]*t+i[4]*n+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(Mt(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),i=Math.sin(t),s=this.x-e.x,a=this.y-e.y;return this.x=s*n-a*i+e.x,this.y=s*i+a*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class ke{constructor(e,t,n,i,s,a,o,l,c){ke.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,n,i,s,a,o,l,c)}set(e,t,n,i,s,a,o,l,c){const h=this.elements;return h[0]=e,h[1]=i,h[2]=o,h[3]=t,h[4]=s,h[5]=l,h[6]=n,h[7]=a,h[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,i=t.elements,s=this.elements,a=n[0],o=n[3],l=n[6],c=n[1],h=n[4],u=n[7],f=n[2],d=n[5],m=n[8],g=i[0],p=i[3],_=i[6],y=i[1],x=i[4],v=i[7],w=i[2],b=i[5],A=i[8];return s[0]=a*g+o*y+l*w,s[3]=a*p+o*x+l*b,s[6]=a*_+o*v+l*A,s[1]=c*g+h*y+u*w,s[4]=c*p+h*x+u*b,s[7]=c*_+h*v+u*A,s[2]=f*g+d*y+m*w,s[5]=f*p+d*x+m*b,s[8]=f*_+d*v+m*A,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],i=e[2],s=e[3],a=e[4],o=e[5],l=e[6],c=e[7],h=e[8];return t*a*h-t*o*c-n*s*h+n*o*l+i*s*c-i*a*l}invert(){const e=this.elements,t=e[0],n=e[1],i=e[2],s=e[3],a=e[4],o=e[5],l=e[6],c=e[7],h=e[8],u=h*a-o*c,f=o*l-h*s,d=c*s-a*l,m=t*u+n*f+i*d;if(m===0)return this.set(0,0,0,0,0,0,0,0,0);const g=1/m;return e[0]=u*g,e[1]=(i*c-h*n)*g,e[2]=(o*n-i*a)*g,e[3]=f*g,e[4]=(h*t-i*l)*g,e[5]=(i*s-o*t)*g,e[6]=d*g,e[7]=(n*l-c*t)*g,e[8]=(a*t-n*s)*g,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,i,s,a,o){const l=Math.cos(s),c=Math.sin(s);return this.set(n*l,n*c,-n*(l*a+c*o)+a+e,-i*c,i*l,-i*(-c*a+l*o)+o+t,0,0,1),this}scale(e,t){return this.premultiply(Dh.makeScale(e,t)),this}rotate(e){return this.premultiply(Dh.makeRotation(-e)),this}translate(e,t){return this.premultiply(Dh.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,n=e.elements;for(let i=0;i<9;i++)if(t[i]!==n[i])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const Dh=new ke;function W0(r){for(let e=r.length-1;e>=0;--e)if(r[e]>=65535)return!0;return!1}const lg={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Hr(r,e){return new lg[r](e)}function go(r){return document.createElementNS("http://www.w3.org/1999/xhtml",r)}function X0(){const r=go("canvas");return r.style.display="block",r}const kd={};function Kr(r){r in kd||(kd[r]=!0,console.warn(r))}function cg(r,e,t){return new Promise(function(n,i){function s(){switch(r.clientWaitSync(e,r.SYNC_FLUSH_COMMANDS_BIT,0)){case r.WAIT_FAILED:i();break;case r.TIMEOUT_EXPIRED:setTimeout(s,t);break;default:n()}}setTimeout(s,t)})}const Hd=new ke().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),Vd=new ke().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),Sa={[Ht]:{transfer:ho,primaries:uo,luminanceCoefficients:[.2126,.7152,.0722],toReference:r=>r,fromReference:r=>r},[Xt]:{transfer:ot,primaries:uo,luminanceCoefficients:[.2126,.7152,.0722],toReference:r=>r.convertSRGBToLinear(),fromReference:r=>r.convertLinearToSRGB()},[Do]:{transfer:ho,primaries:fo,luminanceCoefficients:[.2289,.6917,.0793],toReference:r=>r.applyMatrix3(Vd),fromReference:r=>r.applyMatrix3(Hd)},[eh]:{transfer:ot,primaries:fo,luminanceCoefficients:[.2289,.6917,.0793],toReference:r=>r.convertSRGBToLinear().applyMatrix3(Vd),fromReference:r=>r.applyMatrix3(Hd).convertLinearToSRGB()}},hg=new Set([Ht,Do]),Ye={enabled:!0,_workingColorSpace:Ht,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(r){if(!hg.has(r))throw new Error(`Unsupported working color space, "${r}".`);this._workingColorSpace=r},convert:function(r,e,t){if(this.enabled===!1||e===t||!e||!t)return r;const n=Sa[e].toReference,i=Sa[t].fromReference;return i(n(r))},fromWorkingColorSpace:function(r,e){return this.convert(r,this._workingColorSpace,e)},toWorkingColorSpace:function(r,e){return this.convert(r,e,this._workingColorSpace)},getPrimaries:function(r){return Sa[r].primaries},getTransfer:function(r){return r===Ii?ho:Sa[r].transfer},getLuminanceCoefficients:function(r,e=this._workingColorSpace){return r.fromArray(Sa[e].luminanceCoefficients)}};function Zr(r){return r<.04045?r*.0773993808:Math.pow(r*.9478672986+.0521327014,2.4)}function Nh(r){return r<.0031308?r*12.92:1.055*Math.pow(r,.41666)-.055}let yr;class Y0{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{yr===void 0&&(yr=go("canvas")),yr.width=e.width,yr.height=e.height;const n=yr.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=yr}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=go("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);const i=n.getImageData(0,0,e.width,e.height),s=i.data;for(let a=0;a<s.length;a++)s[a]=Zr(s[a]/255)*255;return n.putImageData(i,0,0),t}else if(e.data){const t=e.data.slice(0);for(let n=0;n<t.length;n++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[n]=Math.floor(Zr(t[n]/255)*255):t[n]=Zr(t[n]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let ug=0;class ks{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:ug++}),this.uuid=qn(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const n={uuid:this.uuid,url:""},i=this.data;if(i!==null){let s;if(Array.isArray(i)){s=[];for(let a=0,o=i.length;a<o;a++)i[a].isDataTexture?s.push(Uh(i[a].image)):s.push(Uh(i[a]))}else s=Uh(i);n.url=s}return t||(e.images[this.uuid]=n),n}}function Uh(r){return typeof HTMLImageElement<"u"&&r instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&r instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&r instanceof ImageBitmap?Y0.getDataURL(r):r.data?{data:Array.from(r.data),width:r.width,height:r.height,type:r.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let fg=0;class dt extends xi{constructor(e=dt.DEFAULT_IMAGE,t=dt.DEFAULT_MAPPING,n=Pn,i=Pn,s=St,a=kn,o=hn,l=gi,c=dt.DEFAULT_ANISOTROPY,h=Ii){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:fg++}),this.uuid=qn(),this.name="",this.source=new ks(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=n,this.wrapT=i,this.magFilter=s,this.minFilter=a,this.anisotropy=c,this.format=o,this.internalFormat=null,this.type=l,this.offset=new G(0,0),this.repeat=new G(1,1),this.center=new G(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new ke,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=h,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const n={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==Wc)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case ls:e.x=e.x-Math.floor(e.x);break;case Pn:e.x=e.x<0?0:1;break;case ea:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case ls:e.y=e.y-Math.floor(e.y);break;case Pn:e.y=e.y<0?0:1;break;case ea:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}dt.DEFAULT_IMAGE=null;dt.DEFAULT_MAPPING=Wc;dt.DEFAULT_ANISOTROPY=1;class rt{constructor(e=0,t=0,n=0,i=1){rt.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,i){return this.x=e,this.y=t,this.z=n,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,i=this.z,s=this.w,a=e.elements;return this.x=a[0]*t+a[4]*n+a[8]*i+a[12]*s,this.y=a[1]*t+a[5]*n+a[9]*i+a[13]*s,this.z=a[2]*t+a[6]*n+a[10]*i+a[14]*s,this.w=a[3]*t+a[7]*n+a[11]*i+a[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,i,s;const l=e.elements,c=l[0],h=l[4],u=l[8],f=l[1],d=l[5],m=l[9],g=l[2],p=l[6],_=l[10];if(Math.abs(h-f)<.01&&Math.abs(u-g)<.01&&Math.abs(m-p)<.01){if(Math.abs(h+f)<.1&&Math.abs(u+g)<.1&&Math.abs(m+p)<.1&&Math.abs(c+d+_-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const x=(c+1)/2,v=(d+1)/2,w=(_+1)/2,b=(h+f)/4,A=(u+g)/4,C=(m+p)/4;return x>v&&x>w?x<.01?(n=0,i=.707106781,s=.707106781):(n=Math.sqrt(x),i=b/n,s=A/n):v>w?v<.01?(n=.707106781,i=0,s=.707106781):(i=Math.sqrt(v),n=b/i,s=C/i):w<.01?(n=.707106781,i=.707106781,s=0):(s=Math.sqrt(w),n=A/s,i=C/s),this.set(n,i,s,t),this}let y=Math.sqrt((p-m)*(p-m)+(u-g)*(u-g)+(f-h)*(f-h));return Math.abs(y)<.001&&(y=1),this.x=(p-m)/y,this.y=(u-g)/y,this.z=(f-h)/y,this.w=Math.acos((c+d+_-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class K0 extends xi{constructor(e=1,t=1,n={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new rt(0,0,e,t),this.scissorTest=!1,this.viewport=new rt(0,0,e,t);const i={width:e,height:t,depth:1};n=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:St,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},n);const s=new dt(i,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace);s.flipY=!1,s.generateMipmaps=n.generateMipmaps,s.internalFormat=n.internalFormat,this.textures=[];const a=n.count;for(let o=0;o<a;o++)this.textures[o]=s.clone(),this.textures[o].isRenderTargetTexture=!0;this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.resolveDepthBuffer=n.resolveDepthBuffer,this.resolveStencilBuffer=n.resolveStencilBuffer,this.depthTexture=n.depthTexture,this.samples=n.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}setSize(e,t,n=1){if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(let i=0,s=this.textures.length;i<s;i++)this.textures[i].image.width=e,this.textures[i].image.height=t,this.textures[i].image.depth=n;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let n=0,i=e.textures.length;n<i;n++)this.textures[n]=e.textures[n].clone(),this.textures[n].isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new ks(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class fn extends K0{constructor(e=1,t=1,n={}){super(e,t,n),this.isWebGLRenderTarget=!0}}class th extends dt{constructor(e=null,t=1,n=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:i},this.magFilter=Nt,this.minFilter=Nt,this.wrapR=Pn,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class dg extends fn{constructor(e=1,t=1,n=1,i={}){super(e,t,i),this.isWebGLArrayRenderTarget=!0,this.depth=n,this.texture=new th(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class Bf extends dt{constructor(e=null,t=1,n=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:i},this.magFilter=Nt,this.minFilter=Nt,this.wrapR=Pn,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class pg extends fn{constructor(e=1,t=1,n=1,i={}){super(e,t,i),this.isWebGL3DRenderTarget=!0,this.depth=n,this.texture=new Bf(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class wt{constructor(e=0,t=0,n=0,i=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=i}static slerpFlat(e,t,n,i,s,a,o){let l=n[i+0],c=n[i+1],h=n[i+2],u=n[i+3];const f=s[a+0],d=s[a+1],m=s[a+2],g=s[a+3];if(o===0){e[t+0]=l,e[t+1]=c,e[t+2]=h,e[t+3]=u;return}if(o===1){e[t+0]=f,e[t+1]=d,e[t+2]=m,e[t+3]=g;return}if(u!==g||l!==f||c!==d||h!==m){let p=1-o;const _=l*f+c*d+h*m+u*g,y=_>=0?1:-1,x=1-_*_;if(x>Number.EPSILON){const w=Math.sqrt(x),b=Math.atan2(w,_*y);p=Math.sin(p*b)/w,o=Math.sin(o*b)/w}const v=o*y;if(l=l*p+f*v,c=c*p+d*v,h=h*p+m*v,u=u*p+g*v,p===1-o){const w=1/Math.sqrt(l*l+c*c+h*h+u*u);l*=w,c*=w,h*=w,u*=w}}e[t]=l,e[t+1]=c,e[t+2]=h,e[t+3]=u}static multiplyQuaternionsFlat(e,t,n,i,s,a){const o=n[i],l=n[i+1],c=n[i+2],h=n[i+3],u=s[a],f=s[a+1],d=s[a+2],m=s[a+3];return e[t]=o*m+h*u+l*d-c*f,e[t+1]=l*m+h*f+c*u-o*d,e[t+2]=c*m+h*d+o*f-l*u,e[t+3]=h*m-o*u-l*f-c*d,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,i){return this._x=e,this._y=t,this._z=n,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const n=e._x,i=e._y,s=e._z,a=e._order,o=Math.cos,l=Math.sin,c=o(n/2),h=o(i/2),u=o(s/2),f=l(n/2),d=l(i/2),m=l(s/2);switch(a){case"XYZ":this._x=f*h*u+c*d*m,this._y=c*d*u-f*h*m,this._z=c*h*m+f*d*u,this._w=c*h*u-f*d*m;break;case"YXZ":this._x=f*h*u+c*d*m,this._y=c*d*u-f*h*m,this._z=c*h*m-f*d*u,this._w=c*h*u+f*d*m;break;case"ZXY":this._x=f*h*u-c*d*m,this._y=c*d*u+f*h*m,this._z=c*h*m+f*d*u,this._w=c*h*u-f*d*m;break;case"ZYX":this._x=f*h*u-c*d*m,this._y=c*d*u+f*h*m,this._z=c*h*m-f*d*u,this._w=c*h*u+f*d*m;break;case"YZX":this._x=f*h*u+c*d*m,this._y=c*d*u+f*h*m,this._z=c*h*m-f*d*u,this._w=c*h*u-f*d*m;break;case"XZY":this._x=f*h*u-c*d*m,this._y=c*d*u-f*h*m,this._z=c*h*m+f*d*u,this._w=c*h*u+f*d*m;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,i=Math.sin(n);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],i=t[4],s=t[8],a=t[1],o=t[5],l=t[9],c=t[2],h=t[6],u=t[10],f=n+o+u;if(f>0){const d=.5/Math.sqrt(f+1);this._w=.25/d,this._x=(h-l)*d,this._y=(s-c)*d,this._z=(a-i)*d}else if(n>o&&n>u){const d=2*Math.sqrt(1+n-o-u);this._w=(h-l)/d,this._x=.25*d,this._y=(i+a)/d,this._z=(s+c)/d}else if(o>u){const d=2*Math.sqrt(1+o-n-u);this._w=(s-c)/d,this._x=(i+a)/d,this._y=.25*d,this._z=(l+h)/d}else{const d=2*Math.sqrt(1+u-n-o);this._w=(a-i)/d,this._x=(s+c)/d,this._y=(l+h)/d,this._z=.25*d}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Mt(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(n===0)return this;const i=Math.min(1,t/n);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,i=e._y,s=e._z,a=e._w,o=t._x,l=t._y,c=t._z,h=t._w;return this._x=n*h+a*o+i*c-s*l,this._y=i*h+a*l+s*o-n*c,this._z=s*h+a*c+n*l-i*o,this._w=a*h-n*o-i*l-s*c,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const n=this._x,i=this._y,s=this._z,a=this._w;let o=a*e._w+n*e._x+i*e._y+s*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=a,this._x=n,this._y=i,this._z=s,this;const l=1-o*o;if(l<=Number.EPSILON){const d=1-t;return this._w=d*a+t*this._w,this._x=d*n+t*this._x,this._y=d*i+t*this._y,this._z=d*s+t*this._z,this.normalize(),this}const c=Math.sqrt(l),h=Math.atan2(c,o),u=Math.sin((1-t)*h)/c,f=Math.sin(t*h)/c;return this._w=a*u+this._w*f,this._x=n*u+this._x*f,this._y=i*u+this._y*f,this._z=s*u+this._z*f,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),n=Math.random(),i=Math.sqrt(1-n),s=Math.sqrt(n);return this.set(i*Math.sin(e),i*Math.cos(e),s*Math.sin(t),s*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class R{constructor(e=0,t=0,n=0){R.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return n===void 0&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(Gd.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(Gd.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[3]*n+s[6]*i,this.y=s[1]*t+s[4]*n+s[7]*i,this.z=s[2]*t+s[5]*n+s[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,i=this.z,s=e.elements,a=1/(s[3]*t+s[7]*n+s[11]*i+s[15]);return this.x=(s[0]*t+s[4]*n+s[8]*i+s[12])*a,this.y=(s[1]*t+s[5]*n+s[9]*i+s[13])*a,this.z=(s[2]*t+s[6]*n+s[10]*i+s[14])*a,this}applyQuaternion(e){const t=this.x,n=this.y,i=this.z,s=e.x,a=e.y,o=e.z,l=e.w,c=2*(a*i-o*n),h=2*(o*t-s*i),u=2*(s*n-a*t);return this.x=t+l*c+a*u-o*h,this.y=n+l*h+o*c-s*u,this.z=i+l*u+s*h-a*c,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[4]*n+s[8]*i,this.y=s[1]*t+s[5]*n+s[9]*i,this.z=s[2]*t+s[6]*n+s[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,i=e.y,s=e.z,a=t.x,o=t.y,l=t.z;return this.x=i*l-s*o,this.y=s*a-n*l,this.z=n*o-i*a,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return Oh.copy(this).projectOnVector(e),this.sub(Oh)}reflect(e){return this.sub(Oh.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(Mt(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,i=this.z-e.z;return t*t+n*n+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const i=Math.sin(t)*e;return this.x=i*Math.sin(n),this.y=Math.cos(t)*e,this.z=i*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,n=Math.sqrt(1-t*t);return this.x=n*Math.cos(e),this.y=t,this.z=n*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Oh=new R,Gd=new wt;class tn{constructor(e=new R(1/0,1/0,1/0),t=new R(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t+=3)this.expandByPoint(Kn.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,n=e.count;t<n;t++)this.expandByPoint(Kn.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=Kn.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const n=e.geometry;if(n!==void 0){const s=n.getAttribute("position");if(t===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let a=0,o=s.count;a<o;a++)e.isMesh===!0?e.getVertexPosition(a,Kn):Kn.fromBufferAttribute(s,a),Kn.applyMatrix4(e.matrixWorld),this.expandByPoint(Kn);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),$o.copy(e.boundingBox)):(n.boundingBox===null&&n.computeBoundingBox(),$o.copy(n.boundingBox)),$o.applyMatrix4(e.matrixWorld),this.union($o)}const i=e.children;for(let s=0,a=i.length;s<a;s++)this.expandByObject(i[s],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,Kn),Kn.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(ba),Jo.subVectors(this.max,ba),vr.subVectors(e.a,ba),Mr.subVectors(e.b,ba),Sr.subVectors(e.c,ba),ki.subVectors(Mr,vr),Hi.subVectors(Sr,Mr),_s.subVectors(vr,Sr);let t=[0,-ki.z,ki.y,0,-Hi.z,Hi.y,0,-_s.z,_s.y,ki.z,0,-ki.x,Hi.z,0,-Hi.x,_s.z,0,-_s.x,-ki.y,ki.x,0,-Hi.y,Hi.x,0,-_s.y,_s.x,0];return!Fh(t,vr,Mr,Sr,Jo)||(t=[1,0,0,0,1,0,0,0,1],!Fh(t,vr,Mr,Sr,Jo))?!1:(jo.crossVectors(ki,Hi),t=[jo.x,jo.y,jo.z],Fh(t,vr,Mr,Sr,Jo))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Kn).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Kn).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(vi[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),vi[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),vi[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),vi[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),vi[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),vi[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),vi[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),vi[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(vi),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const vi=[new R,new R,new R,new R,new R,new R,new R,new R],Kn=new R,$o=new tn,vr=new R,Mr=new R,Sr=new R,ki=new R,Hi=new R,_s=new R,ba=new R,Jo=new R,jo=new R,xs=new R;function Fh(r,e,t,n,i){for(let s=0,a=r.length-3;s<=a;s+=3){xs.fromArray(r,s);const o=i.x*Math.abs(xs.x)+i.y*Math.abs(xs.y)+i.z*Math.abs(xs.z),l=e.dot(xs),c=t.dot(xs),h=n.dot(xs);if(Math.max(-Math.max(l,c,h),Math.min(l,c,h))>o)return!1}return!0}const mg=new tn,Ta=new R,Bh=new R;class Kt{constructor(e=new R,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;t!==void 0?n.copy(t):mg.setFromPoints(e).getCenter(n);let i=0;for(let s=0,a=e.length;s<a;s++)i=Math.max(i,n.distanceToSquared(e[s]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Ta.subVectors(e,this.center);const t=Ta.lengthSq();if(t>this.radius*this.radius){const n=Math.sqrt(t),i=(n-this.radius)*.5;this.center.addScaledVector(Ta,i/n),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(Bh.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Ta.copy(e.center).add(Bh)),this.expandByPoint(Ta.copy(e.center).sub(Bh))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Mi=new R,zh=new R,Qo=new R,Vi=new R,kh=new R,el=new R,Hh=new R;class fr{constructor(e=new R,t=new R(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Mi)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Mi.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Mi.copy(this.origin).addScaledVector(this.direction,t),Mi.distanceToSquared(e))}distanceSqToSegment(e,t,n,i){zh.copy(e).add(t).multiplyScalar(.5),Qo.copy(t).sub(e).normalize(),Vi.copy(this.origin).sub(zh);const s=e.distanceTo(t)*.5,a=-this.direction.dot(Qo),o=Vi.dot(this.direction),l=-Vi.dot(Qo),c=Vi.lengthSq(),h=Math.abs(1-a*a);let u,f,d,m;if(h>0)if(u=a*l-o,f=a*o-l,m=s*h,u>=0)if(f>=-m)if(f<=m){const g=1/h;u*=g,f*=g,d=u*(u+a*f+2*o)+f*(a*u+f+2*l)+c}else f=s,u=Math.max(0,-(a*f+o)),d=-u*u+f*(f+2*l)+c;else f=-s,u=Math.max(0,-(a*f+o)),d=-u*u+f*(f+2*l)+c;else f<=-m?(u=Math.max(0,-(-a*s+o)),f=u>0?-s:Math.min(Math.max(-s,-l),s),d=-u*u+f*(f+2*l)+c):f<=m?(u=0,f=Math.min(Math.max(-s,-l),s),d=f*(f+2*l)+c):(u=Math.max(0,-(a*s+o)),f=u>0?s:Math.min(Math.max(-s,-l),s),d=-u*u+f*(f+2*l)+c);else f=a>0?-s:s,u=Math.max(0,-(a*f+o)),d=-u*u+f*(f+2*l)+c;return n&&n.copy(this.origin).addScaledVector(this.direction,u),i&&i.copy(zh).addScaledVector(Qo,f),d}intersectSphere(e,t){Mi.subVectors(e.center,this.origin);const n=Mi.dot(this.direction),i=Mi.dot(Mi)-n*n,s=e.radius*e.radius;if(i>s)return null;const a=Math.sqrt(s-i),o=n-a,l=n+a;return l<0?null:o<0?this.at(l,t):this.at(o,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return n===null?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,i,s,a,o,l;const c=1/this.direction.x,h=1/this.direction.y,u=1/this.direction.z,f=this.origin;return c>=0?(n=(e.min.x-f.x)*c,i=(e.max.x-f.x)*c):(n=(e.max.x-f.x)*c,i=(e.min.x-f.x)*c),h>=0?(s=(e.min.y-f.y)*h,a=(e.max.y-f.y)*h):(s=(e.max.y-f.y)*h,a=(e.min.y-f.y)*h),n>a||s>i||((s>n||isNaN(n))&&(n=s),(a<i||isNaN(i))&&(i=a),u>=0?(o=(e.min.z-f.z)*u,l=(e.max.z-f.z)*u):(o=(e.max.z-f.z)*u,l=(e.min.z-f.z)*u),n>l||o>i)||((o>n||n!==n)&&(n=o),(l<i||i!==i)&&(i=l),i<0)?null:this.at(n>=0?n:i,t)}intersectsBox(e){return this.intersectBox(e,Mi)!==null}intersectTriangle(e,t,n,i,s){kh.subVectors(t,e),el.subVectors(n,e),Hh.crossVectors(kh,el);let a=this.direction.dot(Hh),o;if(a>0){if(i)return null;o=1}else if(a<0)o=-1,a=-a;else return null;Vi.subVectors(this.origin,e);const l=o*this.direction.dot(el.crossVectors(Vi,el));if(l<0)return null;const c=o*this.direction.dot(kh.cross(Vi));if(c<0||l+c>a)return null;const h=-o*Vi.dot(Hh);return h<0?null:this.at(h/a,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Ee{constructor(e,t,n,i,s,a,o,l,c,h,u,f,d,m,g,p){Ee.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,n,i,s,a,o,l,c,h,u,f,d,m,g,p)}set(e,t,n,i,s,a,o,l,c,h,u,f,d,m,g,p){const _=this.elements;return _[0]=e,_[4]=t,_[8]=n,_[12]=i,_[1]=s,_[5]=a,_[9]=o,_[13]=l,_[2]=c,_[6]=h,_[10]=u,_[14]=f,_[3]=d,_[7]=m,_[11]=g,_[15]=p,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Ee().fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,i=1/br.setFromMatrixColumn(e,0).length(),s=1/br.setFromMatrixColumn(e,1).length(),a=1/br.setFromMatrixColumn(e,2).length();return t[0]=n[0]*i,t[1]=n[1]*i,t[2]=n[2]*i,t[3]=0,t[4]=n[4]*s,t[5]=n[5]*s,t[6]=n[6]*s,t[7]=0,t[8]=n[8]*a,t[9]=n[9]*a,t[10]=n[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,n=e.x,i=e.y,s=e.z,a=Math.cos(n),o=Math.sin(n),l=Math.cos(i),c=Math.sin(i),h=Math.cos(s),u=Math.sin(s);if(e.order==="XYZ"){const f=a*h,d=a*u,m=o*h,g=o*u;t[0]=l*h,t[4]=-l*u,t[8]=c,t[1]=d+m*c,t[5]=f-g*c,t[9]=-o*l,t[2]=g-f*c,t[6]=m+d*c,t[10]=a*l}else if(e.order==="YXZ"){const f=l*h,d=l*u,m=c*h,g=c*u;t[0]=f+g*o,t[4]=m*o-d,t[8]=a*c,t[1]=a*u,t[5]=a*h,t[9]=-o,t[2]=d*o-m,t[6]=g+f*o,t[10]=a*l}else if(e.order==="ZXY"){const f=l*h,d=l*u,m=c*h,g=c*u;t[0]=f-g*o,t[4]=-a*u,t[8]=m+d*o,t[1]=d+m*o,t[5]=a*h,t[9]=g-f*o,t[2]=-a*c,t[6]=o,t[10]=a*l}else if(e.order==="ZYX"){const f=a*h,d=a*u,m=o*h,g=o*u;t[0]=l*h,t[4]=m*c-d,t[8]=f*c+g,t[1]=l*u,t[5]=g*c+f,t[9]=d*c-m,t[2]=-c,t[6]=o*l,t[10]=a*l}else if(e.order==="YZX"){const f=a*l,d=a*c,m=o*l,g=o*c;t[0]=l*h,t[4]=g-f*u,t[8]=m*u+d,t[1]=u,t[5]=a*h,t[9]=-o*h,t[2]=-c*h,t[6]=d*u+m,t[10]=f-g*u}else if(e.order==="XZY"){const f=a*l,d=a*c,m=o*l,g=o*c;t[0]=l*h,t[4]=-u,t[8]=c*h,t[1]=f*u+g,t[5]=a*h,t[9]=d*u-m,t[2]=m*u-d,t[6]=o*h,t[10]=g*u+f}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(gg,e,_g)}lookAt(e,t,n){const i=this.elements;return An.subVectors(e,t),An.lengthSq()===0&&(An.z=1),An.normalize(),Gi.crossVectors(n,An),Gi.lengthSq()===0&&(Math.abs(n.z)===1?An.x+=1e-4:An.z+=1e-4,An.normalize(),Gi.crossVectors(n,An)),Gi.normalize(),tl.crossVectors(An,Gi),i[0]=Gi.x,i[4]=tl.x,i[8]=An.x,i[1]=Gi.y,i[5]=tl.y,i[9]=An.y,i[2]=Gi.z,i[6]=tl.z,i[10]=An.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,i=t.elements,s=this.elements,a=n[0],o=n[4],l=n[8],c=n[12],h=n[1],u=n[5],f=n[9],d=n[13],m=n[2],g=n[6],p=n[10],_=n[14],y=n[3],x=n[7],v=n[11],w=n[15],b=i[0],A=i[4],C=i[8],M=i[12],S=i[1],q=i[5],O=i[9],N=i[13],z=i[2],V=i[6],F=i[10],X=i[14],W=i[3],le=i[7],de=i[11],me=i[15];return s[0]=a*b+o*S+l*z+c*W,s[4]=a*A+o*q+l*V+c*le,s[8]=a*C+o*O+l*F+c*de,s[12]=a*M+o*N+l*X+c*me,s[1]=h*b+u*S+f*z+d*W,s[5]=h*A+u*q+f*V+d*le,s[9]=h*C+u*O+f*F+d*de,s[13]=h*M+u*N+f*X+d*me,s[2]=m*b+g*S+p*z+_*W,s[6]=m*A+g*q+p*V+_*le,s[10]=m*C+g*O+p*F+_*de,s[14]=m*M+g*N+p*X+_*me,s[3]=y*b+x*S+v*z+w*W,s[7]=y*A+x*q+v*V+w*le,s[11]=y*C+x*O+v*F+w*de,s[15]=y*M+x*N+v*X+w*me,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],i=e[8],s=e[12],a=e[1],o=e[5],l=e[9],c=e[13],h=e[2],u=e[6],f=e[10],d=e[14],m=e[3],g=e[7],p=e[11],_=e[15];return m*(+s*l*u-i*c*u-s*o*f+n*c*f+i*o*d-n*l*d)+g*(+t*l*d-t*c*f+s*a*f-i*a*d+i*c*h-s*l*h)+p*(+t*c*u-t*o*d-s*a*u+n*a*d+s*o*h-n*c*h)+_*(-i*o*h-t*l*u+t*o*f+i*a*u-n*a*f+n*l*h)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],i=e[2],s=e[3],a=e[4],o=e[5],l=e[6],c=e[7],h=e[8],u=e[9],f=e[10],d=e[11],m=e[12],g=e[13],p=e[14],_=e[15],y=u*p*c-g*f*c+g*l*d-o*p*d-u*l*_+o*f*_,x=m*f*c-h*p*c-m*l*d+a*p*d+h*l*_-a*f*_,v=h*g*c-m*u*c+m*o*d-a*g*d-h*o*_+a*u*_,w=m*u*l-h*g*l-m*o*f+a*g*f+h*o*p-a*u*p,b=t*y+n*x+i*v+s*w;if(b===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const A=1/b;return e[0]=y*A,e[1]=(g*f*s-u*p*s-g*i*d+n*p*d+u*i*_-n*f*_)*A,e[2]=(o*p*s-g*l*s+g*i*c-n*p*c-o*i*_+n*l*_)*A,e[3]=(u*l*s-o*f*s-u*i*c+n*f*c+o*i*d-n*l*d)*A,e[4]=x*A,e[5]=(h*p*s-m*f*s+m*i*d-t*p*d-h*i*_+t*f*_)*A,e[6]=(m*l*s-a*p*s-m*i*c+t*p*c+a*i*_-t*l*_)*A,e[7]=(a*f*s-h*l*s+h*i*c-t*f*c-a*i*d+t*l*d)*A,e[8]=v*A,e[9]=(m*u*s-h*g*s-m*n*d+t*g*d+h*n*_-t*u*_)*A,e[10]=(a*g*s-m*o*s+m*n*c-t*g*c-a*n*_+t*o*_)*A,e[11]=(h*o*s-a*u*s-h*n*c+t*u*c+a*n*d-t*o*d)*A,e[12]=w*A,e[13]=(h*g*i-m*u*i+m*n*f-t*g*f-h*n*p+t*u*p)*A,e[14]=(m*o*i-a*g*i-m*n*l+t*g*l+a*n*p-t*o*p)*A,e[15]=(a*u*i-h*o*i+h*n*l-t*u*l-a*n*f+t*o*f)*A,this}scale(e){const t=this.elements,n=e.x,i=e.y,s=e.z;return t[0]*=n,t[4]*=i,t[8]*=s,t[1]*=n,t[5]*=i,t[9]*=s,t[2]*=n,t[6]*=i,t[10]*=s,t[3]*=n,t[7]*=i,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,i))}makeTranslation(e,t,n){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),i=Math.sin(t),s=1-n,a=e.x,o=e.y,l=e.z,c=s*a,h=s*o;return this.set(c*a+n,c*o-i*l,c*l+i*o,0,c*o+i*l,h*o+n,h*l-i*a,0,c*l-i*o,h*l+i*a,s*l*l+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,i,s,a){return this.set(1,n,s,0,e,1,a,0,t,i,1,0,0,0,0,1),this}compose(e,t,n){const i=this.elements,s=t._x,a=t._y,o=t._z,l=t._w,c=s+s,h=a+a,u=o+o,f=s*c,d=s*h,m=s*u,g=a*h,p=a*u,_=o*u,y=l*c,x=l*h,v=l*u,w=n.x,b=n.y,A=n.z;return i[0]=(1-(g+_))*w,i[1]=(d+v)*w,i[2]=(m-x)*w,i[3]=0,i[4]=(d-v)*b,i[5]=(1-(f+_))*b,i[6]=(p+y)*b,i[7]=0,i[8]=(m+x)*A,i[9]=(p-y)*A,i[10]=(1-(f+g))*A,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,n){const i=this.elements;let s=br.set(i[0],i[1],i[2]).length();const a=br.set(i[4],i[5],i[6]).length(),o=br.set(i[8],i[9],i[10]).length();this.determinant()<0&&(s=-s),e.x=i[12],e.y=i[13],e.z=i[14],Zn.copy(this);const c=1/s,h=1/a,u=1/o;return Zn.elements[0]*=c,Zn.elements[1]*=c,Zn.elements[2]*=c,Zn.elements[4]*=h,Zn.elements[5]*=h,Zn.elements[6]*=h,Zn.elements[8]*=u,Zn.elements[9]*=u,Zn.elements[10]*=u,t.setFromRotationMatrix(Zn),n.x=s,n.y=a,n.z=o,this}makePerspective(e,t,n,i,s,a,o=oi){const l=this.elements,c=2*s/(t-e),h=2*s/(n-i),u=(t+e)/(t-e),f=(n+i)/(n-i);let d,m;if(o===oi)d=-(a+s)/(a-s),m=-2*a*s/(a-s);else if(o===mo)d=-a/(a-s),m=-a*s/(a-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+o);return l[0]=c,l[4]=0,l[8]=u,l[12]=0,l[1]=0,l[5]=h,l[9]=f,l[13]=0,l[2]=0,l[6]=0,l[10]=d,l[14]=m,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,n,i,s,a,o=oi){const l=this.elements,c=1/(t-e),h=1/(n-i),u=1/(a-s),f=(t+e)*c,d=(n+i)*h;let m,g;if(o===oi)m=(a+s)*u,g=-2*u;else if(o===mo)m=s*u,g=-1*u;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+o);return l[0]=2*c,l[4]=0,l[8]=0,l[12]=-f,l[1]=0,l[5]=2*h,l[9]=0,l[13]=-d,l[2]=0,l[6]=0,l[10]=g,l[14]=-m,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let i=0;i<16;i++)if(t[i]!==n[i])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}const br=new R,Zn=new Ee,gg=new R(0,0,0),_g=new R(1,1,1),Gi=new R,tl=new R,An=new R,Wd=new Ee,Xd=new wt;class Dn{constructor(e=0,t=0,n=0,i=Dn.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=n,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,i=this._order){return this._x=e,this._y=t,this._z=n,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,n=!0){const i=e.elements,s=i[0],a=i[4],o=i[8],l=i[1],c=i[5],h=i[9],u=i[2],f=i[6],d=i[10];switch(t){case"XYZ":this._y=Math.asin(Mt(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-h,d),this._z=Math.atan2(-a,s)):(this._x=Math.atan2(f,c),this._z=0);break;case"YXZ":this._x=Math.asin(-Mt(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(o,d),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-u,s),this._z=0);break;case"ZXY":this._x=Math.asin(Mt(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(-u,d),this._z=Math.atan2(-a,c)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-Mt(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(f,d),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-a,c));break;case"YZX":this._z=Math.asin(Mt(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-h,c),this._y=Math.atan2(-u,s)):(this._x=0,this._y=Math.atan2(o,d));break;case"XZY":this._z=Math.asin(-Mt(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(f,c),this._y=Math.atan2(o,s)):(this._x=Math.atan2(-h,d),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,n===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return Wd.makeRotationFromQuaternion(e),this.setFromRotationMatrix(Wd,t,n)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return Xd.setFromEuler(this),this.setFromQuaternion(Xd,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Dn.DEFAULT_ORDER="XYZ";class nh{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let xg=0;const Yd=new R,Tr=new wt,Si=new Ee,nl=new R,Aa=new R,yg=new R,vg=new wt,Kd=new R(1,0,0),Zd=new R(0,1,0),$d=new R(0,0,1),Jd={type:"added"},Mg={type:"removed"},Ar={type:"childadded",child:null},Vh={type:"childremoved",child:null};class Xe extends xi{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:xg++}),this.uuid=qn(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Xe.DEFAULT_UP.clone();const e=new R,t=new Dn,n=new wt,i=new R(1,1,1);function s(){n.setFromEuler(t,!1)}function a(){t.setFromQuaternion(n,void 0,!1)}t._onChange(s),n._onChange(a),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new Ee},normalMatrix:{value:new ke}}),this.matrix=new Ee,this.matrixWorld=new Ee,this.matrixAutoUpdate=Xe.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Xe.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new nh,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Tr.setFromAxisAngle(e,t),this.quaternion.multiply(Tr),this}rotateOnWorldAxis(e,t){return Tr.setFromAxisAngle(e,t),this.quaternion.premultiply(Tr),this}rotateX(e){return this.rotateOnAxis(Kd,e)}rotateY(e){return this.rotateOnAxis(Zd,e)}rotateZ(e){return this.rotateOnAxis($d,e)}translateOnAxis(e,t){return Yd.copy(e).applyQuaternion(this.quaternion),this.position.add(Yd.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(Kd,e)}translateY(e){return this.translateOnAxis(Zd,e)}translateZ(e){return this.translateOnAxis($d,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Si.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?nl.copy(e):nl.set(e,t,n);const i=this.parent;this.updateWorldMatrix(!0,!1),Aa.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Si.lookAt(Aa,nl,this.up):Si.lookAt(nl,Aa,this.up),this.quaternion.setFromRotationMatrix(Si),i&&(Si.extractRotation(i.matrixWorld),Tr.setFromRotationMatrix(Si),this.quaternion.premultiply(Tr.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(Jd),Ar.child=e,this.dispatchEvent(Ar),Ar.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.remove(arguments[n]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(Mg),Vh.child=e,this.dispatchEvent(Vh),Vh.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Si.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Si.multiply(e.parent.matrixWorld)),e.applyMatrix4(Si),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(Jd),Ar.child=e,this.dispatchEvent(Ar),Ar.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,i=this.children.length;n<i;n++){const a=this.children[n].getObjectByProperty(e,t);if(a!==void 0)return a}}getObjectsByProperty(e,t,n=[]){this[e]===t&&n.push(this);const i=this.children;for(let s=0,a=i.length;s<a;s++)i[s].getObjectsByProperty(e,t,n);return n}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Aa,e,yg),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Aa,vg,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].updateMatrixWorld(e)}updateWorldMatrix(e,t){const n=this.parent;if(e===!0&&n!==null&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),t===!0){const i=this.children;for(let s=0,a=i.length;s<a;s++)i[s].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(i.type="BatchedMesh",i.perObjectFrustumCulled=this.perObjectFrustumCulled,i.sortObjects=this.sortObjects,i.drawRanges=this._drawRanges,i.reservedRanges=this._reservedRanges,i.visibility=this._visibility,i.active=this._active,i.bounds=this._bounds.map(o=>({boxInitialized:o.boxInitialized,boxMin:o.box.min.toArray(),boxMax:o.box.max.toArray(),sphereInitialized:o.sphereInitialized,sphereRadius:o.sphere.radius,sphereCenter:o.sphere.center.toArray()})),i.maxInstanceCount=this._maxInstanceCount,i.maxVertexCount=this._maxVertexCount,i.maxIndexCount=this._maxIndexCount,i.geometryInitialized=this._geometryInitialized,i.geometryCount=this._geometryCount,i.matricesTexture=this._matricesTexture.toJSON(e),this._colorsTexture!==null&&(i.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(i.boundingSphere={center:i.boundingSphere.center.toArray(),radius:i.boundingSphere.radius}),this.boundingBox!==null&&(i.boundingBox={min:i.boundingBox.min.toArray(),max:i.boundingBox.max.toArray()}));function s(o,l){return o[l.uuid]===void 0&&(o[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=s(e.geometries,this.geometry);const o=this.geometry.parameters;if(o!==void 0&&o.shapes!==void 0){const l=o.shapes;if(Array.isArray(l))for(let c=0,h=l.length;c<h;c++){const u=l[c];s(e.shapes,u)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const o=[];for(let l=0,c=this.material.length;l<c;l++)o.push(s(e.materials,this.material[l]));i.material=o}else i.material=s(e.materials,this.material);if(this.children.length>0){i.children=[];for(let o=0;o<this.children.length;o++)i.children.push(this.children[o].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let o=0;o<this.animations.length;o++){const l=this.animations[o];i.animations.push(s(e.animations,l))}}if(t){const o=a(e.geometries),l=a(e.materials),c=a(e.textures),h=a(e.images),u=a(e.shapes),f=a(e.skeletons),d=a(e.animations),m=a(e.nodes);o.length>0&&(n.geometries=o),l.length>0&&(n.materials=l),c.length>0&&(n.textures=c),h.length>0&&(n.images=h),u.length>0&&(n.shapes=u),f.length>0&&(n.skeletons=f),d.length>0&&(n.animations=d),m.length>0&&(n.nodes=m)}return n.object=i,n;function a(o){const l=[];for(const c in o){const h=o[c];delete h.metadata,l.push(h)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let n=0;n<e.children.length;n++){const i=e.children[n];this.add(i.clone())}return this}}Xe.DEFAULT_UP=new R(0,1,0);Xe.DEFAULT_MATRIX_AUTO_UPDATE=!0;Xe.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const $n=new R,bi=new R,Gh=new R,Ti=new R,wr=new R,Er=new R,jd=new R,Wh=new R,Xh=new R,Yh=new R;class Rn{constructor(e=new R,t=new R,n=new R){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,i){i.subVectors(n,t),$n.subVectors(e,t),i.cross($n);const s=i.lengthSq();return s>0?i.multiplyScalar(1/Math.sqrt(s)):i.set(0,0,0)}static getBarycoord(e,t,n,i,s){$n.subVectors(i,t),bi.subVectors(n,t),Gh.subVectors(e,t);const a=$n.dot($n),o=$n.dot(bi),l=$n.dot(Gh),c=bi.dot(bi),h=bi.dot(Gh),u=a*c-o*o;if(u===0)return s.set(0,0,0),null;const f=1/u,d=(c*l-o*h)*f,m=(a*h-o*l)*f;return s.set(1-d-m,m,d)}static containsPoint(e,t,n,i){return this.getBarycoord(e,t,n,i,Ti)===null?!1:Ti.x>=0&&Ti.y>=0&&Ti.x+Ti.y<=1}static getInterpolation(e,t,n,i,s,a,o,l){return this.getBarycoord(e,t,n,i,Ti)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(s,Ti.x),l.addScaledVector(a,Ti.y),l.addScaledVector(o,Ti.z),l)}static isFrontFacing(e,t,n,i){return $n.subVectors(n,t),bi.subVectors(e,t),$n.cross(bi).dot(i)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,i){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,t,n,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return $n.subVectors(this.c,this.b),bi.subVectors(this.a,this.b),$n.cross(bi).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Rn.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Rn.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,n,i,s){return Rn.getInterpolation(e,this.a,this.b,this.c,t,n,i,s)}containsPoint(e){return Rn.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Rn.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,i=this.b,s=this.c;let a,o;wr.subVectors(i,n),Er.subVectors(s,n),Wh.subVectors(e,n);const l=wr.dot(Wh),c=Er.dot(Wh);if(l<=0&&c<=0)return t.copy(n);Xh.subVectors(e,i);const h=wr.dot(Xh),u=Er.dot(Xh);if(h>=0&&u<=h)return t.copy(i);const f=l*u-h*c;if(f<=0&&l>=0&&h<=0)return a=l/(l-h),t.copy(n).addScaledVector(wr,a);Yh.subVectors(e,s);const d=wr.dot(Yh),m=Er.dot(Yh);if(m>=0&&d<=m)return t.copy(s);const g=d*c-l*m;if(g<=0&&c>=0&&m<=0)return o=c/(c-m),t.copy(n).addScaledVector(Er,o);const p=h*m-d*u;if(p<=0&&u-h>=0&&d-m>=0)return jd.subVectors(s,i),o=(u-h)/(u-h+(d-m)),t.copy(i).addScaledVector(jd,o);const _=1/(p+g+f);return a=g*_,o=f*_,t.copy(n).addScaledVector(wr,a).addScaledVector(Er,o)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const Z0={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Wi={h:0,s:0,l:0},il={h:0,s:0,l:0};function Kh(r,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?r+(e-r)*6*t:t<1/2?e:t<2/3?r+(e-r)*6*(2/3-t):r}let ae=class{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,n)}set(e,t,n){if(t===void 0&&n===void 0){const i=e;i&&i.isColor?this.copy(i):typeof i=="number"?this.setHex(i):typeof i=="string"&&this.setStyle(i)}else this.setRGB(e,t,n);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Xt){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Ye.toWorkingColorSpace(this,t),this}setRGB(e,t,n,i=Ye.workingColorSpace){return this.r=e,this.g=t,this.b=n,Ye.toWorkingColorSpace(this,i),this}setHSL(e,t,n,i=Ye.workingColorSpace){if(e=Of(e,1),t=Mt(t,0,1),n=Mt(n,0,1),t===0)this.r=this.g=this.b=n;else{const s=n<=.5?n*(1+t):n+t-n*t,a=2*n-s;this.r=Kh(a,s,e+1/3),this.g=Kh(a,s,e),this.b=Kh(a,s,e-1/3)}return Ye.toWorkingColorSpace(this,i),this}setStyle(e,t=Xt){function n(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const a=i[1],o=i[2];switch(a){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return n(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return n(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return n(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=i[1],a=s.length;if(a===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(a===6)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Xt){const n=Z0[e.toLowerCase()];return n!==void 0?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Zr(e.r),this.g=Zr(e.g),this.b=Zr(e.b),this}copyLinearToSRGB(e){return this.r=Nh(e.r),this.g=Nh(e.g),this.b=Nh(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Xt){return Ye.fromWorkingColorSpace($t.copy(this),e),Math.round(Mt($t.r*255,0,255))*65536+Math.round(Mt($t.g*255,0,255))*256+Math.round(Mt($t.b*255,0,255))}getHexString(e=Xt){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Ye.workingColorSpace){Ye.fromWorkingColorSpace($t.copy(this),t);const n=$t.r,i=$t.g,s=$t.b,a=Math.max(n,i,s),o=Math.min(n,i,s);let l,c;const h=(o+a)/2;if(o===a)l=0,c=0;else{const u=a-o;switch(c=h<=.5?u/(a+o):u/(2-a-o),a){case n:l=(i-s)/u+(i<s?6:0);break;case i:l=(s-n)/u+2;break;case s:l=(n-i)/u+4;break}l/=6}return e.h=l,e.s=c,e.l=h,e}getRGB(e,t=Ye.workingColorSpace){return Ye.fromWorkingColorSpace($t.copy(this),t),e.r=$t.r,e.g=$t.g,e.b=$t.b,e}getStyle(e=Xt){Ye.fromWorkingColorSpace($t.copy(this),e);const t=$t.r,n=$t.g,i=$t.b;return e!==Xt?`color(${e} ${t.toFixed(3)} ${n.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(n*255)},${Math.round(i*255)})`}offsetHSL(e,t,n){return this.getHSL(Wi),this.setHSL(Wi.h+e,Wi.s+t,Wi.l+n)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(Wi),e.getHSL(il);const n=Ka(Wi.h,il.h,t),i=Ka(Wi.s,il.s,t),s=Ka(Wi.l,il.l,t);return this.setHSL(n,i,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,n=this.g,i=this.b,s=e.elements;return this.r=s[0]*t+s[3]*n+s[6]*i,this.g=s[1]*t+s[4]*n+s[7]*i,this.b=s[2]*t+s[5]*n+s[8]*i,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}};const $t=new ae;ae.NAMES=Z0;let Sg=0;class Ut extends xi{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Sg++}),this.uuid=qn(),this.name="",this.type="Material",this.blending=Ys,this.side=mi,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=nc,this.blendDst=ic,this.blendEquation=ji,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new ae(0,0,0),this.blendAlpha=0,this.depthFunc=ao,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=Bu,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Ls,this.stencilZFail=Ls,this.stencilZPass=Ls,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const n=e[t];if(n===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const i=this[t];if(i===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):this[t]=n}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const n={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),this.roughness!==void 0&&(n.roughness=this.roughness),this.metalness!==void 0&&(n.metalness=this.metalness),this.sheen!==void 0&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(n.shininess=this.shininess),this.clearcoat!==void 0&&(n.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(n.dispersion=this.dispersion),this.iridescence!==void 0&&(n.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(n.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(n.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(n.combine=this.combine)),this.envMapRotation!==void 0&&(n.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(n.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(n.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(n.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(n.size=this.size),this.shadowSide!==null&&(n.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==Ys&&(n.blending=this.blending),this.side!==mi&&(n.side=this.side),this.vertexColors===!0&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),this.transparent===!0&&(n.transparent=!0),this.blendSrc!==nc&&(n.blendSrc=this.blendSrc),this.blendDst!==ic&&(n.blendDst=this.blendDst),this.blendEquation!==ji&&(n.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(n.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(n.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(n.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(n.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(n.blendAlpha=this.blendAlpha),this.depthFunc!==ao&&(n.depthFunc=this.depthFunc),this.depthTest===!1&&(n.depthTest=this.depthTest),this.depthWrite===!1&&(n.depthWrite=this.depthWrite),this.colorWrite===!1&&(n.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(n.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==Bu&&(n.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(n.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(n.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Ls&&(n.stencilFail=this.stencilFail),this.stencilZFail!==Ls&&(n.stencilZFail=this.stencilZFail),this.stencilZPass!==Ls&&(n.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(n.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(n.rotation=this.rotation),this.polygonOffset===!0&&(n.polygonOffset=!0),this.polygonOffsetFactor!==0&&(n.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(n.linewidth=this.linewidth),this.dashSize!==void 0&&(n.dashSize=this.dashSize),this.gapSize!==void 0&&(n.gapSize=this.gapSize),this.scale!==void 0&&(n.scale=this.scale),this.dithering===!0&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),this.alphaHash===!0&&(n.alphaHash=!0),this.alphaToCoverage===!0&&(n.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(n.premultipliedAlpha=!0),this.forceSinglePass===!0&&(n.forceSinglePass=!0),this.wireframe===!0&&(n.wireframe=!0),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(n.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(n.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(n.flatShading=!0),this.visible===!1&&(n.visible=!1),this.toneMapped===!1&&(n.toneMapped=!1),this.fog===!1&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData);function i(s){const a=[];for(const o in s){const l=s[o];delete l.metadata,a.push(l)}return a}if(t){const s=i(e.textures),a=i(e.images);s.length>0&&(n.textures=s),a.length>0&&(n.images=a)}return n}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(t!==null){const i=t.length;n=new Array(i);for(let s=0;s!==i;++s)n[s]=t[s].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}}class Yt extends Ut{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new ae(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Dn,this.combine=qo,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const qi=bg();function bg(){const r=new ArrayBuffer(4),e=new Float32Array(r),t=new Uint32Array(r),n=new Uint32Array(512),i=new Uint32Array(512);for(let l=0;l<256;++l){const c=l-127;c<-27?(n[l]=0,n[l|256]=32768,i[l]=24,i[l|256]=24):c<-14?(n[l]=1024>>-c-14,n[l|256]=1024>>-c-14|32768,i[l]=-c-1,i[l|256]=-c-1):c<=15?(n[l]=c+15<<10,n[l|256]=c+15<<10|32768,i[l]=13,i[l|256]=13):c<128?(n[l]=31744,n[l|256]=64512,i[l]=24,i[l|256]=24):(n[l]=31744,n[l|256]=64512,i[l]=13,i[l|256]=13)}const s=new Uint32Array(2048),a=new Uint32Array(64),o=new Uint32Array(64);for(let l=1;l<1024;++l){let c=l<<13,h=0;for(;!(c&8388608);)c<<=1,h-=8388608;c&=-8388609,h+=947912704,s[l]=c|h}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)a[l]=l<<23;a[31]=1199570944,a[32]=2147483648;for(let l=33;l<63;++l)a[l]=2147483648+(l-32<<23);a[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(o[l]=1024);return{floatView:e,uint32View:t,baseTable:n,shiftTable:i,mantissaTable:s,exponentTable:a,offsetTable:o}}function pn(r){Math.abs(r)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),r=Mt(r,-65504,65504),qi.floatView[0]=r;const e=qi.uint32View[0],t=e>>23&511;return qi.baseTable[t]+((e&8388607)>>qi.shiftTable[t])}function Fa(r){const e=r>>10;return qi.uint32View[0]=qi.mantissaTable[qi.offsetTable[e]+(r&1023)]+qi.exponentTable[e],qi.floatView[0]}const Tg={toHalfFloat:pn,fromHalfFloat:Fa},Ct=new R,sl=new G;class Qe{constructor(e,t,n=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=n,this.usage=po,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=_n,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return Kr("THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let i=0,s=this.itemSize;i<s;i++)this.array[e+i]=t.array[n+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,n=this.count;t<n;t++)sl.fromBufferAttribute(this,t),sl.applyMatrix3(e),this.setXY(t,sl.x,sl.y);else if(this.itemSize===3)for(let t=0,n=this.count;t<n;t++)Ct.fromBufferAttribute(this,t),Ct.applyMatrix3(e),this.setXYZ(t,Ct.x,Ct.y,Ct.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)Ct.fromBufferAttribute(this,t),Ct.applyMatrix4(e),this.setXYZ(t,Ct.x,Ct.y,Ct.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)Ct.fromBufferAttribute(this,t),Ct.applyNormalMatrix(e),this.setXYZ(t,Ct.x,Ct.y,Ct.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)Ct.fromBufferAttribute(this,t),Ct.transformDirection(e),this.setXYZ(t,Ct.x,Ct.y,Ct.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let n=this.array[e*this.itemSize+t];return this.normalized&&(n=cn(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=He(n,this.array)),this.array[e*this.itemSize+t]=n,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=cn(t,this.array)),t}setX(e,t){return this.normalized&&(t=He(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=cn(t,this.array)),t}setY(e,t){return this.normalized&&(t=He(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=cn(t,this.array)),t}setZ(e,t){return this.normalized&&(t=He(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=cn(t,this.array)),t}setW(e,t){return this.normalized&&(t=He(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=He(t,this.array),n=He(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,i){return e*=this.itemSize,this.normalized&&(t=He(t,this.array),n=He(n,this.array),i=He(i,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this}setXYZW(e,t,n,i,s){return e*=this.itemSize,this.normalized&&(t=He(t,this.array),n=He(n,this.array),i=He(i,this.array),s=He(s,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==po&&(e.usage=this.usage),e}}class Ag extends Qe{constructor(e,t,n){super(new Int8Array(e),t,n)}}class wg extends Qe{constructor(e,t,n){super(new Uint8Array(e),t,n)}}class Eg extends Qe{constructor(e,t,n){super(new Uint8ClampedArray(e),t,n)}}class Rg extends Qe{constructor(e,t,n){super(new Int16Array(e),t,n)}}class zf extends Qe{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class Cg extends Qe{constructor(e,t,n){super(new Int32Array(e),t,n)}}class kf extends Qe{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class Pg extends Qe{constructor(e,t,n){super(new Uint16Array(e),t,n),this.isFloat16BufferAttribute=!0}getX(e){let t=Fa(this.array[e*this.itemSize]);return this.normalized&&(t=cn(t,this.array)),t}setX(e,t){return this.normalized&&(t=He(t,this.array)),this.array[e*this.itemSize]=pn(t),this}getY(e){let t=Fa(this.array[e*this.itemSize+1]);return this.normalized&&(t=cn(t,this.array)),t}setY(e,t){return this.normalized&&(t=He(t,this.array)),this.array[e*this.itemSize+1]=pn(t),this}getZ(e){let t=Fa(this.array[e*this.itemSize+2]);return this.normalized&&(t=cn(t,this.array)),t}setZ(e,t){return this.normalized&&(t=He(t,this.array)),this.array[e*this.itemSize+2]=pn(t),this}getW(e){let t=Fa(this.array[e*this.itemSize+3]);return this.normalized&&(t=cn(t,this.array)),t}setW(e,t){return this.normalized&&(t=He(t,this.array)),this.array[e*this.itemSize+3]=pn(t),this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=He(t,this.array),n=He(n,this.array)),this.array[e+0]=pn(t),this.array[e+1]=pn(n),this}setXYZ(e,t,n,i){return e*=this.itemSize,this.normalized&&(t=He(t,this.array),n=He(n,this.array),i=He(i,this.array)),this.array[e+0]=pn(t),this.array[e+1]=pn(n),this.array[e+2]=pn(i),this}setXYZW(e,t,n,i,s){return e*=this.itemSize,this.normalized&&(t=He(t,this.array),n=He(n,this.array),i=He(i,this.array),s=He(s,this.array)),this.array[e+0]=pn(t),this.array[e+1]=pn(n),this.array[e+2]=pn(i),this.array[e+3]=pn(s),this}}class Se extends Qe{constructor(e,t,n){super(new Float32Array(e),t,n)}}let Ig=0;const On=new Ee,Zh=new Xe,Rr=new R,wn=new tn,wa=new tn,Bt=new R;class Oe extends xi{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Ig++}),this.uuid=qn(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(W0(e)?kf:zf)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(n!==void 0){const s=new ke().getNormalMatrix(e);n.applyNormalMatrix(s),n.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return On.makeRotationFromQuaternion(e),this.applyMatrix4(On),this}rotateX(e){return On.makeRotationX(e),this.applyMatrix4(On),this}rotateY(e){return On.makeRotationY(e),this.applyMatrix4(On),this}rotateZ(e){return On.makeRotationZ(e),this.applyMatrix4(On),this}translate(e,t,n){return On.makeTranslation(e,t,n),this.applyMatrix4(On),this}scale(e,t,n){return On.makeScale(e,t,n),this.applyMatrix4(On),this}lookAt(e){return Zh.lookAt(e),Zh.updateMatrix(),this.applyMatrix4(Zh.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Rr).negate(),this.translate(Rr.x,Rr.y,Rr.z),this}setFromPoints(e){const t=[];for(let n=0,i=e.length;n<i;n++){const s=e[n];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new Se(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new tn);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new R(-1/0,-1/0,-1/0),new R(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let n=0,i=t.length;n<i;n++){const s=t[n];wn.setFromBufferAttribute(s),this.morphTargetsRelative?(Bt.addVectors(this.boundingBox.min,wn.min),this.boundingBox.expandByPoint(Bt),Bt.addVectors(this.boundingBox.max,wn.max),this.boundingBox.expandByPoint(Bt)):(this.boundingBox.expandByPoint(wn.min),this.boundingBox.expandByPoint(wn.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Kt);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new R,1/0);return}if(e){const n=this.boundingSphere.center;if(wn.setFromBufferAttribute(e),t)for(let s=0,a=t.length;s<a;s++){const o=t[s];wa.setFromBufferAttribute(o),this.morphTargetsRelative?(Bt.addVectors(wn.min,wa.min),wn.expandByPoint(Bt),Bt.addVectors(wn.max,wa.max),wn.expandByPoint(Bt)):(wn.expandByPoint(wa.min),wn.expandByPoint(wa.max))}wn.getCenter(n);let i=0;for(let s=0,a=e.count;s<a;s++)Bt.fromBufferAttribute(e,s),i=Math.max(i,n.distanceToSquared(Bt));if(t)for(let s=0,a=t.length;s<a;s++){const o=t[s],l=this.morphTargetsRelative;for(let c=0,h=o.count;c<h;c++)Bt.fromBufferAttribute(o,c),l&&(Rr.fromBufferAttribute(e,c),Bt.add(Rr)),i=Math.max(i,n.distanceToSquared(Bt))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const n=t.position,i=t.normal,s=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Qe(new Float32Array(4*n.count),4));const a=this.getAttribute("tangent"),o=[],l=[];for(let C=0;C<n.count;C++)o[C]=new R,l[C]=new R;const c=new R,h=new R,u=new R,f=new G,d=new G,m=new G,g=new R,p=new R;function _(C,M,S){c.fromBufferAttribute(n,C),h.fromBufferAttribute(n,M),u.fromBufferAttribute(n,S),f.fromBufferAttribute(s,C),d.fromBufferAttribute(s,M),m.fromBufferAttribute(s,S),h.sub(c),u.sub(c),d.sub(f),m.sub(f);const q=1/(d.x*m.y-m.x*d.y);isFinite(q)&&(g.copy(h).multiplyScalar(m.y).addScaledVector(u,-d.y).multiplyScalar(q),p.copy(u).multiplyScalar(d.x).addScaledVector(h,-m.x).multiplyScalar(q),o[C].add(g),o[M].add(g),o[S].add(g),l[C].add(p),l[M].add(p),l[S].add(p))}let y=this.groups;y.length===0&&(y=[{start:0,count:e.count}]);for(let C=0,M=y.length;C<M;++C){const S=y[C],q=S.start,O=S.count;for(let N=q,z=q+O;N<z;N+=3)_(e.getX(N+0),e.getX(N+1),e.getX(N+2))}const x=new R,v=new R,w=new R,b=new R;function A(C){w.fromBufferAttribute(i,C),b.copy(w);const M=o[C];x.copy(M),x.sub(w.multiplyScalar(w.dot(M))).normalize(),v.crossVectors(b,M);const q=v.dot(l[C])<0?-1:1;a.setXYZW(C,x.x,x.y,x.z,q)}for(let C=0,M=y.length;C<M;++C){const S=y[C],q=S.start,O=S.count;for(let N=q,z=q+O;N<z;N+=3)A(e.getX(N+0)),A(e.getX(N+1)),A(e.getX(N+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let n=this.getAttribute("normal");if(n===void 0)n=new Qe(new Float32Array(t.count*3),3),this.setAttribute("normal",n);else for(let f=0,d=n.count;f<d;f++)n.setXYZ(f,0,0,0);const i=new R,s=new R,a=new R,o=new R,l=new R,c=new R,h=new R,u=new R;if(e)for(let f=0,d=e.count;f<d;f+=3){const m=e.getX(f+0),g=e.getX(f+1),p=e.getX(f+2);i.fromBufferAttribute(t,m),s.fromBufferAttribute(t,g),a.fromBufferAttribute(t,p),h.subVectors(a,s),u.subVectors(i,s),h.cross(u),o.fromBufferAttribute(n,m),l.fromBufferAttribute(n,g),c.fromBufferAttribute(n,p),o.add(h),l.add(h),c.add(h),n.setXYZ(m,o.x,o.y,o.z),n.setXYZ(g,l.x,l.y,l.z),n.setXYZ(p,c.x,c.y,c.z)}else for(let f=0,d=t.count;f<d;f+=3)i.fromBufferAttribute(t,f+0),s.fromBufferAttribute(t,f+1),a.fromBufferAttribute(t,f+2),h.subVectors(a,s),u.subVectors(i,s),h.cross(u),n.setXYZ(f+0,h.x,h.y,h.z),n.setXYZ(f+1,h.x,h.y,h.z),n.setXYZ(f+2,h.x,h.y,h.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)Bt.fromBufferAttribute(e,t),Bt.normalize(),e.setXYZ(t,Bt.x,Bt.y,Bt.z)}toNonIndexed(){function e(o,l){const c=o.array,h=o.itemSize,u=o.normalized,f=new c.constructor(l.length*h);let d=0,m=0;for(let g=0,p=l.length;g<p;g++){o.isInterleavedBufferAttribute?d=l[g]*o.data.stride+o.offset:d=l[g]*h;for(let _=0;_<h;_++)f[m++]=c[d++]}return new Qe(f,h,u)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Oe,n=this.index.array,i=this.attributes;for(const o in i){const l=i[o],c=e(l,n);t.setAttribute(o,c)}const s=this.morphAttributes;for(const o in s){const l=[],c=s[o];for(let h=0,u=c.length;h<u;h++){const f=c[h],d=e(f,n);l.push(d)}t.morphAttributes[o]=l}t.morphTargetsRelative=this.morphTargetsRelative;const a=this.groups;for(let o=0,l=a.length;o<l;o++){const c=a[o];t.addGroup(c.start,c.count,c.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const c in l)l[c]!==void 0&&(e[c]=l[c]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const l in n){const c=n[l];e.data.attributes[l]=c.toJSON(e.data)}const i={};let s=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],h=[];for(let u=0,f=c.length;u<f;u++){const d=c[u];h.push(d.toJSON(e.data))}h.length>0&&(i[l]=h,s=!0)}s&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const a=this.groups;a.length>0&&(e.data.groups=JSON.parse(JSON.stringify(a)));const o=this.boundingSphere;return o!==null&&(e.data.boundingSphere={center:o.center.toArray(),radius:o.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;n!==null&&this.setIndex(n.clone(t));const i=e.attributes;for(const c in i){const h=i[c];this.setAttribute(c,h.clone(t))}const s=e.morphAttributes;for(const c in s){const h=[],u=s[c];for(let f=0,d=u.length;f<d;f++)h.push(u[f].clone(t));this.morphAttributes[c]=h}this.morphTargetsRelative=e.morphTargetsRelative;const a=e.groups;for(let c=0,h=a.length;c<h;c++){const u=a[c];this.addGroup(u.start,u.count,u.materialIndex)}const o=e.boundingBox;o!==null&&(this.boundingBox=o.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const Qd=new Ee,ys=new fr,rl=new Kt,ep=new R,Cr=new R,Pr=new R,Ir=new R,$h=new R,al=new R,ol=new G,ll=new G,cl=new G,tp=new R,np=new R,ip=new R,hl=new R,ul=new R;class ct extends Xe{constructor(e=new Oe,t=new Yt){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const i=t[n[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=i.length;s<a;s++){const o=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=s}}}}getVertexPosition(e,t){const n=this.geometry,i=n.attributes.position,s=n.morphAttributes.position,a=n.morphTargetsRelative;t.fromBufferAttribute(i,e);const o=this.morphTargetInfluences;if(s&&o){al.set(0,0,0);for(let l=0,c=s.length;l<c;l++){const h=o[l],u=s[l];h!==0&&($h.fromBufferAttribute(u,e),a?al.addScaledVector($h,h):al.addScaledVector($h.sub(t),h))}t.add(al)}return t}raycast(e,t){const n=this.geometry,i=this.material,s=this.matrixWorld;i!==void 0&&(n.boundingSphere===null&&n.computeBoundingSphere(),rl.copy(n.boundingSphere),rl.applyMatrix4(s),ys.copy(e.ray).recast(e.near),!(rl.containsPoint(ys.origin)===!1&&(ys.intersectSphere(rl,ep)===null||ys.origin.distanceToSquared(ep)>(e.far-e.near)**2))&&(Qd.copy(s).invert(),ys.copy(e.ray).applyMatrix4(Qd),!(n.boundingBox!==null&&ys.intersectsBox(n.boundingBox)===!1)&&this._computeIntersections(e,t,ys)))}_computeIntersections(e,t,n){let i;const s=this.geometry,a=this.material,o=s.index,l=s.attributes.position,c=s.attributes.uv,h=s.attributes.uv1,u=s.attributes.normal,f=s.groups,d=s.drawRange;if(o!==null)if(Array.isArray(a))for(let m=0,g=f.length;m<g;m++){const p=f[m],_=a[p.materialIndex],y=Math.max(p.start,d.start),x=Math.min(o.count,Math.min(p.start+p.count,d.start+d.count));for(let v=y,w=x;v<w;v+=3){const b=o.getX(v),A=o.getX(v+1),C=o.getX(v+2);i=fl(this,_,e,n,c,h,u,b,A,C),i&&(i.faceIndex=Math.floor(v/3),i.face.materialIndex=p.materialIndex,t.push(i))}}else{const m=Math.max(0,d.start),g=Math.min(o.count,d.start+d.count);for(let p=m,_=g;p<_;p+=3){const y=o.getX(p),x=o.getX(p+1),v=o.getX(p+2);i=fl(this,a,e,n,c,h,u,y,x,v),i&&(i.faceIndex=Math.floor(p/3),t.push(i))}}else if(l!==void 0)if(Array.isArray(a))for(let m=0,g=f.length;m<g;m++){const p=f[m],_=a[p.materialIndex],y=Math.max(p.start,d.start),x=Math.min(l.count,Math.min(p.start+p.count,d.start+d.count));for(let v=y,w=x;v<w;v+=3){const b=v,A=v+1,C=v+2;i=fl(this,_,e,n,c,h,u,b,A,C),i&&(i.faceIndex=Math.floor(v/3),i.face.materialIndex=p.materialIndex,t.push(i))}}else{const m=Math.max(0,d.start),g=Math.min(l.count,d.start+d.count);for(let p=m,_=g;p<_;p+=3){const y=p,x=p+1,v=p+2;i=fl(this,a,e,n,c,h,u,y,x,v),i&&(i.faceIndex=Math.floor(p/3),t.push(i))}}}}function qg(r,e,t,n,i,s,a,o){let l;if(e.side===un?l=n.intersectTriangle(a,s,i,!0,o):l=n.intersectTriangle(i,s,a,e.side===mi,o),l===null)return null;ul.copy(o),ul.applyMatrix4(r.matrixWorld);const c=t.ray.origin.distanceTo(ul);return c<t.near||c>t.far?null:{distance:c,point:ul.clone(),object:r}}function fl(r,e,t,n,i,s,a,o,l,c){r.getVertexPosition(o,Cr),r.getVertexPosition(l,Pr),r.getVertexPosition(c,Ir);const h=qg(r,e,t,n,Cr,Pr,Ir,hl);if(h){i&&(ol.fromBufferAttribute(i,o),ll.fromBufferAttribute(i,l),cl.fromBufferAttribute(i,c),h.uv=Rn.getInterpolation(hl,Cr,Pr,Ir,ol,ll,cl,new G)),s&&(ol.fromBufferAttribute(s,o),ll.fromBufferAttribute(s,l),cl.fromBufferAttribute(s,c),h.uv1=Rn.getInterpolation(hl,Cr,Pr,Ir,ol,ll,cl,new G)),a&&(tp.fromBufferAttribute(a,o),np.fromBufferAttribute(a,l),ip.fromBufferAttribute(a,c),h.normal=Rn.getInterpolation(hl,Cr,Pr,Ir,tp,np,ip,new R),h.normal.dot(n.direction)>0&&h.normal.multiplyScalar(-1));const u={a:o,b:l,c,normal:new R,materialIndex:0};Rn.getNormal(Cr,Pr,Ir,u.normal),h.face=u}return h}class dr extends Oe{constructor(e=1,t=1,n=1,i=1,s=1,a=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:i,heightSegments:s,depthSegments:a};const o=this;i=Math.floor(i),s=Math.floor(s),a=Math.floor(a);const l=[],c=[],h=[],u=[];let f=0,d=0;m("z","y","x",-1,-1,n,t,e,a,s,0),m("z","y","x",1,-1,n,t,-e,a,s,1),m("x","z","y",1,1,e,n,t,i,a,2),m("x","z","y",1,-1,e,n,-t,i,a,3),m("x","y","z",1,-1,e,t,n,i,s,4),m("x","y","z",-1,-1,e,t,-n,i,s,5),this.setIndex(l),this.setAttribute("position",new Se(c,3)),this.setAttribute("normal",new Se(h,3)),this.setAttribute("uv",new Se(u,2));function m(g,p,_,y,x,v,w,b,A,C,M){const S=v/A,q=w/C,O=v/2,N=w/2,z=b/2,V=A+1,F=C+1;let X=0,W=0;const le=new R;for(let de=0;de<F;de++){const me=de*q-N;for(let Ie=0;Ie<V;Ie++){const Ze=Ie*S-O;le[g]=Ze*y,le[p]=me*x,le[_]=z,c.push(le.x,le.y,le.z),le[g]=0,le[p]=0,le[_]=b>0?1:-1,h.push(le.x,le.y,le.z),u.push(Ie/A),u.push(1-de/C),X+=1}}for(let de=0;de<C;de++)for(let me=0;me<A;me++){const Ie=f+me+V*de,Ze=f+me+V*(de+1),Y=f+(me+1)+V*(de+1),ee=f+(me+1)+V*de;l.push(Ie,Ze,ee),l.push(Ze,Y,ee),W+=6}o.addGroup(d,W,M),d+=W,f+=X}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new dr(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function ra(r){const e={};for(const t in r){e[t]={};for(const n in r[t]){const i=r[t][n];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][n]=null):e[t][n]=i.clone():Array.isArray(i)?e[t][n]=i.slice():e[t][n]=i}}return e}function ln(r){const e={};for(let t=0;t<r.length;t++){const n=ra(r[t]);for(const i in n)e[i]=n[i]}return e}function Lg(r){const e=[];for(let t=0;t<r.length;t++)e.push(r[t].clone());return e}function $0(r){const e=r.getRenderTarget();return e===null?r.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:Ye.workingColorSpace}const aa={clone:ra,merge:ln};var Dg=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,Ng=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class kt extends Ut{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=Dg,this.fragmentShader=Ng,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=ra(e.uniforms),this.uniformsGroups=Lg(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const i in this.uniforms){const a=this.uniforms[i].value;a&&a.isTexture?t.uniforms[i]={type:"t",value:a.toJSON(e).uuid}:a&&a.isColor?t.uniforms[i]={type:"c",value:a.getHex()}:a&&a.isVector2?t.uniforms[i]={type:"v2",value:a.toArray()}:a&&a.isVector3?t.uniforms[i]={type:"v3",value:a.toArray()}:a&&a.isVector4?t.uniforms[i]={type:"v4",value:a.toArray()}:a&&a.isMatrix3?t.uniforms[i]={type:"m3",value:a.toArray()}:a&&a.isMatrix4?t.uniforms[i]={type:"m4",value:a.toArray()}:t.uniforms[i]={value:a}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const n={};for(const i in this.extensions)this.extensions[i]===!0&&(n[i]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}class ih extends Xe{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Ee,this.projectionMatrix=new Ee,this.projectionMatrixInverse=new Ee,this.coordinateSystem=oi}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const Xi=new R,sp=new G,rp=new G;class Lt extends ih{constructor(e=50,t=1,n=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=sa*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Zs*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return sa*2*Math.atan(Math.tan(Zs*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,n){Xi.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(Xi.x,Xi.y).multiplyScalar(-e/Xi.z),Xi.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(Xi.x,Xi.y).multiplyScalar(-e/Xi.z)}getViewSize(e,t){return this.getViewBounds(e,sp,rp),t.subVectors(rp,sp)}setViewOffset(e,t,n,i,s,a){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=s,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(Zs*.5*this.fov)/this.zoom,n=2*t,i=this.aspect*n,s=-.5*i;const a=this.view;if(this.view!==null&&this.view.enabled){const l=a.fullWidth,c=a.fullHeight;s+=a.offsetX*i/l,t-=a.offsetY*n/c,i*=a.width/l,n*=a.height/c}const o=this.filmOffset;o!==0&&(s+=e*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+i,t,t-n,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const qr=-90,Lr=1;class J0 extends Xe{constructor(e,t,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null,this.activeMipmapLevel=0;const i=new Lt(qr,Lr,e,t);i.layers=this.layers,this.add(i);const s=new Lt(qr,Lr,e,t);s.layers=this.layers,this.add(s);const a=new Lt(qr,Lr,e,t);a.layers=this.layers,this.add(a);const o=new Lt(qr,Lr,e,t);o.layers=this.layers,this.add(o);const l=new Lt(qr,Lr,e,t);l.layers=this.layers,this.add(l);const c=new Lt(qr,Lr,e,t);c.layers=this.layers,this.add(c)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[n,i,s,a,o,l]=t;for(const c of t)this.remove(c);if(e===oi)n.up.set(0,1,0),n.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),a.up.set(0,0,1),a.lookAt(0,-1,0),o.up.set(0,1,0),o.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===mo)n.up.set(0,-1,0),n.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),a.up.set(0,0,-1),a.lookAt(0,-1,0),o.up.set(0,-1,0),o.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const c of t)this.add(c),c.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:n,activeMipmapLevel:i}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,a,o,l,c,h]=this.children,u=e.getRenderTarget(),f=e.getActiveCubeFace(),d=e.getActiveMipmapLevel(),m=e.xr.enabled;e.xr.enabled=!1;const g=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0,i),e.render(t,s),e.setRenderTarget(n,1,i),e.render(t,a),e.setRenderTarget(n,2,i),e.render(t,o),e.setRenderTarget(n,3,i),e.render(t,l),e.setRenderTarget(n,4,i),e.render(t,c),n.texture.generateMipmaps=g,e.setRenderTarget(n,5,i),e.render(t,h),e.setRenderTarget(u,f,d),e.xr.enabled=m,n.texture.needsPMREMUpdate=!0}}class No extends dt{constructor(e,t,n,i,s,a,o,l,c,h){e=e!==void 0?e:[],t=t!==void 0?t:Ni,super(e,t,n,i,s,a,o,l,c,h),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class j0 extends fn{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const n={width:e,height:e,depth:1},i=[n,n,n,n,n,n];this.texture=new No(i,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:St}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new dr(5,5,5),s=new kt({name:"CubemapFromEquirect",uniforms:ra(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:un,blending:hi});s.uniforms.tEquirect.value=t;const a=new ct(i,s),o=t.minFilter;return t.minFilter===kn&&(t.minFilter=St),new J0(1,10,this).update(e,a),t.minFilter=o,a.geometry.dispose(),a.material.dispose(),this}clear(e,t,n,i){const s=e.getRenderTarget();for(let a=0;a<6;a++)e.setRenderTarget(this,a),e.clear(t,n,i);e.setRenderTarget(s)}}const Jh=new R,Ug=new R,Og=new ke;class Jn{constructor(e=new R(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,i){return this.normal.set(e,t,n),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const i=Jh.subVectors(n,t).cross(Ug.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const n=e.delta(Jh),i=this.normal.dot(n);if(i===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/i;return s<0||s>1?null:t.copy(e.start).addScaledVector(n,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||Og.getNormalMatrix(e),i=this.coplanarPoint(Jh).applyMatrix4(e),s=this.normal.applyMatrix3(n).normalize();return this.constant=-i.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const vs=new Kt,dl=new R;class Uo{constructor(e=new Jn,t=new Jn,n=new Jn,i=new Jn,s=new Jn,a=new Jn){this.planes=[e,t,n,i,s,a]}set(e,t,n,i,s,a){const o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(n),o[3].copy(i),o[4].copy(s),o[5].copy(a),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e,t=oi){const n=this.planes,i=e.elements,s=i[0],a=i[1],o=i[2],l=i[3],c=i[4],h=i[5],u=i[6],f=i[7],d=i[8],m=i[9],g=i[10],p=i[11],_=i[12],y=i[13],x=i[14],v=i[15];if(n[0].setComponents(l-s,f-c,p-d,v-_).normalize(),n[1].setComponents(l+s,f+c,p+d,v+_).normalize(),n[2].setComponents(l+a,f+h,p+m,v+y).normalize(),n[3].setComponents(l-a,f-h,p-m,v-y).normalize(),n[4].setComponents(l-o,f-u,p-g,v-x).normalize(),t===oi)n[5].setComponents(l+o,f+u,p+g,v+x).normalize();else if(t===mo)n[5].setComponents(o,u,g,x).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),vs.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),vs.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(vs)}intersectsSprite(e){return vs.center.set(0,0,0),vs.radius=.7071067811865476,vs.applyMatrix4(e.matrixWorld),this.intersectsSphere(vs)}intersectsSphere(e){const t=this.planes,n=e.center,i=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(n)<i)return!1;return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const i=t[n];if(dl.x=i.normal.x>0?e.max.x:e.min.x,dl.y=i.normal.y>0?e.max.y:e.min.y,dl.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(dl)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function Q0(){let r=null,e=!1,t=null,n=null;function i(s,a){t(s,a),n=r.requestAnimationFrame(i)}return{start:function(){e!==!0&&t!==null&&(n=r.requestAnimationFrame(i),e=!0)},stop:function(){r.cancelAnimationFrame(n),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){r=s}}}function Fg(r){const e=new WeakMap;function t(o,l){const c=o.array,h=o.usage,u=c.byteLength,f=r.createBuffer();r.bindBuffer(l,f),r.bufferData(l,c,h),o.onUploadCallback();let d;if(c instanceof Float32Array)d=r.FLOAT;else if(c instanceof Uint16Array)o.isFloat16BufferAttribute?d=r.HALF_FLOAT:d=r.UNSIGNED_SHORT;else if(c instanceof Int16Array)d=r.SHORT;else if(c instanceof Uint32Array)d=r.UNSIGNED_INT;else if(c instanceof Int32Array)d=r.INT;else if(c instanceof Int8Array)d=r.BYTE;else if(c instanceof Uint8Array)d=r.UNSIGNED_BYTE;else if(c instanceof Uint8ClampedArray)d=r.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+c);return{buffer:f,type:d,bytesPerElement:c.BYTES_PER_ELEMENT,version:o.version,size:u}}function n(o,l,c){const h=l.array,u=l._updateRange,f=l.updateRanges;if(r.bindBuffer(c,o),u.count===-1&&f.length===0&&r.bufferSubData(c,0,h),f.length!==0){for(let d=0,m=f.length;d<m;d++){const g=f[d];r.bufferSubData(c,g.start*h.BYTES_PER_ELEMENT,h,g.start,g.count)}l.clearUpdateRanges()}u.count!==-1&&(r.bufferSubData(c,u.offset*h.BYTES_PER_ELEMENT,h,u.offset,u.count),u.count=-1),l.onUploadCallback()}function i(o){return o.isInterleavedBufferAttribute&&(o=o.data),e.get(o)}function s(o){o.isInterleavedBufferAttribute&&(o=o.data);const l=e.get(o);l&&(r.deleteBuffer(l.buffer),e.delete(o))}function a(o,l){if(o.isInterleavedBufferAttribute&&(o=o.data),o.isGLBufferAttribute){const h=e.get(o);(!h||h.version<o.version)&&e.set(o,{buffer:o.buffer,type:o.type,bytesPerElement:o.elementSize,version:o.version});return}const c=e.get(o);if(c===void 0)e.set(o,t(o,l));else if(c.version<o.version){if(c.size!==o.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");n(c.buffer,o,l),c.version=o.version}}return{get:i,remove:s,update:a}}class pr extends Oe{constructor(e=1,t=1,n=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:i};const s=e/2,a=t/2,o=Math.floor(n),l=Math.floor(i),c=o+1,h=l+1,u=e/o,f=t/l,d=[],m=[],g=[],p=[];for(let _=0;_<h;_++){const y=_*f-a;for(let x=0;x<c;x++){const v=x*u-s;m.push(v,-y,0),g.push(0,0,1),p.push(x/o),p.push(1-_/l)}}for(let _=0;_<l;_++)for(let y=0;y<o;y++){const x=y+c*_,v=y+c*(_+1),w=y+1+c*(_+1),b=y+1+c*_;d.push(x,v,b),d.push(v,w,b)}this.setIndex(d),this.setAttribute("position",new Se(m,3)),this.setAttribute("normal",new Se(g,3)),this.setAttribute("uv",new Se(p,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new pr(e.width,e.height,e.widthSegments,e.heightSegments)}}var Bg=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,zg=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,kg=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,Hg=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Vg=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,Gg=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,Wg=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,Xg=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,Yg=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,Kg=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,Zg=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,$g=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,Jg=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,jg=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,Qg=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,e_=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,t_=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,n_=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,i_=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,s_=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,r_=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,a_=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,o_=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,l_=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,c_=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,h_=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,u_=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,f_=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,d_=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,p_=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,m_="gl_FragColor = linearToOutputTexel( gl_FragColor );",g_=`
const mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(
	vec3( 0.8224621, 0.177538, 0.0 ),
	vec3( 0.0331941, 0.9668058, 0.0 ),
	vec3( 0.0170827, 0.0723974, 0.9105199 )
);
const mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(
	vec3( 1.2249401, - 0.2249404, 0.0 ),
	vec3( - 0.0420569, 1.0420571, 0.0 ),
	vec3( - 0.0196376, - 0.0786361, 1.0982735 )
);
vec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {
	return vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );
}
vec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {
	return vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );
}
vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,__=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,x_=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,y_=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,v_=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,M_=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,S_=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,b_=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,T_=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,A_=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,w_=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,E_=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,R_=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,C_=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,P_=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,I_=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,q_=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,L_=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,D_=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,N_=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,U_=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,O_=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,F_=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,B_=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,z_=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,k_=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,H_=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,V_=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,G_=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,W_=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,X_=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,Y_=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,K_=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Z_=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,$_=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,J_=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,j_=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,Q_=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,e4=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,t4=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,n4=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,i4=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,s4=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,r4=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,a4=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,o4=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,l4=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,c4=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,h4=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,u4=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,f4=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,d4=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,p4=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,m4=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,g4=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,_4=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,x4=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,y4=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,v4=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,M4=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,S4=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,b4=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,T4=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,A4=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,w4=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,E4=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,R4=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,C4=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,P4=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,I4=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,q4=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,L4=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
		
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
		
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		
		#else
		
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,D4=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,N4=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,U4=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,O4=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const F4=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,B4=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,z4=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,k4=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,H4=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,V4=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,G4=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,W4=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,X4=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,Y4=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,K4=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,Z4=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,$4=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,J4=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,j4=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,Q4=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,e8=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,t8=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,n8=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,i8=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,s8=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,r8=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,a8=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,o8=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,l8=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,c8=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,h8=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,u8=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,f8=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,d8=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,p8=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,m8=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,g8=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,_8=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Ve={alphahash_fragment:Bg,alphahash_pars_fragment:zg,alphamap_fragment:kg,alphamap_pars_fragment:Hg,alphatest_fragment:Vg,alphatest_pars_fragment:Gg,aomap_fragment:Wg,aomap_pars_fragment:Xg,batching_pars_vertex:Yg,batching_vertex:Kg,begin_vertex:Zg,beginnormal_vertex:$g,bsdfs:Jg,iridescence_fragment:jg,bumpmap_pars_fragment:Qg,clipping_planes_fragment:e_,clipping_planes_pars_fragment:t_,clipping_planes_pars_vertex:n_,clipping_planes_vertex:i_,color_fragment:s_,color_pars_fragment:r_,color_pars_vertex:a_,color_vertex:o_,common:l_,cube_uv_reflection_fragment:c_,defaultnormal_vertex:h_,displacementmap_pars_vertex:u_,displacementmap_vertex:f_,emissivemap_fragment:d_,emissivemap_pars_fragment:p_,colorspace_fragment:m_,colorspace_pars_fragment:g_,envmap_fragment:__,envmap_common_pars_fragment:x_,envmap_pars_fragment:y_,envmap_pars_vertex:v_,envmap_physical_pars_fragment:I_,envmap_vertex:M_,fog_vertex:S_,fog_pars_vertex:b_,fog_fragment:T_,fog_pars_fragment:A_,gradientmap_pars_fragment:w_,lightmap_pars_fragment:E_,lights_lambert_fragment:R_,lights_lambert_pars_fragment:C_,lights_pars_begin:P_,lights_toon_fragment:q_,lights_toon_pars_fragment:L_,lights_phong_fragment:D_,lights_phong_pars_fragment:N_,lights_physical_fragment:U_,lights_physical_pars_fragment:O_,lights_fragment_begin:F_,lights_fragment_maps:B_,lights_fragment_end:z_,logdepthbuf_fragment:k_,logdepthbuf_pars_fragment:H_,logdepthbuf_pars_vertex:V_,logdepthbuf_vertex:G_,map_fragment:W_,map_pars_fragment:X_,map_particle_fragment:Y_,map_particle_pars_fragment:K_,metalnessmap_fragment:Z_,metalnessmap_pars_fragment:$_,morphinstance_vertex:J_,morphcolor_vertex:j_,morphnormal_vertex:Q_,morphtarget_pars_vertex:e4,morphtarget_vertex:t4,normal_fragment_begin:n4,normal_fragment_maps:i4,normal_pars_fragment:s4,normal_pars_vertex:r4,normal_vertex:a4,normalmap_pars_fragment:o4,clearcoat_normal_fragment_begin:l4,clearcoat_normal_fragment_maps:c4,clearcoat_pars_fragment:h4,iridescence_pars_fragment:u4,opaque_fragment:f4,packing:d4,premultiplied_alpha_fragment:p4,project_vertex:m4,dithering_fragment:g4,dithering_pars_fragment:_4,roughnessmap_fragment:x4,roughnessmap_pars_fragment:y4,shadowmap_pars_fragment:v4,shadowmap_pars_vertex:M4,shadowmap_vertex:S4,shadowmask_pars_fragment:b4,skinbase_vertex:T4,skinning_pars_vertex:A4,skinning_vertex:w4,skinnormal_vertex:E4,specularmap_fragment:R4,specularmap_pars_fragment:C4,tonemapping_fragment:P4,tonemapping_pars_fragment:I4,transmission_fragment:q4,transmission_pars_fragment:L4,uv_pars_fragment:D4,uv_pars_vertex:N4,uv_vertex:U4,worldpos_vertex:O4,background_vert:F4,background_frag:B4,backgroundCube_vert:z4,backgroundCube_frag:k4,cube_vert:H4,cube_frag:V4,depth_vert:G4,depth_frag:W4,distanceRGBA_vert:X4,distanceRGBA_frag:Y4,equirect_vert:K4,equirect_frag:Z4,linedashed_vert:$4,linedashed_frag:J4,meshbasic_vert:j4,meshbasic_frag:Q4,meshlambert_vert:e8,meshlambert_frag:t8,meshmatcap_vert:n8,meshmatcap_frag:i8,meshnormal_vert:s8,meshnormal_frag:r8,meshphong_vert:a8,meshphong_frag:o8,meshphysical_vert:l8,meshphysical_frag:c8,meshtoon_vert:h8,meshtoon_frag:u8,points_vert:f8,points_frag:d8,shadow_vert:p8,shadow_frag:m8,sprite_vert:g8,sprite_frag:_8},ce={common:{diffuse:{value:new ae(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new ke},alphaMap:{value:null},alphaMapTransform:{value:new ke},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new ke}},envmap:{envMap:{value:null},envMapRotation:{value:new ke},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new ke}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new ke}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new ke},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new ke},normalScale:{value:new G(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new ke},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new ke}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new ke}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new ke}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new ae(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new ae(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new ke},alphaTest:{value:0},uvTransform:{value:new ke}},sprite:{diffuse:{value:new ae(16777215)},opacity:{value:1},center:{value:new G(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new ke},alphaMap:{value:null},alphaMapTransform:{value:new ke},alphaTest:{value:0}}},jn={basic:{uniforms:ln([ce.common,ce.specularmap,ce.envmap,ce.aomap,ce.lightmap,ce.fog]),vertexShader:Ve.meshbasic_vert,fragmentShader:Ve.meshbasic_frag},lambert:{uniforms:ln([ce.common,ce.specularmap,ce.envmap,ce.aomap,ce.lightmap,ce.emissivemap,ce.bumpmap,ce.normalmap,ce.displacementmap,ce.fog,ce.lights,{emissive:{value:new ae(0)}}]),vertexShader:Ve.meshlambert_vert,fragmentShader:Ve.meshlambert_frag},phong:{uniforms:ln([ce.common,ce.specularmap,ce.envmap,ce.aomap,ce.lightmap,ce.emissivemap,ce.bumpmap,ce.normalmap,ce.displacementmap,ce.fog,ce.lights,{emissive:{value:new ae(0)},specular:{value:new ae(1118481)},shininess:{value:30}}]),vertexShader:Ve.meshphong_vert,fragmentShader:Ve.meshphong_frag},standard:{uniforms:ln([ce.common,ce.envmap,ce.aomap,ce.lightmap,ce.emissivemap,ce.bumpmap,ce.normalmap,ce.displacementmap,ce.roughnessmap,ce.metalnessmap,ce.fog,ce.lights,{emissive:{value:new ae(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Ve.meshphysical_vert,fragmentShader:Ve.meshphysical_frag},toon:{uniforms:ln([ce.common,ce.aomap,ce.lightmap,ce.emissivemap,ce.bumpmap,ce.normalmap,ce.displacementmap,ce.gradientmap,ce.fog,ce.lights,{emissive:{value:new ae(0)}}]),vertexShader:Ve.meshtoon_vert,fragmentShader:Ve.meshtoon_frag},matcap:{uniforms:ln([ce.common,ce.bumpmap,ce.normalmap,ce.displacementmap,ce.fog,{matcap:{value:null}}]),vertexShader:Ve.meshmatcap_vert,fragmentShader:Ve.meshmatcap_frag},points:{uniforms:ln([ce.points,ce.fog]),vertexShader:Ve.points_vert,fragmentShader:Ve.points_frag},dashed:{uniforms:ln([ce.common,ce.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Ve.linedashed_vert,fragmentShader:Ve.linedashed_frag},depth:{uniforms:ln([ce.common,ce.displacementmap]),vertexShader:Ve.depth_vert,fragmentShader:Ve.depth_frag},normal:{uniforms:ln([ce.common,ce.bumpmap,ce.normalmap,ce.displacementmap,{opacity:{value:1}}]),vertexShader:Ve.meshnormal_vert,fragmentShader:Ve.meshnormal_frag},sprite:{uniforms:ln([ce.sprite,ce.fog]),vertexShader:Ve.sprite_vert,fragmentShader:Ve.sprite_frag},background:{uniforms:{uvTransform:{value:new ke},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Ve.background_vert,fragmentShader:Ve.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new ke}},vertexShader:Ve.backgroundCube_vert,fragmentShader:Ve.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Ve.cube_vert,fragmentShader:Ve.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Ve.equirect_vert,fragmentShader:Ve.equirect_frag},distanceRGBA:{uniforms:ln([ce.common,ce.displacementmap,{referencePosition:{value:new R},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Ve.distanceRGBA_vert,fragmentShader:Ve.distanceRGBA_frag},shadow:{uniforms:ln([ce.lights,ce.fog,{color:{value:new ae(0)},opacity:{value:1}}]),vertexShader:Ve.shadow_vert,fragmentShader:Ve.shadow_frag}};jn.physical={uniforms:ln([jn.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new ke},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new ke},clearcoatNormalScale:{value:new G(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new ke},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new ke},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new ke},sheen:{value:0},sheenColor:{value:new ae(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new ke},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new ke},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new ke},transmissionSamplerSize:{value:new G},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new ke},attenuationDistance:{value:0},attenuationColor:{value:new ae(0)},specularColor:{value:new ae(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new ke},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new ke},anisotropyVector:{value:new G},anisotropyMap:{value:null},anisotropyMapTransform:{value:new ke}}]),vertexShader:Ve.meshphysical_vert,fragmentShader:Ve.meshphysical_frag};const pl={r:0,b:0,g:0},Ms=new Dn,x8=new Ee;function y8(r,e,t,n,i,s,a){const o=new ae(0);let l=s===!0?0:1,c,h,u=null,f=0,d=null;function m(y){let x=y.isScene===!0?y.background:null;return x&&x.isTexture&&(x=(y.backgroundBlurriness>0?t:e).get(x)),x}function g(y){let x=!1;const v=m(y);v===null?_(o,l):v&&v.isColor&&(_(v,1),x=!0);const w=r.xr.getEnvironmentBlendMode();w==="additive"?n.buffers.color.setClear(0,0,0,1,a):w==="alpha-blend"&&n.buffers.color.setClear(0,0,0,0,a),(r.autoClear||x)&&(n.buffers.depth.setTest(!0),n.buffers.depth.setMask(!0),n.buffers.color.setMask(!0),r.clear(r.autoClearColor,r.autoClearDepth,r.autoClearStencil))}function p(y,x){const v=m(x);v&&(v.isCubeTexture||v.mapping===ma)?(h===void 0&&(h=new ct(new dr(1,1,1),new kt({name:"BackgroundCubeMaterial",uniforms:ra(jn.backgroundCube.uniforms),vertexShader:jn.backgroundCube.vertexShader,fragmentShader:jn.backgroundCube.fragmentShader,side:un,depthTest:!1,depthWrite:!1,fog:!1})),h.geometry.deleteAttribute("normal"),h.geometry.deleteAttribute("uv"),h.onBeforeRender=function(w,b,A){this.matrixWorld.copyPosition(A.matrixWorld)},Object.defineProperty(h.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(h)),Ms.copy(x.backgroundRotation),Ms.x*=-1,Ms.y*=-1,Ms.z*=-1,v.isCubeTexture&&v.isRenderTargetTexture===!1&&(Ms.y*=-1,Ms.z*=-1),h.material.uniforms.envMap.value=v,h.material.uniforms.flipEnvMap.value=v.isCubeTexture&&v.isRenderTargetTexture===!1?-1:1,h.material.uniforms.backgroundBlurriness.value=x.backgroundBlurriness,h.material.uniforms.backgroundIntensity.value=x.backgroundIntensity,h.material.uniforms.backgroundRotation.value.setFromMatrix4(x8.makeRotationFromEuler(Ms)),h.material.toneMapped=Ye.getTransfer(v.colorSpace)!==ot,(u!==v||f!==v.version||d!==r.toneMapping)&&(h.material.needsUpdate=!0,u=v,f=v.version,d=r.toneMapping),h.layers.enableAll(),y.unshift(h,h.geometry,h.material,0,0,null)):v&&v.isTexture&&(c===void 0&&(c=new ct(new pr(2,2),new kt({name:"BackgroundMaterial",uniforms:ra(jn.background.uniforms),vertexShader:jn.background.vertexShader,fragmentShader:jn.background.fragmentShader,side:mi,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(c)),c.material.uniforms.t2D.value=v,c.material.uniforms.backgroundIntensity.value=x.backgroundIntensity,c.material.toneMapped=Ye.getTransfer(v.colorSpace)!==ot,v.matrixAutoUpdate===!0&&v.updateMatrix(),c.material.uniforms.uvTransform.value.copy(v.matrix),(u!==v||f!==v.version||d!==r.toneMapping)&&(c.material.needsUpdate=!0,u=v,f=v.version,d=r.toneMapping),c.layers.enableAll(),y.unshift(c,c.geometry,c.material,0,0,null))}function _(y,x){y.getRGB(pl,$0(r)),n.buffers.color.setClear(pl.r,pl.g,pl.b,x,a)}return{getClearColor:function(){return o},setClearColor:function(y,x=1){o.set(y),l=x,_(o,l)},getClearAlpha:function(){return l},setClearAlpha:function(y){l=y,_(o,l)},render:g,addToRenderList:p}}function v8(r,e){const t=r.getParameter(r.MAX_VERTEX_ATTRIBS),n={},i=f(null);let s=i,a=!1;function o(S,q,O,N,z){let V=!1;const F=u(N,O,q);s!==F&&(s=F,c(s.object)),V=d(S,N,O,z),V&&m(S,N,O,z),z!==null&&e.update(z,r.ELEMENT_ARRAY_BUFFER),(V||a)&&(a=!1,v(S,q,O,N),z!==null&&r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,e.get(z).buffer))}function l(){return r.createVertexArray()}function c(S){return r.bindVertexArray(S)}function h(S){return r.deleteVertexArray(S)}function u(S,q,O){const N=O.wireframe===!0;let z=n[S.id];z===void 0&&(z={},n[S.id]=z);let V=z[q.id];V===void 0&&(V={},z[q.id]=V);let F=V[N];return F===void 0&&(F=f(l()),V[N]=F),F}function f(S){const q=[],O=[],N=[];for(let z=0;z<t;z++)q[z]=0,O[z]=0,N[z]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:q,enabledAttributes:O,attributeDivisors:N,object:S,attributes:{},index:null}}function d(S,q,O,N){const z=s.attributes,V=q.attributes;let F=0;const X=O.getAttributes();for(const W in X)if(X[W].location>=0){const de=z[W];let me=V[W];if(me===void 0&&(W==="instanceMatrix"&&S.instanceMatrix&&(me=S.instanceMatrix),W==="instanceColor"&&S.instanceColor&&(me=S.instanceColor)),de===void 0||de.attribute!==me||me&&de.data!==me.data)return!0;F++}return s.attributesNum!==F||s.index!==N}function m(S,q,O,N){const z={},V=q.attributes;let F=0;const X=O.getAttributes();for(const W in X)if(X[W].location>=0){let de=V[W];de===void 0&&(W==="instanceMatrix"&&S.instanceMatrix&&(de=S.instanceMatrix),W==="instanceColor"&&S.instanceColor&&(de=S.instanceColor));const me={};me.attribute=de,de&&de.data&&(me.data=de.data),z[W]=me,F++}s.attributes=z,s.attributesNum=F,s.index=N}function g(){const S=s.newAttributes;for(let q=0,O=S.length;q<O;q++)S[q]=0}function p(S){_(S,0)}function _(S,q){const O=s.newAttributes,N=s.enabledAttributes,z=s.attributeDivisors;O[S]=1,N[S]===0&&(r.enableVertexAttribArray(S),N[S]=1),z[S]!==q&&(r.vertexAttribDivisor(S,q),z[S]=q)}function y(){const S=s.newAttributes,q=s.enabledAttributes;for(let O=0,N=q.length;O<N;O++)q[O]!==S[O]&&(r.disableVertexAttribArray(O),q[O]=0)}function x(S,q,O,N,z,V,F){F===!0?r.vertexAttribIPointer(S,q,O,z,V):r.vertexAttribPointer(S,q,O,N,z,V)}function v(S,q,O,N){g();const z=N.attributes,V=O.getAttributes(),F=q.defaultAttributeValues;for(const X in V){const W=V[X];if(W.location>=0){let le=z[X];if(le===void 0&&(X==="instanceMatrix"&&S.instanceMatrix&&(le=S.instanceMatrix),X==="instanceColor"&&S.instanceColor&&(le=S.instanceColor)),le!==void 0){const de=le.normalized,me=le.itemSize,Ie=e.get(le);if(Ie===void 0)continue;const Ze=Ie.buffer,Y=Ie.type,ee=Ie.bytesPerElement,ve=Y===r.INT||Y===r.UNSIGNED_INT||le.gpuType===Yc;if(le.isInterleavedBufferAttribute){const ue=le.data,Ce=ue.stride,Fe=le.offset;if(ue.isInstancedInterleavedBuffer){for(let De=0;De<W.locationSize;De++)_(W.location+De,ue.meshPerAttribute);S.isInstancedMesh!==!0&&N._maxInstanceCount===void 0&&(N._maxInstanceCount=ue.meshPerAttribute*ue.count)}else for(let De=0;De<W.locationSize;De++)p(W.location+De);r.bindBuffer(r.ARRAY_BUFFER,Ze);for(let De=0;De<W.locationSize;De++)x(W.location+De,me/W.locationSize,Y,de,Ce*ee,(Fe+me/W.locationSize*De)*ee,ve)}else{if(le.isInstancedBufferAttribute){for(let ue=0;ue<W.locationSize;ue++)_(W.location+ue,le.meshPerAttribute);S.isInstancedMesh!==!0&&N._maxInstanceCount===void 0&&(N._maxInstanceCount=le.meshPerAttribute*le.count)}else for(let ue=0;ue<W.locationSize;ue++)p(W.location+ue);r.bindBuffer(r.ARRAY_BUFFER,Ze);for(let ue=0;ue<W.locationSize;ue++)x(W.location+ue,me/W.locationSize,Y,de,me*ee,me/W.locationSize*ue*ee,ve)}}else if(F!==void 0){const de=F[X];if(de!==void 0)switch(de.length){case 2:r.vertexAttrib2fv(W.location,de);break;case 3:r.vertexAttrib3fv(W.location,de);break;case 4:r.vertexAttrib4fv(W.location,de);break;default:r.vertexAttrib1fv(W.location,de)}}}}y()}function w(){C();for(const S in n){const q=n[S];for(const O in q){const N=q[O];for(const z in N)h(N[z].object),delete N[z];delete q[O]}delete n[S]}}function b(S){if(n[S.id]===void 0)return;const q=n[S.id];for(const O in q){const N=q[O];for(const z in N)h(N[z].object),delete N[z];delete q[O]}delete n[S.id]}function A(S){for(const q in n){const O=n[q];if(O[S.id]===void 0)continue;const N=O[S.id];for(const z in N)h(N[z].object),delete N[z];delete O[S.id]}}function C(){M(),a=!0,s!==i&&(s=i,c(s.object))}function M(){i.geometry=null,i.program=null,i.wireframe=!1}return{setup:o,reset:C,resetDefaultState:M,dispose:w,releaseStatesOfGeometry:b,releaseStatesOfProgram:A,initAttributes:g,enableAttribute:p,disableUnusedAttributes:y}}function M8(r,e,t){let n;function i(c){n=c}function s(c,h){r.drawArrays(n,c,h),t.update(h,n,1)}function a(c,h,u){u!==0&&(r.drawArraysInstanced(n,c,h,u),t.update(h,n,u))}function o(c,h,u){if(u===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(n,c,0,h,0,u);let d=0;for(let m=0;m<u;m++)d+=h[m];t.update(d,n,1)}function l(c,h,u,f){if(u===0)return;const d=e.get("WEBGL_multi_draw");if(d===null)for(let m=0;m<c.length;m++)a(c[m],h[m],f[m]);else{d.multiDrawArraysInstancedWEBGL(n,c,0,h,0,f,0,u);let m=0;for(let g=0;g<u;g++)m+=h[g];for(let g=0;g<f.length;g++)t.update(m,n,f[g])}}this.setMode=i,this.render=s,this.renderInstances=a,this.renderMultiDraw=o,this.renderMultiDrawInstances=l}function S8(r,e,t,n){let i;function s(){if(i!==void 0)return i;if(e.has("EXT_texture_filter_anisotropic")===!0){const b=e.get("EXT_texture_filter_anisotropic");i=r.getParameter(b.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function a(b){return!(b!==hn&&n.convert(b)!==r.getParameter(r.IMPLEMENTATION_COLOR_READ_FORMAT))}function o(b){const A=b===ui&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(b!==gi&&n.convert(b)!==r.getParameter(r.IMPLEMENTATION_COLOR_READ_TYPE)&&b!==_n&&!A)}function l(b){if(b==="highp"){if(r.getShaderPrecisionFormat(r.VERTEX_SHADER,r.HIGH_FLOAT).precision>0&&r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT).precision>0)return"highp";b="mediump"}return b==="mediump"&&r.getShaderPrecisionFormat(r.VERTEX_SHADER,r.MEDIUM_FLOAT).precision>0&&r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let c=t.precision!==void 0?t.precision:"highp";const h=l(c);h!==c&&(console.warn("THREE.WebGLRenderer:",c,"not supported, using",h,"instead."),c=h);const u=t.logarithmicDepthBuffer===!0,f=r.getParameter(r.MAX_TEXTURE_IMAGE_UNITS),d=r.getParameter(r.MAX_VERTEX_TEXTURE_IMAGE_UNITS),m=r.getParameter(r.MAX_TEXTURE_SIZE),g=r.getParameter(r.MAX_CUBE_MAP_TEXTURE_SIZE),p=r.getParameter(r.MAX_VERTEX_ATTRIBS),_=r.getParameter(r.MAX_VERTEX_UNIFORM_VECTORS),y=r.getParameter(r.MAX_VARYING_VECTORS),x=r.getParameter(r.MAX_FRAGMENT_UNIFORM_VECTORS),v=d>0,w=r.getParameter(r.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:s,getMaxPrecision:l,textureFormatReadable:a,textureTypeReadable:o,precision:c,logarithmicDepthBuffer:u,maxTextures:f,maxVertexTextures:d,maxTextureSize:m,maxCubemapSize:g,maxAttributes:p,maxVertexUniforms:_,maxVaryings:y,maxFragmentUniforms:x,vertexTextures:v,maxSamples:w}}function b8(r){const e=this;let t=null,n=0,i=!1,s=!1;const a=new Jn,o=new ke,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(u,f){const d=u.length!==0||f||n!==0||i;return i=f,n=u.length,d},this.beginShadows=function(){s=!0,h(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(u,f){t=h(u,f,0)},this.setState=function(u,f,d){const m=u.clippingPlanes,g=u.clipIntersection,p=u.clipShadows,_=r.get(u);if(!i||m===null||m.length===0||s&&!p)s?h(null):c();else{const y=s?0:n,x=y*4;let v=_.clippingState||null;l.value=v,v=h(m,f,x,d);for(let w=0;w!==x;++w)v[w]=t[w];_.clippingState=v,this.numIntersection=g?this.numPlanes:0,this.numPlanes+=y}};function c(){l.value!==t&&(l.value=t,l.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0}function h(u,f,d,m){const g=u!==null?u.length:0;let p=null;if(g!==0){if(p=l.value,m!==!0||p===null){const _=d+g*4,y=f.matrixWorldInverse;o.getNormalMatrix(y),(p===null||p.length<_)&&(p=new Float32Array(_));for(let x=0,v=d;x!==g;++x,v+=4)a.copy(u[x]).applyMatrix4(y,o),a.normal.toArray(p,v),p[v+3]=a.constant}l.value=p,l.needsUpdate=!0}return e.numPlanes=g,e.numIntersection=0,p}}function T8(r){let e=new WeakMap;function t(a,o){return o===oo?a.mapping=Ni:o===lo&&(a.mapping=os),a}function n(a){if(a&&a.isTexture){const o=a.mapping;if(o===oo||o===lo)if(e.has(a)){const l=e.get(a).texture;return t(l,a.mapping)}else{const l=a.image;if(l&&l.height>0){const c=new j0(l.height);return c.fromEquirectangularTexture(r,a),e.set(a,c),a.addEventListener("dispose",i),t(c.texture,a.mapping)}else return null}}return a}function i(a){const o=a.target;o.removeEventListener("dispose",i);const l=e.get(o);l!==void 0&&(e.delete(o),l.dispose())}function s(){e=new WeakMap}return{get:n,dispose:s}}class ga extends ih{constructor(e=-1,t=1,n=1,i=-1,s=.1,a=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=i,this.near=s,this.far=a,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,n,i,s,a){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=s,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let s=n-e,a=n+e,o=i+t,l=i-t;if(this.view!==null&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,h=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=c*this.view.offsetX,a=s+c*this.view.width,o-=h*this.view.offsetY,l=o-h*this.view.height}this.projectionMatrix.makeOrthographic(s,a,o,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}const Vr=4,ap=[.125,.215,.35,.446,.526,.582],Us=20,jh=new ga,op=new ae;let Qh=null,eu=0,tu=0,nu=!1;const Ds=(1+Math.sqrt(5))/2,Dr=1/Ds,lp=[new R(-Ds,Dr,0),new R(Ds,Dr,0),new R(-Dr,0,Ds),new R(Dr,0,Ds),new R(0,Ds,-Dr),new R(0,Ds,Dr),new R(-1,1,-1),new R(1,1,-1),new R(-1,1,1),new R(1,1,1)];class ku{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,n=.1,i=100){Qh=this._renderer.getRenderTarget(),eu=this._renderer.getActiveCubeFace(),tu=this._renderer.getActiveMipmapLevel(),nu=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,n,i,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=up(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=hp(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(Qh,eu,tu),this._renderer.xr.enabled=nu,e.scissorTest=!1,ml(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===Ni||e.mapping===os?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),Qh=this._renderer.getRenderTarget(),eu=this._renderer.getActiveCubeFace(),tu=this._renderer.getActiveMipmapLevel(),nu=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:St,minFilter:St,generateMipmaps:!1,type:ui,format:hn,colorSpace:Ht,depthBuffer:!1},i=cp(e,t,n);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=cp(e,t,n);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=A8(s)),this._blurMaterial=w8(s,e,t)}return i}_compileMaterial(e){const t=new ct(this._lodPlanes[0],e);this._renderer.compile(t,jh)}_sceneToCubeUV(e,t,n,i){const o=new Lt(90,1,t,n),l=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],h=this._renderer,u=h.autoClear,f=h.toneMapping;h.getClearColor(op),h.toneMapping=Di,h.autoClear=!1;const d=new Yt({name:"PMREM.Background",side:un,depthWrite:!1,depthTest:!1}),m=new ct(new dr,d);let g=!1;const p=e.background;p?p.isColor&&(d.color.copy(p),e.background=null,g=!0):(d.color.copy(op),g=!0);for(let _=0;_<6;_++){const y=_%3;y===0?(o.up.set(0,l[_],0),o.lookAt(c[_],0,0)):y===1?(o.up.set(0,0,l[_]),o.lookAt(0,c[_],0)):(o.up.set(0,l[_],0),o.lookAt(0,0,c[_]));const x=this._cubeSize;ml(i,y*x,_>2?x:0,x,x),h.setRenderTarget(i),g&&h.render(m,o),h.render(e,o)}m.geometry.dispose(),m.material.dispose(),h.toneMapping=f,h.autoClear=u,e.background=p}_textureToCubeUV(e,t){const n=this._renderer,i=e.mapping===Ni||e.mapping===os;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=up()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=hp());const s=i?this._cubemapMaterial:this._equirectMaterial,a=new ct(this._lodPlanes[0],s),o=s.uniforms;o.envMap.value=e;const l=this._cubeSize;ml(t,0,0,3*l,2*l),n.setRenderTarget(t),n.render(a,jh)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;const i=this._lodPlanes.length;for(let s=1;s<i;s++){const a=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]),o=lp[(i-s-1)%lp.length];this._blur(e,s-1,s,a,o)}t.autoClear=n}_blur(e,t,n,i,s){const a=this._pingPongRenderTarget;this._halfBlur(e,a,t,n,i,"latitudinal",s),this._halfBlur(a,e,n,n,i,"longitudinal",s)}_halfBlur(e,t,n,i,s,a,o){const l=this._renderer,c=this._blurMaterial;a!=="latitudinal"&&a!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const h=3,u=new ct(this._lodPlanes[i],c),f=c.uniforms,d=this._sizeLods[n]-1,m=isFinite(s)?Math.PI/(2*d):2*Math.PI/(2*Us-1),g=s/m,p=isFinite(s)?1+Math.floor(h*g):Us;p>Us&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${p} samples when the maximum is set to ${Us}`);const _=[];let y=0;for(let A=0;A<Us;++A){const C=A/g,M=Math.exp(-C*C/2);_.push(M),A===0?y+=M:A<p&&(y+=2*M)}for(let A=0;A<_.length;A++)_[A]=_[A]/y;f.envMap.value=e.texture,f.samples.value=p,f.weights.value=_,f.latitudinal.value=a==="latitudinal",o&&(f.poleAxis.value=o);const{_lodMax:x}=this;f.dTheta.value=m,f.mipInt.value=x-n;const v=this._sizeLods[i],w=3*v*(i>x-Vr?i-x+Vr:0),b=4*(this._cubeSize-v);ml(t,w,b,3*v,2*v),l.setRenderTarget(t),l.render(u,jh)}}function A8(r){const e=[],t=[],n=[];let i=r;const s=r-Vr+1+ap.length;for(let a=0;a<s;a++){const o=Math.pow(2,i);t.push(o);let l=1/o;a>r-Vr?l=ap[a-r+Vr-1]:a===0&&(l=0),n.push(l);const c=1/(o-2),h=-c,u=1+c,f=[h,h,u,h,u,u,h,h,u,u,h,u],d=6,m=6,g=3,p=2,_=1,y=new Float32Array(g*m*d),x=new Float32Array(p*m*d),v=new Float32Array(_*m*d);for(let b=0;b<d;b++){const A=b%3*2/3-1,C=b>2?0:-1,M=[A,C,0,A+2/3,C,0,A+2/3,C+1,0,A,C,0,A+2/3,C+1,0,A,C+1,0];y.set(M,g*m*b),x.set(f,p*m*b);const S=[b,b,b,b,b,b];v.set(S,_*m*b)}const w=new Oe;w.setAttribute("position",new Qe(y,g)),w.setAttribute("uv",new Qe(x,p)),w.setAttribute("faceIndex",new Qe(v,_)),e.push(w),i>Vr&&i--}return{lodPlanes:e,sizeLods:t,sigmas:n}}function cp(r,e,t){const n=new fn(r,e,t);return n.texture.mapping=ma,n.texture.name="PMREM.cubeUv",n.scissorTest=!0,n}function ml(r,e,t,n,i){r.viewport.set(e,t,n,i),r.scissor.set(e,t,n,i)}function w8(r,e,t){const n=new Float32Array(Us),i=new R(0,1,0);return new kt({name:"SphericalGaussianBlur",defines:{n:Us,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${r}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:Hf(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:hi,depthTest:!1,depthWrite:!1})}function hp(){return new kt({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:Hf(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:hi,depthTest:!1,depthWrite:!1})}function up(){return new kt({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:Hf(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:hi,depthTest:!1,depthWrite:!1})}function Hf(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function E8(r){let e=new WeakMap,t=null;function n(o){if(o&&o.isTexture){const l=o.mapping,c=l===oo||l===lo,h=l===Ni||l===os;if(c||h){let u=e.get(o);const f=u!==void 0?u.texture.pmremVersion:0;if(o.isRenderTargetTexture&&o.pmremVersion!==f)return t===null&&(t=new ku(r)),u=c?t.fromEquirectangular(o,u):t.fromCubemap(o,u),u.texture.pmremVersion=o.pmremVersion,e.set(o,u),u.texture;if(u!==void 0)return u.texture;{const d=o.image;return c&&d&&d.height>0||h&&d&&i(d)?(t===null&&(t=new ku(r)),u=c?t.fromEquirectangular(o):t.fromCubemap(o),u.texture.pmremVersion=o.pmremVersion,e.set(o,u),o.addEventListener("dispose",s),u.texture):null}}}return o}function i(o){let l=0;const c=6;for(let h=0;h<c;h++)o[h]!==void 0&&l++;return l===c}function s(o){const l=o.target;l.removeEventListener("dispose",s);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function a(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:n,dispose:a}}function R8(r){const e={};function t(n){if(e[n]!==void 0)return e[n];let i;switch(n){case"WEBGL_depth_texture":i=r.getExtension("WEBGL_depth_texture")||r.getExtension("MOZ_WEBGL_depth_texture")||r.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=r.getExtension("EXT_texture_filter_anisotropic")||r.getExtension("MOZ_EXT_texture_filter_anisotropic")||r.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=r.getExtension("WEBGL_compressed_texture_s3tc")||r.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||r.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=r.getExtension("WEBGL_compressed_texture_pvrtc")||r.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=r.getExtension(n)}return e[n]=i,i}return{has:function(n){return t(n)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(n){const i=t(n);return i===null&&Kr("THREE.WebGLRenderer: "+n+" extension not supported."),i}}}function C8(r,e,t,n){const i={},s=new WeakMap;function a(u){const f=u.target;f.index!==null&&e.remove(f.index);for(const m in f.attributes)e.remove(f.attributes[m]);for(const m in f.morphAttributes){const g=f.morphAttributes[m];for(let p=0,_=g.length;p<_;p++)e.remove(g[p])}f.removeEventListener("dispose",a),delete i[f.id];const d=s.get(f);d&&(e.remove(d),s.delete(f)),n.releaseStatesOfGeometry(f),f.isInstancedBufferGeometry===!0&&delete f._maxInstanceCount,t.memory.geometries--}function o(u,f){return i[f.id]===!0||(f.addEventListener("dispose",a),i[f.id]=!0,t.memory.geometries++),f}function l(u){const f=u.attributes;for(const m in f)e.update(f[m],r.ARRAY_BUFFER);const d=u.morphAttributes;for(const m in d){const g=d[m];for(let p=0,_=g.length;p<_;p++)e.update(g[p],r.ARRAY_BUFFER)}}function c(u){const f=[],d=u.index,m=u.attributes.position;let g=0;if(d!==null){const y=d.array;g=d.version;for(let x=0,v=y.length;x<v;x+=3){const w=y[x+0],b=y[x+1],A=y[x+2];f.push(w,b,b,A,A,w)}}else if(m!==void 0){const y=m.array;g=m.version;for(let x=0,v=y.length/3-1;x<v;x+=3){const w=x+0,b=x+1,A=x+2;f.push(w,b,b,A,A,w)}}else return;const p=new(W0(f)?kf:zf)(f,1);p.version=g;const _=s.get(u);_&&e.remove(_),s.set(u,p)}function h(u){const f=s.get(u);if(f){const d=u.index;d!==null&&f.version<d.version&&c(u)}else c(u);return s.get(u)}return{get:o,update:l,getWireframeAttribute:h}}function P8(r,e,t){let n;function i(f){n=f}let s,a;function o(f){s=f.type,a=f.bytesPerElement}function l(f,d){r.drawElements(n,d,s,f*a),t.update(d,n,1)}function c(f,d,m){m!==0&&(r.drawElementsInstanced(n,d,s,f*a,m),t.update(d,n,m))}function h(f,d,m){if(m===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(n,d,0,s,f,0,m);let p=0;for(let _=0;_<m;_++)p+=d[_];t.update(p,n,1)}function u(f,d,m,g){if(m===0)return;const p=e.get("WEBGL_multi_draw");if(p===null)for(let _=0;_<f.length;_++)c(f[_]/a,d[_],g[_]);else{p.multiDrawElementsInstancedWEBGL(n,d,0,s,f,0,g,0,m);let _=0;for(let y=0;y<m;y++)_+=d[y];for(let y=0;y<g.length;y++)t.update(_,n,g[y])}}this.setMode=i,this.setIndex=o,this.render=l,this.renderInstances=c,this.renderMultiDraw=h,this.renderMultiDrawInstances=u}function I8(r){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function n(s,a,o){switch(t.calls++,a){case r.TRIANGLES:t.triangles+=o*(s/3);break;case r.LINES:t.lines+=o*(s/2);break;case r.LINE_STRIP:t.lines+=o*(s-1);break;case r.LINE_LOOP:t.lines+=o*s;break;case r.POINTS:t.points+=o*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",a);break}}function i(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:i,update:n}}function q8(r,e,t){const n=new WeakMap,i=new rt;function s(a,o,l){const c=a.morphTargetInfluences,h=o.morphAttributes.position||o.morphAttributes.normal||o.morphAttributes.color,u=h!==void 0?h.length:0;let f=n.get(o);if(f===void 0||f.count!==u){let S=function(){C.dispose(),n.delete(o),o.removeEventListener("dispose",S)};var d=S;f!==void 0&&f.texture.dispose();const m=o.morphAttributes.position!==void 0,g=o.morphAttributes.normal!==void 0,p=o.morphAttributes.color!==void 0,_=o.morphAttributes.position||[],y=o.morphAttributes.normal||[],x=o.morphAttributes.color||[];let v=0;m===!0&&(v=1),g===!0&&(v=2),p===!0&&(v=3);let w=o.attributes.position.count*v,b=1;w>e.maxTextureSize&&(b=Math.ceil(w/e.maxTextureSize),w=e.maxTextureSize);const A=new Float32Array(w*b*4*u),C=new th(A,w,b,u);C.type=_n,C.needsUpdate=!0;const M=v*4;for(let q=0;q<u;q++){const O=_[q],N=y[q],z=x[q],V=w*b*4*q;for(let F=0;F<O.count;F++){const X=F*M;m===!0&&(i.fromBufferAttribute(O,F),A[V+X+0]=i.x,A[V+X+1]=i.y,A[V+X+2]=i.z,A[V+X+3]=0),g===!0&&(i.fromBufferAttribute(N,F),A[V+X+4]=i.x,A[V+X+5]=i.y,A[V+X+6]=i.z,A[V+X+7]=0),p===!0&&(i.fromBufferAttribute(z,F),A[V+X+8]=i.x,A[V+X+9]=i.y,A[V+X+10]=i.z,A[V+X+11]=z.itemSize===4?i.w:1)}}f={count:u,texture:C,size:new G(w,b)},n.set(o,f),o.addEventListener("dispose",S)}if(a.isInstancedMesh===!0&&a.morphTexture!==null)l.getUniforms().setValue(r,"morphTexture",a.morphTexture,t);else{let m=0;for(let p=0;p<c.length;p++)m+=c[p];const g=o.morphTargetsRelative?1:1-m;l.getUniforms().setValue(r,"morphTargetBaseInfluence",g),l.getUniforms().setValue(r,"morphTargetInfluences",c)}l.getUniforms().setValue(r,"morphTargetsTexture",f.texture,t),l.getUniforms().setValue(r,"morphTargetsTextureSize",f.size)}return{update:s}}function L8(r,e,t,n){let i=new WeakMap;function s(l){const c=n.render.frame,h=l.geometry,u=e.get(l,h);if(i.get(u)!==c&&(e.update(u),i.set(u,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",o)===!1&&l.addEventListener("dispose",o),i.get(l)!==c&&(t.update(l.instanceMatrix,r.ARRAY_BUFFER),l.instanceColor!==null&&t.update(l.instanceColor,r.ARRAY_BUFFER),i.set(l,c))),l.isSkinnedMesh){const f=l.skeleton;i.get(f)!==c&&(f.update(),i.set(f,c))}return u}function a(){i=new WeakMap}function o(l){const c=l.target;c.removeEventListener("dispose",o),t.remove(c.instanceMatrix),c.instanceColor!==null&&t.remove(c.instanceColor)}return{update:s,dispose:a}}class Vf extends dt{constructor(e,t,n,i,s,a,o,l,c,h=Ks){if(h!==Ks&&h!==nr)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");n===void 0&&h===Ks&&(n=Ui),n===void 0&&h===nr&&(n=tr),super(null,i,s,a,o,l,h,n,c),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=o!==void 0?o:Nt,this.minFilter=l!==void 0?l:Nt,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}const em=new dt,fp=new Vf(1,1),tm=new th,nm=new Bf,im=new No,dp=[],pp=[],mp=new Float32Array(16),gp=new Float32Array(9),_p=new Float32Array(4);function _a(r,e,t){const n=r[0];if(n<=0||n>0)return r;const i=e*t;let s=dp[i];if(s===void 0&&(s=new Float32Array(i),dp[i]=s),e!==0){n.toArray(s,0);for(let a=1,o=0;a!==e;++a)o+=t,r[a].toArray(s,o)}return s}function Ot(r,e){if(r.length!==e.length)return!1;for(let t=0,n=r.length;t<n;t++)if(r[t]!==e[t])return!1;return!0}function Ft(r,e){for(let t=0,n=e.length;t<n;t++)r[t]=e[t]}function sh(r,e){let t=pp[e];t===void 0&&(t=new Int32Array(e),pp[e]=t);for(let n=0;n!==e;++n)t[n]=r.allocateTextureUnit();return t}function D8(r,e){const t=this.cache;t[0]!==e&&(r.uniform1f(this.addr,e),t[0]=e)}function N8(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(r.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Ot(t,e))return;r.uniform2fv(this.addr,e),Ft(t,e)}}function U8(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(r.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(r.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Ot(t,e))return;r.uniform3fv(this.addr,e),Ft(t,e)}}function O8(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(r.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Ot(t,e))return;r.uniform4fv(this.addr,e),Ft(t,e)}}function F8(r,e){const t=this.cache,n=e.elements;if(n===void 0){if(Ot(t,e))return;r.uniformMatrix2fv(this.addr,!1,e),Ft(t,e)}else{if(Ot(t,n))return;_p.set(n),r.uniformMatrix2fv(this.addr,!1,_p),Ft(t,n)}}function B8(r,e){const t=this.cache,n=e.elements;if(n===void 0){if(Ot(t,e))return;r.uniformMatrix3fv(this.addr,!1,e),Ft(t,e)}else{if(Ot(t,n))return;gp.set(n),r.uniformMatrix3fv(this.addr,!1,gp),Ft(t,n)}}function z8(r,e){const t=this.cache,n=e.elements;if(n===void 0){if(Ot(t,e))return;r.uniformMatrix4fv(this.addr,!1,e),Ft(t,e)}else{if(Ot(t,n))return;mp.set(n),r.uniformMatrix4fv(this.addr,!1,mp),Ft(t,n)}}function k8(r,e){const t=this.cache;t[0]!==e&&(r.uniform1i(this.addr,e),t[0]=e)}function H8(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(r.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Ot(t,e))return;r.uniform2iv(this.addr,e),Ft(t,e)}}function V8(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(r.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Ot(t,e))return;r.uniform3iv(this.addr,e),Ft(t,e)}}function G8(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(r.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Ot(t,e))return;r.uniform4iv(this.addr,e),Ft(t,e)}}function W8(r,e){const t=this.cache;t[0]!==e&&(r.uniform1ui(this.addr,e),t[0]=e)}function X8(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(r.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Ot(t,e))return;r.uniform2uiv(this.addr,e),Ft(t,e)}}function Y8(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(r.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Ot(t,e))return;r.uniform3uiv(this.addr,e),Ft(t,e)}}function K8(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(r.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Ot(t,e))return;r.uniform4uiv(this.addr,e),Ft(t,e)}}function Z8(r,e,t){const n=this.cache,i=t.allocateTextureUnit();n[0]!==i&&(r.uniform1i(this.addr,i),n[0]=i);let s;this.type===r.SAMPLER_2D_SHADOW?(fp.compareFunction=Uf,s=fp):s=em,t.setTexture2D(e||s,i)}function $8(r,e,t){const n=this.cache,i=t.allocateTextureUnit();n[0]!==i&&(r.uniform1i(this.addr,i),n[0]=i),t.setTexture3D(e||nm,i)}function J8(r,e,t){const n=this.cache,i=t.allocateTextureUnit();n[0]!==i&&(r.uniform1i(this.addr,i),n[0]=i),t.setTextureCube(e||im,i)}function j8(r,e,t){const n=this.cache,i=t.allocateTextureUnit();n[0]!==i&&(r.uniform1i(this.addr,i),n[0]=i),t.setTexture2DArray(e||tm,i)}function Q8(r){switch(r){case 5126:return D8;case 35664:return N8;case 35665:return U8;case 35666:return O8;case 35674:return F8;case 35675:return B8;case 35676:return z8;case 5124:case 35670:return k8;case 35667:case 35671:return H8;case 35668:case 35672:return V8;case 35669:case 35673:return G8;case 5125:return W8;case 36294:return X8;case 36295:return Y8;case 36296:return K8;case 35678:case 36198:case 36298:case 36306:case 35682:return Z8;case 35679:case 36299:case 36307:return $8;case 35680:case 36300:case 36308:case 36293:return J8;case 36289:case 36303:case 36311:case 36292:return j8}}function e3(r,e){r.uniform1fv(this.addr,e)}function t3(r,e){const t=_a(e,this.size,2);r.uniform2fv(this.addr,t)}function n3(r,e){const t=_a(e,this.size,3);r.uniform3fv(this.addr,t)}function i3(r,e){const t=_a(e,this.size,4);r.uniform4fv(this.addr,t)}function s3(r,e){const t=_a(e,this.size,4);r.uniformMatrix2fv(this.addr,!1,t)}function r3(r,e){const t=_a(e,this.size,9);r.uniformMatrix3fv(this.addr,!1,t)}function a3(r,e){const t=_a(e,this.size,16);r.uniformMatrix4fv(this.addr,!1,t)}function o3(r,e){r.uniform1iv(this.addr,e)}function l3(r,e){r.uniform2iv(this.addr,e)}function c3(r,e){r.uniform3iv(this.addr,e)}function h3(r,e){r.uniform4iv(this.addr,e)}function u3(r,e){r.uniform1uiv(this.addr,e)}function f3(r,e){r.uniform2uiv(this.addr,e)}function d3(r,e){r.uniform3uiv(this.addr,e)}function p3(r,e){r.uniform4uiv(this.addr,e)}function m3(r,e,t){const n=this.cache,i=e.length,s=sh(t,i);Ot(n,s)||(r.uniform1iv(this.addr,s),Ft(n,s));for(let a=0;a!==i;++a)t.setTexture2D(e[a]||em,s[a])}function g3(r,e,t){const n=this.cache,i=e.length,s=sh(t,i);Ot(n,s)||(r.uniform1iv(this.addr,s),Ft(n,s));for(let a=0;a!==i;++a)t.setTexture3D(e[a]||nm,s[a])}function _3(r,e,t){const n=this.cache,i=e.length,s=sh(t,i);Ot(n,s)||(r.uniform1iv(this.addr,s),Ft(n,s));for(let a=0;a!==i;++a)t.setTextureCube(e[a]||im,s[a])}function x3(r,e,t){const n=this.cache,i=e.length,s=sh(t,i);Ot(n,s)||(r.uniform1iv(this.addr,s),Ft(n,s));for(let a=0;a!==i;++a)t.setTexture2DArray(e[a]||tm,s[a])}function y3(r){switch(r){case 5126:return e3;case 35664:return t3;case 35665:return n3;case 35666:return i3;case 35674:return s3;case 35675:return r3;case 35676:return a3;case 5124:case 35670:return o3;case 35667:case 35671:return l3;case 35668:case 35672:return c3;case 35669:case 35673:return h3;case 5125:return u3;case 36294:return f3;case 36295:return d3;case 36296:return p3;case 35678:case 36198:case 36298:case 36306:case 35682:return m3;case 35679:case 36299:case 36307:return g3;case 35680:case 36300:case 36308:case 36293:return _3;case 36289:case 36303:case 36311:case 36292:return x3}}class v3{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.setValue=Q8(t.type)}}class M3{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=y3(t.type)}}class S3{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){const i=this.seq;for(let s=0,a=i.length;s!==a;++s){const o=i[s];o.setValue(e,t[o.id],n)}}}const iu=/(\w+)(\])?(\[|\.)?/g;function xp(r,e){r.seq.push(e),r.map[e.id]=e}function b3(r,e,t){const n=r.name,i=n.length;for(iu.lastIndex=0;;){const s=iu.exec(n),a=iu.lastIndex;let o=s[1];const l=s[2]==="]",c=s[3];if(l&&(o=o|0),c===void 0||c==="["&&a+2===i){xp(t,c===void 0?new v3(o,r,e):new M3(o,r,e));break}else{let u=t.map[o];u===void 0&&(u=new S3(o),xp(t,u)),t=u}}}class $l{constructor(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let i=0;i<n;++i){const s=e.getActiveUniform(t,i),a=e.getUniformLocation(t,s.name);b3(s,a,this)}}setValue(e,t,n,i){const s=this.map[t];s!==void 0&&s.setValue(e,n,i)}setOptional(e,t,n){const i=t[n];i!==void 0&&this.setValue(e,n,i)}static upload(e,t,n,i){for(let s=0,a=t.length;s!==a;++s){const o=t[s],l=n[o.id];l.needsUpdate!==!1&&o.setValue(e,l.value,i)}}static seqWithValue(e,t){const n=[];for(let i=0,s=e.length;i!==s;++i){const a=e[i];a.id in t&&n.push(a)}return n}}function yp(r,e,t){const n=r.createShader(e);return r.shaderSource(n,t),r.compileShader(n),n}const T3=37297;let A3=0;function w3(r,e){const t=r.split(`
`),n=[],i=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let a=i;a<s;a++){const o=a+1;n.push(`${o===e?">":" "} ${o}: ${t[a]}`)}return n.join(`
`)}function E3(r){const e=Ye.getPrimaries(Ye.workingColorSpace),t=Ye.getPrimaries(r);let n;switch(e===t?n="":e===fo&&t===uo?n="LinearDisplayP3ToLinearSRGB":e===uo&&t===fo&&(n="LinearSRGBToLinearDisplayP3"),r){case Ht:case Do:return[n,"LinearTransferOETF"];case Xt:case eh:return[n,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",r),[n,"LinearTransferOETF"]}}function vp(r,e,t){const n=r.getShaderParameter(e,r.COMPILE_STATUS),i=r.getShaderInfoLog(e).trim();if(n&&i==="")return"";const s=/ERROR: 0:(\d+)/.exec(i);if(s){const a=parseInt(s[1]);return t.toUpperCase()+`

`+i+`

`+w3(r.getShaderSource(e),a)}else return i}function R3(r,e){const t=E3(e);return`vec4 ${r}( vec4 value ) { return ${t[0]}( ${t[1]}( value ) ); }`}function C3(r,e){let t;switch(e){case yf:t="Linear";break;case vf:t="Reinhard";break;case Mf:t="Cineon";break;case Sf:t="ACESFilmic";break;case bf:t="AgX";break;case Tf:t="Neutral";break;case C0:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+r+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}const gl=new R;function P3(){Ye.getLuminanceCoefficients(gl);const r=gl.x.toFixed(4),e=gl.y.toFixed(4),t=gl.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${r}, ${e}, ${t} );`,"	return dot( weights, rgb );","}"].join(`
`)}function I3(r){return[r.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",r.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(Ba).join(`
`)}function q3(r){const e=[];for(const t in r){const n=r[t];n!==!1&&e.push("#define "+t+" "+n)}return e.join(`
`)}function L3(r,e){const t={},n=r.getProgramParameter(e,r.ACTIVE_ATTRIBUTES);for(let i=0;i<n;i++){const s=r.getActiveAttrib(e,i),a=s.name;let o=1;s.type===r.FLOAT_MAT2&&(o=2),s.type===r.FLOAT_MAT3&&(o=3),s.type===r.FLOAT_MAT4&&(o=4),t[a]={type:s.type,location:r.getAttribLocation(e,a),locationSize:o}}return t}function Ba(r){return r!==""}function Mp(r,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return r.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function Sp(r,e){return r.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const D3=/^[ \t]*#include +<([\w\d./]+)>/gm;function Hu(r){return r.replace(D3,U3)}const N3=new Map;function U3(r,e){let t=Ve[e];if(t===void 0){const n=N3.get(e);if(n!==void 0)t=Ve[n],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,n);else throw new Error("Can not resolve #include <"+e+">")}return Hu(t)}const O3=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function bp(r){return r.replace(O3,F3)}function F3(r,e,t,n){let i="";for(let s=parseInt(e);s<parseInt(t);s++)i+=n.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return i}function Tp(r){let e=`precision ${r.precision} float;
	precision ${r.precision} int;
	precision ${r.precision} sampler2D;
	precision ${r.precision} samplerCube;
	precision ${r.precision} sampler3D;
	precision ${r.precision} sampler2DArray;
	precision ${r.precision} sampler2DShadow;
	precision ${r.precision} samplerCubeShadow;
	precision ${r.precision} sampler2DArrayShadow;
	precision ${r.precision} isampler2D;
	precision ${r.precision} isampler3D;
	precision ${r.precision} isamplerCube;
	precision ${r.precision} isampler2DArray;
	precision ${r.precision} usampler2D;
	precision ${r.precision} usampler3D;
	precision ${r.precision} usamplerCube;
	precision ${r.precision} usampler2DArray;
	`;return r.precision==="highp"?e+=`
#define HIGH_PRECISION`:r.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:r.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function B3(r){let e="SHADOWMAP_TYPE_BASIC";return r.shadowMapType===xf?e="SHADOWMAP_TYPE_PCF":r.shadowMapType===t0?e="SHADOWMAP_TYPE_PCF_SOFT":r.shadowMapType===si&&(e="SHADOWMAP_TYPE_VSM"),e}function z3(r){let e="ENVMAP_TYPE_CUBE";if(r.envMap)switch(r.envMapMode){case Ni:case os:e="ENVMAP_TYPE_CUBE";break;case ma:e="ENVMAP_TYPE_CUBE_UV";break}return e}function k3(r){let e="ENVMAP_MODE_REFLECTION";if(r.envMap)switch(r.envMapMode){case os:e="ENVMAP_MODE_REFRACTION";break}return e}function H3(r){let e="ENVMAP_BLENDING_NONE";if(r.envMap)switch(r.combine){case qo:e="ENVMAP_BLENDING_MULTIPLY";break;case E0:e="ENVMAP_BLENDING_MIX";break;case R0:e="ENVMAP_BLENDING_ADD";break}return e}function V3(r){const e=r.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,n=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:n,maxMip:t}}function G3(r,e,t,n){const i=r.getContext(),s=t.defines;let a=t.vertexShader,o=t.fragmentShader;const l=B3(t),c=z3(t),h=k3(t),u=H3(t),f=V3(t),d=I3(t),m=q3(s),g=i.createProgram();let p,_,y=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(p=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,m].filter(Ba).join(`
`),p.length>0&&(p+=`
`),_=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,m].filter(Ba).join(`
`),_.length>0&&(_+=`
`)):(p=[Tp(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,m,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+h:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Ba).join(`
`),_=[Tp(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,m,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.envMap?"#define "+h:"",t.envMap?"#define "+u:"",f?"#define CUBEUV_TEXEL_WIDTH "+f.texelWidth:"",f?"#define CUBEUV_TEXEL_HEIGHT "+f.texelHeight:"",f?"#define CUBEUV_MAX_MIP "+f.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==Di?"#define TONE_MAPPING":"",t.toneMapping!==Di?Ve.tonemapping_pars_fragment:"",t.toneMapping!==Di?C3("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",Ve.colorspace_pars_fragment,R3("linearToOutputTexel",t.outputColorSpace),P3(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(Ba).join(`
`)),a=Hu(a),a=Mp(a,t),a=Sp(a,t),o=Hu(o),o=Mp(o,t),o=Sp(o,t),a=bp(a),o=bp(o),t.isRawShaderMaterial!==!0&&(y=`#version 300 es
`,p=[d,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+p,_=["#define varying in",t.glslVersion===zu?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===zu?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+_);const x=y+p+a,v=y+_+o,w=yp(i,i.VERTEX_SHADER,x),b=yp(i,i.FRAGMENT_SHADER,v);i.attachShader(g,w),i.attachShader(g,b),t.index0AttributeName!==void 0?i.bindAttribLocation(g,0,t.index0AttributeName):t.morphTargets===!0&&i.bindAttribLocation(g,0,"position"),i.linkProgram(g);function A(q){if(r.debug.checkShaderErrors){const O=i.getProgramInfoLog(g).trim(),N=i.getShaderInfoLog(w).trim(),z=i.getShaderInfoLog(b).trim();let V=!0,F=!0;if(i.getProgramParameter(g,i.LINK_STATUS)===!1)if(V=!1,typeof r.debug.onShaderError=="function")r.debug.onShaderError(i,g,w,b);else{const X=vp(i,w,"vertex"),W=vp(i,b,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(g,i.VALIDATE_STATUS)+`

Material Name: `+q.name+`
Material Type: `+q.type+`

Program Info Log: `+O+`
`+X+`
`+W)}else O!==""?console.warn("THREE.WebGLProgram: Program Info Log:",O):(N===""||z==="")&&(F=!1);F&&(q.diagnostics={runnable:V,programLog:O,vertexShader:{log:N,prefix:p},fragmentShader:{log:z,prefix:_}})}i.deleteShader(w),i.deleteShader(b),C=new $l(i,g),M=L3(i,g)}let C;this.getUniforms=function(){return C===void 0&&A(this),C};let M;this.getAttributes=function(){return M===void 0&&A(this),M};let S=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return S===!1&&(S=i.getProgramParameter(g,T3)),S},this.destroy=function(){n.releaseStatesOfProgram(this),i.deleteProgram(g),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=A3++,this.cacheKey=e,this.usedTimes=1,this.program=g,this.vertexShader=w,this.fragmentShader=b,this}let W3=0;class X3{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,n=e.fragmentShader,i=this._getShaderStage(t),s=this._getShaderStage(n),a=this._getShaderCacheForMaterial(e);return a.has(i)===!1&&(a.add(i),i.usedTimes++),a.has(s)===!1&&(a.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const n of t)n.usedTimes--,n.usedTimes===0&&this.shaderCache.delete(n.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let n=t.get(e);return n===void 0&&(n=new Set,t.set(e,n)),n}_getShaderStage(e){const t=this.shaderCache;let n=t.get(e);return n===void 0&&(n=new Y3(e),t.set(e,n)),n}}class Y3{constructor(e){this.id=W3++,this.code=e,this.usedTimes=0}}function K3(r,e,t,n,i,s,a){const o=new nh,l=new X3,c=new Set,h=[],u=i.logarithmicDepthBuffer,f=i.vertexTextures;let d=i.precision;const m={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function g(M){return c.add(M),M===0?"uv":`uv${M}`}function p(M,S,q,O,N){const z=O.fog,V=N.geometry,F=M.isMeshStandardMaterial?O.environment:null,X=(M.isMeshStandardMaterial?t:e).get(M.envMap||F),W=X&&X.mapping===ma?X.image.height:null,le=m[M.type];M.precision!==null&&(d=i.getMaxPrecision(M.precision),d!==M.precision&&console.warn("THREE.WebGLProgram.getParameters:",M.precision,"not supported, using",d,"instead."));const de=V.morphAttributes.position||V.morphAttributes.normal||V.morphAttributes.color,me=de!==void 0?de.length:0;let Ie=0;V.morphAttributes.position!==void 0&&(Ie=1),V.morphAttributes.normal!==void 0&&(Ie=2),V.morphAttributes.color!==void 0&&(Ie=3);let Ze,Y,ee,ve;if(le){const tt=jn[le];Ze=tt.vertexShader,Y=tt.fragmentShader}else Ze=M.vertexShader,Y=M.fragmentShader,l.update(M),ee=l.getVertexShaderID(M),ve=l.getFragmentShaderID(M);const ue=r.getRenderTarget(),Ce=N.isInstancedMesh===!0,Fe=N.isBatchedMesh===!0,De=!!M.map,et=!!M.matcap,P=!!X,ie=!!M.aoMap,te=!!M.lightMap,pe=!!M.bumpMap,K=!!M.normalMap,Pe=!!M.displacementMap,fe=!!M.emissiveMap,ye=!!M.metalnessMap,I=!!M.roughnessMap,T=M.anisotropy>0,k=M.clearcoat>0,J=M.dispersion>0,$=M.iridescence>0,Q=M.sheen>0,Re=M.transmission>0,he=T&&!!M.anisotropyMap,xe=k&&!!M.clearcoatMap,ze=k&&!!M.clearcoatNormalMap,ne=k&&!!M.clearcoatRoughnessMap,_e=$&&!!M.iridescenceMap,$e=$&&!!M.iridescenceThicknessMap,Ue=Q&&!!M.sheenColorMap,Me=Q&&!!M.sheenRoughnessMap,Be=!!M.specularMap,Ge=!!M.specularColorMap,pt=!!M.specularIntensityMap,L=Re&&!!M.transmissionMap,se=Re&&!!M.thicknessMap,Z=!!M.gradientMap,j=!!M.alphaMap,oe=M.alphaTest>0,qe=!!M.alphaHash,je=!!M.extensions;let Et=Di;M.toneMapped&&(ue===null||ue.isXRRenderTarget===!0)&&(Et=r.toneMapping);const Gt={shaderID:le,shaderType:M.type,shaderName:M.name,vertexShader:Ze,fragmentShader:Y,defines:M.defines,customVertexShaderID:ee,customFragmentShaderID:ve,isRawShaderMaterial:M.isRawShaderMaterial===!0,glslVersion:M.glslVersion,precision:d,batching:Fe,batchingColor:Fe&&N._colorsTexture!==null,instancing:Ce,instancingColor:Ce&&N.instanceColor!==null,instancingMorph:Ce&&N.morphTexture!==null,supportsVertexTextures:f,outputColorSpace:ue===null?r.outputColorSpace:ue.isXRRenderTarget===!0?ue.texture.colorSpace:Ht,alphaToCoverage:!!M.alphaToCoverage,map:De,matcap:et,envMap:P,envMapMode:P&&X.mapping,envMapCubeUVHeight:W,aoMap:ie,lightMap:te,bumpMap:pe,normalMap:K,displacementMap:f&&Pe,emissiveMap:fe,normalMapObjectSpace:K&&M.normalMapType===O0,normalMapTangentSpace:K&&M.normalMapType===fs,metalnessMap:ye,roughnessMap:I,anisotropy:T,anisotropyMap:he,clearcoat:k,clearcoatMap:xe,clearcoatNormalMap:ze,clearcoatRoughnessMap:ne,dispersion:J,iridescence:$,iridescenceMap:_e,iridescenceThicknessMap:$e,sheen:Q,sheenColorMap:Ue,sheenRoughnessMap:Me,specularMap:Be,specularColorMap:Ge,specularIntensityMap:pt,transmission:Re,transmissionMap:L,thicknessMap:se,gradientMap:Z,opaque:M.transparent===!1&&M.blending===Ys&&M.alphaToCoverage===!1,alphaMap:j,alphaTest:oe,alphaHash:qe,combine:M.combine,mapUv:De&&g(M.map.channel),aoMapUv:ie&&g(M.aoMap.channel),lightMapUv:te&&g(M.lightMap.channel),bumpMapUv:pe&&g(M.bumpMap.channel),normalMapUv:K&&g(M.normalMap.channel),displacementMapUv:Pe&&g(M.displacementMap.channel),emissiveMapUv:fe&&g(M.emissiveMap.channel),metalnessMapUv:ye&&g(M.metalnessMap.channel),roughnessMapUv:I&&g(M.roughnessMap.channel),anisotropyMapUv:he&&g(M.anisotropyMap.channel),clearcoatMapUv:xe&&g(M.clearcoatMap.channel),clearcoatNormalMapUv:ze&&g(M.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:ne&&g(M.clearcoatRoughnessMap.channel),iridescenceMapUv:_e&&g(M.iridescenceMap.channel),iridescenceThicknessMapUv:$e&&g(M.iridescenceThicknessMap.channel),sheenColorMapUv:Ue&&g(M.sheenColorMap.channel),sheenRoughnessMapUv:Me&&g(M.sheenRoughnessMap.channel),specularMapUv:Be&&g(M.specularMap.channel),specularColorMapUv:Ge&&g(M.specularColorMap.channel),specularIntensityMapUv:pt&&g(M.specularIntensityMap.channel),transmissionMapUv:L&&g(M.transmissionMap.channel),thicknessMapUv:se&&g(M.thicknessMap.channel),alphaMapUv:j&&g(M.alphaMap.channel),vertexTangents:!!V.attributes.tangent&&(K||T),vertexColors:M.vertexColors,vertexAlphas:M.vertexColors===!0&&!!V.attributes.color&&V.attributes.color.itemSize===4,pointsUvs:N.isPoints===!0&&!!V.attributes.uv&&(De||j),fog:!!z,useFog:M.fog===!0,fogExp2:!!z&&z.isFogExp2,flatShading:M.flatShading===!0,sizeAttenuation:M.sizeAttenuation===!0,logarithmicDepthBuffer:u,skinning:N.isSkinnedMesh===!0,morphTargets:V.morphAttributes.position!==void 0,morphNormals:V.morphAttributes.normal!==void 0,morphColors:V.morphAttributes.color!==void 0,morphTargetsCount:me,morphTextureStride:Ie,numDirLights:S.directional.length,numPointLights:S.point.length,numSpotLights:S.spot.length,numSpotLightMaps:S.spotLightMap.length,numRectAreaLights:S.rectArea.length,numHemiLights:S.hemi.length,numDirLightShadows:S.directionalShadowMap.length,numPointLightShadows:S.pointShadowMap.length,numSpotLightShadows:S.spotShadowMap.length,numSpotLightShadowsWithMaps:S.numSpotLightShadowsWithMaps,numLightProbes:S.numLightProbes,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:M.dithering,shadowMapEnabled:r.shadowMap.enabled&&q.length>0,shadowMapType:r.shadowMap.type,toneMapping:Et,decodeVideoTexture:De&&M.map.isVideoTexture===!0&&Ye.getTransfer(M.map.colorSpace)===ot,premultipliedAlpha:M.premultipliedAlpha,doubleSided:M.side===zn,flipSided:M.side===un,useDepthPacking:M.depthPacking>=0,depthPacking:M.depthPacking||0,index0AttributeName:M.index0AttributeName,extensionClipCullDistance:je&&M.extensions.clipCullDistance===!0&&n.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(je&&M.extensions.multiDraw===!0||Fe)&&n.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:n.has("KHR_parallel_shader_compile"),customProgramCacheKey:M.customProgramCacheKey()};return Gt.vertexUv1s=c.has(1),Gt.vertexUv2s=c.has(2),Gt.vertexUv3s=c.has(3),c.clear(),Gt}function _(M){const S=[];if(M.shaderID?S.push(M.shaderID):(S.push(M.customVertexShaderID),S.push(M.customFragmentShaderID)),M.defines!==void 0)for(const q in M.defines)S.push(q),S.push(M.defines[q]);return M.isRawShaderMaterial===!1&&(y(S,M),x(S,M),S.push(r.outputColorSpace)),S.push(M.customProgramCacheKey),S.join()}function y(M,S){M.push(S.precision),M.push(S.outputColorSpace),M.push(S.envMapMode),M.push(S.envMapCubeUVHeight),M.push(S.mapUv),M.push(S.alphaMapUv),M.push(S.lightMapUv),M.push(S.aoMapUv),M.push(S.bumpMapUv),M.push(S.normalMapUv),M.push(S.displacementMapUv),M.push(S.emissiveMapUv),M.push(S.metalnessMapUv),M.push(S.roughnessMapUv),M.push(S.anisotropyMapUv),M.push(S.clearcoatMapUv),M.push(S.clearcoatNormalMapUv),M.push(S.clearcoatRoughnessMapUv),M.push(S.iridescenceMapUv),M.push(S.iridescenceThicknessMapUv),M.push(S.sheenColorMapUv),M.push(S.sheenRoughnessMapUv),M.push(S.specularMapUv),M.push(S.specularColorMapUv),M.push(S.specularIntensityMapUv),M.push(S.transmissionMapUv),M.push(S.thicknessMapUv),M.push(S.combine),M.push(S.fogExp2),M.push(S.sizeAttenuation),M.push(S.morphTargetsCount),M.push(S.morphAttributeCount),M.push(S.numDirLights),M.push(S.numPointLights),M.push(S.numSpotLights),M.push(S.numSpotLightMaps),M.push(S.numHemiLights),M.push(S.numRectAreaLights),M.push(S.numDirLightShadows),M.push(S.numPointLightShadows),M.push(S.numSpotLightShadows),M.push(S.numSpotLightShadowsWithMaps),M.push(S.numLightProbes),M.push(S.shadowMapType),M.push(S.toneMapping),M.push(S.numClippingPlanes),M.push(S.numClipIntersection),M.push(S.depthPacking)}function x(M,S){o.disableAll(),S.supportsVertexTextures&&o.enable(0),S.instancing&&o.enable(1),S.instancingColor&&o.enable(2),S.instancingMorph&&o.enable(3),S.matcap&&o.enable(4),S.envMap&&o.enable(5),S.normalMapObjectSpace&&o.enable(6),S.normalMapTangentSpace&&o.enable(7),S.clearcoat&&o.enable(8),S.iridescence&&o.enable(9),S.alphaTest&&o.enable(10),S.vertexColors&&o.enable(11),S.vertexAlphas&&o.enable(12),S.vertexUv1s&&o.enable(13),S.vertexUv2s&&o.enable(14),S.vertexUv3s&&o.enable(15),S.vertexTangents&&o.enable(16),S.anisotropy&&o.enable(17),S.alphaHash&&o.enable(18),S.batching&&o.enable(19),S.dispersion&&o.enable(20),S.batchingColor&&o.enable(21),M.push(o.mask),o.disableAll(),S.fog&&o.enable(0),S.useFog&&o.enable(1),S.flatShading&&o.enable(2),S.logarithmicDepthBuffer&&o.enable(3),S.skinning&&o.enable(4),S.morphTargets&&o.enable(5),S.morphNormals&&o.enable(6),S.morphColors&&o.enable(7),S.premultipliedAlpha&&o.enable(8),S.shadowMapEnabled&&o.enable(9),S.doubleSided&&o.enable(10),S.flipSided&&o.enable(11),S.useDepthPacking&&o.enable(12),S.dithering&&o.enable(13),S.transmission&&o.enable(14),S.sheen&&o.enable(15),S.opaque&&o.enable(16),S.pointsUvs&&o.enable(17),S.decodeVideoTexture&&o.enable(18),S.alphaToCoverage&&o.enable(19),M.push(o.mask)}function v(M){const S=m[M.type];let q;if(S){const O=jn[S];q=aa.clone(O.uniforms)}else q=M.uniforms;return q}function w(M,S){let q;for(let O=0,N=h.length;O<N;O++){const z=h[O];if(z.cacheKey===S){q=z,++q.usedTimes;break}}return q===void 0&&(q=new G3(r,S,M,s),h.push(q)),q}function b(M){if(--M.usedTimes===0){const S=h.indexOf(M);h[S]=h[h.length-1],h.pop(),M.destroy()}}function A(M){l.remove(M)}function C(){l.dispose()}return{getParameters:p,getProgramCacheKey:_,getUniforms:v,acquireProgram:w,releaseProgram:b,releaseShaderCache:A,programs:h,dispose:C}}function Z3(){let r=new WeakMap;function e(a){return r.has(a)}function t(a){let o=r.get(a);return o===void 0&&(o={},r.set(a,o)),o}function n(a){r.delete(a)}function i(a,o,l){r.get(a)[o]=l}function s(){r=new WeakMap}return{has:e,get:t,remove:n,update:i,dispose:s}}function $3(r,e){return r.groupOrder!==e.groupOrder?r.groupOrder-e.groupOrder:r.renderOrder!==e.renderOrder?r.renderOrder-e.renderOrder:r.material.id!==e.material.id?r.material.id-e.material.id:r.z!==e.z?r.z-e.z:r.id-e.id}function Ap(r,e){return r.groupOrder!==e.groupOrder?r.groupOrder-e.groupOrder:r.renderOrder!==e.renderOrder?r.renderOrder-e.renderOrder:r.z!==e.z?e.z-r.z:r.id-e.id}function wp(){const r=[];let e=0;const t=[],n=[],i=[];function s(){e=0,t.length=0,n.length=0,i.length=0}function a(u,f,d,m,g,p){let _=r[e];return _===void 0?(_={id:u.id,object:u,geometry:f,material:d,groupOrder:m,renderOrder:u.renderOrder,z:g,group:p},r[e]=_):(_.id=u.id,_.object=u,_.geometry=f,_.material=d,_.groupOrder=m,_.renderOrder=u.renderOrder,_.z=g,_.group=p),e++,_}function o(u,f,d,m,g,p){const _=a(u,f,d,m,g,p);d.transmission>0?n.push(_):d.transparent===!0?i.push(_):t.push(_)}function l(u,f,d,m,g,p){const _=a(u,f,d,m,g,p);d.transmission>0?n.unshift(_):d.transparent===!0?i.unshift(_):t.unshift(_)}function c(u,f){t.length>1&&t.sort(u||$3),n.length>1&&n.sort(f||Ap),i.length>1&&i.sort(f||Ap)}function h(){for(let u=e,f=r.length;u<f;u++){const d=r[u];if(d.id===null)break;d.id=null,d.object=null,d.geometry=null,d.material=null,d.group=null}}return{opaque:t,transmissive:n,transparent:i,init:s,push:o,unshift:l,finish:h,sort:c}}function J3(){let r=new WeakMap;function e(n,i){const s=r.get(n);let a;return s===void 0?(a=new wp,r.set(n,[a])):i>=s.length?(a=new wp,s.push(a)):a=s[i],a}function t(){r=new WeakMap}return{get:e,dispose:t}}function j3(){const r={};return{get:function(e){if(r[e.id]!==void 0)return r[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new R,color:new ae};break;case"SpotLight":t={position:new R,direction:new R,color:new ae,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new R,color:new ae,distance:0,decay:0};break;case"HemisphereLight":t={direction:new R,skyColor:new ae,groundColor:new ae};break;case"RectAreaLight":t={color:new ae,position:new R,halfWidth:new R,halfHeight:new R};break}return r[e.id]=t,t}}}function Q3(){const r={};return{get:function(e){if(r[e.id]!==void 0)return r[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new G};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new G};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new G,shadowCameraNear:1,shadowCameraFar:1e3};break}return r[e.id]=t,t}}}let ex=0;function tx(r,e){return(e.castShadow?2:0)-(r.castShadow?2:0)+(e.map?1:0)-(r.map?1:0)}function nx(r){const e=new j3,t=Q3(),n={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let c=0;c<9;c++)n.probe.push(new R);const i=new R,s=new Ee,a=new Ee;function o(c){let h=0,u=0,f=0;for(let M=0;M<9;M++)n.probe[M].set(0,0,0);let d=0,m=0,g=0,p=0,_=0,y=0,x=0,v=0,w=0,b=0,A=0;c.sort(tx);for(let M=0,S=c.length;M<S;M++){const q=c[M],O=q.color,N=q.intensity,z=q.distance,V=q.shadow&&q.shadow.map?q.shadow.map.texture:null;if(q.isAmbientLight)h+=O.r*N,u+=O.g*N,f+=O.b*N;else if(q.isLightProbe){for(let F=0;F<9;F++)n.probe[F].addScaledVector(q.sh.coefficients[F],N);A++}else if(q.isDirectionalLight){const F=e.get(q);if(F.color.copy(q.color).multiplyScalar(q.intensity),q.castShadow){const X=q.shadow,W=t.get(q);W.shadowIntensity=X.intensity,W.shadowBias=X.bias,W.shadowNormalBias=X.normalBias,W.shadowRadius=X.radius,W.shadowMapSize=X.mapSize,n.directionalShadow[d]=W,n.directionalShadowMap[d]=V,n.directionalShadowMatrix[d]=q.shadow.matrix,y++}n.directional[d]=F,d++}else if(q.isSpotLight){const F=e.get(q);F.position.setFromMatrixPosition(q.matrixWorld),F.color.copy(O).multiplyScalar(N),F.distance=z,F.coneCos=Math.cos(q.angle),F.penumbraCos=Math.cos(q.angle*(1-q.penumbra)),F.decay=q.decay,n.spot[g]=F;const X=q.shadow;if(q.map&&(n.spotLightMap[w]=q.map,w++,X.updateMatrices(q),q.castShadow&&b++),n.spotLightMatrix[g]=X.matrix,q.castShadow){const W=t.get(q);W.shadowIntensity=X.intensity,W.shadowBias=X.bias,W.shadowNormalBias=X.normalBias,W.shadowRadius=X.radius,W.shadowMapSize=X.mapSize,n.spotShadow[g]=W,n.spotShadowMap[g]=V,v++}g++}else if(q.isRectAreaLight){const F=e.get(q);F.color.copy(O).multiplyScalar(N),F.halfWidth.set(q.width*.5,0,0),F.halfHeight.set(0,q.height*.5,0),n.rectArea[p]=F,p++}else if(q.isPointLight){const F=e.get(q);if(F.color.copy(q.color).multiplyScalar(q.intensity),F.distance=q.distance,F.decay=q.decay,q.castShadow){const X=q.shadow,W=t.get(q);W.shadowIntensity=X.intensity,W.shadowBias=X.bias,W.shadowNormalBias=X.normalBias,W.shadowRadius=X.radius,W.shadowMapSize=X.mapSize,W.shadowCameraNear=X.camera.near,W.shadowCameraFar=X.camera.far,n.pointShadow[m]=W,n.pointShadowMap[m]=V,n.pointShadowMatrix[m]=q.shadow.matrix,x++}n.point[m]=F,m++}else if(q.isHemisphereLight){const F=e.get(q);F.skyColor.copy(q.color).multiplyScalar(N),F.groundColor.copy(q.groundColor).multiplyScalar(N),n.hemi[_]=F,_++}}p>0&&(r.has("OES_texture_float_linear")===!0?(n.rectAreaLTC1=ce.LTC_FLOAT_1,n.rectAreaLTC2=ce.LTC_FLOAT_2):(n.rectAreaLTC1=ce.LTC_HALF_1,n.rectAreaLTC2=ce.LTC_HALF_2)),n.ambient[0]=h,n.ambient[1]=u,n.ambient[2]=f;const C=n.hash;(C.directionalLength!==d||C.pointLength!==m||C.spotLength!==g||C.rectAreaLength!==p||C.hemiLength!==_||C.numDirectionalShadows!==y||C.numPointShadows!==x||C.numSpotShadows!==v||C.numSpotMaps!==w||C.numLightProbes!==A)&&(n.directional.length=d,n.spot.length=g,n.rectArea.length=p,n.point.length=m,n.hemi.length=_,n.directionalShadow.length=y,n.directionalShadowMap.length=y,n.pointShadow.length=x,n.pointShadowMap.length=x,n.spotShadow.length=v,n.spotShadowMap.length=v,n.directionalShadowMatrix.length=y,n.pointShadowMatrix.length=x,n.spotLightMatrix.length=v+w-b,n.spotLightMap.length=w,n.numSpotLightShadowsWithMaps=b,n.numLightProbes=A,C.directionalLength=d,C.pointLength=m,C.spotLength=g,C.rectAreaLength=p,C.hemiLength=_,C.numDirectionalShadows=y,C.numPointShadows=x,C.numSpotShadows=v,C.numSpotMaps=w,C.numLightProbes=A,n.version=ex++)}function l(c,h){let u=0,f=0,d=0,m=0,g=0;const p=h.matrixWorldInverse;for(let _=0,y=c.length;_<y;_++){const x=c[_];if(x.isDirectionalLight){const v=n.directional[u];v.direction.setFromMatrixPosition(x.matrixWorld),i.setFromMatrixPosition(x.target.matrixWorld),v.direction.sub(i),v.direction.transformDirection(p),u++}else if(x.isSpotLight){const v=n.spot[d];v.position.setFromMatrixPosition(x.matrixWorld),v.position.applyMatrix4(p),v.direction.setFromMatrixPosition(x.matrixWorld),i.setFromMatrixPosition(x.target.matrixWorld),v.direction.sub(i),v.direction.transformDirection(p),d++}else if(x.isRectAreaLight){const v=n.rectArea[m];v.position.setFromMatrixPosition(x.matrixWorld),v.position.applyMatrix4(p),a.identity(),s.copy(x.matrixWorld),s.premultiply(p),a.extractRotation(s),v.halfWidth.set(x.width*.5,0,0),v.halfHeight.set(0,x.height*.5,0),v.halfWidth.applyMatrix4(a),v.halfHeight.applyMatrix4(a),m++}else if(x.isPointLight){const v=n.point[f];v.position.setFromMatrixPosition(x.matrixWorld),v.position.applyMatrix4(p),f++}else if(x.isHemisphereLight){const v=n.hemi[g];v.direction.setFromMatrixPosition(x.matrixWorld),v.direction.transformDirection(p),g++}}}return{setup:o,setupView:l,state:n}}function Ep(r){const e=new nx(r),t=[],n=[];function i(h){c.camera=h,t.length=0,n.length=0}function s(h){t.push(h)}function a(h){n.push(h)}function o(){e.setup(t)}function l(h){e.setupView(t,h)}const c={lightsArray:t,shadowsArray:n,camera:null,lights:e,transmissionRenderTarget:{}};return{init:i,state:c,setupLights:o,setupLightsView:l,pushLight:s,pushShadow:a}}function ix(r){let e=new WeakMap;function t(i,s=0){const a=e.get(i);let o;return a===void 0?(o=new Ep(r),e.set(i,[o])):s>=a.length?(o=new Ep(r),a.push(o)):o=a[s],o}function n(){e=new WeakMap}return{get:t,dispose:n}}class Gf extends Ut{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=N0,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class Wf extends Ut{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const sx=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,rx=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function ax(r,e,t){let n=new Uo;const i=new G,s=new G,a=new rt,o=new Gf({depthPacking:U0}),l=new Wf,c={},h=t.maxTextureSize,u={[mi]:un,[un]:mi,[zn]:zn},f=new kt({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new G},radius:{value:4}},vertexShader:sx,fragmentShader:rx}),d=f.clone();d.defines.HORIZONTAL_PASS=1;const m=new Oe;m.setAttribute("position",new Qe(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const g=new ct(m,f),p=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=xf;let _=this.type;this.render=function(b,A,C){if(p.enabled===!1||p.autoUpdate===!1&&p.needsUpdate===!1||b.length===0)return;const M=r.getRenderTarget(),S=r.getActiveCubeFace(),q=r.getActiveMipmapLevel(),O=r.state;O.setBlending(hi),O.buffers.color.setClear(1,1,1,1),O.buffers.depth.setTest(!0),O.setScissorTest(!1);const N=_!==si&&this.type===si,z=_===si&&this.type!==si;for(let V=0,F=b.length;V<F;V++){const X=b[V],W=X.shadow;if(W===void 0){console.warn("THREE.WebGLShadowMap:",X,"has no shadow.");continue}if(W.autoUpdate===!1&&W.needsUpdate===!1)continue;i.copy(W.mapSize);const le=W.getFrameExtents();if(i.multiply(le),s.copy(W.mapSize),(i.x>h||i.y>h)&&(i.x>h&&(s.x=Math.floor(h/le.x),i.x=s.x*le.x,W.mapSize.x=s.x),i.y>h&&(s.y=Math.floor(h/le.y),i.y=s.y*le.y,W.mapSize.y=s.y)),W.map===null||N===!0||z===!0){const me=this.type!==si?{minFilter:Nt,magFilter:Nt}:{};W.map!==null&&W.map.dispose(),W.map=new fn(i.x,i.y,me),W.map.texture.name=X.name+".shadowMap",W.camera.updateProjectionMatrix()}r.setRenderTarget(W.map),r.clear();const de=W.getViewportCount();for(let me=0;me<de;me++){const Ie=W.getViewport(me);a.set(s.x*Ie.x,s.y*Ie.y,s.x*Ie.z,s.y*Ie.w),O.viewport(a),W.updateMatrices(X,me),n=W.getFrustum(),v(A,C,W.camera,X,this.type)}W.isPointLightShadow!==!0&&this.type===si&&y(W,C),W.needsUpdate=!1}_=this.type,p.needsUpdate=!1,r.setRenderTarget(M,S,q)};function y(b,A){const C=e.update(g);f.defines.VSM_SAMPLES!==b.blurSamples&&(f.defines.VSM_SAMPLES=b.blurSamples,d.defines.VSM_SAMPLES=b.blurSamples,f.needsUpdate=!0,d.needsUpdate=!0),b.mapPass===null&&(b.mapPass=new fn(i.x,i.y)),f.uniforms.shadow_pass.value=b.map.texture,f.uniforms.resolution.value=b.mapSize,f.uniforms.radius.value=b.radius,r.setRenderTarget(b.mapPass),r.clear(),r.renderBufferDirect(A,null,C,f,g,null),d.uniforms.shadow_pass.value=b.mapPass.texture,d.uniforms.resolution.value=b.mapSize,d.uniforms.radius.value=b.radius,r.setRenderTarget(b.map),r.clear(),r.renderBufferDirect(A,null,C,d,g,null)}function x(b,A,C,M){let S=null;const q=C.isPointLight===!0?b.customDistanceMaterial:b.customDepthMaterial;if(q!==void 0)S=q;else if(S=C.isPointLight===!0?l:o,r.localClippingEnabled&&A.clipShadows===!0&&Array.isArray(A.clippingPlanes)&&A.clippingPlanes.length!==0||A.displacementMap&&A.displacementScale!==0||A.alphaMap&&A.alphaTest>0||A.map&&A.alphaTest>0){const O=S.uuid,N=A.uuid;let z=c[O];z===void 0&&(z={},c[O]=z);let V=z[N];V===void 0&&(V=S.clone(),z[N]=V,A.addEventListener("dispose",w)),S=V}if(S.visible=A.visible,S.wireframe=A.wireframe,M===si?S.side=A.shadowSide!==null?A.shadowSide:A.side:S.side=A.shadowSide!==null?A.shadowSide:u[A.side],S.alphaMap=A.alphaMap,S.alphaTest=A.alphaTest,S.map=A.map,S.clipShadows=A.clipShadows,S.clippingPlanes=A.clippingPlanes,S.clipIntersection=A.clipIntersection,S.displacementMap=A.displacementMap,S.displacementScale=A.displacementScale,S.displacementBias=A.displacementBias,S.wireframeLinewidth=A.wireframeLinewidth,S.linewidth=A.linewidth,C.isPointLight===!0&&S.isMeshDistanceMaterial===!0){const O=r.properties.get(S);O.light=C}return S}function v(b,A,C,M,S){if(b.visible===!1)return;if(b.layers.test(A.layers)&&(b.isMesh||b.isLine||b.isPoints)&&(b.castShadow||b.receiveShadow&&S===si)&&(!b.frustumCulled||n.intersectsObject(b))){b.modelViewMatrix.multiplyMatrices(C.matrixWorldInverse,b.matrixWorld);const N=e.update(b),z=b.material;if(Array.isArray(z)){const V=N.groups;for(let F=0,X=V.length;F<X;F++){const W=V[F],le=z[W.materialIndex];if(le&&le.visible){const de=x(b,le,M,S);b.onBeforeShadow(r,b,A,C,N,de,W),r.renderBufferDirect(C,null,N,de,b,W),b.onAfterShadow(r,b,A,C,N,de,W)}}}else if(z.visible){const V=x(b,z,M,S);b.onBeforeShadow(r,b,A,C,N,V,null),r.renderBufferDirect(C,null,N,V,b,null),b.onAfterShadow(r,b,A,C,N,V,null)}}const O=b.children;for(let N=0,z=O.length;N<z;N++)v(O[N],A,C,M,S)}function w(b){b.target.removeEventListener("dispose",w);for(const C in c){const M=c[C],S=b.target.uuid;S in M&&(M[S].dispose(),delete M[S])}}}function ox(r){function e(){let L=!1;const se=new rt;let Z=null;const j=new rt(0,0,0,0);return{setMask:function(oe){Z!==oe&&!L&&(r.colorMask(oe,oe,oe,oe),Z=oe)},setLocked:function(oe){L=oe},setClear:function(oe,qe,je,Et,Gt){Gt===!0&&(oe*=Et,qe*=Et,je*=Et),se.set(oe,qe,je,Et),j.equals(se)===!1&&(r.clearColor(oe,qe,je,Et),j.copy(se))},reset:function(){L=!1,Z=null,j.set(-1,0,0,0)}}}function t(){let L=!1,se=null,Z=null,j=null;return{setTest:function(oe){oe?ve(r.DEPTH_TEST):ue(r.DEPTH_TEST)},setMask:function(oe){se!==oe&&!L&&(r.depthMask(oe),se=oe)},setFunc:function(oe){if(Z!==oe){switch(oe){case v0:r.depthFunc(r.NEVER);break;case M0:r.depthFunc(r.ALWAYS);break;case S0:r.depthFunc(r.LESS);break;case ao:r.depthFunc(r.LEQUAL);break;case b0:r.depthFunc(r.EQUAL);break;case T0:r.depthFunc(r.GEQUAL);break;case A0:r.depthFunc(r.GREATER);break;case w0:r.depthFunc(r.NOTEQUAL);break;default:r.depthFunc(r.LEQUAL)}Z=oe}},setLocked:function(oe){L=oe},setClear:function(oe){j!==oe&&(r.clearDepth(oe),j=oe)},reset:function(){L=!1,se=null,Z=null,j=null}}}function n(){let L=!1,se=null,Z=null,j=null,oe=null,qe=null,je=null,Et=null,Gt=null;return{setTest:function(tt){L||(tt?ve(r.STENCIL_TEST):ue(r.STENCIL_TEST))},setMask:function(tt){se!==tt&&!L&&(r.stencilMask(tt),se=tt)},setFunc:function(tt,yi,ii){(Z!==tt||j!==yi||oe!==ii)&&(r.stencilFunc(tt,yi,ii),Z=tt,j=yi,oe=ii)},setOp:function(tt,yi,ii){(qe!==tt||je!==yi||Et!==ii)&&(r.stencilOp(tt,yi,ii),qe=tt,je=yi,Et=ii)},setLocked:function(tt){L=tt},setClear:function(tt){Gt!==tt&&(r.clearStencil(tt),Gt=tt)},reset:function(){L=!1,se=null,Z=null,j=null,oe=null,qe=null,je=null,Et=null,Gt=null}}}const i=new e,s=new t,a=new n,o=new WeakMap,l=new WeakMap;let c={},h={},u=new WeakMap,f=[],d=null,m=!1,g=null,p=null,_=null,y=null,x=null,v=null,w=null,b=new ae(0,0,0),A=0,C=!1,M=null,S=null,q=null,O=null,N=null;const z=r.getParameter(r.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let V=!1,F=0;const X=r.getParameter(r.VERSION);X.indexOf("WebGL")!==-1?(F=parseFloat(/^WebGL (\d)/.exec(X)[1]),V=F>=1):X.indexOf("OpenGL ES")!==-1&&(F=parseFloat(/^OpenGL ES (\d)/.exec(X)[1]),V=F>=2);let W=null,le={};const de=r.getParameter(r.SCISSOR_BOX),me=r.getParameter(r.VIEWPORT),Ie=new rt().fromArray(de),Ze=new rt().fromArray(me);function Y(L,se,Z,j){const oe=new Uint8Array(4),qe=r.createTexture();r.bindTexture(L,qe),r.texParameteri(L,r.TEXTURE_MIN_FILTER,r.NEAREST),r.texParameteri(L,r.TEXTURE_MAG_FILTER,r.NEAREST);for(let je=0;je<Z;je++)L===r.TEXTURE_3D||L===r.TEXTURE_2D_ARRAY?r.texImage3D(se,0,r.RGBA,1,1,j,0,r.RGBA,r.UNSIGNED_BYTE,oe):r.texImage2D(se+je,0,r.RGBA,1,1,0,r.RGBA,r.UNSIGNED_BYTE,oe);return qe}const ee={};ee[r.TEXTURE_2D]=Y(r.TEXTURE_2D,r.TEXTURE_2D,1),ee[r.TEXTURE_CUBE_MAP]=Y(r.TEXTURE_CUBE_MAP,r.TEXTURE_CUBE_MAP_POSITIVE_X,6),ee[r.TEXTURE_2D_ARRAY]=Y(r.TEXTURE_2D_ARRAY,r.TEXTURE_2D_ARRAY,1,1),ee[r.TEXTURE_3D]=Y(r.TEXTURE_3D,r.TEXTURE_3D,1,1),i.setClear(0,0,0,1),s.setClear(1),a.setClear(0),ve(r.DEPTH_TEST),s.setFunc(ao),pe(!1),K(Nu),ve(r.CULL_FACE),ie(hi);function ve(L){c[L]!==!0&&(r.enable(L),c[L]=!0)}function ue(L){c[L]!==!1&&(r.disable(L),c[L]=!1)}function Ce(L,se){return h[L]!==se?(r.bindFramebuffer(L,se),h[L]=se,L===r.DRAW_FRAMEBUFFER&&(h[r.FRAMEBUFFER]=se),L===r.FRAMEBUFFER&&(h[r.DRAW_FRAMEBUFFER]=se),!0):!1}function Fe(L,se){let Z=f,j=!1;if(L){Z=u.get(se),Z===void 0&&(Z=[],u.set(se,Z));const oe=L.textures;if(Z.length!==oe.length||Z[0]!==r.COLOR_ATTACHMENT0){for(let qe=0,je=oe.length;qe<je;qe++)Z[qe]=r.COLOR_ATTACHMENT0+qe;Z.length=oe.length,j=!0}}else Z[0]!==r.BACK&&(Z[0]=r.BACK,j=!0);j&&r.drawBuffers(Z)}function De(L){return d!==L?(r.useProgram(L),d=L,!0):!1}const et={[ji]:r.FUNC_ADD,[i0]:r.FUNC_SUBTRACT,[s0]:r.FUNC_REVERSE_SUBTRACT};et[r0]=r.MIN,et[a0]=r.MAX;const P={[o0]:r.ZERO,[l0]:r.ONE,[c0]:r.SRC_COLOR,[nc]:r.SRC_ALPHA,[m0]:r.SRC_ALPHA_SATURATE,[d0]:r.DST_COLOR,[u0]:r.DST_ALPHA,[h0]:r.ONE_MINUS_SRC_COLOR,[ic]:r.ONE_MINUS_SRC_ALPHA,[p0]:r.ONE_MINUS_DST_COLOR,[f0]:r.ONE_MINUS_DST_ALPHA,[g0]:r.CONSTANT_COLOR,[_0]:r.ONE_MINUS_CONSTANT_COLOR,[x0]:r.CONSTANT_ALPHA,[y0]:r.ONE_MINUS_CONSTANT_ALPHA};function ie(L,se,Z,j,oe,qe,je,Et,Gt,tt){if(L===hi){m===!0&&(ue(r.BLEND),m=!1);return}if(m===!1&&(ve(r.BLEND),m=!0),L!==n0){if(L!==g||tt!==C){if((p!==ji||x!==ji)&&(r.blendEquation(r.FUNC_ADD),p=ji,x=ji),tt)switch(L){case Ys:r.blendFuncSeparate(r.ONE,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA);break;case ro:r.blendFunc(r.ONE,r.ONE);break;case Uu:r.blendFuncSeparate(r.ZERO,r.ONE_MINUS_SRC_COLOR,r.ZERO,r.ONE);break;case Ou:r.blendFuncSeparate(r.ZERO,r.SRC_COLOR,r.ZERO,r.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",L);break}else switch(L){case Ys:r.blendFuncSeparate(r.SRC_ALPHA,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA);break;case ro:r.blendFunc(r.SRC_ALPHA,r.ONE);break;case Uu:r.blendFuncSeparate(r.ZERO,r.ONE_MINUS_SRC_COLOR,r.ZERO,r.ONE);break;case Ou:r.blendFunc(r.ZERO,r.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",L);break}_=null,y=null,v=null,w=null,b.set(0,0,0),A=0,g=L,C=tt}return}oe=oe||se,qe=qe||Z,je=je||j,(se!==p||oe!==x)&&(r.blendEquationSeparate(et[se],et[oe]),p=se,x=oe),(Z!==_||j!==y||qe!==v||je!==w)&&(r.blendFuncSeparate(P[Z],P[j],P[qe],P[je]),_=Z,y=j,v=qe,w=je),(Et.equals(b)===!1||Gt!==A)&&(r.blendColor(Et.r,Et.g,Et.b,Gt),b.copy(Et),A=Gt),g=L,C=!1}function te(L,se){L.side===zn?ue(r.CULL_FACE):ve(r.CULL_FACE);let Z=L.side===un;se&&(Z=!Z),pe(Z),L.blending===Ys&&L.transparent===!1?ie(hi):ie(L.blending,L.blendEquation,L.blendSrc,L.blendDst,L.blendEquationAlpha,L.blendSrcAlpha,L.blendDstAlpha,L.blendColor,L.blendAlpha,L.premultipliedAlpha),s.setFunc(L.depthFunc),s.setTest(L.depthTest),s.setMask(L.depthWrite),i.setMask(L.colorWrite);const j=L.stencilWrite;a.setTest(j),j&&(a.setMask(L.stencilWriteMask),a.setFunc(L.stencilFunc,L.stencilRef,L.stencilFuncMask),a.setOp(L.stencilFail,L.stencilZFail,L.stencilZPass)),fe(L.polygonOffset,L.polygonOffsetFactor,L.polygonOffsetUnits),L.alphaToCoverage===!0?ve(r.SAMPLE_ALPHA_TO_COVERAGE):ue(r.SAMPLE_ALPHA_TO_COVERAGE)}function pe(L){M!==L&&(L?r.frontFace(r.CW):r.frontFace(r.CCW),M=L)}function K(L){L!==Q1?(ve(r.CULL_FACE),L!==S&&(L===Nu?r.cullFace(r.BACK):L===e0?r.cullFace(r.FRONT):r.cullFace(r.FRONT_AND_BACK))):ue(r.CULL_FACE),S=L}function Pe(L){L!==q&&(V&&r.lineWidth(L),q=L)}function fe(L,se,Z){L?(ve(r.POLYGON_OFFSET_FILL),(O!==se||N!==Z)&&(r.polygonOffset(se,Z),O=se,N=Z)):ue(r.POLYGON_OFFSET_FILL)}function ye(L){L?ve(r.SCISSOR_TEST):ue(r.SCISSOR_TEST)}function I(L){L===void 0&&(L=r.TEXTURE0+z-1),W!==L&&(r.activeTexture(L),W=L)}function T(L,se,Z){Z===void 0&&(W===null?Z=r.TEXTURE0+z-1:Z=W);let j=le[Z];j===void 0&&(j={type:void 0,texture:void 0},le[Z]=j),(j.type!==L||j.texture!==se)&&(W!==Z&&(r.activeTexture(Z),W=Z),r.bindTexture(L,se||ee[L]),j.type=L,j.texture=se)}function k(){const L=le[W];L!==void 0&&L.type!==void 0&&(r.bindTexture(L.type,null),L.type=void 0,L.texture=void 0)}function J(){try{r.compressedTexImage2D.apply(r,arguments)}catch(L){console.error("THREE.WebGLState:",L)}}function $(){try{r.compressedTexImage3D.apply(r,arguments)}catch(L){console.error("THREE.WebGLState:",L)}}function Q(){try{r.texSubImage2D.apply(r,arguments)}catch(L){console.error("THREE.WebGLState:",L)}}function Re(){try{r.texSubImage3D.apply(r,arguments)}catch(L){console.error("THREE.WebGLState:",L)}}function he(){try{r.compressedTexSubImage2D.apply(r,arguments)}catch(L){console.error("THREE.WebGLState:",L)}}function xe(){try{r.compressedTexSubImage3D.apply(r,arguments)}catch(L){console.error("THREE.WebGLState:",L)}}function ze(){try{r.texStorage2D.apply(r,arguments)}catch(L){console.error("THREE.WebGLState:",L)}}function ne(){try{r.texStorage3D.apply(r,arguments)}catch(L){console.error("THREE.WebGLState:",L)}}function _e(){try{r.texImage2D.apply(r,arguments)}catch(L){console.error("THREE.WebGLState:",L)}}function $e(){try{r.texImage3D.apply(r,arguments)}catch(L){console.error("THREE.WebGLState:",L)}}function Ue(L){Ie.equals(L)===!1&&(r.scissor(L.x,L.y,L.z,L.w),Ie.copy(L))}function Me(L){Ze.equals(L)===!1&&(r.viewport(L.x,L.y,L.z,L.w),Ze.copy(L))}function Be(L,se){let Z=l.get(se);Z===void 0&&(Z=new WeakMap,l.set(se,Z));let j=Z.get(L);j===void 0&&(j=r.getUniformBlockIndex(se,L.name),Z.set(L,j))}function Ge(L,se){const j=l.get(se).get(L);o.get(se)!==j&&(r.uniformBlockBinding(se,j,L.__bindingPointIndex),o.set(se,j))}function pt(){r.disable(r.BLEND),r.disable(r.CULL_FACE),r.disable(r.DEPTH_TEST),r.disable(r.POLYGON_OFFSET_FILL),r.disable(r.SCISSOR_TEST),r.disable(r.STENCIL_TEST),r.disable(r.SAMPLE_ALPHA_TO_COVERAGE),r.blendEquation(r.FUNC_ADD),r.blendFunc(r.ONE,r.ZERO),r.blendFuncSeparate(r.ONE,r.ZERO,r.ONE,r.ZERO),r.blendColor(0,0,0,0),r.colorMask(!0,!0,!0,!0),r.clearColor(0,0,0,0),r.depthMask(!0),r.depthFunc(r.LESS),r.clearDepth(1),r.stencilMask(4294967295),r.stencilFunc(r.ALWAYS,0,4294967295),r.stencilOp(r.KEEP,r.KEEP,r.KEEP),r.clearStencil(0),r.cullFace(r.BACK),r.frontFace(r.CCW),r.polygonOffset(0,0),r.activeTexture(r.TEXTURE0),r.bindFramebuffer(r.FRAMEBUFFER,null),r.bindFramebuffer(r.DRAW_FRAMEBUFFER,null),r.bindFramebuffer(r.READ_FRAMEBUFFER,null),r.useProgram(null),r.lineWidth(1),r.scissor(0,0,r.canvas.width,r.canvas.height),r.viewport(0,0,r.canvas.width,r.canvas.height),c={},W=null,le={},h={},u=new WeakMap,f=[],d=null,m=!1,g=null,p=null,_=null,y=null,x=null,v=null,w=null,b=new ae(0,0,0),A=0,C=!1,M=null,S=null,q=null,O=null,N=null,Ie.set(0,0,r.canvas.width,r.canvas.height),Ze.set(0,0,r.canvas.width,r.canvas.height),i.reset(),s.reset(),a.reset()}return{buffers:{color:i,depth:s,stencil:a},enable:ve,disable:ue,bindFramebuffer:Ce,drawBuffers:Fe,useProgram:De,setBlending:ie,setMaterial:te,setFlipSided:pe,setCullFace:K,setLineWidth:Pe,setPolygonOffset:fe,setScissorTest:ye,activeTexture:I,bindTexture:T,unbindTexture:k,compressedTexImage2D:J,compressedTexImage3D:$,texImage2D:_e,texImage3D:$e,updateUBOMapping:Be,uniformBlockBinding:Ge,texStorage2D:ze,texStorage3D:ne,texSubImage2D:Q,texSubImage3D:Re,compressedTexSubImage2D:he,compressedTexSubImage3D:xe,scissor:Ue,viewport:Me,reset:pt}}function lx(r,e){const t=r.image&&r.image.width?r.image.width/r.image.height:1;return t>e?(r.repeat.x=1,r.repeat.y=t/e,r.offset.x=0,r.offset.y=(1-r.repeat.y)/2):(r.repeat.x=e/t,r.repeat.y=1,r.offset.x=(1-r.repeat.x)/2,r.offset.y=0),r}function cx(r,e){const t=r.image&&r.image.width?r.image.width/r.image.height:1;return t>e?(r.repeat.x=e/t,r.repeat.y=1,r.offset.x=(1-r.repeat.x)/2,r.offset.y=0):(r.repeat.x=1,r.repeat.y=t/e,r.offset.x=0,r.offset.y=(1-r.repeat.y)/2),r}function hx(r){return r.repeat.x=1,r.repeat.y=1,r.offset.x=0,r.offset.y=0,r}function Vu(r,e,t,n){const i=ux(n);switch(t){case Rf:return r*e;case Pf:return r*e;case If:return r*e*2;case $c:return r*e/i.components*i.byteLength;case Lo:return r*e/i.components*i.byteLength;case qf:return r*e*2/i.components*i.byteLength;case Jc:return r*e*2/i.components*i.byteLength;case Cf:return r*e*3/i.components*i.byteLength;case hn:return r*e*4/i.components*i.byteLength;case jc:return r*e*4/i.components*i.byteLength;case Va:case Ga:return Math.floor((r+3)/4)*Math.floor((e+3)/4)*8;case Wa:case Xa:return Math.floor((r+3)/4)*Math.floor((e+3)/4)*16;case rc:case oc:return Math.max(r,16)*Math.max(e,8)/4;case sc:case ac:return Math.max(r,8)*Math.max(e,8)/2;case lc:case cc:return Math.floor((r+3)/4)*Math.floor((e+3)/4)*8;case hc:return Math.floor((r+3)/4)*Math.floor((e+3)/4)*16;case uc:return Math.floor((r+3)/4)*Math.floor((e+3)/4)*16;case fc:return Math.floor((r+4)/5)*Math.floor((e+3)/4)*16;case dc:return Math.floor((r+4)/5)*Math.floor((e+4)/5)*16;case pc:return Math.floor((r+5)/6)*Math.floor((e+4)/5)*16;case mc:return Math.floor((r+5)/6)*Math.floor((e+5)/6)*16;case gc:return Math.floor((r+7)/8)*Math.floor((e+4)/5)*16;case _c:return Math.floor((r+7)/8)*Math.floor((e+5)/6)*16;case xc:return Math.floor((r+7)/8)*Math.floor((e+7)/8)*16;case yc:return Math.floor((r+9)/10)*Math.floor((e+4)/5)*16;case vc:return Math.floor((r+9)/10)*Math.floor((e+5)/6)*16;case Mc:return Math.floor((r+9)/10)*Math.floor((e+7)/8)*16;case Sc:return Math.floor((r+9)/10)*Math.floor((e+9)/10)*16;case bc:return Math.floor((r+11)/12)*Math.floor((e+9)/10)*16;case Tc:return Math.floor((r+11)/12)*Math.floor((e+11)/12)*16;case Ya:case Ac:case wc:return Math.ceil(r/4)*Math.ceil(e/4)*16;case Lf:case Ec:return Math.ceil(r/4)*Math.ceil(e/4)*8;case Rc:case Cc:return Math.ceil(r/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function ux(r){switch(r){case gi:case Af:return{byteLength:1,components:1};case ta:case wf:case ui:return{byteLength:2,components:1};case Kc:case Zc:return{byteLength:2,components:4};case Ui:case Yc:case _n:return{byteLength:4,components:1};case Ef:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${r}.`)}const fx={contain:lx,cover:cx,fill:hx,getByteLength:Vu};function dx(r,e,t,n,i,s,a){const o=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,l=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),c=new G,h=new WeakMap;let u;const f=new WeakMap;let d=!1;try{d=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function m(I,T){return d?new OffscreenCanvas(I,T):go("canvas")}function g(I,T,k){let J=1;const $=ye(I);if(($.width>k||$.height>k)&&(J=k/Math.max($.width,$.height)),J<1)if(typeof HTMLImageElement<"u"&&I instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&I instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&I instanceof ImageBitmap||typeof VideoFrame<"u"&&I instanceof VideoFrame){const Q=Math.floor(J*$.width),Re=Math.floor(J*$.height);u===void 0&&(u=m(Q,Re));const he=T?m(Q,Re):u;return he.width=Q,he.height=Re,he.getContext("2d").drawImage(I,0,0,Q,Re),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+$.width+"x"+$.height+") to ("+Q+"x"+Re+")."),he}else return"data"in I&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+$.width+"x"+$.height+")."),I;return I}function p(I){return I.generateMipmaps&&I.minFilter!==Nt&&I.minFilter!==St}function _(I){r.generateMipmap(I)}function y(I,T,k,J,$=!1){if(I!==null){if(r[I]!==void 0)return r[I];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+I+"'")}let Q=T;if(T===r.RED&&(k===r.FLOAT&&(Q=r.R32F),k===r.HALF_FLOAT&&(Q=r.R16F),k===r.UNSIGNED_BYTE&&(Q=r.R8)),T===r.RED_INTEGER&&(k===r.UNSIGNED_BYTE&&(Q=r.R8UI),k===r.UNSIGNED_SHORT&&(Q=r.R16UI),k===r.UNSIGNED_INT&&(Q=r.R32UI),k===r.BYTE&&(Q=r.R8I),k===r.SHORT&&(Q=r.R16I),k===r.INT&&(Q=r.R32I)),T===r.RG&&(k===r.FLOAT&&(Q=r.RG32F),k===r.HALF_FLOAT&&(Q=r.RG16F),k===r.UNSIGNED_BYTE&&(Q=r.RG8)),T===r.RG_INTEGER&&(k===r.UNSIGNED_BYTE&&(Q=r.RG8UI),k===r.UNSIGNED_SHORT&&(Q=r.RG16UI),k===r.UNSIGNED_INT&&(Q=r.RG32UI),k===r.BYTE&&(Q=r.RG8I),k===r.SHORT&&(Q=r.RG16I),k===r.INT&&(Q=r.RG32I)),T===r.RGB&&k===r.UNSIGNED_INT_5_9_9_9_REV&&(Q=r.RGB9_E5),T===r.RGBA){const Re=$?ho:Ye.getTransfer(J);k===r.FLOAT&&(Q=r.RGBA32F),k===r.HALF_FLOAT&&(Q=r.RGBA16F),k===r.UNSIGNED_BYTE&&(Q=Re===ot?r.SRGB8_ALPHA8:r.RGBA8),k===r.UNSIGNED_SHORT_4_4_4_4&&(Q=r.RGBA4),k===r.UNSIGNED_SHORT_5_5_5_1&&(Q=r.RGB5_A1)}return(Q===r.R16F||Q===r.R32F||Q===r.RG16F||Q===r.RG32F||Q===r.RGBA16F||Q===r.RGBA32F)&&e.get("EXT_color_buffer_float"),Q}function x(I,T){let k;return I?T===null||T===Ui||T===tr?k=r.DEPTH24_STENCIL8:T===_n?k=r.DEPTH32F_STENCIL8:T===ta&&(k=r.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):T===null||T===Ui||T===tr?k=r.DEPTH_COMPONENT24:T===_n?k=r.DEPTH_COMPONENT32F:T===ta&&(k=r.DEPTH_COMPONENT16),k}function v(I,T){return p(I)===!0||I.isFramebufferTexture&&I.minFilter!==Nt&&I.minFilter!==St?Math.log2(Math.max(T.width,T.height))+1:I.mipmaps!==void 0&&I.mipmaps.length>0?I.mipmaps.length:I.isCompressedTexture&&Array.isArray(I.image)?T.mipmaps.length:1}function w(I){const T=I.target;T.removeEventListener("dispose",w),A(T),T.isVideoTexture&&h.delete(T)}function b(I){const T=I.target;T.removeEventListener("dispose",b),M(T)}function A(I){const T=n.get(I);if(T.__webglInit===void 0)return;const k=I.source,J=f.get(k);if(J){const $=J[T.__cacheKey];$.usedTimes--,$.usedTimes===0&&C(I),Object.keys(J).length===0&&f.delete(k)}n.remove(I)}function C(I){const T=n.get(I);r.deleteTexture(T.__webglTexture);const k=I.source,J=f.get(k);delete J[T.__cacheKey],a.memory.textures--}function M(I){const T=n.get(I);if(I.depthTexture&&I.depthTexture.dispose(),I.isWebGLCubeRenderTarget)for(let J=0;J<6;J++){if(Array.isArray(T.__webglFramebuffer[J]))for(let $=0;$<T.__webglFramebuffer[J].length;$++)r.deleteFramebuffer(T.__webglFramebuffer[J][$]);else r.deleteFramebuffer(T.__webglFramebuffer[J]);T.__webglDepthbuffer&&r.deleteRenderbuffer(T.__webglDepthbuffer[J])}else{if(Array.isArray(T.__webglFramebuffer))for(let J=0;J<T.__webglFramebuffer.length;J++)r.deleteFramebuffer(T.__webglFramebuffer[J]);else r.deleteFramebuffer(T.__webglFramebuffer);if(T.__webglDepthbuffer&&r.deleteRenderbuffer(T.__webglDepthbuffer),T.__webglMultisampledFramebuffer&&r.deleteFramebuffer(T.__webglMultisampledFramebuffer),T.__webglColorRenderbuffer)for(let J=0;J<T.__webglColorRenderbuffer.length;J++)T.__webglColorRenderbuffer[J]&&r.deleteRenderbuffer(T.__webglColorRenderbuffer[J]);T.__webglDepthRenderbuffer&&r.deleteRenderbuffer(T.__webglDepthRenderbuffer)}const k=I.textures;for(let J=0,$=k.length;J<$;J++){const Q=n.get(k[J]);Q.__webglTexture&&(r.deleteTexture(Q.__webglTexture),a.memory.textures--),n.remove(k[J])}n.remove(I)}let S=0;function q(){S=0}function O(){const I=S;return I>=i.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+I+" texture units while this GPU supports only "+i.maxTextures),S+=1,I}function N(I){const T=[];return T.push(I.wrapS),T.push(I.wrapT),T.push(I.wrapR||0),T.push(I.magFilter),T.push(I.minFilter),T.push(I.anisotropy),T.push(I.internalFormat),T.push(I.format),T.push(I.type),T.push(I.generateMipmaps),T.push(I.premultiplyAlpha),T.push(I.flipY),T.push(I.unpackAlignment),T.push(I.colorSpace),T.join()}function z(I,T){const k=n.get(I);if(I.isVideoTexture&&Pe(I),I.isRenderTargetTexture===!1&&I.version>0&&k.__version!==I.version){const J=I.image;if(J===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(J.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Ze(k,I,T);return}}t.bindTexture(r.TEXTURE_2D,k.__webglTexture,r.TEXTURE0+T)}function V(I,T){const k=n.get(I);if(I.version>0&&k.__version!==I.version){Ze(k,I,T);return}t.bindTexture(r.TEXTURE_2D_ARRAY,k.__webglTexture,r.TEXTURE0+T)}function F(I,T){const k=n.get(I);if(I.version>0&&k.__version!==I.version){Ze(k,I,T);return}t.bindTexture(r.TEXTURE_3D,k.__webglTexture,r.TEXTURE0+T)}function X(I,T){const k=n.get(I);if(I.version>0&&k.__version!==I.version){Y(k,I,T);return}t.bindTexture(r.TEXTURE_CUBE_MAP,k.__webglTexture,r.TEXTURE0+T)}const W={[ls]:r.REPEAT,[Pn]:r.CLAMP_TO_EDGE,[ea]:r.MIRRORED_REPEAT},le={[Nt]:r.NEAREST,[Xc]:r.NEAREST_MIPMAP_NEAREST,[Fs]:r.NEAREST_MIPMAP_LINEAR,[St]:r.LINEAR,[Yr]:r.LINEAR_MIPMAP_NEAREST,[kn]:r.LINEAR_MIPMAP_LINEAR},de={[F0]:r.NEVER,[G0]:r.ALWAYS,[B0]:r.LESS,[Uf]:r.LEQUAL,[z0]:r.EQUAL,[V0]:r.GEQUAL,[k0]:r.GREATER,[H0]:r.NOTEQUAL};function me(I,T){if(T.type===_n&&e.has("OES_texture_float_linear")===!1&&(T.magFilter===St||T.magFilter===Yr||T.magFilter===Fs||T.magFilter===kn||T.minFilter===St||T.minFilter===Yr||T.minFilter===Fs||T.minFilter===kn)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),r.texParameteri(I,r.TEXTURE_WRAP_S,W[T.wrapS]),r.texParameteri(I,r.TEXTURE_WRAP_T,W[T.wrapT]),(I===r.TEXTURE_3D||I===r.TEXTURE_2D_ARRAY)&&r.texParameteri(I,r.TEXTURE_WRAP_R,W[T.wrapR]),r.texParameteri(I,r.TEXTURE_MAG_FILTER,le[T.magFilter]),r.texParameteri(I,r.TEXTURE_MIN_FILTER,le[T.minFilter]),T.compareFunction&&(r.texParameteri(I,r.TEXTURE_COMPARE_MODE,r.COMPARE_REF_TO_TEXTURE),r.texParameteri(I,r.TEXTURE_COMPARE_FUNC,de[T.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(T.magFilter===Nt||T.minFilter!==Fs&&T.minFilter!==kn||T.type===_n&&e.has("OES_texture_float_linear")===!1)return;if(T.anisotropy>1||n.get(T).__currentAnisotropy){const k=e.get("EXT_texture_filter_anisotropic");r.texParameterf(I,k.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(T.anisotropy,i.getMaxAnisotropy())),n.get(T).__currentAnisotropy=T.anisotropy}}}function Ie(I,T){let k=!1;I.__webglInit===void 0&&(I.__webglInit=!0,T.addEventListener("dispose",w));const J=T.source;let $=f.get(J);$===void 0&&($={},f.set(J,$));const Q=N(T);if(Q!==I.__cacheKey){$[Q]===void 0&&($[Q]={texture:r.createTexture(),usedTimes:0},a.memory.textures++,k=!0),$[Q].usedTimes++;const Re=$[I.__cacheKey];Re!==void 0&&($[I.__cacheKey].usedTimes--,Re.usedTimes===0&&C(T)),I.__cacheKey=Q,I.__webglTexture=$[Q].texture}return k}function Ze(I,T,k){let J=r.TEXTURE_2D;(T.isDataArrayTexture||T.isCompressedArrayTexture)&&(J=r.TEXTURE_2D_ARRAY),T.isData3DTexture&&(J=r.TEXTURE_3D);const $=Ie(I,T),Q=T.source;t.bindTexture(J,I.__webglTexture,r.TEXTURE0+k);const Re=n.get(Q);if(Q.version!==Re.__version||$===!0){t.activeTexture(r.TEXTURE0+k);const he=Ye.getPrimaries(Ye.workingColorSpace),xe=T.colorSpace===Ii?null:Ye.getPrimaries(T.colorSpace),ze=T.colorSpace===Ii||he===xe?r.NONE:r.BROWSER_DEFAULT_WEBGL;r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,T.flipY),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,T.premultiplyAlpha),r.pixelStorei(r.UNPACK_ALIGNMENT,T.unpackAlignment),r.pixelStorei(r.UNPACK_COLORSPACE_CONVERSION_WEBGL,ze);let ne=g(T.image,!1,i.maxTextureSize);ne=fe(T,ne);const _e=s.convert(T.format,T.colorSpace),$e=s.convert(T.type);let Ue=y(T.internalFormat,_e,$e,T.colorSpace,T.isVideoTexture);me(J,T);let Me;const Be=T.mipmaps,Ge=T.isVideoTexture!==!0,pt=Re.__version===void 0||$===!0,L=Q.dataReady,se=v(T,ne);if(T.isDepthTexture)Ue=x(T.format===nr,T.type),pt&&(Ge?t.texStorage2D(r.TEXTURE_2D,1,Ue,ne.width,ne.height):t.texImage2D(r.TEXTURE_2D,0,Ue,ne.width,ne.height,0,_e,$e,null));else if(T.isDataTexture)if(Be.length>0){Ge&&pt&&t.texStorage2D(r.TEXTURE_2D,se,Ue,Be[0].width,Be[0].height);for(let Z=0,j=Be.length;Z<j;Z++)Me=Be[Z],Ge?L&&t.texSubImage2D(r.TEXTURE_2D,Z,0,0,Me.width,Me.height,_e,$e,Me.data):t.texImage2D(r.TEXTURE_2D,Z,Ue,Me.width,Me.height,0,_e,$e,Me.data);T.generateMipmaps=!1}else Ge?(pt&&t.texStorage2D(r.TEXTURE_2D,se,Ue,ne.width,ne.height),L&&t.texSubImage2D(r.TEXTURE_2D,0,0,0,ne.width,ne.height,_e,$e,ne.data)):t.texImage2D(r.TEXTURE_2D,0,Ue,ne.width,ne.height,0,_e,$e,ne.data);else if(T.isCompressedTexture)if(T.isCompressedArrayTexture){Ge&&pt&&t.texStorage3D(r.TEXTURE_2D_ARRAY,se,Ue,Be[0].width,Be[0].height,ne.depth);for(let Z=0,j=Be.length;Z<j;Z++)if(Me=Be[Z],T.format!==hn)if(_e!==null)if(Ge){if(L)if(T.layerUpdates.size>0){const oe=Vu(Me.width,Me.height,T.format,T.type);for(const qe of T.layerUpdates){const je=Me.data.subarray(qe*oe/Me.data.BYTES_PER_ELEMENT,(qe+1)*oe/Me.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(r.TEXTURE_2D_ARRAY,Z,0,0,qe,Me.width,Me.height,1,_e,je,0,0)}T.clearLayerUpdates()}else t.compressedTexSubImage3D(r.TEXTURE_2D_ARRAY,Z,0,0,0,Me.width,Me.height,ne.depth,_e,Me.data,0,0)}else t.compressedTexImage3D(r.TEXTURE_2D_ARRAY,Z,Ue,Me.width,Me.height,ne.depth,0,Me.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else Ge?L&&t.texSubImage3D(r.TEXTURE_2D_ARRAY,Z,0,0,0,Me.width,Me.height,ne.depth,_e,$e,Me.data):t.texImage3D(r.TEXTURE_2D_ARRAY,Z,Ue,Me.width,Me.height,ne.depth,0,_e,$e,Me.data)}else{Ge&&pt&&t.texStorage2D(r.TEXTURE_2D,se,Ue,Be[0].width,Be[0].height);for(let Z=0,j=Be.length;Z<j;Z++)Me=Be[Z],T.format!==hn?_e!==null?Ge?L&&t.compressedTexSubImage2D(r.TEXTURE_2D,Z,0,0,Me.width,Me.height,_e,Me.data):t.compressedTexImage2D(r.TEXTURE_2D,Z,Ue,Me.width,Me.height,0,Me.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Ge?L&&t.texSubImage2D(r.TEXTURE_2D,Z,0,0,Me.width,Me.height,_e,$e,Me.data):t.texImage2D(r.TEXTURE_2D,Z,Ue,Me.width,Me.height,0,_e,$e,Me.data)}else if(T.isDataArrayTexture)if(Ge){if(pt&&t.texStorage3D(r.TEXTURE_2D_ARRAY,se,Ue,ne.width,ne.height,ne.depth),L)if(T.layerUpdates.size>0){const Z=Vu(ne.width,ne.height,T.format,T.type);for(const j of T.layerUpdates){const oe=ne.data.subarray(j*Z/ne.data.BYTES_PER_ELEMENT,(j+1)*Z/ne.data.BYTES_PER_ELEMENT);t.texSubImage3D(r.TEXTURE_2D_ARRAY,0,0,0,j,ne.width,ne.height,1,_e,$e,oe)}T.clearLayerUpdates()}else t.texSubImage3D(r.TEXTURE_2D_ARRAY,0,0,0,0,ne.width,ne.height,ne.depth,_e,$e,ne.data)}else t.texImage3D(r.TEXTURE_2D_ARRAY,0,Ue,ne.width,ne.height,ne.depth,0,_e,$e,ne.data);else if(T.isData3DTexture)Ge?(pt&&t.texStorage3D(r.TEXTURE_3D,se,Ue,ne.width,ne.height,ne.depth),L&&t.texSubImage3D(r.TEXTURE_3D,0,0,0,0,ne.width,ne.height,ne.depth,_e,$e,ne.data)):t.texImage3D(r.TEXTURE_3D,0,Ue,ne.width,ne.height,ne.depth,0,_e,$e,ne.data);else if(T.isFramebufferTexture){if(pt)if(Ge)t.texStorage2D(r.TEXTURE_2D,se,Ue,ne.width,ne.height);else{let Z=ne.width,j=ne.height;for(let oe=0;oe<se;oe++)t.texImage2D(r.TEXTURE_2D,oe,Ue,Z,j,0,_e,$e,null),Z>>=1,j>>=1}}else if(Be.length>0){if(Ge&&pt){const Z=ye(Be[0]);t.texStorage2D(r.TEXTURE_2D,se,Ue,Z.width,Z.height)}for(let Z=0,j=Be.length;Z<j;Z++)Me=Be[Z],Ge?L&&t.texSubImage2D(r.TEXTURE_2D,Z,0,0,_e,$e,Me):t.texImage2D(r.TEXTURE_2D,Z,Ue,_e,$e,Me);T.generateMipmaps=!1}else if(Ge){if(pt){const Z=ye(ne);t.texStorage2D(r.TEXTURE_2D,se,Ue,Z.width,Z.height)}L&&t.texSubImage2D(r.TEXTURE_2D,0,0,0,_e,$e,ne)}else t.texImage2D(r.TEXTURE_2D,0,Ue,_e,$e,ne);p(T)&&_(J),Re.__version=Q.version,T.onUpdate&&T.onUpdate(T)}I.__version=T.version}function Y(I,T,k){if(T.image.length!==6)return;const J=Ie(I,T),$=T.source;t.bindTexture(r.TEXTURE_CUBE_MAP,I.__webglTexture,r.TEXTURE0+k);const Q=n.get($);if($.version!==Q.__version||J===!0){t.activeTexture(r.TEXTURE0+k);const Re=Ye.getPrimaries(Ye.workingColorSpace),he=T.colorSpace===Ii?null:Ye.getPrimaries(T.colorSpace),xe=T.colorSpace===Ii||Re===he?r.NONE:r.BROWSER_DEFAULT_WEBGL;r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,T.flipY),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,T.premultiplyAlpha),r.pixelStorei(r.UNPACK_ALIGNMENT,T.unpackAlignment),r.pixelStorei(r.UNPACK_COLORSPACE_CONVERSION_WEBGL,xe);const ze=T.isCompressedTexture||T.image[0].isCompressedTexture,ne=T.image[0]&&T.image[0].isDataTexture,_e=[];for(let j=0;j<6;j++)!ze&&!ne?_e[j]=g(T.image[j],!0,i.maxCubemapSize):_e[j]=ne?T.image[j].image:T.image[j],_e[j]=fe(T,_e[j]);const $e=_e[0],Ue=s.convert(T.format,T.colorSpace),Me=s.convert(T.type),Be=y(T.internalFormat,Ue,Me,T.colorSpace),Ge=T.isVideoTexture!==!0,pt=Q.__version===void 0||J===!0,L=$.dataReady;let se=v(T,$e);me(r.TEXTURE_CUBE_MAP,T);let Z;if(ze){Ge&&pt&&t.texStorage2D(r.TEXTURE_CUBE_MAP,se,Be,$e.width,$e.height);for(let j=0;j<6;j++){Z=_e[j].mipmaps;for(let oe=0;oe<Z.length;oe++){const qe=Z[oe];T.format!==hn?Ue!==null?Ge?L&&t.compressedTexSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+j,oe,0,0,qe.width,qe.height,Ue,qe.data):t.compressedTexImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+j,oe,Be,qe.width,qe.height,0,qe.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Ge?L&&t.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+j,oe,0,0,qe.width,qe.height,Ue,Me,qe.data):t.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+j,oe,Be,qe.width,qe.height,0,Ue,Me,qe.data)}}}else{if(Z=T.mipmaps,Ge&&pt){Z.length>0&&se++;const j=ye(_e[0]);t.texStorage2D(r.TEXTURE_CUBE_MAP,se,Be,j.width,j.height)}for(let j=0;j<6;j++)if(ne){Ge?L&&t.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+j,0,0,0,_e[j].width,_e[j].height,Ue,Me,_e[j].data):t.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+j,0,Be,_e[j].width,_e[j].height,0,Ue,Me,_e[j].data);for(let oe=0;oe<Z.length;oe++){const je=Z[oe].image[j].image;Ge?L&&t.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+j,oe+1,0,0,je.width,je.height,Ue,Me,je.data):t.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+j,oe+1,Be,je.width,je.height,0,Ue,Me,je.data)}}else{Ge?L&&t.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+j,0,0,0,Ue,Me,_e[j]):t.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+j,0,Be,Ue,Me,_e[j]);for(let oe=0;oe<Z.length;oe++){const qe=Z[oe];Ge?L&&t.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+j,oe+1,0,0,Ue,Me,qe.image[j]):t.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+j,oe+1,Be,Ue,Me,qe.image[j])}}}p(T)&&_(r.TEXTURE_CUBE_MAP),Q.__version=$.version,T.onUpdate&&T.onUpdate(T)}I.__version=T.version}function ee(I,T,k,J,$,Q){const Re=s.convert(k.format,k.colorSpace),he=s.convert(k.type),xe=y(k.internalFormat,Re,he,k.colorSpace);if(!n.get(T).__hasExternalTextures){const ne=Math.max(1,T.width>>Q),_e=Math.max(1,T.height>>Q);$===r.TEXTURE_3D||$===r.TEXTURE_2D_ARRAY?t.texImage3D($,Q,xe,ne,_e,T.depth,0,Re,he,null):t.texImage2D($,Q,xe,ne,_e,0,Re,he,null)}t.bindFramebuffer(r.FRAMEBUFFER,I),K(T)?o.framebufferTexture2DMultisampleEXT(r.FRAMEBUFFER,J,$,n.get(k).__webglTexture,0,pe(T)):($===r.TEXTURE_2D||$>=r.TEXTURE_CUBE_MAP_POSITIVE_X&&$<=r.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&r.framebufferTexture2D(r.FRAMEBUFFER,J,$,n.get(k).__webglTexture,Q),t.bindFramebuffer(r.FRAMEBUFFER,null)}function ve(I,T,k){if(r.bindRenderbuffer(r.RENDERBUFFER,I),T.depthBuffer){const J=T.depthTexture,$=J&&J.isDepthTexture?J.type:null,Q=x(T.stencilBuffer,$),Re=T.stencilBuffer?r.DEPTH_STENCIL_ATTACHMENT:r.DEPTH_ATTACHMENT,he=pe(T);K(T)?o.renderbufferStorageMultisampleEXT(r.RENDERBUFFER,he,Q,T.width,T.height):k?r.renderbufferStorageMultisample(r.RENDERBUFFER,he,Q,T.width,T.height):r.renderbufferStorage(r.RENDERBUFFER,Q,T.width,T.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,Re,r.RENDERBUFFER,I)}else{const J=T.textures;for(let $=0;$<J.length;$++){const Q=J[$],Re=s.convert(Q.format,Q.colorSpace),he=s.convert(Q.type),xe=y(Q.internalFormat,Re,he,Q.colorSpace),ze=pe(T);k&&K(T)===!1?r.renderbufferStorageMultisample(r.RENDERBUFFER,ze,xe,T.width,T.height):K(T)?o.renderbufferStorageMultisampleEXT(r.RENDERBUFFER,ze,xe,T.width,T.height):r.renderbufferStorage(r.RENDERBUFFER,xe,T.width,T.height)}}r.bindRenderbuffer(r.RENDERBUFFER,null)}function ue(I,T){if(T&&T.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(r.FRAMEBUFFER,I),!(T.depthTexture&&T.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!n.get(T.depthTexture).__webglTexture||T.depthTexture.image.width!==T.width||T.depthTexture.image.height!==T.height)&&(T.depthTexture.image.width=T.width,T.depthTexture.image.height=T.height,T.depthTexture.needsUpdate=!0),z(T.depthTexture,0);const J=n.get(T.depthTexture).__webglTexture,$=pe(T);if(T.depthTexture.format===Ks)K(T)?o.framebufferTexture2DMultisampleEXT(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.TEXTURE_2D,J,0,$):r.framebufferTexture2D(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.TEXTURE_2D,J,0);else if(T.depthTexture.format===nr)K(T)?o.framebufferTexture2DMultisampleEXT(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.TEXTURE_2D,J,0,$):r.framebufferTexture2D(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.TEXTURE_2D,J,0);else throw new Error("Unknown depthTexture format")}function Ce(I){const T=n.get(I),k=I.isWebGLCubeRenderTarget===!0;if(T.__boundDepthTexture!==I.depthTexture){const J=I.depthTexture;if(T.__depthDisposeCallback&&T.__depthDisposeCallback(),J){const $=()=>{delete T.__boundDepthTexture,delete T.__depthDisposeCallback,J.removeEventListener("dispose",$)};J.addEventListener("dispose",$),T.__depthDisposeCallback=$}T.__boundDepthTexture=J}if(I.depthTexture&&!T.__autoAllocateDepthBuffer){if(k)throw new Error("target.depthTexture not supported in Cube render targets");ue(T.__webglFramebuffer,I)}else if(k){T.__webglDepthbuffer=[];for(let J=0;J<6;J++)if(t.bindFramebuffer(r.FRAMEBUFFER,T.__webglFramebuffer[J]),T.__webglDepthbuffer[J]===void 0)T.__webglDepthbuffer[J]=r.createRenderbuffer(),ve(T.__webglDepthbuffer[J],I,!1);else{const $=I.stencilBuffer?r.DEPTH_STENCIL_ATTACHMENT:r.DEPTH_ATTACHMENT,Q=T.__webglDepthbuffer[J];r.bindRenderbuffer(r.RENDERBUFFER,Q),r.framebufferRenderbuffer(r.FRAMEBUFFER,$,r.RENDERBUFFER,Q)}}else if(t.bindFramebuffer(r.FRAMEBUFFER,T.__webglFramebuffer),T.__webglDepthbuffer===void 0)T.__webglDepthbuffer=r.createRenderbuffer(),ve(T.__webglDepthbuffer,I,!1);else{const J=I.stencilBuffer?r.DEPTH_STENCIL_ATTACHMENT:r.DEPTH_ATTACHMENT,$=T.__webglDepthbuffer;r.bindRenderbuffer(r.RENDERBUFFER,$),r.framebufferRenderbuffer(r.FRAMEBUFFER,J,r.RENDERBUFFER,$)}t.bindFramebuffer(r.FRAMEBUFFER,null)}function Fe(I,T,k){const J=n.get(I);T!==void 0&&ee(J.__webglFramebuffer,I,I.texture,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,0),k!==void 0&&Ce(I)}function De(I){const T=I.texture,k=n.get(I),J=n.get(T);I.addEventListener("dispose",b);const $=I.textures,Q=I.isWebGLCubeRenderTarget===!0,Re=$.length>1;if(Re||(J.__webglTexture===void 0&&(J.__webglTexture=r.createTexture()),J.__version=T.version,a.memory.textures++),Q){k.__webglFramebuffer=[];for(let he=0;he<6;he++)if(T.mipmaps&&T.mipmaps.length>0){k.__webglFramebuffer[he]=[];for(let xe=0;xe<T.mipmaps.length;xe++)k.__webglFramebuffer[he][xe]=r.createFramebuffer()}else k.__webglFramebuffer[he]=r.createFramebuffer()}else{if(T.mipmaps&&T.mipmaps.length>0){k.__webglFramebuffer=[];for(let he=0;he<T.mipmaps.length;he++)k.__webglFramebuffer[he]=r.createFramebuffer()}else k.__webglFramebuffer=r.createFramebuffer();if(Re)for(let he=0,xe=$.length;he<xe;he++){const ze=n.get($[he]);ze.__webglTexture===void 0&&(ze.__webglTexture=r.createTexture(),a.memory.textures++)}if(I.samples>0&&K(I)===!1){k.__webglMultisampledFramebuffer=r.createFramebuffer(),k.__webglColorRenderbuffer=[],t.bindFramebuffer(r.FRAMEBUFFER,k.__webglMultisampledFramebuffer);for(let he=0;he<$.length;he++){const xe=$[he];k.__webglColorRenderbuffer[he]=r.createRenderbuffer(),r.bindRenderbuffer(r.RENDERBUFFER,k.__webglColorRenderbuffer[he]);const ze=s.convert(xe.format,xe.colorSpace),ne=s.convert(xe.type),_e=y(xe.internalFormat,ze,ne,xe.colorSpace,I.isXRRenderTarget===!0),$e=pe(I);r.renderbufferStorageMultisample(r.RENDERBUFFER,$e,_e,I.width,I.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+he,r.RENDERBUFFER,k.__webglColorRenderbuffer[he])}r.bindRenderbuffer(r.RENDERBUFFER,null),I.depthBuffer&&(k.__webglDepthRenderbuffer=r.createRenderbuffer(),ve(k.__webglDepthRenderbuffer,I,!0)),t.bindFramebuffer(r.FRAMEBUFFER,null)}}if(Q){t.bindTexture(r.TEXTURE_CUBE_MAP,J.__webglTexture),me(r.TEXTURE_CUBE_MAP,T);for(let he=0;he<6;he++)if(T.mipmaps&&T.mipmaps.length>0)for(let xe=0;xe<T.mipmaps.length;xe++)ee(k.__webglFramebuffer[he][xe],I,T,r.COLOR_ATTACHMENT0,r.TEXTURE_CUBE_MAP_POSITIVE_X+he,xe);else ee(k.__webglFramebuffer[he],I,T,r.COLOR_ATTACHMENT0,r.TEXTURE_CUBE_MAP_POSITIVE_X+he,0);p(T)&&_(r.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(Re){for(let he=0,xe=$.length;he<xe;he++){const ze=$[he],ne=n.get(ze);t.bindTexture(r.TEXTURE_2D,ne.__webglTexture),me(r.TEXTURE_2D,ze),ee(k.__webglFramebuffer,I,ze,r.COLOR_ATTACHMENT0+he,r.TEXTURE_2D,0),p(ze)&&_(r.TEXTURE_2D)}t.unbindTexture()}else{let he=r.TEXTURE_2D;if((I.isWebGL3DRenderTarget||I.isWebGLArrayRenderTarget)&&(he=I.isWebGL3DRenderTarget?r.TEXTURE_3D:r.TEXTURE_2D_ARRAY),t.bindTexture(he,J.__webglTexture),me(he,T),T.mipmaps&&T.mipmaps.length>0)for(let xe=0;xe<T.mipmaps.length;xe++)ee(k.__webglFramebuffer[xe],I,T,r.COLOR_ATTACHMENT0,he,xe);else ee(k.__webglFramebuffer,I,T,r.COLOR_ATTACHMENT0,he,0);p(T)&&_(he),t.unbindTexture()}I.depthBuffer&&Ce(I)}function et(I){const T=I.textures;for(let k=0,J=T.length;k<J;k++){const $=T[k];if(p($)){const Q=I.isWebGLCubeRenderTarget?r.TEXTURE_CUBE_MAP:r.TEXTURE_2D,Re=n.get($).__webglTexture;t.bindTexture(Q,Re),_(Q),t.unbindTexture()}}}const P=[],ie=[];function te(I){if(I.samples>0){if(K(I)===!1){const T=I.textures,k=I.width,J=I.height;let $=r.COLOR_BUFFER_BIT;const Q=I.stencilBuffer?r.DEPTH_STENCIL_ATTACHMENT:r.DEPTH_ATTACHMENT,Re=n.get(I),he=T.length>1;if(he)for(let xe=0;xe<T.length;xe++)t.bindFramebuffer(r.FRAMEBUFFER,Re.__webglMultisampledFramebuffer),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+xe,r.RENDERBUFFER,null),t.bindFramebuffer(r.FRAMEBUFFER,Re.__webglFramebuffer),r.framebufferTexture2D(r.DRAW_FRAMEBUFFER,r.COLOR_ATTACHMENT0+xe,r.TEXTURE_2D,null,0);t.bindFramebuffer(r.READ_FRAMEBUFFER,Re.__webglMultisampledFramebuffer),t.bindFramebuffer(r.DRAW_FRAMEBUFFER,Re.__webglFramebuffer);for(let xe=0;xe<T.length;xe++){if(I.resolveDepthBuffer&&(I.depthBuffer&&($|=r.DEPTH_BUFFER_BIT),I.stencilBuffer&&I.resolveStencilBuffer&&($|=r.STENCIL_BUFFER_BIT)),he){r.framebufferRenderbuffer(r.READ_FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.RENDERBUFFER,Re.__webglColorRenderbuffer[xe]);const ze=n.get(T[xe]).__webglTexture;r.framebufferTexture2D(r.DRAW_FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,ze,0)}r.blitFramebuffer(0,0,k,J,0,0,k,J,$,r.NEAREST),l===!0&&(P.length=0,ie.length=0,P.push(r.COLOR_ATTACHMENT0+xe),I.depthBuffer&&I.resolveDepthBuffer===!1&&(P.push(Q),ie.push(Q),r.invalidateFramebuffer(r.DRAW_FRAMEBUFFER,ie)),r.invalidateFramebuffer(r.READ_FRAMEBUFFER,P))}if(t.bindFramebuffer(r.READ_FRAMEBUFFER,null),t.bindFramebuffer(r.DRAW_FRAMEBUFFER,null),he)for(let xe=0;xe<T.length;xe++){t.bindFramebuffer(r.FRAMEBUFFER,Re.__webglMultisampledFramebuffer),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+xe,r.RENDERBUFFER,Re.__webglColorRenderbuffer[xe]);const ze=n.get(T[xe]).__webglTexture;t.bindFramebuffer(r.FRAMEBUFFER,Re.__webglFramebuffer),r.framebufferTexture2D(r.DRAW_FRAMEBUFFER,r.COLOR_ATTACHMENT0+xe,r.TEXTURE_2D,ze,0)}t.bindFramebuffer(r.DRAW_FRAMEBUFFER,Re.__webglMultisampledFramebuffer)}else if(I.depthBuffer&&I.resolveDepthBuffer===!1&&l){const T=I.stencilBuffer?r.DEPTH_STENCIL_ATTACHMENT:r.DEPTH_ATTACHMENT;r.invalidateFramebuffer(r.DRAW_FRAMEBUFFER,[T])}}}function pe(I){return Math.min(i.maxSamples,I.samples)}function K(I){const T=n.get(I);return I.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&T.__useRenderToTexture!==!1}function Pe(I){const T=a.render.frame;h.get(I)!==T&&(h.set(I,T),I.update())}function fe(I,T){const k=I.colorSpace,J=I.format,$=I.type;return I.isCompressedTexture===!0||I.isVideoTexture===!0||k!==Ht&&k!==Ii&&(Ye.getTransfer(k)===ot?(J!==hn||$!==gi)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",k)),T}function ye(I){return typeof HTMLImageElement<"u"&&I instanceof HTMLImageElement?(c.width=I.naturalWidth||I.width,c.height=I.naturalHeight||I.height):typeof VideoFrame<"u"&&I instanceof VideoFrame?(c.width=I.displayWidth,c.height=I.displayHeight):(c.width=I.width,c.height=I.height),c}this.allocateTextureUnit=O,this.resetTextureUnits=q,this.setTexture2D=z,this.setTexture2DArray=V,this.setTexture3D=F,this.setTextureCube=X,this.rebindTextures=Fe,this.setupRenderTarget=De,this.updateRenderTargetMipmap=et,this.updateMultisampleRenderTarget=te,this.setupDepthRenderbuffer=Ce,this.setupFrameBufferTexture=ee,this.useMultisampledRTT=K}function sm(r,e){function t(n,i=Ii){let s;const a=Ye.getTransfer(i);if(n===gi)return r.UNSIGNED_BYTE;if(n===Kc)return r.UNSIGNED_SHORT_4_4_4_4;if(n===Zc)return r.UNSIGNED_SHORT_5_5_5_1;if(n===Ef)return r.UNSIGNED_INT_5_9_9_9_REV;if(n===Af)return r.BYTE;if(n===wf)return r.SHORT;if(n===ta)return r.UNSIGNED_SHORT;if(n===Yc)return r.INT;if(n===Ui)return r.UNSIGNED_INT;if(n===_n)return r.FLOAT;if(n===ui)return r.HALF_FLOAT;if(n===Rf)return r.ALPHA;if(n===Cf)return r.RGB;if(n===hn)return r.RGBA;if(n===Pf)return r.LUMINANCE;if(n===If)return r.LUMINANCE_ALPHA;if(n===Ks)return r.DEPTH_COMPONENT;if(n===nr)return r.DEPTH_STENCIL;if(n===$c)return r.RED;if(n===Lo)return r.RED_INTEGER;if(n===qf)return r.RG;if(n===Jc)return r.RG_INTEGER;if(n===jc)return r.RGBA_INTEGER;if(n===Va||n===Ga||n===Wa||n===Xa)if(a===ot)if(s=e.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(n===Va)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===Ga)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===Wa)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===Xa)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=e.get("WEBGL_compressed_texture_s3tc"),s!==null){if(n===Va)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===Ga)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===Wa)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===Xa)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(n===sc||n===rc||n===ac||n===oc)if(s=e.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(n===sc)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===rc)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===ac)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===oc)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(n===lc||n===cc||n===hc)if(s=e.get("WEBGL_compressed_texture_etc"),s!==null){if(n===lc||n===cc)return a===ot?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(n===hc)return a===ot?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(n===uc||n===fc||n===dc||n===pc||n===mc||n===gc||n===_c||n===xc||n===yc||n===vc||n===Mc||n===Sc||n===bc||n===Tc)if(s=e.get("WEBGL_compressed_texture_astc"),s!==null){if(n===uc)return a===ot?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===fc)return a===ot?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===dc)return a===ot?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===pc)return a===ot?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===mc)return a===ot?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===gc)return a===ot?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===_c)return a===ot?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===xc)return a===ot?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===yc)return a===ot?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===vc)return a===ot?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===Mc)return a===ot?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===Sc)return a===ot?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===bc)return a===ot?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===Tc)return a===ot?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(n===Ya||n===Ac||n===wc)if(s=e.get("EXT_texture_compression_bptc"),s!==null){if(n===Ya)return a===ot?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(n===Ac)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(n===wc)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(n===Lf||n===Ec||n===Rc||n===Cc)if(s=e.get("EXT_texture_compression_rgtc"),s!==null){if(n===Ya)return s.COMPRESSED_RED_RGTC1_EXT;if(n===Ec)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(n===Rc)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(n===Cc)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return n===tr?r.UNSIGNED_INT_24_8:r[n]!==void 0?r[n]:null}return{convert:t}}class rm extends Lt{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class li extends Xe{constructor(){super(),this.isGroup=!0,this.type="Group"}}const px={type:"move"};class su{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new li,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new li,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new R,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new R),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new li,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new R,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new R),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const n of e.hand.values())this._getHandJoint(t,n)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,n){let i=null,s=null,a=null;const o=this._targetRay,l=this._grip,c=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(c&&e.hand){a=!0;for(const g of e.hand.values()){const p=t.getJointPose(g,n),_=this._getHandJoint(c,g);p!==null&&(_.matrix.fromArray(p.transform.matrix),_.matrix.decompose(_.position,_.rotation,_.scale),_.matrixWorldNeedsUpdate=!0,_.jointRadius=p.radius),_.visible=p!==null}const h=c.joints["index-finger-tip"],u=c.joints["thumb-tip"],f=h.position.distanceTo(u.position),d=.02,m=.005;c.inputState.pinching&&f>d+m?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&f<=d-m&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,n),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));o!==null&&(i=t.getPose(e.targetRaySpace,n),i===null&&s!==null&&(i=s),i!==null&&(o.matrix.fromArray(i.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),o.matrixWorldNeedsUpdate=!0,i.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(i.linearVelocity)):o.hasLinearVelocity=!1,i.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(i.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(px)))}return o!==null&&(o.visible=i!==null),l!==null&&(l.visible=s!==null),c!==null&&(c.visible=a!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const n=new li;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}}const mx=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,gx=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class _x{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,n){if(this.texture===null){const i=new dt,s=e.properties.get(i);s.__webglTexture=t.texture,(t.depthNear!=n.depthNear||t.depthFar!=n.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=i}}getMesh(e){if(this.texture!==null&&this.mesh===null){const t=e.cameras[0].viewport,n=new kt({vertexShader:mx,fragmentShader:gx,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new ct(new pr(20,20),n)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class xx extends xi{constructor(e,t){super();const n=this;let i=null,s=1,a=null,o="local-floor",l=1,c=null,h=null,u=null,f=null,d=null,m=null;const g=new _x,p=t.getContextAttributes();let _=null,y=null;const x=[],v=[],w=new G;let b=null;const A=new Lt;A.layers.enable(1),A.viewport=new rt;const C=new Lt;C.layers.enable(2),C.viewport=new rt;const M=[A,C],S=new rm;S.layers.enable(1),S.layers.enable(2);let q=null,O=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(Y){let ee=x[Y];return ee===void 0&&(ee=new su,x[Y]=ee),ee.getTargetRaySpace()},this.getControllerGrip=function(Y){let ee=x[Y];return ee===void 0&&(ee=new su,x[Y]=ee),ee.getGripSpace()},this.getHand=function(Y){let ee=x[Y];return ee===void 0&&(ee=new su,x[Y]=ee),ee.getHandSpace()};function N(Y){const ee=v.indexOf(Y.inputSource);if(ee===-1)return;const ve=x[ee];ve!==void 0&&(ve.update(Y.inputSource,Y.frame,c||a),ve.dispatchEvent({type:Y.type,data:Y.inputSource}))}function z(){i.removeEventListener("select",N),i.removeEventListener("selectstart",N),i.removeEventListener("selectend",N),i.removeEventListener("squeeze",N),i.removeEventListener("squeezestart",N),i.removeEventListener("squeezeend",N),i.removeEventListener("end",z),i.removeEventListener("inputsourceschange",V);for(let Y=0;Y<x.length;Y++){const ee=v[Y];ee!==null&&(v[Y]=null,x[Y].disconnect(ee))}q=null,O=null,g.reset(),e.setRenderTarget(_),d=null,f=null,u=null,i=null,y=null,Ze.stop(),n.isPresenting=!1,e.setPixelRatio(b),e.setSize(w.width,w.height,!1),n.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(Y){s=Y,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(Y){o=Y,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||a},this.setReferenceSpace=function(Y){c=Y},this.getBaseLayer=function(){return f!==null?f:d},this.getBinding=function(){return u},this.getFrame=function(){return m},this.getSession=function(){return i},this.setSession=async function(Y){if(i=Y,i!==null){if(_=e.getRenderTarget(),i.addEventListener("select",N),i.addEventListener("selectstart",N),i.addEventListener("selectend",N),i.addEventListener("squeeze",N),i.addEventListener("squeezestart",N),i.addEventListener("squeezeend",N),i.addEventListener("end",z),i.addEventListener("inputsourceschange",V),p.xrCompatible!==!0&&await t.makeXRCompatible(),b=e.getPixelRatio(),e.getSize(w),i.renderState.layers===void 0){const ee={antialias:p.antialias,alpha:!0,depth:p.depth,stencil:p.stencil,framebufferScaleFactor:s};d=new XRWebGLLayer(i,t,ee),i.updateRenderState({baseLayer:d}),e.setPixelRatio(1),e.setSize(d.framebufferWidth,d.framebufferHeight,!1),y=new fn(d.framebufferWidth,d.framebufferHeight,{format:hn,type:gi,colorSpace:e.outputColorSpace,stencilBuffer:p.stencil})}else{let ee=null,ve=null,ue=null;p.depth&&(ue=p.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,ee=p.stencil?nr:Ks,ve=p.stencil?tr:Ui);const Ce={colorFormat:t.RGBA8,depthFormat:ue,scaleFactor:s};u=new XRWebGLBinding(i,t),f=u.createProjectionLayer(Ce),i.updateRenderState({layers:[f]}),e.setPixelRatio(1),e.setSize(f.textureWidth,f.textureHeight,!1),y=new fn(f.textureWidth,f.textureHeight,{format:hn,type:gi,depthTexture:new Vf(f.textureWidth,f.textureHeight,ve,void 0,void 0,void 0,void 0,void 0,void 0,ee),stencilBuffer:p.stencil,colorSpace:e.outputColorSpace,samples:p.antialias?4:0,resolveDepthBuffer:f.ignoreDepthValues===!1})}y.isXRRenderTarget=!0,this.setFoveation(l),c=null,a=await i.requestReferenceSpace(o),Ze.setContext(i),Ze.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(i!==null)return i.environmentBlendMode},this.getDepthTexture=function(){return g.getDepthTexture()};function V(Y){for(let ee=0;ee<Y.removed.length;ee++){const ve=Y.removed[ee],ue=v.indexOf(ve);ue>=0&&(v[ue]=null,x[ue].disconnect(ve))}for(let ee=0;ee<Y.added.length;ee++){const ve=Y.added[ee];let ue=v.indexOf(ve);if(ue===-1){for(let Fe=0;Fe<x.length;Fe++)if(Fe>=v.length){v.push(ve),ue=Fe;break}else if(v[Fe]===null){v[Fe]=ve,ue=Fe;break}if(ue===-1)break}const Ce=x[ue];Ce&&Ce.connect(ve)}}const F=new R,X=new R;function W(Y,ee,ve){F.setFromMatrixPosition(ee.matrixWorld),X.setFromMatrixPosition(ve.matrixWorld);const ue=F.distanceTo(X),Ce=ee.projectionMatrix.elements,Fe=ve.projectionMatrix.elements,De=Ce[14]/(Ce[10]-1),et=Ce[14]/(Ce[10]+1),P=(Ce[9]+1)/Ce[5],ie=(Ce[9]-1)/Ce[5],te=(Ce[8]-1)/Ce[0],pe=(Fe[8]+1)/Fe[0],K=De*te,Pe=De*pe,fe=ue/(-te+pe),ye=fe*-te;if(ee.matrixWorld.decompose(Y.position,Y.quaternion,Y.scale),Y.translateX(ye),Y.translateZ(fe),Y.matrixWorld.compose(Y.position,Y.quaternion,Y.scale),Y.matrixWorldInverse.copy(Y.matrixWorld).invert(),Ce[10]===-1)Y.projectionMatrix.copy(ee.projectionMatrix),Y.projectionMatrixInverse.copy(ee.projectionMatrixInverse);else{const I=De+fe,T=et+fe,k=K-ye,J=Pe+(ue-ye),$=P*et/T*I,Q=ie*et/T*I;Y.projectionMatrix.makePerspective(k,J,$,Q,I,T),Y.projectionMatrixInverse.copy(Y.projectionMatrix).invert()}}function le(Y,ee){ee===null?Y.matrixWorld.copy(Y.matrix):Y.matrixWorld.multiplyMatrices(ee.matrixWorld,Y.matrix),Y.matrixWorldInverse.copy(Y.matrixWorld).invert()}this.updateCamera=function(Y){if(i===null)return;let ee=Y.near,ve=Y.far;g.texture!==null&&(g.depthNear>0&&(ee=g.depthNear),g.depthFar>0&&(ve=g.depthFar)),S.near=C.near=A.near=ee,S.far=C.far=A.far=ve,(q!==S.near||O!==S.far)&&(i.updateRenderState({depthNear:S.near,depthFar:S.far}),q=S.near,O=S.far);const ue=Y.parent,Ce=S.cameras;le(S,ue);for(let Fe=0;Fe<Ce.length;Fe++)le(Ce[Fe],ue);Ce.length===2?W(S,A,C):S.projectionMatrix.copy(A.projectionMatrix),de(Y,S,ue)};function de(Y,ee,ve){ve===null?Y.matrix.copy(ee.matrixWorld):(Y.matrix.copy(ve.matrixWorld),Y.matrix.invert(),Y.matrix.multiply(ee.matrixWorld)),Y.matrix.decompose(Y.position,Y.quaternion,Y.scale),Y.updateMatrixWorld(!0),Y.projectionMatrix.copy(ee.projectionMatrix),Y.projectionMatrixInverse.copy(ee.projectionMatrixInverse),Y.isPerspectiveCamera&&(Y.fov=sa*2*Math.atan(1/Y.projectionMatrix.elements[5]),Y.zoom=1)}this.getCamera=function(){return S},this.getFoveation=function(){if(!(f===null&&d===null))return l},this.setFoveation=function(Y){l=Y,f!==null&&(f.fixedFoveation=Y),d!==null&&d.fixedFoveation!==void 0&&(d.fixedFoveation=Y)},this.hasDepthSensing=function(){return g.texture!==null},this.getDepthSensingMesh=function(){return g.getMesh(S)};let me=null;function Ie(Y,ee){if(h=ee.getViewerPose(c||a),m=ee,h!==null){const ve=h.views;d!==null&&(e.setRenderTargetFramebuffer(y,d.framebuffer),e.setRenderTarget(y));let ue=!1;ve.length!==S.cameras.length&&(S.cameras.length=0,ue=!0);for(let Fe=0;Fe<ve.length;Fe++){const De=ve[Fe];let et=null;if(d!==null)et=d.getViewport(De);else{const ie=u.getViewSubImage(f,De);et=ie.viewport,Fe===0&&(e.setRenderTargetTextures(y,ie.colorTexture,f.ignoreDepthValues?void 0:ie.depthStencilTexture),e.setRenderTarget(y))}let P=M[Fe];P===void 0&&(P=new Lt,P.layers.enable(Fe),P.viewport=new rt,M[Fe]=P),P.matrix.fromArray(De.transform.matrix),P.matrix.decompose(P.position,P.quaternion,P.scale),P.projectionMatrix.fromArray(De.projectionMatrix),P.projectionMatrixInverse.copy(P.projectionMatrix).invert(),P.viewport.set(et.x,et.y,et.width,et.height),Fe===0&&(S.matrix.copy(P.matrix),S.matrix.decompose(S.position,S.quaternion,S.scale)),ue===!0&&S.cameras.push(P)}const Ce=i.enabledFeatures;if(Ce&&Ce.includes("depth-sensing")){const Fe=u.getDepthInformation(ve[0]);Fe&&Fe.isValid&&Fe.texture&&g.init(e,Fe,i.renderState)}}for(let ve=0;ve<x.length;ve++){const ue=v[ve],Ce=x[ve];ue!==null&&Ce!==void 0&&Ce.update(ue,ee,c||a)}me&&me(Y,ee),ee.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:ee}),m=null}const Ze=new Q0;Ze.setAnimationLoop(Ie),this.setAnimationLoop=function(Y){me=Y},this.dispose=function(){}}}const Ss=new Dn,yx=new Ee;function vx(r,e){function t(p,_){p.matrixAutoUpdate===!0&&p.updateMatrix(),_.value.copy(p.matrix)}function n(p,_){_.color.getRGB(p.fogColor.value,$0(r)),_.isFog?(p.fogNear.value=_.near,p.fogFar.value=_.far):_.isFogExp2&&(p.fogDensity.value=_.density)}function i(p,_,y,x,v){_.isMeshBasicMaterial||_.isMeshLambertMaterial?s(p,_):_.isMeshToonMaterial?(s(p,_),u(p,_)):_.isMeshPhongMaterial?(s(p,_),h(p,_)):_.isMeshStandardMaterial?(s(p,_),f(p,_),_.isMeshPhysicalMaterial&&d(p,_,v)):_.isMeshMatcapMaterial?(s(p,_),m(p,_)):_.isMeshDepthMaterial?s(p,_):_.isMeshDistanceMaterial?(s(p,_),g(p,_)):_.isMeshNormalMaterial?s(p,_):_.isLineBasicMaterial?(a(p,_),_.isLineDashedMaterial&&o(p,_)):_.isPointsMaterial?l(p,_,y,x):_.isSpriteMaterial?c(p,_):_.isShadowMaterial?(p.color.value.copy(_.color),p.opacity.value=_.opacity):_.isShaderMaterial&&(_.uniformsNeedUpdate=!1)}function s(p,_){p.opacity.value=_.opacity,_.color&&p.diffuse.value.copy(_.color),_.emissive&&p.emissive.value.copy(_.emissive).multiplyScalar(_.emissiveIntensity),_.map&&(p.map.value=_.map,t(_.map,p.mapTransform)),_.alphaMap&&(p.alphaMap.value=_.alphaMap,t(_.alphaMap,p.alphaMapTransform)),_.bumpMap&&(p.bumpMap.value=_.bumpMap,t(_.bumpMap,p.bumpMapTransform),p.bumpScale.value=_.bumpScale,_.side===un&&(p.bumpScale.value*=-1)),_.normalMap&&(p.normalMap.value=_.normalMap,t(_.normalMap,p.normalMapTransform),p.normalScale.value.copy(_.normalScale),_.side===un&&p.normalScale.value.negate()),_.displacementMap&&(p.displacementMap.value=_.displacementMap,t(_.displacementMap,p.displacementMapTransform),p.displacementScale.value=_.displacementScale,p.displacementBias.value=_.displacementBias),_.emissiveMap&&(p.emissiveMap.value=_.emissiveMap,t(_.emissiveMap,p.emissiveMapTransform)),_.specularMap&&(p.specularMap.value=_.specularMap,t(_.specularMap,p.specularMapTransform)),_.alphaTest>0&&(p.alphaTest.value=_.alphaTest);const y=e.get(_),x=y.envMap,v=y.envMapRotation;x&&(p.envMap.value=x,Ss.copy(v),Ss.x*=-1,Ss.y*=-1,Ss.z*=-1,x.isCubeTexture&&x.isRenderTargetTexture===!1&&(Ss.y*=-1,Ss.z*=-1),p.envMapRotation.value.setFromMatrix4(yx.makeRotationFromEuler(Ss)),p.flipEnvMap.value=x.isCubeTexture&&x.isRenderTargetTexture===!1?-1:1,p.reflectivity.value=_.reflectivity,p.ior.value=_.ior,p.refractionRatio.value=_.refractionRatio),_.lightMap&&(p.lightMap.value=_.lightMap,p.lightMapIntensity.value=_.lightMapIntensity,t(_.lightMap,p.lightMapTransform)),_.aoMap&&(p.aoMap.value=_.aoMap,p.aoMapIntensity.value=_.aoMapIntensity,t(_.aoMap,p.aoMapTransform))}function a(p,_){p.diffuse.value.copy(_.color),p.opacity.value=_.opacity,_.map&&(p.map.value=_.map,t(_.map,p.mapTransform))}function o(p,_){p.dashSize.value=_.dashSize,p.totalSize.value=_.dashSize+_.gapSize,p.scale.value=_.scale}function l(p,_,y,x){p.diffuse.value.copy(_.color),p.opacity.value=_.opacity,p.size.value=_.size*y,p.scale.value=x*.5,_.map&&(p.map.value=_.map,t(_.map,p.uvTransform)),_.alphaMap&&(p.alphaMap.value=_.alphaMap,t(_.alphaMap,p.alphaMapTransform)),_.alphaTest>0&&(p.alphaTest.value=_.alphaTest)}function c(p,_){p.diffuse.value.copy(_.color),p.opacity.value=_.opacity,p.rotation.value=_.rotation,_.map&&(p.map.value=_.map,t(_.map,p.mapTransform)),_.alphaMap&&(p.alphaMap.value=_.alphaMap,t(_.alphaMap,p.alphaMapTransform)),_.alphaTest>0&&(p.alphaTest.value=_.alphaTest)}function h(p,_){p.specular.value.copy(_.specular),p.shininess.value=Math.max(_.shininess,1e-4)}function u(p,_){_.gradientMap&&(p.gradientMap.value=_.gradientMap)}function f(p,_){p.metalness.value=_.metalness,_.metalnessMap&&(p.metalnessMap.value=_.metalnessMap,t(_.metalnessMap,p.metalnessMapTransform)),p.roughness.value=_.roughness,_.roughnessMap&&(p.roughnessMap.value=_.roughnessMap,t(_.roughnessMap,p.roughnessMapTransform)),_.envMap&&(p.envMapIntensity.value=_.envMapIntensity)}function d(p,_,y){p.ior.value=_.ior,_.sheen>0&&(p.sheenColor.value.copy(_.sheenColor).multiplyScalar(_.sheen),p.sheenRoughness.value=_.sheenRoughness,_.sheenColorMap&&(p.sheenColorMap.value=_.sheenColorMap,t(_.sheenColorMap,p.sheenColorMapTransform)),_.sheenRoughnessMap&&(p.sheenRoughnessMap.value=_.sheenRoughnessMap,t(_.sheenRoughnessMap,p.sheenRoughnessMapTransform))),_.clearcoat>0&&(p.clearcoat.value=_.clearcoat,p.clearcoatRoughness.value=_.clearcoatRoughness,_.clearcoatMap&&(p.clearcoatMap.value=_.clearcoatMap,t(_.clearcoatMap,p.clearcoatMapTransform)),_.clearcoatRoughnessMap&&(p.clearcoatRoughnessMap.value=_.clearcoatRoughnessMap,t(_.clearcoatRoughnessMap,p.clearcoatRoughnessMapTransform)),_.clearcoatNormalMap&&(p.clearcoatNormalMap.value=_.clearcoatNormalMap,t(_.clearcoatNormalMap,p.clearcoatNormalMapTransform),p.clearcoatNormalScale.value.copy(_.clearcoatNormalScale),_.side===un&&p.clearcoatNormalScale.value.negate())),_.dispersion>0&&(p.dispersion.value=_.dispersion),_.iridescence>0&&(p.iridescence.value=_.iridescence,p.iridescenceIOR.value=_.iridescenceIOR,p.iridescenceThicknessMinimum.value=_.iridescenceThicknessRange[0],p.iridescenceThicknessMaximum.value=_.iridescenceThicknessRange[1],_.iridescenceMap&&(p.iridescenceMap.value=_.iridescenceMap,t(_.iridescenceMap,p.iridescenceMapTransform)),_.iridescenceThicknessMap&&(p.iridescenceThicknessMap.value=_.iridescenceThicknessMap,t(_.iridescenceThicknessMap,p.iridescenceThicknessMapTransform))),_.transmission>0&&(p.transmission.value=_.transmission,p.transmissionSamplerMap.value=y.texture,p.transmissionSamplerSize.value.set(y.width,y.height),_.transmissionMap&&(p.transmissionMap.value=_.transmissionMap,t(_.transmissionMap,p.transmissionMapTransform)),p.thickness.value=_.thickness,_.thicknessMap&&(p.thicknessMap.value=_.thicknessMap,t(_.thicknessMap,p.thicknessMapTransform)),p.attenuationDistance.value=_.attenuationDistance,p.attenuationColor.value.copy(_.attenuationColor)),_.anisotropy>0&&(p.anisotropyVector.value.set(_.anisotropy*Math.cos(_.anisotropyRotation),_.anisotropy*Math.sin(_.anisotropyRotation)),_.anisotropyMap&&(p.anisotropyMap.value=_.anisotropyMap,t(_.anisotropyMap,p.anisotropyMapTransform))),p.specularIntensity.value=_.specularIntensity,p.specularColor.value.copy(_.specularColor),_.specularColorMap&&(p.specularColorMap.value=_.specularColorMap,t(_.specularColorMap,p.specularColorMapTransform)),_.specularIntensityMap&&(p.specularIntensityMap.value=_.specularIntensityMap,t(_.specularIntensityMap,p.specularIntensityMapTransform))}function m(p,_){_.matcap&&(p.matcap.value=_.matcap)}function g(p,_){const y=e.get(_).light;p.referencePosition.value.setFromMatrixPosition(y.matrixWorld),p.nearDistance.value=y.shadow.camera.near,p.farDistance.value=y.shadow.camera.far}return{refreshFogUniforms:n,refreshMaterialUniforms:i}}function Mx(r,e,t,n){let i={},s={},a=[];const o=r.getParameter(r.MAX_UNIFORM_BUFFER_BINDINGS);function l(y,x){const v=x.program;n.uniformBlockBinding(y,v)}function c(y,x){let v=i[y.id];v===void 0&&(m(y),v=h(y),i[y.id]=v,y.addEventListener("dispose",p));const w=x.program;n.updateUBOMapping(y,w);const b=e.render.frame;s[y.id]!==b&&(f(y),s[y.id]=b)}function h(y){const x=u();y.__bindingPointIndex=x;const v=r.createBuffer(),w=y.__size,b=y.usage;return r.bindBuffer(r.UNIFORM_BUFFER,v),r.bufferData(r.UNIFORM_BUFFER,w,b),r.bindBuffer(r.UNIFORM_BUFFER,null),r.bindBufferBase(r.UNIFORM_BUFFER,x,v),v}function u(){for(let y=0;y<o;y++)if(a.indexOf(y)===-1)return a.push(y),y;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function f(y){const x=i[y.id],v=y.uniforms,w=y.__cache;r.bindBuffer(r.UNIFORM_BUFFER,x);for(let b=0,A=v.length;b<A;b++){const C=Array.isArray(v[b])?v[b]:[v[b]];for(let M=0,S=C.length;M<S;M++){const q=C[M];if(d(q,b,M,w)===!0){const O=q.__offset,N=Array.isArray(q.value)?q.value:[q.value];let z=0;for(let V=0;V<N.length;V++){const F=N[V],X=g(F);typeof F=="number"||typeof F=="boolean"?(q.__data[0]=F,r.bufferSubData(r.UNIFORM_BUFFER,O+z,q.__data)):F.isMatrix3?(q.__data[0]=F.elements[0],q.__data[1]=F.elements[1],q.__data[2]=F.elements[2],q.__data[3]=0,q.__data[4]=F.elements[3],q.__data[5]=F.elements[4],q.__data[6]=F.elements[5],q.__data[7]=0,q.__data[8]=F.elements[6],q.__data[9]=F.elements[7],q.__data[10]=F.elements[8],q.__data[11]=0):(F.toArray(q.__data,z),z+=X.storage/Float32Array.BYTES_PER_ELEMENT)}r.bufferSubData(r.UNIFORM_BUFFER,O,q.__data)}}}r.bindBuffer(r.UNIFORM_BUFFER,null)}function d(y,x,v,w){const b=y.value,A=x+"_"+v;if(w[A]===void 0)return typeof b=="number"||typeof b=="boolean"?w[A]=b:w[A]=b.clone(),!0;{const C=w[A];if(typeof b=="number"||typeof b=="boolean"){if(C!==b)return w[A]=b,!0}else if(C.equals(b)===!1)return C.copy(b),!0}return!1}function m(y){const x=y.uniforms;let v=0;const w=16;for(let A=0,C=x.length;A<C;A++){const M=Array.isArray(x[A])?x[A]:[x[A]];for(let S=0,q=M.length;S<q;S++){const O=M[S],N=Array.isArray(O.value)?O.value:[O.value];for(let z=0,V=N.length;z<V;z++){const F=N[z],X=g(F),W=v%w,le=W%X.boundary,de=W+le;v+=le,de!==0&&w-de<X.storage&&(v+=w-de),O.__data=new Float32Array(X.storage/Float32Array.BYTES_PER_ELEMENT),O.__offset=v,v+=X.storage}}}const b=v%w;return b>0&&(v+=w-b),y.__size=v,y.__cache={},this}function g(y){const x={boundary:0,storage:0};return typeof y=="number"||typeof y=="boolean"?(x.boundary=4,x.storage=4):y.isVector2?(x.boundary=8,x.storage=8):y.isVector3||y.isColor?(x.boundary=16,x.storage=12):y.isVector4?(x.boundary=16,x.storage=16):y.isMatrix3?(x.boundary=48,x.storage=48):y.isMatrix4?(x.boundary=64,x.storage=64):y.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",y),x}function p(y){const x=y.target;x.removeEventListener("dispose",p);const v=a.indexOf(x.__bindingPointIndex);a.splice(v,1),r.deleteBuffer(i[x.id]),delete i[x.id],delete s[x.id]}function _(){for(const y in i)r.deleteBuffer(i[y]);a=[],i={},s={}}return{bind:l,update:c,dispose:_}}class am{constructor(e={}){const{canvas:t=X0(),context:n=null,depth:i=!0,stencil:s=!1,alpha:a=!1,antialias:o=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:c=!1,powerPreference:h="default",failIfMajorPerformanceCaveat:u=!1}=e;this.isWebGLRenderer=!0;let f;if(n!==null){if(typeof WebGLRenderingContext<"u"&&n instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");f=n.getContextAttributes().alpha}else f=a;const d=new Uint32Array(4),m=new Int32Array(4);let g=null,p=null;const _=[],y=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=Xt,this.toneMapping=Di,this.toneMappingExposure=1;const x=this;let v=!1,w=0,b=0,A=null,C=-1,M=null;const S=new rt,q=new rt;let O=null;const N=new ae(0);let z=0,V=t.width,F=t.height,X=1,W=null,le=null;const de=new rt(0,0,V,F),me=new rt(0,0,V,F);let Ie=!1;const Ze=new Uo;let Y=!1,ee=!1;const ve=new Ee,ue=new R,Ce=new rt,Fe={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let De=!1;function et(){return A===null?X:1}let P=n;function ie(E,D){return t.getContext(E,D)}try{const E={alpha:!0,depth:i,stencil:s,antialias:o,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:h,failIfMajorPerformanceCaveat:u};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${Gc}`),t.addEventListener("webglcontextlost",Z,!1),t.addEventListener("webglcontextrestored",j,!1),t.addEventListener("webglcontextcreationerror",oe,!1),P===null){const D="webgl2";if(P=ie(D,E),P===null)throw ie(D)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(E){throw console.error("THREE.WebGLRenderer: "+E.message),E}let te,pe,K,Pe,fe,ye,I,T,k,J,$,Q,Re,he,xe,ze,ne,_e,$e,Ue,Me,Be,Ge,pt;function L(){te=new R8(P),te.init(),Be=new sm(P,te),pe=new S8(P,te,e,Be),K=new ox(P),Pe=new I8(P),fe=new Z3,ye=new dx(P,te,K,fe,pe,Be,Pe),I=new T8(x),T=new E8(x),k=new Fg(P),Ge=new v8(P,k),J=new C8(P,k,Pe,Ge),$=new L8(P,J,k,Pe),$e=new q8(P,pe,ye),ze=new b8(fe),Q=new K3(x,I,T,te,pe,Ge,ze),Re=new vx(x,fe),he=new J3,xe=new ix(te),_e=new y8(x,I,T,K,$,f,l),ne=new ax(x,$,pe),pt=new Mx(P,Pe,pe,K),Ue=new M8(P,te,Pe),Me=new P8(P,te,Pe),Pe.programs=Q.programs,x.capabilities=pe,x.extensions=te,x.properties=fe,x.renderLists=he,x.shadowMap=ne,x.state=K,x.info=Pe}L();const se=new xx(x,P);this.xr=se,this.getContext=function(){return P},this.getContextAttributes=function(){return P.getContextAttributes()},this.forceContextLoss=function(){const E=te.get("WEBGL_lose_context");E&&E.loseContext()},this.forceContextRestore=function(){const E=te.get("WEBGL_lose_context");E&&E.restoreContext()},this.getPixelRatio=function(){return X},this.setPixelRatio=function(E){E!==void 0&&(X=E,this.setSize(V,F,!1))},this.getSize=function(E){return E.set(V,F)},this.setSize=function(E,D,B=!0){if(se.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}V=E,F=D,t.width=Math.floor(E*X),t.height=Math.floor(D*X),B===!0&&(t.style.width=E+"px",t.style.height=D+"px"),this.setViewport(0,0,E,D)},this.getDrawingBufferSize=function(E){return E.set(V*X,F*X).floor()},this.setDrawingBufferSize=function(E,D,B){V=E,F=D,X=B,t.width=Math.floor(E*B),t.height=Math.floor(D*B),this.setViewport(0,0,E,D)},this.getCurrentViewport=function(E){return E.copy(S)},this.getViewport=function(E){return E.copy(de)},this.setViewport=function(E,D,B,H){E.isVector4?de.set(E.x,E.y,E.z,E.w):de.set(E,D,B,H),K.viewport(S.copy(de).multiplyScalar(X).round())},this.getScissor=function(E){return E.copy(me)},this.setScissor=function(E,D,B,H){E.isVector4?me.set(E.x,E.y,E.z,E.w):me.set(E,D,B,H),K.scissor(q.copy(me).multiplyScalar(X).round())},this.getScissorTest=function(){return Ie},this.setScissorTest=function(E){K.setScissorTest(Ie=E)},this.setOpaqueSort=function(E){W=E},this.setTransparentSort=function(E){le=E},this.getClearColor=function(E){return E.copy(_e.getClearColor())},this.setClearColor=function(){_e.setClearColor.apply(_e,arguments)},this.getClearAlpha=function(){return _e.getClearAlpha()},this.setClearAlpha=function(){_e.setClearAlpha.apply(_e,arguments)},this.clear=function(E=!0,D=!0,B=!0){let H=0;if(E){let U=!1;if(A!==null){const re=A.texture.format;U=re===jc||re===Jc||re===Lo}if(U){const re=A.texture.type,ge=re===gi||re===Ui||re===ta||re===tr||re===Kc||re===Zc,be=_e.getClearColor(),Te=_e.getClearAlpha(),Le=be.r,Ne=be.g,Ae=be.b;ge?(d[0]=Le,d[1]=Ne,d[2]=Ae,d[3]=Te,P.clearBufferuiv(P.COLOR,0,d)):(m[0]=Le,m[1]=Ne,m[2]=Ae,m[3]=Te,P.clearBufferiv(P.COLOR,0,m))}else H|=P.COLOR_BUFFER_BIT}D&&(H|=P.DEPTH_BUFFER_BIT),B&&(H|=P.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),P.clear(H)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Z,!1),t.removeEventListener("webglcontextrestored",j,!1),t.removeEventListener("webglcontextcreationerror",oe,!1),he.dispose(),xe.dispose(),fe.dispose(),I.dispose(),T.dispose(),$.dispose(),Ge.dispose(),pt.dispose(),Q.dispose(),se.dispose(),se.removeEventListener("sessionstart",ii),se.removeEventListener("sessionend",qd),gs.stop()};function Z(E){E.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),v=!0}function j(){console.log("THREE.WebGLRenderer: Context Restored."),v=!1;const E=Pe.autoReset,D=ne.enabled,B=ne.autoUpdate,H=ne.needsUpdate,U=ne.type;L(),Pe.autoReset=E,ne.enabled=D,ne.autoUpdate=B,ne.needsUpdate=H,ne.type=U}function oe(E){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",E.statusMessage)}function qe(E){const D=E.target;D.removeEventListener("dispose",qe),je(D)}function je(E){Et(E),fe.remove(E)}function Et(E){const D=fe.get(E).programs;D!==void 0&&(D.forEach(function(B){Q.releaseProgram(B)}),E.isShaderMaterial&&Q.releaseShaderCache(E))}this.renderBufferDirect=function(E,D,B,H,U,re){D===null&&(D=Fe);const ge=U.isMesh&&U.matrixWorld.determinant()<0,be=l5(E,D,B,H,U);K.setMaterial(H,ge);let Te=B.index,Le=1;if(H.wireframe===!0){if(Te=J.getWireframeAttribute(B),Te===void 0)return;Le=2}const Ne=B.drawRange,Ae=B.attributes.position;let nt=Ne.start*Le,xt=(Ne.start+Ne.count)*Le;re!==null&&(nt=Math.max(nt,re.start*Le),xt=Math.min(xt,(re.start+re.count)*Le)),Te!==null?(nt=Math.max(nt,0),xt=Math.min(xt,Te.count)):Ae!=null&&(nt=Math.max(nt,0),xt=Math.min(xt,Ae.count));const yt=xt-nt;if(yt<0||yt===1/0)return;Ge.setup(U,H,be,B,Te);let bn,it=Ue;if(Te!==null&&(bn=k.get(Te),it=Me,it.setIndex(bn)),U.isMesh)H.wireframe===!0?(K.setLineWidth(H.wireframeLinewidth*et()),it.setMode(P.LINES)):it.setMode(P.TRIANGLES);else if(U.isLine){let we=H.linewidth;we===void 0&&(we=1),K.setLineWidth(we*et()),U.isLineSegments?it.setMode(P.LINES):U.isLineLoop?it.setMode(P.LINE_LOOP):it.setMode(P.LINE_STRIP)}else U.isPoints?it.setMode(P.POINTS):U.isSprite&&it.setMode(P.TRIANGLES);if(U.isBatchedMesh)if(U._multiDrawInstances!==null)it.renderMultiDrawInstances(U._multiDrawStarts,U._multiDrawCounts,U._multiDrawCount,U._multiDrawInstances);else if(te.get("WEBGL_multi_draw"))it.renderMultiDraw(U._multiDrawStarts,U._multiDrawCounts,U._multiDrawCount);else{const we=U._multiDrawStarts,Wt=U._multiDrawCounts,st=U._multiDrawCount,Yn=Te?k.get(Te).bytesPerElement:1,xr=fe.get(H).currentProgram.getUniforms();for(let Tn=0;Tn<st;Tn++)xr.setValue(P,"_gl_DrawID",Tn),it.render(we[Tn]/Yn,Wt[Tn])}else if(U.isInstancedMesh)it.renderInstances(nt,yt,U.count);else if(B.isInstancedBufferGeometry){const we=B._maxInstanceCount!==void 0?B._maxInstanceCount:1/0,Wt=Math.min(B.instanceCount,we);it.renderInstances(nt,yt,Wt)}else it.render(nt,yt)};function Gt(E,D,B){E.transparent===!0&&E.side===zn&&E.forceSinglePass===!1?(E.side=un,E.needsUpdate=!0,Zo(E,D,B),E.side=mi,E.needsUpdate=!0,Zo(E,D,B),E.side=zn):Zo(E,D,B)}this.compile=function(E,D,B=null){B===null&&(B=E),p=xe.get(B),p.init(D),y.push(p),B.traverseVisible(function(U){U.isLight&&U.layers.test(D.layers)&&(p.pushLight(U),U.castShadow&&p.pushShadow(U))}),E!==B&&E.traverseVisible(function(U){U.isLight&&U.layers.test(D.layers)&&(p.pushLight(U),U.castShadow&&p.pushShadow(U))}),p.setupLights();const H=new Set;return E.traverse(function(U){const re=U.material;if(re)if(Array.isArray(re))for(let ge=0;ge<re.length;ge++){const be=re[ge];Gt(be,B,U),H.add(be)}else Gt(re,B,U),H.add(re)}),y.pop(),p=null,H},this.compileAsync=function(E,D,B=null){const H=this.compile(E,D,B);return new Promise(U=>{function re(){if(H.forEach(function(ge){fe.get(ge).currentProgram.isReady()&&H.delete(ge)}),H.size===0){U(E);return}setTimeout(re,10)}te.get("KHR_parallel_shader_compile")!==null?re():setTimeout(re,10)})};let tt=null;function yi(E){tt&&tt(E)}function ii(){gs.stop()}function qd(){gs.start()}const gs=new Q0;gs.setAnimationLoop(yi),typeof self<"u"&&gs.setContext(self),this.setAnimationLoop=function(E){tt=E,se.setAnimationLoop(E),E===null?gs.stop():gs.start()},se.addEventListener("sessionstart",ii),se.addEventListener("sessionend",qd),this.render=function(E,D){if(D!==void 0&&D.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(v===!0)return;if(E.matrixWorldAutoUpdate===!0&&E.updateMatrixWorld(),D.parent===null&&D.matrixWorldAutoUpdate===!0&&D.updateMatrixWorld(),se.enabled===!0&&se.isPresenting===!0&&(se.cameraAutoUpdate===!0&&se.updateCamera(D),D=se.getCamera()),E.isScene===!0&&E.onBeforeRender(x,E,D,A),p=xe.get(E,y.length),p.init(D),y.push(p),ve.multiplyMatrices(D.projectionMatrix,D.matrixWorldInverse),Ze.setFromProjectionMatrix(ve),ee=this.localClippingEnabled,Y=ze.init(this.clippingPlanes,ee),g=he.get(E,_.length),g.init(),_.push(g),se.enabled===!0&&se.isPresenting===!0){const re=x.xr.getDepthSensingMesh();re!==null&&Ph(re,D,-1/0,x.sortObjects)}Ph(E,D,0,x.sortObjects),g.finish(),x.sortObjects===!0&&g.sort(W,le),De=se.enabled===!1||se.isPresenting===!1||se.hasDepthSensing()===!1,De&&_e.addToRenderList(g,E),this.info.render.frame++,Y===!0&&ze.beginShadows();const B=p.state.shadowsArray;ne.render(B,E,D),Y===!0&&ze.endShadows(),this.info.autoReset===!0&&this.info.reset();const H=g.opaque,U=g.transmissive;if(p.setupLights(),D.isArrayCamera){const re=D.cameras;if(U.length>0)for(let ge=0,be=re.length;ge<be;ge++){const Te=re[ge];Dd(H,U,E,Te)}De&&_e.render(E);for(let ge=0,be=re.length;ge<be;ge++){const Te=re[ge];Ld(g,E,Te,Te.viewport)}}else U.length>0&&Dd(H,U,E,D),De&&_e.render(E),Ld(g,E,D);A!==null&&(ye.updateMultisampleRenderTarget(A),ye.updateRenderTargetMipmap(A)),E.isScene===!0&&E.onAfterRender(x,E,D),Ge.resetDefaultState(),C=-1,M=null,y.pop(),y.length>0?(p=y[y.length-1],Y===!0&&ze.setGlobalState(x.clippingPlanes,p.state.camera)):p=null,_.pop(),_.length>0?g=_[_.length-1]:g=null};function Ph(E,D,B,H){if(E.visible===!1)return;if(E.layers.test(D.layers)){if(E.isGroup)B=E.renderOrder;else if(E.isLOD)E.autoUpdate===!0&&E.update(D);else if(E.isLight)p.pushLight(E),E.castShadow&&p.pushShadow(E);else if(E.isSprite){if(!E.frustumCulled||Ze.intersectsSprite(E)){H&&Ce.setFromMatrixPosition(E.matrixWorld).applyMatrix4(ve);const ge=$.update(E),be=E.material;be.visible&&g.push(E,ge,be,B,Ce.z,null)}}else if((E.isMesh||E.isLine||E.isPoints)&&(!E.frustumCulled||Ze.intersectsObject(E))){const ge=$.update(E),be=E.material;if(H&&(E.boundingSphere!==void 0?(E.boundingSphere===null&&E.computeBoundingSphere(),Ce.copy(E.boundingSphere.center)):(ge.boundingSphere===null&&ge.computeBoundingSphere(),Ce.copy(ge.boundingSphere.center)),Ce.applyMatrix4(E.matrixWorld).applyMatrix4(ve)),Array.isArray(be)){const Te=ge.groups;for(let Le=0,Ne=Te.length;Le<Ne;Le++){const Ae=Te[Le],nt=be[Ae.materialIndex];nt&&nt.visible&&g.push(E,ge,nt,B,Ce.z,Ae)}}else be.visible&&g.push(E,ge,be,B,Ce.z,null)}}const re=E.children;for(let ge=0,be=re.length;ge<be;ge++)Ph(re[ge],D,B,H)}function Ld(E,D,B,H){const U=E.opaque,re=E.transmissive,ge=E.transparent;p.setupLightsView(B),Y===!0&&ze.setGlobalState(x.clippingPlanes,B),H&&K.viewport(S.copy(H)),U.length>0&&Ko(U,D,B),re.length>0&&Ko(re,D,B),ge.length>0&&Ko(ge,D,B),K.buffers.depth.setTest(!0),K.buffers.depth.setMask(!0),K.buffers.color.setMask(!0),K.setPolygonOffset(!1)}function Dd(E,D,B,H){if((B.isScene===!0?B.overrideMaterial:null)!==null)return;p.state.transmissionRenderTarget[H.id]===void 0&&(p.state.transmissionRenderTarget[H.id]=new fn(1,1,{generateMipmaps:!0,type:te.has("EXT_color_buffer_half_float")||te.has("EXT_color_buffer_float")?ui:gi,minFilter:kn,samples:4,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:Ye.workingColorSpace}));const re=p.state.transmissionRenderTarget[H.id],ge=H.viewport||S;re.setSize(ge.z,ge.w);const be=x.getRenderTarget();x.setRenderTarget(re),x.getClearColor(N),z=x.getClearAlpha(),z<1&&x.setClearColor(16777215,.5),x.clear(),De&&_e.render(B);const Te=x.toneMapping;x.toneMapping=Di;const Le=H.viewport;if(H.viewport!==void 0&&(H.viewport=void 0),p.setupLightsView(H),Y===!0&&ze.setGlobalState(x.clippingPlanes,H),Ko(E,B,H),ye.updateMultisampleRenderTarget(re),ye.updateRenderTargetMipmap(re),te.has("WEBGL_multisampled_render_to_texture")===!1){let Ne=!1;for(let Ae=0,nt=D.length;Ae<nt;Ae++){const xt=D[Ae],yt=xt.object,bn=xt.geometry,it=xt.material,we=xt.group;if(it.side===zn&&yt.layers.test(H.layers)){const Wt=it.side;it.side=un,it.needsUpdate=!0,Nd(yt,B,H,bn,it,we),it.side=Wt,it.needsUpdate=!0,Ne=!0}}Ne===!0&&(ye.updateMultisampleRenderTarget(re),ye.updateRenderTargetMipmap(re))}x.setRenderTarget(be),x.setClearColor(N,z),Le!==void 0&&(H.viewport=Le),x.toneMapping=Te}function Ko(E,D,B){const H=D.isScene===!0?D.overrideMaterial:null;for(let U=0,re=E.length;U<re;U++){const ge=E[U],be=ge.object,Te=ge.geometry,Le=H===null?ge.material:H,Ne=ge.group;be.layers.test(B.layers)&&Nd(be,D,B,Te,Le,Ne)}}function Nd(E,D,B,H,U,re){E.onBeforeRender(x,D,B,H,U,re),E.modelViewMatrix.multiplyMatrices(B.matrixWorldInverse,E.matrixWorld),E.normalMatrix.getNormalMatrix(E.modelViewMatrix),U.onBeforeRender(x,D,B,H,E,re),U.transparent===!0&&U.side===zn&&U.forceSinglePass===!1?(U.side=un,U.needsUpdate=!0,x.renderBufferDirect(B,D,H,U,E,re),U.side=mi,U.needsUpdate=!0,x.renderBufferDirect(B,D,H,U,E,re),U.side=zn):x.renderBufferDirect(B,D,H,U,E,re),E.onAfterRender(x,D,B,H,U,re)}function Zo(E,D,B){D.isScene!==!0&&(D=Fe);const H=fe.get(E),U=p.state.lights,re=p.state.shadowsArray,ge=U.state.version,be=Q.getParameters(E,U.state,re,D,B),Te=Q.getProgramCacheKey(be);let Le=H.programs;H.environment=E.isMeshStandardMaterial?D.environment:null,H.fog=D.fog,H.envMap=(E.isMeshStandardMaterial?T:I).get(E.envMap||H.environment),H.envMapRotation=H.environment!==null&&E.envMap===null?D.environmentRotation:E.envMapRotation,Le===void 0&&(E.addEventListener("dispose",qe),Le=new Map,H.programs=Le);let Ne=Le.get(Te);if(Ne!==void 0){if(H.currentProgram===Ne&&H.lightsStateVersion===ge)return Od(E,be),Ne}else be.uniforms=Q.getUniforms(E),E.onBeforeCompile(be,x),Ne=Q.acquireProgram(be,Te),Le.set(Te,Ne),H.uniforms=be.uniforms;const Ae=H.uniforms;return(!E.isShaderMaterial&&!E.isRawShaderMaterial||E.clipping===!0)&&(Ae.clippingPlanes=ze.uniform),Od(E,be),H.needsLights=h5(E),H.lightsStateVersion=ge,H.needsLights&&(Ae.ambientLightColor.value=U.state.ambient,Ae.lightProbe.value=U.state.probe,Ae.directionalLights.value=U.state.directional,Ae.directionalLightShadows.value=U.state.directionalShadow,Ae.spotLights.value=U.state.spot,Ae.spotLightShadows.value=U.state.spotShadow,Ae.rectAreaLights.value=U.state.rectArea,Ae.ltc_1.value=U.state.rectAreaLTC1,Ae.ltc_2.value=U.state.rectAreaLTC2,Ae.pointLights.value=U.state.point,Ae.pointLightShadows.value=U.state.pointShadow,Ae.hemisphereLights.value=U.state.hemi,Ae.directionalShadowMap.value=U.state.directionalShadowMap,Ae.directionalShadowMatrix.value=U.state.directionalShadowMatrix,Ae.spotShadowMap.value=U.state.spotShadowMap,Ae.spotLightMatrix.value=U.state.spotLightMatrix,Ae.spotLightMap.value=U.state.spotLightMap,Ae.pointShadowMap.value=U.state.pointShadowMap,Ae.pointShadowMatrix.value=U.state.pointShadowMatrix),H.currentProgram=Ne,H.uniformsList=null,Ne}function Ud(E){if(E.uniformsList===null){const D=E.currentProgram.getUniforms();E.uniformsList=$l.seqWithValue(D.seq,E.uniforms)}return E.uniformsList}function Od(E,D){const B=fe.get(E);B.outputColorSpace=D.outputColorSpace,B.batching=D.batching,B.batchingColor=D.batchingColor,B.instancing=D.instancing,B.instancingColor=D.instancingColor,B.instancingMorph=D.instancingMorph,B.skinning=D.skinning,B.morphTargets=D.morphTargets,B.morphNormals=D.morphNormals,B.morphColors=D.morphColors,B.morphTargetsCount=D.morphTargetsCount,B.numClippingPlanes=D.numClippingPlanes,B.numIntersection=D.numClipIntersection,B.vertexAlphas=D.vertexAlphas,B.vertexTangents=D.vertexTangents,B.toneMapping=D.toneMapping}function l5(E,D,B,H,U){D.isScene!==!0&&(D=Fe),ye.resetTextureUnits();const re=D.fog,ge=H.isMeshStandardMaterial?D.environment:null,be=A===null?x.outputColorSpace:A.isXRRenderTarget===!0?A.texture.colorSpace:Ht,Te=(H.isMeshStandardMaterial?T:I).get(H.envMap||ge),Le=H.vertexColors===!0&&!!B.attributes.color&&B.attributes.color.itemSize===4,Ne=!!B.attributes.tangent&&(!!H.normalMap||H.anisotropy>0),Ae=!!B.morphAttributes.position,nt=!!B.morphAttributes.normal,xt=!!B.morphAttributes.color;let yt=Di;H.toneMapped&&(A===null||A.isXRRenderTarget===!0)&&(yt=x.toneMapping);const bn=B.morphAttributes.position||B.morphAttributes.normal||B.morphAttributes.color,it=bn!==void 0?bn.length:0,we=fe.get(H),Wt=p.state.lights;if(Y===!0&&(ee===!0||E!==M)){const Un=E===M&&H.id===C;ze.setState(H,E,Un)}let st=!1;H.version===we.__version?(we.needsLights&&we.lightsStateVersion!==Wt.state.version||we.outputColorSpace!==be||U.isBatchedMesh&&we.batching===!1||!U.isBatchedMesh&&we.batching===!0||U.isBatchedMesh&&we.batchingColor===!0&&U.colorTexture===null||U.isBatchedMesh&&we.batchingColor===!1&&U.colorTexture!==null||U.isInstancedMesh&&we.instancing===!1||!U.isInstancedMesh&&we.instancing===!0||U.isSkinnedMesh&&we.skinning===!1||!U.isSkinnedMesh&&we.skinning===!0||U.isInstancedMesh&&we.instancingColor===!0&&U.instanceColor===null||U.isInstancedMesh&&we.instancingColor===!1&&U.instanceColor!==null||U.isInstancedMesh&&we.instancingMorph===!0&&U.morphTexture===null||U.isInstancedMesh&&we.instancingMorph===!1&&U.morphTexture!==null||we.envMap!==Te||H.fog===!0&&we.fog!==re||we.numClippingPlanes!==void 0&&(we.numClippingPlanes!==ze.numPlanes||we.numIntersection!==ze.numIntersection)||we.vertexAlphas!==Le||we.vertexTangents!==Ne||we.morphTargets!==Ae||we.morphNormals!==nt||we.morphColors!==xt||we.toneMapping!==yt||we.morphTargetsCount!==it)&&(st=!0):(st=!0,we.__version=H.version);let Yn=we.currentProgram;st===!0&&(Yn=Zo(H,D,U));let xr=!1,Tn=!1,Ih=!1;const Rt=Yn.getUniforms(),zi=we.uniforms;if(K.useProgram(Yn.program)&&(xr=!0,Tn=!0,Ih=!0),H.id!==C&&(C=H.id,Tn=!0),xr||M!==E){Rt.setValue(P,"projectionMatrix",E.projectionMatrix),Rt.setValue(P,"viewMatrix",E.matrixWorldInverse);const Un=Rt.map.cameraPosition;Un!==void 0&&Un.setValue(P,ue.setFromMatrixPosition(E.matrixWorld)),pe.logarithmicDepthBuffer&&Rt.setValue(P,"logDepthBufFC",2/(Math.log(E.far+1)/Math.LN2)),(H.isMeshPhongMaterial||H.isMeshToonMaterial||H.isMeshLambertMaterial||H.isMeshBasicMaterial||H.isMeshStandardMaterial||H.isShaderMaterial)&&Rt.setValue(P,"isOrthographic",E.isOrthographicCamera===!0),M!==E&&(M=E,Tn=!0,Ih=!0)}if(U.isSkinnedMesh){Rt.setOptional(P,U,"bindMatrix"),Rt.setOptional(P,U,"bindMatrixInverse");const Un=U.skeleton;Un&&(Un.boneTexture===null&&Un.computeBoneTexture(),Rt.setValue(P,"boneTexture",Un.boneTexture,ye))}U.isBatchedMesh&&(Rt.setOptional(P,U,"batchingTexture"),Rt.setValue(P,"batchingTexture",U._matricesTexture,ye),Rt.setOptional(P,U,"batchingIdTexture"),Rt.setValue(P,"batchingIdTexture",U._indirectTexture,ye),Rt.setOptional(P,U,"batchingColorTexture"),U._colorsTexture!==null&&Rt.setValue(P,"batchingColorTexture",U._colorsTexture,ye));const qh=B.morphAttributes;if((qh.position!==void 0||qh.normal!==void 0||qh.color!==void 0)&&$e.update(U,B,Yn),(Tn||we.receiveShadow!==U.receiveShadow)&&(we.receiveShadow=U.receiveShadow,Rt.setValue(P,"receiveShadow",U.receiveShadow)),H.isMeshGouraudMaterial&&H.envMap!==null&&(zi.envMap.value=Te,zi.flipEnvMap.value=Te.isCubeTexture&&Te.isRenderTargetTexture===!1?-1:1),H.isMeshStandardMaterial&&H.envMap===null&&D.environment!==null&&(zi.envMapIntensity.value=D.environmentIntensity),Tn&&(Rt.setValue(P,"toneMappingExposure",x.toneMappingExposure),we.needsLights&&c5(zi,Ih),re&&H.fog===!0&&Re.refreshFogUniforms(zi,re),Re.refreshMaterialUniforms(zi,H,X,F,p.state.transmissionRenderTarget[E.id]),$l.upload(P,Ud(we),zi,ye)),H.isShaderMaterial&&H.uniformsNeedUpdate===!0&&($l.upload(P,Ud(we),zi,ye),H.uniformsNeedUpdate=!1),H.isSpriteMaterial&&Rt.setValue(P,"center",U.center),Rt.setValue(P,"modelViewMatrix",U.modelViewMatrix),Rt.setValue(P,"normalMatrix",U.normalMatrix),Rt.setValue(P,"modelMatrix",U.matrixWorld),H.isShaderMaterial||H.isRawShaderMaterial){const Un=H.uniformsGroups;for(let Lh=0,u5=Un.length;Lh<u5;Lh++){const Fd=Un[Lh];pt.update(Fd,Yn),pt.bind(Fd,Yn)}}return Yn}function c5(E,D){E.ambientLightColor.needsUpdate=D,E.lightProbe.needsUpdate=D,E.directionalLights.needsUpdate=D,E.directionalLightShadows.needsUpdate=D,E.pointLights.needsUpdate=D,E.pointLightShadows.needsUpdate=D,E.spotLights.needsUpdate=D,E.spotLightShadows.needsUpdate=D,E.rectAreaLights.needsUpdate=D,E.hemisphereLights.needsUpdate=D}function h5(E){return E.isMeshLambertMaterial||E.isMeshToonMaterial||E.isMeshPhongMaterial||E.isMeshStandardMaterial||E.isShadowMaterial||E.isShaderMaterial&&E.lights===!0}this.getActiveCubeFace=function(){return w},this.getActiveMipmapLevel=function(){return b},this.getRenderTarget=function(){return A},this.setRenderTargetTextures=function(E,D,B){fe.get(E.texture).__webglTexture=D,fe.get(E.depthTexture).__webglTexture=B;const H=fe.get(E);H.__hasExternalTextures=!0,H.__autoAllocateDepthBuffer=B===void 0,H.__autoAllocateDepthBuffer||te.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),H.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(E,D){const B=fe.get(E);B.__webglFramebuffer=D,B.__useDefaultFramebuffer=D===void 0},this.setRenderTarget=function(E,D=0,B=0){A=E,w=D,b=B;let H=!0,U=null,re=!1,ge=!1;if(E){const Te=fe.get(E);if(Te.__useDefaultFramebuffer!==void 0)K.bindFramebuffer(P.FRAMEBUFFER,null),H=!1;else if(Te.__webglFramebuffer===void 0)ye.setupRenderTarget(E);else if(Te.__hasExternalTextures)ye.rebindTextures(E,fe.get(E.texture).__webglTexture,fe.get(E.depthTexture).__webglTexture);else if(E.depthBuffer){const Ae=E.depthTexture;if(Te.__boundDepthTexture!==Ae){if(Ae!==null&&fe.has(Ae)&&(E.width!==Ae.image.width||E.height!==Ae.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");ye.setupDepthRenderbuffer(E)}}const Le=E.texture;(Le.isData3DTexture||Le.isDataArrayTexture||Le.isCompressedArrayTexture)&&(ge=!0);const Ne=fe.get(E).__webglFramebuffer;E.isWebGLCubeRenderTarget?(Array.isArray(Ne[D])?U=Ne[D][B]:U=Ne[D],re=!0):E.samples>0&&ye.useMultisampledRTT(E)===!1?U=fe.get(E).__webglMultisampledFramebuffer:Array.isArray(Ne)?U=Ne[B]:U=Ne,S.copy(E.viewport),q.copy(E.scissor),O=E.scissorTest}else S.copy(de).multiplyScalar(X).floor(),q.copy(me).multiplyScalar(X).floor(),O=Ie;if(K.bindFramebuffer(P.FRAMEBUFFER,U)&&H&&K.drawBuffers(E,U),K.viewport(S),K.scissor(q),K.setScissorTest(O),re){const Te=fe.get(E.texture);P.framebufferTexture2D(P.FRAMEBUFFER,P.COLOR_ATTACHMENT0,P.TEXTURE_CUBE_MAP_POSITIVE_X+D,Te.__webglTexture,B)}else if(ge){const Te=fe.get(E.texture),Le=D||0;P.framebufferTextureLayer(P.FRAMEBUFFER,P.COLOR_ATTACHMENT0,Te.__webglTexture,B||0,Le)}C=-1},this.readRenderTargetPixels=function(E,D,B,H,U,re,ge){if(!(E&&E.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let be=fe.get(E).__webglFramebuffer;if(E.isWebGLCubeRenderTarget&&ge!==void 0&&(be=be[ge]),be){K.bindFramebuffer(P.FRAMEBUFFER,be);try{const Te=E.texture,Le=Te.format,Ne=Te.type;if(!pe.textureFormatReadable(Le)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!pe.textureTypeReadable(Ne)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}D>=0&&D<=E.width-H&&B>=0&&B<=E.height-U&&P.readPixels(D,B,H,U,Be.convert(Le),Be.convert(Ne),re)}finally{const Te=A!==null?fe.get(A).__webglFramebuffer:null;K.bindFramebuffer(P.FRAMEBUFFER,Te)}}},this.readRenderTargetPixelsAsync=async function(E,D,B,H,U,re,ge){if(!(E&&E.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let be=fe.get(E).__webglFramebuffer;if(E.isWebGLCubeRenderTarget&&ge!==void 0&&(be=be[ge]),be){K.bindFramebuffer(P.FRAMEBUFFER,be);try{const Te=E.texture,Le=Te.format,Ne=Te.type;if(!pe.textureFormatReadable(Le))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!pe.textureTypeReadable(Ne))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(D>=0&&D<=E.width-H&&B>=0&&B<=E.height-U){const Ae=P.createBuffer();P.bindBuffer(P.PIXEL_PACK_BUFFER,Ae),P.bufferData(P.PIXEL_PACK_BUFFER,re.byteLength,P.STREAM_READ),P.readPixels(D,B,H,U,Be.convert(Le),Be.convert(Ne),0),P.flush();const nt=P.fenceSync(P.SYNC_GPU_COMMANDS_COMPLETE,0);await cg(P,nt,4);try{P.bindBuffer(P.PIXEL_PACK_BUFFER,Ae),P.getBufferSubData(P.PIXEL_PACK_BUFFER,0,re)}finally{P.deleteBuffer(Ae),P.deleteSync(nt)}return re}}finally{const Te=A!==null?fe.get(A).__webglFramebuffer:null;K.bindFramebuffer(P.FRAMEBUFFER,Te)}}},this.copyFramebufferToTexture=function(E,D=null,B=0){E.isTexture!==!0&&(Kr("WebGLRenderer: copyFramebufferToTexture function signature has changed."),D=arguments[0]||null,E=arguments[1]);const H=Math.pow(2,-B),U=Math.floor(E.image.width*H),re=Math.floor(E.image.height*H),ge=D!==null?D.x:0,be=D!==null?D.y:0;ye.setTexture2D(E,0),P.copyTexSubImage2D(P.TEXTURE_2D,B,0,0,ge,be,U,re),K.unbindTexture()},this.copyTextureToTexture=function(E,D,B=null,H=null,U=0){E.isTexture!==!0&&(Kr("WebGLRenderer: copyTextureToTexture function signature has changed."),H=arguments[0]||null,E=arguments[1],D=arguments[2],U=arguments[3]||0,B=null);let re,ge,be,Te,Le,Ne;B!==null?(re=B.max.x-B.min.x,ge=B.max.y-B.min.y,be=B.min.x,Te=B.min.y):(re=E.image.width,ge=E.image.height,be=0,Te=0),H!==null?(Le=H.x,Ne=H.y):(Le=0,Ne=0);const Ae=Be.convert(D.format),nt=Be.convert(D.type);ye.setTexture2D(D,0),P.pixelStorei(P.UNPACK_FLIP_Y_WEBGL,D.flipY),P.pixelStorei(P.UNPACK_PREMULTIPLY_ALPHA_WEBGL,D.premultiplyAlpha),P.pixelStorei(P.UNPACK_ALIGNMENT,D.unpackAlignment);const xt=P.getParameter(P.UNPACK_ROW_LENGTH),yt=P.getParameter(P.UNPACK_IMAGE_HEIGHT),bn=P.getParameter(P.UNPACK_SKIP_PIXELS),it=P.getParameter(P.UNPACK_SKIP_ROWS),we=P.getParameter(P.UNPACK_SKIP_IMAGES),Wt=E.isCompressedTexture?E.mipmaps[U]:E.image;P.pixelStorei(P.UNPACK_ROW_LENGTH,Wt.width),P.pixelStorei(P.UNPACK_IMAGE_HEIGHT,Wt.height),P.pixelStorei(P.UNPACK_SKIP_PIXELS,be),P.pixelStorei(P.UNPACK_SKIP_ROWS,Te),E.isDataTexture?P.texSubImage2D(P.TEXTURE_2D,U,Le,Ne,re,ge,Ae,nt,Wt.data):E.isCompressedTexture?P.compressedTexSubImage2D(P.TEXTURE_2D,U,Le,Ne,Wt.width,Wt.height,Ae,Wt.data):P.texSubImage2D(P.TEXTURE_2D,U,Le,Ne,re,ge,Ae,nt,Wt),P.pixelStorei(P.UNPACK_ROW_LENGTH,xt),P.pixelStorei(P.UNPACK_IMAGE_HEIGHT,yt),P.pixelStorei(P.UNPACK_SKIP_PIXELS,bn),P.pixelStorei(P.UNPACK_SKIP_ROWS,it),P.pixelStorei(P.UNPACK_SKIP_IMAGES,we),U===0&&D.generateMipmaps&&P.generateMipmap(P.TEXTURE_2D),K.unbindTexture()},this.copyTextureToTexture3D=function(E,D,B=null,H=null,U=0){E.isTexture!==!0&&(Kr("WebGLRenderer: copyTextureToTexture3D function signature has changed."),B=arguments[0]||null,H=arguments[1]||null,E=arguments[2],D=arguments[3],U=arguments[4]||0);let re,ge,be,Te,Le,Ne,Ae,nt,xt;const yt=E.isCompressedTexture?E.mipmaps[U]:E.image;B!==null?(re=B.max.x-B.min.x,ge=B.max.y-B.min.y,be=B.max.z-B.min.z,Te=B.min.x,Le=B.min.y,Ne=B.min.z):(re=yt.width,ge=yt.height,be=yt.depth,Te=0,Le=0,Ne=0),H!==null?(Ae=H.x,nt=H.y,xt=H.z):(Ae=0,nt=0,xt=0);const bn=Be.convert(D.format),it=Be.convert(D.type);let we;if(D.isData3DTexture)ye.setTexture3D(D,0),we=P.TEXTURE_3D;else if(D.isDataArrayTexture||D.isCompressedArrayTexture)ye.setTexture2DArray(D,0),we=P.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}P.pixelStorei(P.UNPACK_FLIP_Y_WEBGL,D.flipY),P.pixelStorei(P.UNPACK_PREMULTIPLY_ALPHA_WEBGL,D.premultiplyAlpha),P.pixelStorei(P.UNPACK_ALIGNMENT,D.unpackAlignment);const Wt=P.getParameter(P.UNPACK_ROW_LENGTH),st=P.getParameter(P.UNPACK_IMAGE_HEIGHT),Yn=P.getParameter(P.UNPACK_SKIP_PIXELS),xr=P.getParameter(P.UNPACK_SKIP_ROWS),Tn=P.getParameter(P.UNPACK_SKIP_IMAGES);P.pixelStorei(P.UNPACK_ROW_LENGTH,yt.width),P.pixelStorei(P.UNPACK_IMAGE_HEIGHT,yt.height),P.pixelStorei(P.UNPACK_SKIP_PIXELS,Te),P.pixelStorei(P.UNPACK_SKIP_ROWS,Le),P.pixelStorei(P.UNPACK_SKIP_IMAGES,Ne),E.isDataTexture||E.isData3DTexture?P.texSubImage3D(we,U,Ae,nt,xt,re,ge,be,bn,it,yt.data):D.isCompressedArrayTexture?P.compressedTexSubImage3D(we,U,Ae,nt,xt,re,ge,be,bn,yt.data):P.texSubImage3D(we,U,Ae,nt,xt,re,ge,be,bn,it,yt),P.pixelStorei(P.UNPACK_ROW_LENGTH,Wt),P.pixelStorei(P.UNPACK_IMAGE_HEIGHT,st),P.pixelStorei(P.UNPACK_SKIP_PIXELS,Yn),P.pixelStorei(P.UNPACK_SKIP_ROWS,xr),P.pixelStorei(P.UNPACK_SKIP_IMAGES,Tn),U===0&&D.generateMipmaps&&P.generateMipmap(we),K.unbindTexture()},this.initRenderTarget=function(E){fe.get(E).__webglFramebuffer===void 0&&ye.setupRenderTarget(E)},this.initTexture=function(E){E.isCubeTexture?ye.setTextureCube(E,0):E.isData3DTexture?ye.setTexture3D(E,0):E.isDataArrayTexture||E.isCompressedArrayTexture?ye.setTexture2DArray(E,0):ye.setTexture2D(E,0),K.unbindTexture()},this.resetState=function(){w=0,b=0,A=null,K.reset(),Ge.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return oi}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=e===eh?"display-p3":"srgb",t.unpackColorSpace=Ye.workingColorSpace===Do?"display-p3":"srgb"}}class rh{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new ae(e),this.density=t}clone(){return new rh(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class ah{constructor(e,t=1,n=1e3){this.isFog=!0,this.name="",this.color=new ae(e),this.near=t,this.far=n}clone(){return new ah(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class oa extends Xe{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Dn,this.environmentIntensity=1,this.environmentRotation=new Dn,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class Oo{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=po,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.version=0,this.uuid=qn()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return Kr("THREE.InterleavedBuffer: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let i=0,s=this.stride;i<s;i++)this.array[e+i]=t.array[n+i];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=qn()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=qn()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const on=new R;class cs{constructor(e,t,n,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)on.fromBufferAttribute(this,t),on.applyMatrix4(e),this.setXYZ(t,on.x,on.y,on.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)on.fromBufferAttribute(this,t),on.applyNormalMatrix(e),this.setXYZ(t,on.x,on.y,on.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)on.fromBufferAttribute(this,t),on.transformDirection(e),this.setXYZ(t,on.x,on.y,on.z);return this}getComponent(e,t){let n=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(n=cn(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=He(n,this.array)),this.data.array[e*this.data.stride+this.offset+t]=n,this}setX(e,t){return this.normalized&&(t=He(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=He(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=He(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=He(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=cn(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=cn(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=cn(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=cn(t,this.array)),t}setXY(e,t,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=He(t,this.array),n=He(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=He(t,this.array),n=He(n,this.array),i=He(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this}setXYZW(e,t,n,i,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=He(t,this.array),n=He(n,this.array),i=He(i,this.array),s=He(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const i=n*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[i+s])}return new Qe(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new cs(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const i=n*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[i+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class Xf extends Ut{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new ae(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Nr;const Ea=new R,Ur=new R,Or=new R,Fr=new G,Ra=new G,om=new Ee,_l=new R,Ca=new R,xl=new R,Rp=new G,ru=new G,Cp=new G;class lm extends Xe{constructor(e=new Xf){if(super(),this.isSprite=!0,this.type="Sprite",Nr===void 0){Nr=new Oe;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),n=new Oo(t,5);Nr.setIndex([0,1,2,0,2,3]),Nr.setAttribute("position",new cs(n,3,0,!1)),Nr.setAttribute("uv",new cs(n,2,3,!1))}this.geometry=Nr,this.material=e,this.center=new G(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Ur.setFromMatrixScale(this.matrixWorld),om.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Or.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Ur.multiplyScalar(-Or.z);const n=this.material.rotation;let i,s;n!==0&&(s=Math.cos(n),i=Math.sin(n));const a=this.center;yl(_l.set(-.5,-.5,0),Or,a,Ur,i,s),yl(Ca.set(.5,-.5,0),Or,a,Ur,i,s),yl(xl.set(.5,.5,0),Or,a,Ur,i,s),Rp.set(0,0),ru.set(1,0),Cp.set(1,1);let o=e.ray.intersectTriangle(_l,Ca,xl,!1,Ea);if(o===null&&(yl(Ca.set(-.5,.5,0),Or,a,Ur,i,s),ru.set(0,1),o=e.ray.intersectTriangle(_l,xl,Ca,!1,Ea),o===null))return;const l=e.ray.origin.distanceTo(Ea);l<e.near||l>e.far||t.push({distance:l,point:Ea.clone(),uv:Rn.getInterpolation(Ea,_l,Ca,xl,Rp,ru,Cp,new G),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function yl(r,e,t,n,i,s){Fr.subVectors(r,t).addScalar(.5).multiply(n),i!==void 0?(Ra.x=s*Fr.x-i*Fr.y,Ra.y=i*Fr.x+s*Fr.y):Ra.copy(Fr),r.copy(e),r.x+=Ra.x,r.y+=Ra.y,r.applyMatrix4(om)}const vl=new R,Pp=new R;class cm extends Xe{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let n=0,i=t.length;n<i;n++){const s=t[n];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,n=0){t=Math.abs(t);const i=this.levels;let s;for(s=0;s<i.length&&!(t<i[s].distance);s++);return i.splice(s,0,{distance:t,hysteresis:n,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let n,i;for(n=1,i=t.length;n<i;n++){let s=t[n].distance;if(t[n].object.visible&&(s-=s*t[n].hysteresis),e<s)break}return t[n-1].object}return null}raycast(e,t){if(this.levels.length>0){vl.setFromMatrixPosition(this.matrixWorld);const i=e.ray.origin.distanceTo(vl);this.getObjectForDistance(i).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){vl.setFromMatrixPosition(e.matrixWorld),Pp.setFromMatrixPosition(this.matrixWorld);const n=vl.distanceTo(Pp)/e.zoom;t[0].object.visible=!0;let i,s;for(i=1,s=t.length;i<s;i++){let a=t[i].distance;if(t[i].object.visible&&(a-=a*t[i].hysteresis),n>=a)t[i-1].object.visible=!1,t[i].object.visible=!0;else break}for(this._currentLevel=i-1;i<s;i++)t[i].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const n=this.levels;for(let i=0,s=n.length;i<s;i++){const a=n[i];t.object.levels.push({object:a.object.uuid,distance:a.distance,hysteresis:a.hysteresis})}return t}}const Ip=new R,qp=new rt,Lp=new rt,Sx=new R,Dp=new Ee,Ml=new R,au=new Kt,Np=new Ee,ou=new fr;class Yf extends ct{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=Fu,this.bindMatrix=new Ee,this.bindMatrixInverse=new Ee,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new tn),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)this.getVertexPosition(n,Ml),this.boundingBox.expandByPoint(Ml)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Kt),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)this.getVertexPosition(n,Ml),this.boundingSphere.expandByPoint(Ml)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const n=this.material,i=this.matrixWorld;n!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),au.copy(this.boundingSphere),au.applyMatrix4(i),e.ray.intersectsSphere(au)!==!1&&(Np.copy(i).invert(),ou.copy(e.ray).applyMatrix4(Np),!(this.boundingBox!==null&&ou.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,ou)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new rt,t=this.geometry.attributes.skinWeight;for(let n=0,i=t.count;n<i;n++){e.fromBufferAttribute(t,n);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===Fu?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===P0?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const n=this.skeleton,i=this.geometry;qp.fromBufferAttribute(i.attributes.skinIndex,e),Lp.fromBufferAttribute(i.attributes.skinWeight,e),Ip.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const a=Lp.getComponent(s);if(a!==0){const o=qp.getComponent(s);Dp.multiplyMatrices(n.bones[o].matrixWorld,n.boneInverses[o]),t.addScaledVector(Sx.copy(Ip).applyMatrix4(Dp),a)}}return t.applyMatrix4(this.bindMatrixInverse)}}class oh extends Xe{constructor(){super(),this.isBone=!0,this.type="Bone"}}class fi extends dt{constructor(e=null,t=1,n=1,i,s,a,o,l,c=Nt,h=Nt,u,f){super(null,a,o,l,c,h,i,s,u,f),this.isDataTexture=!0,this.image={data:e,width:t,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const Up=new Ee,bx=new Ee;class Fo{constructor(e=[],t=[]){this.uuid=qn(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let n=0,i=this.bones.length;n<i;n++)this.boneInverses.push(new Ee)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const n=new Ee;this.bones[e]&&n.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(n)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&n.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&(n.parent&&n.parent.isBone?(n.matrix.copy(n.parent.matrixWorld).invert(),n.matrix.multiply(n.matrixWorld)):n.matrix.copy(n.matrixWorld),n.matrix.decompose(n.position,n.quaternion,n.scale))}}update(){const e=this.bones,t=this.boneInverses,n=this.boneMatrices,i=this.boneTexture;for(let s=0,a=e.length;s<a;s++){const o=e[s]?e[s].matrixWorld:bx;Up.multiplyMatrices(o,t[s]),Up.toArray(n,s*16)}i!==null&&(i.needsUpdate=!0)}clone(){return new Fo(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const n=new fi(t,e,e,hn,_n);return n.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=n,this}getBoneByName(e){for(let t=0,n=this.bones.length;t<n;t++){const i=this.bones[t];if(i.name===e)return i}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let n=0,i=e.bones.length;n<i;n++){const s=e.bones[n];let a=t[s];a===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),a=new oh),this.bones.push(a),this.boneInverses.push(new Ee().fromArray(e.boneInverses[n]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,n=this.boneInverses;for(let i=0,s=t.length;i<s;i++){const a=t[i];e.bones.push(a.uuid);const o=n[i];e.boneInverses.push(o.toArray())}return e}}class ir extends Qe{constructor(e,t,n,i=1){super(e,t,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Br=new Ee,Op=new Ee,Sl=[],Fp=new tn,Tx=new Ee,Pa=new ct,Ia=new Kt;class Kf extends ct{constructor(e,t,n){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new ir(new Float32Array(n*16),16),this.instanceColor=null,this.morphTexture=null,this.count=n,this.boundingBox=null,this.boundingSphere=null;for(let i=0;i<n;i++)this.setMatrixAt(i,Tx)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new tn),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,Br),Fp.copy(e.boundingBox).applyMatrix4(Br),this.boundingBox.union(Fp)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new Kt),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,Br),Ia.copy(e.boundingSphere).applyMatrix4(Br),this.boundingSphere.union(Ia)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,t){const n=t.morphTargetInfluences,i=this.morphTexture.source.data.data,s=n.length+1,a=e*s+1;for(let o=0;o<n.length;o++)n[o]=i[a+o]}raycast(e,t){const n=this.matrixWorld,i=this.count;if(Pa.geometry=this.geometry,Pa.material=this.material,Pa.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Ia.copy(this.boundingSphere),Ia.applyMatrix4(n),e.ray.intersectsSphere(Ia)!==!1))for(let s=0;s<i;s++){this.getMatrixAt(s,Br),Op.multiplyMatrices(n,Br),Pa.matrixWorld=Op,Pa.raycast(e,Sl);for(let a=0,o=Sl.length;a<o;a++){const l=Sl[a];l.instanceId=s,l.object=this,t.push(l)}Sl.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new ir(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,t){const n=t.morphTargetInfluences,i=n.length+1;this.morphTexture===null&&(this.morphTexture=new fi(new Float32Array(i*this.count),i,this.count,$c,_n));const s=this.morphTexture.source.data.data;let a=0;for(let c=0;c<n.length;c++)a+=n[c];const o=this.geometry.morphTargetsRelative?1:1-a,l=i*e;s[l]=o,s.set(n,l+1)}updateMorphTargets(){}dispose(){return this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null),this}}function Ax(r,e){return r.z-e.z}function wx(r,e){return e.z-r.z}class Ex{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t,n){const i=this.pool,s=this.list;this.index>=i.length&&i.push({start:-1,count:-1,z:-1,index:-1});const a=i[this.index];s.push(a),this.index++,a.start=e.start,a.count=e.count,a.z=t,a.index=n}reset(){this.list.length=0,this.index=0}}const Yi=new Ee,lu=new Ee,Rx=new Ee,Cx=new ae(1,1,1),Bp=new Ee,cu=new Uo,bl=new tn,bs=new Kt,qa=new R,zp=new R,Px=new R,hu=new Ex,Jt=new ct,Tl=[];function Ix(r,e,t=0){const n=e.itemSize;if(r.isInterleavedBufferAttribute||r.array.constructor!==e.array.constructor){const i=r.count;for(let s=0;s<i;s++)for(let a=0;a<n;a++)e.setComponent(s+t,a,r.getComponent(s,a))}else e.array.set(r.array,t*n);e.needsUpdate=!0}class hm extends ct{get maxInstanceCount(){return this._maxInstanceCount}constructor(e,t,n=t*2,i){super(new Oe,i),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._drawInfo=[],this._drawRanges=[],this._reservedRanges=[],this._bounds=[],this._maxInstanceCount=e,this._maxVertexCount=t,this._maxIndexCount=n,this._geometryInitialized=!1,this._geometryCount=0,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._visibilityChanged=!0,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}_initMatricesTexture(){let e=Math.sqrt(this._maxInstanceCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),n=new fi(t,e,e,hn,_n);this._matricesTexture=n}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Uint32Array(e*e),n=new fi(t,e,e,Lo,Ui);this._indirectTexture=n}_initColorsTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Float32Array(e*e*4).fill(1),n=new fi(t,e,e,hn,_n);n.colorSpace=Ye.workingColorSpace,this._colorsTexture=n}_initializeGeometry(e){const t=this.geometry,n=this._maxVertexCount,i=this._maxIndexCount;if(this._geometryInitialized===!1){for(const s in e.attributes){const a=e.getAttribute(s),{array:o,itemSize:l,normalized:c}=a,h=new o.constructor(n*l),u=new Qe(h,l,c);t.setAttribute(s,u)}if(e.getIndex()!==null){const s=n>65535?new Uint32Array(i):new Uint16Array(i);t.setIndex(new Qe(s,1))}this._geometryInitialized=!0}}_validateGeometry(e){const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error('BatchedMesh: All geometries must consistently have "index".');for(const n in t.attributes){if(!e.hasAttribute(n))throw new Error(`BatchedMesh: Added geometry missing "${n}". All geometries must have consistent attributes.`);const i=e.getAttribute(n),s=t.getAttribute(n);if(i.itemSize!==s.itemSize||i.normalized!==s.normalized)throw new Error("BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new tn);const e=this.boundingBox,t=this._drawInfo;e.makeEmpty();for(let n=0,i=t.length;n<i;n++){if(t[n].active===!1)continue;const s=t[n].geometryIndex;this.getMatrixAt(n,Yi),this.getBoundingBoxAt(s,bl).applyMatrix4(Yi),e.union(bl)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Kt);const e=this.boundingSphere,t=this._drawInfo;e.makeEmpty();for(let n=0,i=t.length;n<i;n++){if(t[n].active===!1)continue;const s=t[n].geometryIndex;this.getMatrixAt(n,Yi),this.getBoundingSphereAt(s,bs).applyMatrix4(Yi),e.union(bs)}}addInstance(e){if(this._drawInfo.length>=this._maxInstanceCount)throw new Error("BatchedMesh: Maximum item count reached.");this._drawInfo.push({visible:!0,active:!0,geometryIndex:e});const t=this._drawInfo.length-1,n=this._matricesTexture,i=n.image.data;Rx.toArray(i,t*16),n.needsUpdate=!0;const s=this._colorsTexture;return s&&(Cx.toArray(s.image.data,t*4),s.needsUpdate=!0),t}addGeometry(e,t=-1,n=-1){if(this._initializeGeometry(e),this._validateGeometry(e),this._drawInfo.length>=this._maxInstanceCount)throw new Error("BatchedMesh: Maximum item count reached.");const i={vertexStart:-1,vertexCount:-1,indexStart:-1,indexCount:-1};let s=null;const a=this._reservedRanges,o=this._drawRanges,l=this._bounds;this._geometryCount!==0&&(s=a[a.length-1]),t===-1?i.vertexCount=e.getAttribute("position").count:i.vertexCount=t,s===null?i.vertexStart=0:i.vertexStart=s.vertexStart+s.vertexCount;const c=e.getIndex(),h=c!==null;if(h&&(n===-1?i.indexCount=c.count:i.indexCount=n,s===null?i.indexStart=0:i.indexStart=s.indexStart+s.indexCount),i.indexStart!==-1&&i.indexStart+i.indexCount>this._maxIndexCount||i.vertexStart+i.vertexCount>this._maxVertexCount)throw new Error("BatchedMesh: Reserved space request exceeds the maximum buffer size.");const u=this._geometryCount;return this._geometryCount++,a.push(i),o.push({start:h?i.indexStart:i.vertexStart,count:-1}),l.push({boxInitialized:!1,box:new tn,sphereInitialized:!1,sphere:new Kt}),this.setGeometryAt(u,e),u}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const n=this.geometry,i=n.getIndex()!==null,s=n.getIndex(),a=t.getIndex(),o=this._reservedRanges[e];if(i&&a.count>o.indexCount||t.attributes.position.count>o.vertexCount)throw new Error("BatchedMesh: Reserved space not large enough for provided geometry.");const l=o.vertexStart,c=o.vertexCount;for(const d in n.attributes){const m=t.getAttribute(d),g=n.getAttribute(d);Ix(m,g,l);const p=m.itemSize;for(let _=m.count,y=c;_<y;_++){const x=l+_;for(let v=0;v<p;v++)g.setComponent(x,v,0)}g.needsUpdate=!0,g.addUpdateRange(l*p,c*p)}if(i){const d=o.indexStart;for(let m=0;m<a.count;m++)s.setX(d+m,l+a.getX(m));for(let m=a.count,g=o.indexCount;m<g;m++)s.setX(d+m,l);s.needsUpdate=!0,s.addUpdateRange(d,o.indexCount)}const h=this._bounds[e];t.boundingBox!==null?(h.box.copy(t.boundingBox),h.boxInitialized=!0):h.boxInitialized=!1,t.boundingSphere!==null?(h.sphere.copy(t.boundingSphere),h.sphereInitialized=!0):h.sphereInitialized=!1;const u=this._drawRanges[e],f=t.getAttribute("position");return u.count=i?a.count:f.count,this._visibilityChanged=!0,e}getBoundingBoxAt(e,t){if(e>=this._geometryCount)return null;const n=this._bounds[e],i=n.box,s=this.geometry;if(n.boxInitialized===!1){i.makeEmpty();const a=s.index,o=s.attributes.position,l=this._drawRanges[e];for(let c=l.start,h=l.start+l.count;c<h;c++){let u=c;a&&(u=a.getX(u)),i.expandByPoint(qa.fromBufferAttribute(o,u))}n.boxInitialized=!0}return t.copy(i),t}getBoundingSphereAt(e,t){if(e>=this._geometryCount)return null;const n=this._bounds[e],i=n.sphere,s=this.geometry;if(n.sphereInitialized===!1){i.makeEmpty(),this.getBoundingBoxAt(e,bl),bl.getCenter(i.center);const a=s.index,o=s.attributes.position,l=this._drawRanges[e];let c=0;for(let h=l.start,u=l.start+l.count;h<u;h++){let f=h;a&&(f=a.getX(f)),qa.fromBufferAttribute(o,f),c=Math.max(c,i.center.distanceToSquared(qa))}i.radius=Math.sqrt(c),n.sphereInitialized=!0}return t.copy(i),t}setMatrixAt(e,t){const n=this._drawInfo,i=this._matricesTexture,s=this._matricesTexture.image.data;return e>=n.length||n[e].active===!1?this:(t.toArray(s,e*16),i.needsUpdate=!0,this)}getMatrixAt(e,t){const n=this._drawInfo,i=this._matricesTexture.image.data;return e>=n.length||n[e].active===!1?null:t.fromArray(i,e*16)}setColorAt(e,t){this._colorsTexture===null&&this._initColorsTexture();const n=this._colorsTexture,i=this._colorsTexture.image.data,s=this._drawInfo;return e>=s.length||s[e].active===!1?this:(t.toArray(i,e*4),n.needsUpdate=!0,this)}getColorAt(e,t){const n=this._colorsTexture.image.data,i=this._drawInfo;return e>=i.length||i[e].active===!1?null:t.fromArray(n,e*4)}setVisibleAt(e,t){const n=this._drawInfo;return e>=n.length||n[e].active===!1||n[e].visible===t?this:(n[e].visible=t,this._visibilityChanged=!0,this)}getVisibleAt(e){const t=this._drawInfo;return e>=t.length||t[e].active===!1?!1:t[e].visible}raycast(e,t){const n=this._drawInfo,i=this._drawRanges,s=this.matrixWorld,a=this.geometry;Jt.material=this.material,Jt.geometry.index=a.index,Jt.geometry.attributes=a.attributes,Jt.geometry.boundingBox===null&&(Jt.geometry.boundingBox=new tn),Jt.geometry.boundingSphere===null&&(Jt.geometry.boundingSphere=new Kt);for(let o=0,l=n.length;o<l;o++){if(!n[o].visible||!n[o].active)continue;const c=n[o].geometryIndex,h=i[c];Jt.geometry.setDrawRange(h.start,h.count),this.getMatrixAt(o,Jt.matrixWorld).premultiply(s),this.getBoundingBoxAt(c,Jt.geometry.boundingBox),this.getBoundingSphereAt(c,Jt.geometry.boundingSphere),Jt.raycast(e,Tl);for(let u=0,f=Tl.length;u<f;u++){const d=Tl[u];d.object=this,d.batchId=o,t.push(d)}Tl.length=0}Jt.material=null,Jt.geometry.index=null,Jt.geometry.attributes={},Jt.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._drawRanges=e._drawRanges.map(t=>({...t})),this._reservedRanges=e._reservedRanges.map(t=>({...t})),this._drawInfo=e._drawInfo.map(t=>({...t})),this._bounds=e._bounds.map(t=>({boxInitialized:t.boxInitialized,box:t.box.clone(),sphereInitialized:t.sphereInitialized,sphere:t.sphere.clone()})),this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._geometryCount=e._geometryCount,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null),this}onBeforeRender(e,t,n,i,s){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const a=i.getIndex(),o=a===null?1:a.array.BYTES_PER_ELEMENT,l=this._drawInfo,c=this._multiDrawStarts,h=this._multiDrawCounts,u=this._drawRanges,f=this.perObjectFrustumCulled,d=this._indirectTexture,m=d.image.data;f&&(Bp.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse).multiply(this.matrixWorld),cu.setFromProjectionMatrix(Bp,e.coordinateSystem));let g=0;if(this.sortObjects){lu.copy(this.matrixWorld).invert(),qa.setFromMatrixPosition(n.matrixWorld).applyMatrix4(lu),zp.set(0,0,-1).transformDirection(n.matrixWorld).transformDirection(lu);for(let y=0,x=l.length;y<x;y++)if(l[y].visible&&l[y].active){const v=l[y].geometryIndex;this.getMatrixAt(y,Yi),this.getBoundingSphereAt(v,bs).applyMatrix4(Yi);let w=!1;if(f&&(w=!cu.intersectsSphere(bs)),!w){const b=Px.subVectors(bs.center,qa).dot(zp);hu.push(u[v],b,y)}}const p=hu.list,_=this.customSort;_===null?p.sort(s.transparent?wx:Ax):_.call(this,p,n);for(let y=0,x=p.length;y<x;y++){const v=p[y];c[g]=v.start*o,h[g]=v.count,m[g]=v.index,g++}hu.reset()}else for(let p=0,_=l.length;p<_;p++)if(l[p].visible&&l[p].active){const y=l[p].geometryIndex;let x=!1;if(f&&(this.getMatrixAt(p,Yi),this.getBoundingSphereAt(y,bs).applyMatrix4(Yi),x=!cu.intersectsSphere(bs)),!x){const v=u[y];c[g]=v.start*o,h[g]=v.count,m[g]=p,g++}}d.needsUpdate=!0,this._multiDrawCount=g,this._visibilityChanged=!1}onBeforeShadow(e,t,n,i,s,a){this.onBeforeRender(e,null,i,s,a)}}class rn extends Ut{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new ae(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const Ic=new R,qc=new R,kp=new Ee,La=new fr,Al=new Kt,uu=new R,Hp=new R;class Oi extends Xe{constructor(e=new Oe,t=new rn){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,n=[0];for(let i=1,s=t.count;i<s;i++)Ic.fromBufferAttribute(t,i-1),qc.fromBufferAttribute(t,i),n[i]=n[i-1],n[i]+=Ic.distanceTo(qc);e.setAttribute("lineDistance",new Se(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const n=this.geometry,i=this.matrixWorld,s=e.params.Line.threshold,a=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),Al.copy(n.boundingSphere),Al.applyMatrix4(i),Al.radius+=s,e.ray.intersectsSphere(Al)===!1)return;kp.copy(i).invert(),La.copy(e.ray).applyMatrix4(kp);const o=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=o*o,c=this.isLineSegments?2:1,h=n.index,f=n.attributes.position;if(h!==null){const d=Math.max(0,a.start),m=Math.min(h.count,a.start+a.count);for(let g=d,p=m-1;g<p;g+=c){const _=h.getX(g),y=h.getX(g+1),x=wl(this,e,La,l,_,y);x&&t.push(x)}if(this.isLineLoop){const g=h.getX(m-1),p=h.getX(d),_=wl(this,e,La,l,g,p);_&&t.push(_)}}else{const d=Math.max(0,a.start),m=Math.min(f.count,a.start+a.count);for(let g=d,p=m-1;g<p;g+=c){const _=wl(this,e,La,l,g,g+1);_&&t.push(_)}if(this.isLineLoop){const g=wl(this,e,La,l,m-1,d);g&&t.push(g)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const i=t[n[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=i.length;s<a;s++){const o=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=s}}}}}function wl(r,e,t,n,i,s){const a=r.geometry.attributes.position;if(Ic.fromBufferAttribute(a,i),qc.fromBufferAttribute(a,s),t.distanceSqToSegment(Ic,qc,uu,Hp)>n)return;uu.applyMatrix4(r.matrixWorld);const l=e.ray.origin.distanceTo(uu);if(!(l<e.near||l>e.far))return{distance:l,point:Hp.clone().applyMatrix4(r.matrixWorld),index:i,face:null,faceIndex:null,object:r}}const Vp=new R,Gp=new R;class ei extends Oi{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,n=[];for(let i=0,s=t.count;i<s;i+=2)Vp.fromBufferAttribute(t,i),Gp.fromBufferAttribute(t,i+1),n[i]=i===0?0:n[i-1],n[i+1]=n[i]+Vp.distanceTo(Gp);e.setAttribute("lineDistance",new Se(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class Zf extends Oi{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class Bo extends Ut{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new ae(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const Wp=new Ee,Gu=new fr,El=new Kt,Rl=new R;class lh extends Xe{constructor(e=new Oe,t=new Bo){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const n=this.geometry,i=this.matrixWorld,s=e.params.Points.threshold,a=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),El.copy(n.boundingSphere),El.applyMatrix4(i),El.radius+=s,e.ray.intersectsSphere(El)===!1)return;Wp.copy(i).invert(),Gu.copy(e.ray).applyMatrix4(Wp);const o=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=o*o,c=n.index,u=n.attributes.position;if(c!==null){const f=Math.max(0,a.start),d=Math.min(c.count,a.start+a.count);for(let m=f,g=d;m<g;m++){const p=c.getX(m);Rl.fromBufferAttribute(u,p),Xp(Rl,p,l,i,e,t,this)}}else{const f=Math.max(0,a.start),d=Math.min(u.count,a.start+a.count);for(let m=f,g=d;m<g;m++)Rl.fromBufferAttribute(u,m),Xp(Rl,m,l,i,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const i=t[n[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=i.length;s<a;s++){const o=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=s}}}}}function Xp(r,e,t,n,i,s,a){const o=Gu.distanceSqToPoint(r);if(o<t){const l=new R;Gu.closestPointToPoint(r,l),l.applyMatrix4(n);const c=i.ray.origin.distanceTo(l);if(c<i.near||c>i.far)return;s.push({distance:c,distanceToRay:Math.sqrt(o),point:l,index:e,face:null,object:a})}}class qx extends dt{constructor(e,t,n,i,s,a,o,l,c){super(e,t,n,i,s,a,o,l,c),this.isVideoTexture=!0,this.minFilter=a!==void 0?a:St,this.magFilter=s!==void 0?s:St,this.generateMipmaps=!1;const h=this;function u(){h.needsUpdate=!0,e.requestVideoFrameCallback(u)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(u)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class Lx extends dt{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=Nt,this.minFilter=Nt,this.generateMipmaps=!1,this.needsUpdate=!0}}class ch extends dt{constructor(e,t,n,i,s,a,o,l,c,h,u,f){super(null,a,o,l,c,h,i,s,u,f),this.isCompressedTexture=!0,this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class Dx extends ch{constructor(e,t,n,i,s,a){super(e,t,n,s,a),this.isCompressedArrayTexture=!0,this.image.depth=i,this.wrapR=Pn,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class Nx extends ch{constructor(e,t,n){super(void 0,e[0].width,e[0].height,t,n,Ni),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class Ux extends dt{constructor(e,t,n,i,s,a,o,l,c){super(e,t,n,i,s,a,o,l,c),this.isCanvasTexture=!0,this.needsUpdate=!0}}class ti{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const n=this.getUtoTmapping(e);return this.getPoint(n,t)}getPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}getSpacedPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let n,i=this.getPoint(0),s=0;t.push(0);for(let a=1;a<=e;a++)n=this.getPoint(a/e),s+=n.distanceTo(i),t.push(s),i=n;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const n=this.getLengths();let i=0;const s=n.length;let a;t?a=t:a=e*n[s-1];let o=0,l=s-1,c;for(;o<=l;)if(i=Math.floor(o+(l-o)/2),c=n[i]-a,c<0)o=i+1;else if(c>0)l=i-1;else{l=i;break}if(i=l,n[i]===a)return i/(s-1);const h=n[i],f=n[i+1]-h,d=(a-h)/f;return(i+d)/(s-1)}getTangent(e,t){let i=e-1e-4,s=e+1e-4;i<0&&(i=0),s>1&&(s=1);const a=this.getPoint(i),o=this.getPoint(s),l=t||(a.isVector2?new G:new R);return l.copy(o).sub(a).normalize(),l}getTangentAt(e,t){const n=this.getUtoTmapping(e);return this.getTangent(n,t)}computeFrenetFrames(e,t){const n=new R,i=[],s=[],a=[],o=new R,l=new Ee;for(let d=0;d<=e;d++){const m=d/e;i[d]=this.getTangentAt(m,new R)}s[0]=new R,a[0]=new R;let c=Number.MAX_VALUE;const h=Math.abs(i[0].x),u=Math.abs(i[0].y),f=Math.abs(i[0].z);h<=c&&(c=h,n.set(1,0,0)),u<=c&&(c=u,n.set(0,1,0)),f<=c&&n.set(0,0,1),o.crossVectors(i[0],n).normalize(),s[0].crossVectors(i[0],o),a[0].crossVectors(i[0],s[0]);for(let d=1;d<=e;d++){if(s[d]=s[d-1].clone(),a[d]=a[d-1].clone(),o.crossVectors(i[d-1],i[d]),o.length()>Number.EPSILON){o.normalize();const m=Math.acos(Mt(i[d-1].dot(i[d]),-1,1));s[d].applyMatrix4(l.makeRotationAxis(o,m))}a[d].crossVectors(i[d],s[d])}if(t===!0){let d=Math.acos(Mt(s[0].dot(s[e]),-1,1));d/=e,i[0].dot(o.crossVectors(s[0],s[e]))>0&&(d=-d);for(let m=1;m<=e;m++)s[m].applyMatrix4(l.makeRotationAxis(i[m],d*m)),a[m].crossVectors(i[m],s[m])}return{tangents:i,normals:s,binormals:a}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class hh extends ti{constructor(e=0,t=0,n=1,i=1,s=0,a=Math.PI*2,o=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=i,this.aStartAngle=s,this.aEndAngle=a,this.aClockwise=o,this.aRotation=l}getPoint(e,t=new G){const n=t,i=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const a=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=i;for(;s>i;)s-=i;s<Number.EPSILON&&(a?s=0:s=i),this.aClockwise===!0&&!a&&(s===i?s=-i:s=s-i);const o=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(o),c=this.aY+this.yRadius*Math.sin(o);if(this.aRotation!==0){const h=Math.cos(this.aRotation),u=Math.sin(this.aRotation),f=l-this.aX,d=c-this.aY;l=f*h-d*u+this.aX,c=f*u+d*h+this.aY}return n.set(l,c)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class um extends hh{constructor(e,t,n,i,s,a){super(e,t,n,n,i,s,a),this.isArcCurve=!0,this.type="ArcCurve"}}function $f(){let r=0,e=0,t=0,n=0;function i(s,a,o,l){r=s,e=o,t=-3*s+3*a-2*o-l,n=2*s-2*a+o+l}return{initCatmullRom:function(s,a,o,l,c){i(a,o,c*(o-s),c*(l-a))},initNonuniformCatmullRom:function(s,a,o,l,c,h,u){let f=(a-s)/c-(o-s)/(c+h)+(o-a)/h,d=(o-a)/h-(l-a)/(h+u)+(l-o)/u;f*=h,d*=h,i(a,o,f,d)},calc:function(s){const a=s*s,o=a*s;return r+e*s+t*a+n*o}}}const Cl=new R,fu=new $f,du=new $f,pu=new $f;class fm extends ti{constructor(e=[],t=!1,n="centripetal",i=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=n,this.tension=i}getPoint(e,t=new R){const n=t,i=this.points,s=i.length,a=(s-(this.closed?0:1))*e;let o=Math.floor(a),l=a-o;this.closed?o+=o>0?0:(Math.floor(Math.abs(o)/s)+1)*s:l===0&&o===s-1&&(o=s-2,l=1);let c,h;this.closed||o>0?c=i[(o-1)%s]:(Cl.subVectors(i[0],i[1]).add(i[0]),c=Cl);const u=i[o%s],f=i[(o+1)%s];if(this.closed||o+2<s?h=i[(o+2)%s]:(Cl.subVectors(i[s-1],i[s-2]).add(i[s-1]),h=Cl),this.curveType==="centripetal"||this.curveType==="chordal"){const d=this.curveType==="chordal"?.5:.25;let m=Math.pow(c.distanceToSquared(u),d),g=Math.pow(u.distanceToSquared(f),d),p=Math.pow(f.distanceToSquared(h),d);g<1e-4&&(g=1),m<1e-4&&(m=g),p<1e-4&&(p=g),fu.initNonuniformCatmullRom(c.x,u.x,f.x,h.x,m,g,p),du.initNonuniformCatmullRom(c.y,u.y,f.y,h.y,m,g,p),pu.initNonuniformCatmullRom(c.z,u.z,f.z,h.z,m,g,p)}else this.curveType==="catmullrom"&&(fu.initCatmullRom(c.x,u.x,f.x,h.x,this.tension),du.initCatmullRom(c.y,u.y,f.y,h.y,this.tension),pu.initCatmullRom(c.z,u.z,f.z,h.z,this.tension));return n.set(fu.calc(l),du.calc(l),pu.calc(l)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const i=e.points[t];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const i=this.points[t];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const i=e.points[t];this.points.push(new R().fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function Yp(r,e,t,n,i){const s=(n-e)*.5,a=(i-t)*.5,o=r*r,l=r*o;return(2*t-2*n+s+a)*l+(-3*t+3*n-2*s-a)*o+s*r+t}function Ox(r,e){const t=1-r;return t*t*e}function Fx(r,e){return 2*(1-r)*r*e}function Bx(r,e){return r*r*e}function Za(r,e,t,n){return Ox(r,e)+Fx(r,t)+Bx(r,n)}function zx(r,e){const t=1-r;return t*t*t*e}function kx(r,e){const t=1-r;return 3*t*t*r*e}function Hx(r,e){return 3*(1-r)*r*r*e}function Vx(r,e){return r*r*r*e}function $a(r,e,t,n,i){return zx(r,e)+kx(r,t)+Hx(r,n)+Vx(r,i)}class Jf extends ti{constructor(e=new G,t=new G,n=new G,i=new G){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=n,this.v3=i}getPoint(e,t=new G){const n=t,i=this.v0,s=this.v1,a=this.v2,o=this.v3;return n.set($a(e,i.x,s.x,a.x,o.x),$a(e,i.y,s.y,a.y,o.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class dm extends ti{constructor(e=new R,t=new R,n=new R,i=new R){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=n,this.v3=i}getPoint(e,t=new R){const n=t,i=this.v0,s=this.v1,a=this.v2,o=this.v3;return n.set($a(e,i.x,s.x,a.x,o.x),$a(e,i.y,s.y,a.y,o.y),$a(e,i.z,s.z,a.z,o.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class jf extends ti{constructor(e=new G,t=new G){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new G){const n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new G){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class pm extends ti{constructor(e=new R,t=new R){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new R){const n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new R){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Qf extends ti{constructor(e=new G,t=new G,n=new G){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new G){const n=t,i=this.v0,s=this.v1,a=this.v2;return n.set(Za(e,i.x,s.x,a.x),Za(e,i.y,s.y,a.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class ed extends ti{constructor(e=new R,t=new R,n=new R){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new R){const n=t,i=this.v0,s=this.v1,a=this.v2;return n.set(Za(e,i.x,s.x,a.x),Za(e,i.y,s.y,a.y),Za(e,i.z,s.z,a.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class uh extends ti{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new G){const n=t,i=this.points,s=(i.length-1)*e,a=Math.floor(s),o=s-a,l=i[a===0?a:a-1],c=i[a],h=i[a>i.length-2?i.length-1:a+1],u=i[a>i.length-3?i.length-1:a+2];return n.set(Yp(o,l.x,c.x,h.x,u.x),Yp(o,l.y,c.y,h.y,u.y)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const i=e.points[t];this.points.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const i=this.points[t];e.points.push(i.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const i=e.points[t];this.points.push(new G().fromArray(i))}return this}}var Lc=Object.freeze({__proto__:null,ArcCurve:um,CatmullRomCurve3:fm,CubicBezierCurve:Jf,CubicBezierCurve3:dm,EllipseCurve:hh,LineCurve:jf,LineCurve3:pm,QuadraticBezierCurve:Qf,QuadraticBezierCurve3:ed,SplineCurve:uh});class mm extends ti{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const n=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new Lc[n](t,e))}return this}getPoint(e,t){const n=e*this.getLength(),i=this.getCurveLengths();let s=0;for(;s<i.length;){if(i[s]>=n){const a=i[s]-n,o=this.curves[s],l=o.getLength(),c=l===0?0:1-a/l;return o.getPointAt(c,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let n=0,i=this.curves.length;n<i;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let n;for(let i=0,s=this.curves;i<s.length;i++){const a=s[i],o=a.isEllipseCurve?e*2:a.isLineCurve||a.isLineCurve3?1:a.isSplineCurve?e*a.points.length:e,l=a.getPoints(o);for(let c=0;c<l.length;c++){const h=l[c];n&&n.equals(h)||(t.push(h),n=h)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const i=e.curves[t];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++){const i=this.curves[t];e.curves.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const i=e.curves[t];this.curves.push(new Lc[i.type]().fromJSON(i))}return this}}class _o extends mm{constructor(e){super(),this.type="Path",this.currentPoint=new G,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const n=new jf(this.currentPoint.clone(),new G(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,n,i){const s=new Qf(this.currentPoint.clone(),new G(e,t),new G(n,i));return this.curves.push(s),this.currentPoint.set(n,i),this}bezierCurveTo(e,t,n,i,s,a){const o=new Jf(this.currentPoint.clone(),new G(e,t),new G(n,i),new G(s,a));return this.curves.push(o),this.currentPoint.set(s,a),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),n=new uh(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,n,i,s,a){const o=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+o,t+l,n,i,s,a),this}absarc(e,t,n,i,s,a){return this.absellipse(e,t,n,n,i,s,a),this}ellipse(e,t,n,i,s,a,o,l){const c=this.currentPoint.x,h=this.currentPoint.y;return this.absellipse(e+c,t+h,n,i,s,a,o,l),this}absellipse(e,t,n,i,s,a,o,l){const c=new hh(e,t,n,i,s,a,o,l);if(this.curves.length>0){const u=c.getPoint(0);u.equals(this.currentPoint)||this.lineTo(u.x,u.y)}this.curves.push(c);const h=c.getPoint(1);return this.currentPoint.copy(h),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class zo extends Oe{constructor(e=[new G(0,-.5),new G(.5,0),new G(0,.5)],t=12,n=0,i=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:i},t=Math.floor(t),i=Mt(i,0,Math.PI*2);const s=[],a=[],o=[],l=[],c=[],h=1/t,u=new R,f=new G,d=new R,m=new R,g=new R;let p=0,_=0;for(let y=0;y<=e.length-1;y++)switch(y){case 0:p=e[y+1].x-e[y].x,_=e[y+1].y-e[y].y,d.x=_*1,d.y=-p,d.z=_*0,g.copy(d),d.normalize(),l.push(d.x,d.y,d.z);break;case e.length-1:l.push(g.x,g.y,g.z);break;default:p=e[y+1].x-e[y].x,_=e[y+1].y-e[y].y,d.x=_*1,d.y=-p,d.z=_*0,m.copy(d),d.x+=g.x,d.y+=g.y,d.z+=g.z,d.normalize(),l.push(d.x,d.y,d.z),g.copy(m)}for(let y=0;y<=t;y++){const x=n+y*h*i,v=Math.sin(x),w=Math.cos(x);for(let b=0;b<=e.length-1;b++){u.x=e[b].x*v,u.y=e[b].y,u.z=e[b].x*w,a.push(u.x,u.y,u.z),f.x=y/t,f.y=b/(e.length-1),o.push(f.x,f.y);const A=l[3*b+0]*v,C=l[3*b+1],M=l[3*b+0]*w;c.push(A,C,M)}}for(let y=0;y<t;y++)for(let x=0;x<e.length-1;x++){const v=x+y*e.length,w=v,b=v+e.length,A=v+e.length+1,C=v+1;s.push(w,b,C),s.push(A,C,b)}this.setIndex(s),this.setAttribute("position",new Se(a,3)),this.setAttribute("uv",new Se(o,2)),this.setAttribute("normal",new Se(c,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new zo(e.points,e.segments,e.phiStart,e.phiLength)}}class fh extends zo{constructor(e=1,t=1,n=4,i=8){const s=new _o;s.absarc(0,-t/2,e,Math.PI*1.5,0),s.absarc(0,t/2,e,0,Math.PI*.5),super(s.getPoints(n),i),this.type="CapsuleGeometry",this.parameters={radius:e,length:t,capSegments:n,radialSegments:i}}static fromJSON(e){return new fh(e.radius,e.length,e.capSegments,e.radialSegments)}}class ko extends Oe{constructor(e=1,t=32,n=0,i=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:i},t=Math.max(3,t);const s=[],a=[],o=[],l=[],c=new R,h=new G;a.push(0,0,0),o.push(0,0,1),l.push(.5,.5);for(let u=0,f=3;u<=t;u++,f+=3){const d=n+u/t*i;c.x=e*Math.cos(d),c.y=e*Math.sin(d),a.push(c.x,c.y,c.z),o.push(0,0,1),h.x=(a[f]/e+1)/2,h.y=(a[f+1]/e+1)/2,l.push(h.x,h.y)}for(let u=1;u<=t;u++)s.push(u,u+1,0);this.setIndex(s),this.setAttribute("position",new Se(a,3)),this.setAttribute("normal",new Se(o,3)),this.setAttribute("uv",new Se(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ko(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class xa extends Oe{constructor(e=1,t=1,n=1,i=32,s=1,a=!1,o=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:i,heightSegments:s,openEnded:a,thetaStart:o,thetaLength:l};const c=this;i=Math.floor(i),s=Math.floor(s);const h=[],u=[],f=[],d=[];let m=0;const g=[],p=n/2;let _=0;y(),a===!1&&(e>0&&x(!0),t>0&&x(!1)),this.setIndex(h),this.setAttribute("position",new Se(u,3)),this.setAttribute("normal",new Se(f,3)),this.setAttribute("uv",new Se(d,2));function y(){const v=new R,w=new R;let b=0;const A=(t-e)/n;for(let C=0;C<=s;C++){const M=[],S=C/s,q=S*(t-e)+e;for(let O=0;O<=i;O++){const N=O/i,z=N*l+o,V=Math.sin(z),F=Math.cos(z);w.x=q*V,w.y=-S*n+p,w.z=q*F,u.push(w.x,w.y,w.z),v.set(V,A,F).normalize(),f.push(v.x,v.y,v.z),d.push(N,1-S),M.push(m++)}g.push(M)}for(let C=0;C<i;C++)for(let M=0;M<s;M++){const S=g[M][C],q=g[M+1][C],O=g[M+1][C+1],N=g[M][C+1];h.push(S,q,N),h.push(q,O,N),b+=6}c.addGroup(_,b,0),_+=b}function x(v){const w=m,b=new G,A=new R;let C=0;const M=v===!0?e:t,S=v===!0?1:-1;for(let O=1;O<=i;O++)u.push(0,p*S,0),f.push(0,S,0),d.push(.5,.5),m++;const q=m;for(let O=0;O<=i;O++){const z=O/i*l+o,V=Math.cos(z),F=Math.sin(z);A.x=M*F,A.y=p*S,A.z=M*V,u.push(A.x,A.y,A.z),f.push(0,S,0),b.x=V*.5+.5,b.y=F*.5*S+.5,d.push(b.x,b.y),m++}for(let O=0;O<i;O++){const N=w+O,z=q+O;v===!0?h.push(z,z+1,N):h.push(z+1,z,N),C+=3}c.addGroup(_,C,v===!0?1:2),_+=C}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new xa(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class dh extends xa{constructor(e=1,t=1,n=32,i=1,s=!1,a=0,o=Math.PI*2){super(0,e,t,n,i,s,a,o),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:i,openEnded:s,thetaStart:a,thetaLength:o}}static fromJSON(e){return new dh(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class ds extends Oe{constructor(e=[],t=[],n=1,i=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:i};const s=[],a=[];o(i),c(n),h(),this.setAttribute("position",new Se(s,3)),this.setAttribute("normal",new Se(s.slice(),3)),this.setAttribute("uv",new Se(a,2)),i===0?this.computeVertexNormals():this.normalizeNormals();function o(y){const x=new R,v=new R,w=new R;for(let b=0;b<t.length;b+=3)d(t[b+0],x),d(t[b+1],v),d(t[b+2],w),l(x,v,w,y)}function l(y,x,v,w){const b=w+1,A=[];for(let C=0;C<=b;C++){A[C]=[];const M=y.clone().lerp(v,C/b),S=x.clone().lerp(v,C/b),q=b-C;for(let O=0;O<=q;O++)O===0&&C===b?A[C][O]=M:A[C][O]=M.clone().lerp(S,O/q)}for(let C=0;C<b;C++)for(let M=0;M<2*(b-C)-1;M++){const S=Math.floor(M/2);M%2===0?(f(A[C][S+1]),f(A[C+1][S]),f(A[C][S])):(f(A[C][S+1]),f(A[C+1][S+1]),f(A[C+1][S]))}}function c(y){const x=new R;for(let v=0;v<s.length;v+=3)x.x=s[v+0],x.y=s[v+1],x.z=s[v+2],x.normalize().multiplyScalar(y),s[v+0]=x.x,s[v+1]=x.y,s[v+2]=x.z}function h(){const y=new R;for(let x=0;x<s.length;x+=3){y.x=s[x+0],y.y=s[x+1],y.z=s[x+2];const v=p(y)/2/Math.PI+.5,w=_(y)/Math.PI+.5;a.push(v,1-w)}m(),u()}function u(){for(let y=0;y<a.length;y+=6){const x=a[y+0],v=a[y+2],w=a[y+4],b=Math.max(x,v,w),A=Math.min(x,v,w);b>.9&&A<.1&&(x<.2&&(a[y+0]+=1),v<.2&&(a[y+2]+=1),w<.2&&(a[y+4]+=1))}}function f(y){s.push(y.x,y.y,y.z)}function d(y,x){const v=y*3;x.x=e[v+0],x.y=e[v+1],x.z=e[v+2]}function m(){const y=new R,x=new R,v=new R,w=new R,b=new G,A=new G,C=new G;for(let M=0,S=0;M<s.length;M+=9,S+=6){y.set(s[M+0],s[M+1],s[M+2]),x.set(s[M+3],s[M+4],s[M+5]),v.set(s[M+6],s[M+7],s[M+8]),b.set(a[S+0],a[S+1]),A.set(a[S+2],a[S+3]),C.set(a[S+4],a[S+5]),w.copy(y).add(x).add(v).divideScalar(3);const q=p(w);g(b,S+0,y,q),g(A,S+2,x,q),g(C,S+4,v,q)}}function g(y,x,v,w){w<0&&y.x===1&&(a[x]=y.x-1),v.x===0&&v.z===0&&(a[x]=w/2/Math.PI+.5)}function p(y){return Math.atan2(y.z,-y.x)}function _(y){return Math.atan2(-y.y,Math.sqrt(y.x*y.x+y.z*y.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ds(e.vertices,e.indices,e.radius,e.details)}}class ph extends ds{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2,i=1/n,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-n,0,-i,n,0,i,-n,0,i,n,-i,-n,0,-i,n,0,i,-n,0,i,n,0,-n,0,-i,n,0,-i,-n,0,i,n,0,i],a=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,a,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new ph(e.radius,e.detail)}}const Pl=new R,Il=new R,mu=new R,ql=new Rn;class gm extends Oe{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const i=Math.pow(10,4),s=Math.cos(Zs*t),a=e.getIndex(),o=e.getAttribute("position"),l=a?a.count:o.count,c=[0,0,0],h=["a","b","c"],u=new Array(3),f={},d=[];for(let m=0;m<l;m+=3){a?(c[0]=a.getX(m),c[1]=a.getX(m+1),c[2]=a.getX(m+2)):(c[0]=m,c[1]=m+1,c[2]=m+2);const{a:g,b:p,c:_}=ql;if(g.fromBufferAttribute(o,c[0]),p.fromBufferAttribute(o,c[1]),_.fromBufferAttribute(o,c[2]),ql.getNormal(mu),u[0]=`${Math.round(g.x*i)},${Math.round(g.y*i)},${Math.round(g.z*i)}`,u[1]=`${Math.round(p.x*i)},${Math.round(p.y*i)},${Math.round(p.z*i)}`,u[2]=`${Math.round(_.x*i)},${Math.round(_.y*i)},${Math.round(_.z*i)}`,!(u[0]===u[1]||u[1]===u[2]||u[2]===u[0]))for(let y=0;y<3;y++){const x=(y+1)%3,v=u[y],w=u[x],b=ql[h[y]],A=ql[h[x]],C=`${v}_${w}`,M=`${w}_${v}`;M in f&&f[M]?(mu.dot(f[M].normal)<=s&&(d.push(b.x,b.y,b.z),d.push(A.x,A.y,A.z)),f[M]=null):C in f||(f[C]={index0:c[y],index1:c[x],normal:mu.clone()})}}for(const m in f)if(f[m]){const{index0:g,index1:p}=f[m];Pl.fromBufferAttribute(o,g),Il.fromBufferAttribute(o,p),d.push(Pl.x,Pl.y,Pl.z),d.push(Il.x,Il.y,Il.z)}this.setAttribute("position",new Se(d,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class $s extends _o{constructor(e){super(e),this.uuid=qn(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let n=0,i=this.holes.length;n<i;n++)t[n]=this.holes[n].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const i=e.holes[t];this.holes.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++){const i=this.holes[t];e.holes.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const i=e.holes[t];this.holes.push(new _o().fromJSON(i))}return this}}const Gx={triangulate:function(r,e,t=2){const n=e&&e.length,i=n?e[0]*t:r.length;let s=_m(r,0,i,t,!0);const a=[];if(!s||s.next===s.prev)return a;let o,l,c,h,u,f,d;if(n&&(s=Zx(r,e,s,t)),r.length>80*t){o=c=r[0],l=h=r[1];for(let m=t;m<i;m+=t)u=r[m],f=r[m+1],u<o&&(o=u),f<l&&(l=f),u>c&&(c=u),f>h&&(h=f);d=Math.max(c-o,h-l),d=d!==0?32767/d:0}return xo(s,a,t,o,l,d,0),a}};function _m(r,e,t,n,i){let s,a;if(i===a6(r,e,t,n)>0)for(s=e;s<t;s+=n)a=Kp(s,r[s],r[s+1],a);else for(s=t-n;s>=e;s-=n)a=Kp(s,r[s],r[s+1],a);return a&&mh(a,a.next)&&(vo(a),a=a.next),a}function sr(r,e){if(!r)return r;e||(e=r);let t=r,n;do if(n=!1,!t.steiner&&(mh(t,t.next)||gt(t.prev,t,t.next)===0)){if(vo(t),t=e=t.prev,t===t.next)break;n=!0}else t=t.next;while(n||t!==e);return e}function xo(r,e,t,n,i,s,a){if(!r)return;!a&&s&&e6(r,n,i,s);let o=r,l,c;for(;r.prev!==r.next;){if(l=r.prev,c=r.next,s?Xx(r,n,i,s):Wx(r)){e.push(l.i/t|0),e.push(r.i/t|0),e.push(c.i/t|0),vo(r),r=c.next,o=c.next;continue}if(r=c,r===o){a?a===1?(r=Yx(sr(r),e,t),xo(r,e,t,n,i,s,2)):a===2&&Kx(r,e,t,n,i,s):xo(sr(r),e,t,n,i,s,1);break}}}function Wx(r){const e=r.prev,t=r,n=r.next;if(gt(e,t,n)>=0)return!1;const i=e.x,s=t.x,a=n.x,o=e.y,l=t.y,c=n.y,h=i<s?i<a?i:a:s<a?s:a,u=o<l?o<c?o:c:l<c?l:c,f=i>s?i>a?i:a:s>a?s:a,d=o>l?o>c?o:c:l>c?l:c;let m=n.next;for(;m!==e;){if(m.x>=h&&m.x<=f&&m.y>=u&&m.y<=d&&Gr(i,o,s,l,a,c,m.x,m.y)&&gt(m.prev,m,m.next)>=0)return!1;m=m.next}return!0}function Xx(r,e,t,n){const i=r.prev,s=r,a=r.next;if(gt(i,s,a)>=0)return!1;const o=i.x,l=s.x,c=a.x,h=i.y,u=s.y,f=a.y,d=o<l?o<c?o:c:l<c?l:c,m=h<u?h<f?h:f:u<f?u:f,g=o>l?o>c?o:c:l>c?l:c,p=h>u?h>f?h:f:u>f?u:f,_=Wu(d,m,e,t,n),y=Wu(g,p,e,t,n);let x=r.prevZ,v=r.nextZ;for(;x&&x.z>=_&&v&&v.z<=y;){if(x.x>=d&&x.x<=g&&x.y>=m&&x.y<=p&&x!==i&&x!==a&&Gr(o,h,l,u,c,f,x.x,x.y)&&gt(x.prev,x,x.next)>=0||(x=x.prevZ,v.x>=d&&v.x<=g&&v.y>=m&&v.y<=p&&v!==i&&v!==a&&Gr(o,h,l,u,c,f,v.x,v.y)&&gt(v.prev,v,v.next)>=0))return!1;v=v.nextZ}for(;x&&x.z>=_;){if(x.x>=d&&x.x<=g&&x.y>=m&&x.y<=p&&x!==i&&x!==a&&Gr(o,h,l,u,c,f,x.x,x.y)&&gt(x.prev,x,x.next)>=0)return!1;x=x.prevZ}for(;v&&v.z<=y;){if(v.x>=d&&v.x<=g&&v.y>=m&&v.y<=p&&v!==i&&v!==a&&Gr(o,h,l,u,c,f,v.x,v.y)&&gt(v.prev,v,v.next)>=0)return!1;v=v.nextZ}return!0}function Yx(r,e,t){let n=r;do{const i=n.prev,s=n.next.next;!mh(i,s)&&xm(i,n,n.next,s)&&yo(i,s)&&yo(s,i)&&(e.push(i.i/t|0),e.push(n.i/t|0),e.push(s.i/t|0),vo(n),vo(n.next),n=r=s),n=n.next}while(n!==r);return sr(n)}function Kx(r,e,t,n,i,s){let a=r;do{let o=a.next.next;for(;o!==a.prev;){if(a.i!==o.i&&i6(a,o)){let l=ym(a,o);a=sr(a,a.next),l=sr(l,l.next),xo(a,e,t,n,i,s,0),xo(l,e,t,n,i,s,0);return}o=o.next}a=a.next}while(a!==r)}function Zx(r,e,t,n){const i=[];let s,a,o,l,c;for(s=0,a=e.length;s<a;s++)o=e[s]*n,l=s<a-1?e[s+1]*n:r.length,c=_m(r,o,l,n,!1),c===c.next&&(c.steiner=!0),i.push(n6(c));for(i.sort($x),s=0;s<i.length;s++)t=Jx(i[s],t);return t}function $x(r,e){return r.x-e.x}function Jx(r,e){const t=jx(r,e);if(!t)return e;const n=ym(t,r);return sr(n,n.next),sr(t,t.next)}function jx(r,e){let t=e,n=-1/0,i;const s=r.x,a=r.y;do{if(a<=t.y&&a>=t.next.y&&t.next.y!==t.y){const f=t.x+(a-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(f<=s&&f>n&&(n=f,i=t.x<t.next.x?t:t.next,f===s))return i}t=t.next}while(t!==e);if(!i)return null;const o=i,l=i.x,c=i.y;let h=1/0,u;t=i;do s>=t.x&&t.x>=l&&s!==t.x&&Gr(a<c?s:n,a,l,c,a<c?n:s,a,t.x,t.y)&&(u=Math.abs(a-t.y)/(s-t.x),yo(t,r)&&(u<h||u===h&&(t.x>i.x||t.x===i.x&&Qx(i,t)))&&(i=t,h=u)),t=t.next;while(t!==o);return i}function Qx(r,e){return gt(r.prev,r,e.prev)<0&&gt(e.next,r,r.next)<0}function e6(r,e,t,n){let i=r;do i.z===0&&(i.z=Wu(i.x,i.y,e,t,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==r);i.prevZ.nextZ=null,i.prevZ=null,t6(i)}function t6(r){let e,t,n,i,s,a,o,l,c=1;do{for(t=r,r=null,s=null,a=0;t;){for(a++,n=t,o=0,e=0;e<c&&(o++,n=n.nextZ,!!n);e++);for(l=c;o>0||l>0&&n;)o!==0&&(l===0||!n||t.z<=n.z)?(i=t,t=t.nextZ,o--):(i=n,n=n.nextZ,l--),s?s.nextZ=i:r=i,i.prevZ=s,s=i;t=n}s.nextZ=null,c*=2}while(a>1);return r}function Wu(r,e,t,n,i){return r=(r-t)*i|0,e=(e-n)*i|0,r=(r|r<<8)&16711935,r=(r|r<<4)&252645135,r=(r|r<<2)&858993459,r=(r|r<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,r|e<<1}function n6(r){let e=r,t=r;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==r);return t}function Gr(r,e,t,n,i,s,a,o){return(i-a)*(e-o)>=(r-a)*(s-o)&&(r-a)*(n-o)>=(t-a)*(e-o)&&(t-a)*(s-o)>=(i-a)*(n-o)}function i6(r,e){return r.next.i!==e.i&&r.prev.i!==e.i&&!s6(r,e)&&(yo(r,e)&&yo(e,r)&&r6(r,e)&&(gt(r.prev,r,e.prev)||gt(r,e.prev,e))||mh(r,e)&&gt(r.prev,r,r.next)>0&&gt(e.prev,e,e.next)>0)}function gt(r,e,t){return(e.y-r.y)*(t.x-e.x)-(e.x-r.x)*(t.y-e.y)}function mh(r,e){return r.x===e.x&&r.y===e.y}function xm(r,e,t,n){const i=Dl(gt(r,e,t)),s=Dl(gt(r,e,n)),a=Dl(gt(t,n,r)),o=Dl(gt(t,n,e));return!!(i!==s&&a!==o||i===0&&Ll(r,t,e)||s===0&&Ll(r,n,e)||a===0&&Ll(t,r,n)||o===0&&Ll(t,e,n))}function Ll(r,e,t){return e.x<=Math.max(r.x,t.x)&&e.x>=Math.min(r.x,t.x)&&e.y<=Math.max(r.y,t.y)&&e.y>=Math.min(r.y,t.y)}function Dl(r){return r>0?1:r<0?-1:0}function s6(r,e){let t=r;do{if(t.i!==r.i&&t.next.i!==r.i&&t.i!==e.i&&t.next.i!==e.i&&xm(t,t.next,r,e))return!0;t=t.next}while(t!==r);return!1}function yo(r,e){return gt(r.prev,r,r.next)<0?gt(r,e,r.next)>=0&&gt(r,r.prev,e)>=0:gt(r,e,r.prev)<0||gt(r,r.next,e)<0}function r6(r,e){let t=r,n=!1;const i=(r.x+e.x)/2,s=(r.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&i<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(n=!n),t=t.next;while(t!==r);return n}function ym(r,e){const t=new Xu(r.i,r.x,r.y),n=new Xu(e.i,e.x,e.y),i=r.next,s=e.prev;return r.next=e,e.prev=r,t.next=i,i.prev=t,n.next=t,t.prev=n,s.next=n,n.prev=s,n}function Kp(r,e,t,n){const i=new Xu(r,e,t);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function vo(r){r.next.prev=r.prev,r.prev.next=r.next,r.prevZ&&(r.prevZ.nextZ=r.nextZ),r.nextZ&&(r.nextZ.prevZ=r.prevZ)}function Xu(r,e,t){this.i=r,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function a6(r,e,t,n){let i=0;for(let s=e,a=t-n;s<t;s+=n)i+=(r[a]-r[s])*(r[s+1]+r[a+1]),a=s;return i}class di{static area(e){const t=e.length;let n=0;for(let i=t-1,s=0;s<t;i=s++)n+=e[i].x*e[s].y-e[s].x*e[i].y;return n*.5}static isClockWise(e){return di.area(e)<0}static triangulateShape(e,t){const n=[],i=[],s=[];Zp(e),$p(n,e);let a=e.length;t.forEach(Zp);for(let l=0;l<t.length;l++)i.push(a),a+=t[l].length,$p(n,t[l]);const o=Gx.triangulate(n,i);for(let l=0;l<o.length;l+=3)s.push(o.slice(l,l+3));return s}}function Zp(r){const e=r.length;e>2&&r[e-1].equals(r[0])&&r.pop()}function $p(r,e){for(let t=0;t<e.length;t++)r.push(e[t].x),r.push(e[t].y)}class gh extends Oe{constructor(e=new $s([new G(.5,.5),new G(-.5,.5),new G(-.5,-.5),new G(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const n=this,i=[],s=[];for(let o=0,l=e.length;o<l;o++){const c=e[o];a(c)}this.setAttribute("position",new Se(i,3)),this.setAttribute("uv",new Se(s,2)),this.computeVertexNormals();function a(o){const l=[],c=t.curveSegments!==void 0?t.curveSegments:12,h=t.steps!==void 0?t.steps:1,u=t.depth!==void 0?t.depth:1;let f=t.bevelEnabled!==void 0?t.bevelEnabled:!0,d=t.bevelThickness!==void 0?t.bevelThickness:.2,m=t.bevelSize!==void 0?t.bevelSize:d-.1,g=t.bevelOffset!==void 0?t.bevelOffset:0,p=t.bevelSegments!==void 0?t.bevelSegments:3;const _=t.extrudePath,y=t.UVGenerator!==void 0?t.UVGenerator:o6;let x,v=!1,w,b,A,C;_&&(x=_.getSpacedPoints(h),v=!0,f=!1,w=_.computeFrenetFrames(h,!1),b=new R,A=new R,C=new R),f||(p=0,d=0,m=0,g=0);const M=o.extractPoints(c);let S=M.shape;const q=M.holes;if(!di.isClockWise(S)){S=S.reverse();for(let P=0,ie=q.length;P<ie;P++){const te=q[P];di.isClockWise(te)&&(q[P]=te.reverse())}}const N=di.triangulateShape(S,q),z=S;for(let P=0,ie=q.length;P<ie;P++){const te=q[P];S=S.concat(te)}function V(P,ie,te){return ie||console.error("THREE.ExtrudeGeometry: vec does not exist"),P.clone().addScaledVector(ie,te)}const F=S.length,X=N.length;function W(P,ie,te){let pe,K,Pe;const fe=P.x-ie.x,ye=P.y-ie.y,I=te.x-P.x,T=te.y-P.y,k=fe*fe+ye*ye,J=fe*T-ye*I;if(Math.abs(J)>Number.EPSILON){const $=Math.sqrt(k),Q=Math.sqrt(I*I+T*T),Re=ie.x-ye/$,he=ie.y+fe/$,xe=te.x-T/Q,ze=te.y+I/Q,ne=((xe-Re)*T-(ze-he)*I)/(fe*T-ye*I);pe=Re+fe*ne-P.x,K=he+ye*ne-P.y;const _e=pe*pe+K*K;if(_e<=2)return new G(pe,K);Pe=Math.sqrt(_e/2)}else{let $=!1;fe>Number.EPSILON?I>Number.EPSILON&&($=!0):fe<-Number.EPSILON?I<-Number.EPSILON&&($=!0):Math.sign(ye)===Math.sign(T)&&($=!0),$?(pe=-ye,K=fe,Pe=Math.sqrt(k)):(pe=fe,K=ye,Pe=Math.sqrt(k/2))}return new G(pe/Pe,K/Pe)}const le=[];for(let P=0,ie=z.length,te=ie-1,pe=P+1;P<ie;P++,te++,pe++)te===ie&&(te=0),pe===ie&&(pe=0),le[P]=W(z[P],z[te],z[pe]);const de=[];let me,Ie=le.concat();for(let P=0,ie=q.length;P<ie;P++){const te=q[P];me=[];for(let pe=0,K=te.length,Pe=K-1,fe=pe+1;pe<K;pe++,Pe++,fe++)Pe===K&&(Pe=0),fe===K&&(fe=0),me[pe]=W(te[pe],te[Pe],te[fe]);de.push(me),Ie=Ie.concat(me)}for(let P=0;P<p;P++){const ie=P/p,te=d*Math.cos(ie*Math.PI/2),pe=m*Math.sin(ie*Math.PI/2)+g;for(let K=0,Pe=z.length;K<Pe;K++){const fe=V(z[K],le[K],pe);ue(fe.x,fe.y,-te)}for(let K=0,Pe=q.length;K<Pe;K++){const fe=q[K];me=de[K];for(let ye=0,I=fe.length;ye<I;ye++){const T=V(fe[ye],me[ye],pe);ue(T.x,T.y,-te)}}}const Ze=m+g;for(let P=0;P<F;P++){const ie=f?V(S[P],Ie[P],Ze):S[P];v?(A.copy(w.normals[0]).multiplyScalar(ie.x),b.copy(w.binormals[0]).multiplyScalar(ie.y),C.copy(x[0]).add(A).add(b),ue(C.x,C.y,C.z)):ue(ie.x,ie.y,0)}for(let P=1;P<=h;P++)for(let ie=0;ie<F;ie++){const te=f?V(S[ie],Ie[ie],Ze):S[ie];v?(A.copy(w.normals[P]).multiplyScalar(te.x),b.copy(w.binormals[P]).multiplyScalar(te.y),C.copy(x[P]).add(A).add(b),ue(C.x,C.y,C.z)):ue(te.x,te.y,u/h*P)}for(let P=p-1;P>=0;P--){const ie=P/p,te=d*Math.cos(ie*Math.PI/2),pe=m*Math.sin(ie*Math.PI/2)+g;for(let K=0,Pe=z.length;K<Pe;K++){const fe=V(z[K],le[K],pe);ue(fe.x,fe.y,u+te)}for(let K=0,Pe=q.length;K<Pe;K++){const fe=q[K];me=de[K];for(let ye=0,I=fe.length;ye<I;ye++){const T=V(fe[ye],me[ye],pe);v?ue(T.x,T.y+x[h-1].y,x[h-1].x+te):ue(T.x,T.y,u+te)}}}Y(),ee();function Y(){const P=i.length/3;if(f){let ie=0,te=F*ie;for(let pe=0;pe<X;pe++){const K=N[pe];Ce(K[2]+te,K[1]+te,K[0]+te)}ie=h+p*2,te=F*ie;for(let pe=0;pe<X;pe++){const K=N[pe];Ce(K[0]+te,K[1]+te,K[2]+te)}}else{for(let ie=0;ie<X;ie++){const te=N[ie];Ce(te[2],te[1],te[0])}for(let ie=0;ie<X;ie++){const te=N[ie];Ce(te[0]+F*h,te[1]+F*h,te[2]+F*h)}}n.addGroup(P,i.length/3-P,0)}function ee(){const P=i.length/3;let ie=0;ve(z,ie),ie+=z.length;for(let te=0,pe=q.length;te<pe;te++){const K=q[te];ve(K,ie),ie+=K.length}n.addGroup(P,i.length/3-P,1)}function ve(P,ie){let te=P.length;for(;--te>=0;){const pe=te;let K=te-1;K<0&&(K=P.length-1);for(let Pe=0,fe=h+p*2;Pe<fe;Pe++){const ye=F*Pe,I=F*(Pe+1),T=ie+pe+ye,k=ie+K+ye,J=ie+K+I,$=ie+pe+I;Fe(T,k,J,$)}}}function ue(P,ie,te){l.push(P),l.push(ie),l.push(te)}function Ce(P,ie,te){De(P),De(ie),De(te);const pe=i.length/3,K=y.generateTopUV(n,i,pe-3,pe-2,pe-1);et(K[0]),et(K[1]),et(K[2])}function Fe(P,ie,te,pe){De(P),De(ie),De(pe),De(ie),De(te),De(pe);const K=i.length/3,Pe=y.generateSideWallUV(n,i,K-6,K-3,K-2,K-1);et(Pe[0]),et(Pe[1]),et(Pe[3]),et(Pe[1]),et(Pe[2]),et(Pe[3])}function De(P){i.push(l[P*3+0]),i.push(l[P*3+1]),i.push(l[P*3+2])}function et(P){s.push(P.x),s.push(P.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,n=this.parameters.options;return l6(t,n,e)}static fromJSON(e,t){const n=[];for(let s=0,a=e.shapes.length;s<a;s++){const o=t[e.shapes[s]];n.push(o)}const i=e.options.extrudePath;return i!==void 0&&(e.options.extrudePath=new Lc[i.type]().fromJSON(i)),new gh(n,e.options)}}const o6={generateTopUV:function(r,e,t,n,i){const s=e[t*3],a=e[t*3+1],o=e[n*3],l=e[n*3+1],c=e[i*3],h=e[i*3+1];return[new G(s,a),new G(o,l),new G(c,h)]},generateSideWallUV:function(r,e,t,n,i,s){const a=e[t*3],o=e[t*3+1],l=e[t*3+2],c=e[n*3],h=e[n*3+1],u=e[n*3+2],f=e[i*3],d=e[i*3+1],m=e[i*3+2],g=e[s*3],p=e[s*3+1],_=e[s*3+2];return Math.abs(o-h)<Math.abs(a-c)?[new G(a,1-l),new G(c,1-u),new G(f,1-m),new G(g,1-_)]:[new G(o,1-l),new G(h,1-u),new G(d,1-m),new G(p,1-_)]}};function l6(r,e,t){if(t.shapes=[],Array.isArray(r))for(let n=0,i=r.length;n<i;n++){const s=r[n];t.shapes.push(s.uuid)}else t.shapes.push(r.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class _h extends ds{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2,i=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(i,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new _h(e.radius,e.detail)}}class Ho extends ds{constructor(e=1,t=0){const n=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],i=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(n,i,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Ho(e.radius,e.detail)}}class xh extends Oe{constructor(e=.5,t=1,n=32,i=1,s=0,a=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:i,thetaStart:s,thetaLength:a},n=Math.max(3,n),i=Math.max(1,i);const o=[],l=[],c=[],h=[];let u=e;const f=(t-e)/i,d=new R,m=new G;for(let g=0;g<=i;g++){for(let p=0;p<=n;p++){const _=s+p/n*a;d.x=u*Math.cos(_),d.y=u*Math.sin(_),l.push(d.x,d.y,d.z),c.push(0,0,1),m.x=(d.x/t+1)/2,m.y=(d.y/t+1)/2,h.push(m.x,m.y)}u+=f}for(let g=0;g<i;g++){const p=g*(n+1);for(let _=0;_<n;_++){const y=_+p,x=y,v=y+n+1,w=y+n+2,b=y+1;o.push(x,v,b),o.push(v,w,b)}}this.setIndex(o),this.setAttribute("position",new Se(l,3)),this.setAttribute("normal",new Se(c,3)),this.setAttribute("uv",new Se(h,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new xh(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class Vo extends Oe{constructor(e=new $s([new G(0,.5),new G(-.5,-.5),new G(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const n=[],i=[],s=[],a=[];let o=0,l=0;if(Array.isArray(e)===!1)c(e);else for(let h=0;h<e.length;h++)c(e[h]),this.addGroup(o,l,h),o+=l,l=0;this.setIndex(n),this.setAttribute("position",new Se(i,3)),this.setAttribute("normal",new Se(s,3)),this.setAttribute("uv",new Se(a,2));function c(h){const u=i.length/3,f=h.extractPoints(t);let d=f.shape;const m=f.holes;di.isClockWise(d)===!1&&(d=d.reverse());for(let p=0,_=m.length;p<_;p++){const y=m[p];di.isClockWise(y)===!0&&(m[p]=y.reverse())}const g=di.triangulateShape(d,m);for(let p=0,_=m.length;p<_;p++){const y=m[p];d=d.concat(y)}for(let p=0,_=d.length;p<_;p++){const y=d[p];i.push(y.x,y.y,0),s.push(0,0,1),a.push(y.x,y.y)}for(let p=0,_=g.length;p<_;p++){const y=g[p],x=y[0]+u,v=y[1]+u,w=y[2]+u;n.push(x,v,w),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return c6(t,e)}static fromJSON(e,t){const n=[];for(let i=0,s=e.shapes.length;i<s;i++){const a=t[e.shapes[i]];n.push(a)}return new Vo(n,e.curveSegments)}}function c6(r,e){if(e.shapes=[],Array.isArray(r))for(let t=0,n=r.length;t<n;t++){const i=r[t];e.shapes.push(i.uuid)}else e.shapes.push(r.uuid);return e}class ya extends Oe{constructor(e=1,t=32,n=16,i=0,s=Math.PI*2,a=0,o=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:i,phiLength:s,thetaStart:a,thetaLength:o},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));const l=Math.min(a+o,Math.PI);let c=0;const h=[],u=new R,f=new R,d=[],m=[],g=[],p=[];for(let _=0;_<=n;_++){const y=[],x=_/n;let v=0;_===0&&a===0?v=.5/t:_===n&&l===Math.PI&&(v=-.5/t);for(let w=0;w<=t;w++){const b=w/t;u.x=-e*Math.cos(i+b*s)*Math.sin(a+x*o),u.y=e*Math.cos(a+x*o),u.z=e*Math.sin(i+b*s)*Math.sin(a+x*o),m.push(u.x,u.y,u.z),f.copy(u).normalize(),g.push(f.x,f.y,f.z),p.push(b+v,1-x),y.push(c++)}h.push(y)}for(let _=0;_<n;_++)for(let y=0;y<t;y++){const x=h[_][y+1],v=h[_][y],w=h[_+1][y],b=h[_+1][y+1];(_!==0||a>0)&&d.push(x,v,b),(_!==n-1||l<Math.PI)&&d.push(v,w,b)}this.setIndex(d),this.setAttribute("position",new Se(m,3)),this.setAttribute("normal",new Se(g,3)),this.setAttribute("uv",new Se(p,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ya(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class yh extends ds{constructor(e=1,t=0){const n=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],i=[2,1,0,0,3,2,1,3,0,2,3,1];super(n,i,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new yh(e.radius,e.detail)}}class vh extends Oe{constructor(e=1,t=.4,n=12,i=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:i,arc:s},n=Math.floor(n),i=Math.floor(i);const a=[],o=[],l=[],c=[],h=new R,u=new R,f=new R;for(let d=0;d<=n;d++)for(let m=0;m<=i;m++){const g=m/i*s,p=d/n*Math.PI*2;u.x=(e+t*Math.cos(p))*Math.cos(g),u.y=(e+t*Math.cos(p))*Math.sin(g),u.z=t*Math.sin(p),o.push(u.x,u.y,u.z),h.x=e*Math.cos(g),h.y=e*Math.sin(g),f.subVectors(u,h).normalize(),l.push(f.x,f.y,f.z),c.push(m/i),c.push(d/n)}for(let d=1;d<=n;d++)for(let m=1;m<=i;m++){const g=(i+1)*d+m-1,p=(i+1)*(d-1)+m-1,_=(i+1)*(d-1)+m,y=(i+1)*d+m;a.push(g,p,y),a.push(p,_,y)}this.setIndex(a),this.setAttribute("position",new Se(o,3)),this.setAttribute("normal",new Se(l,3)),this.setAttribute("uv",new Se(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new vh(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class Mh extends Oe{constructor(e=1,t=.4,n=64,i=8,s=2,a=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:i,p:s,q:a},n=Math.floor(n),i=Math.floor(i);const o=[],l=[],c=[],h=[],u=new R,f=new R,d=new R,m=new R,g=new R,p=new R,_=new R;for(let x=0;x<=n;++x){const v=x/n*s*Math.PI*2;y(v,s,a,e,d),y(v+.01,s,a,e,m),p.subVectors(m,d),_.addVectors(m,d),g.crossVectors(p,_),_.crossVectors(g,p),g.normalize(),_.normalize();for(let w=0;w<=i;++w){const b=w/i*Math.PI*2,A=-t*Math.cos(b),C=t*Math.sin(b);u.x=d.x+(A*_.x+C*g.x),u.y=d.y+(A*_.y+C*g.y),u.z=d.z+(A*_.z+C*g.z),l.push(u.x,u.y,u.z),f.subVectors(u,d).normalize(),c.push(f.x,f.y,f.z),h.push(x/n),h.push(w/i)}}for(let x=1;x<=n;x++)for(let v=1;v<=i;v++){const w=(i+1)*(x-1)+(v-1),b=(i+1)*x+(v-1),A=(i+1)*x+v,C=(i+1)*(x-1)+v;o.push(w,b,C),o.push(b,A,C)}this.setIndex(o),this.setAttribute("position",new Se(l,3)),this.setAttribute("normal",new Se(c,3)),this.setAttribute("uv",new Se(h,2));function y(x,v,w,b,A){const C=Math.cos(x),M=Math.sin(x),S=w/v*x,q=Math.cos(S);A.x=b*(2+q)*.5*C,A.y=b*(2+q)*M*.5,A.z=b*Math.sin(S)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Mh(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class Sh extends Oe{constructor(e=new ed(new R(-1,-1,0),new R(-1,1,0),new R(1,1,0)),t=64,n=1,i=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:i,closed:s};const a=e.computeFrenetFrames(t,s);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals;const o=new R,l=new R,c=new G;let h=new R;const u=[],f=[],d=[],m=[];g(),this.setIndex(m),this.setAttribute("position",new Se(u,3)),this.setAttribute("normal",new Se(f,3)),this.setAttribute("uv",new Se(d,2));function g(){for(let x=0;x<t;x++)p(x);p(s===!1?t:0),y(),_()}function p(x){h=e.getPointAt(x/t,h);const v=a.normals[x],w=a.binormals[x];for(let b=0;b<=i;b++){const A=b/i*Math.PI*2,C=Math.sin(A),M=-Math.cos(A);l.x=M*v.x+C*w.x,l.y=M*v.y+C*w.y,l.z=M*v.z+C*w.z,l.normalize(),f.push(l.x,l.y,l.z),o.x=h.x+n*l.x,o.y=h.y+n*l.y,o.z=h.z+n*l.z,u.push(o.x,o.y,o.z)}}function _(){for(let x=1;x<=t;x++)for(let v=1;v<=i;v++){const w=(i+1)*(x-1)+(v-1),b=(i+1)*x+(v-1),A=(i+1)*x+v,C=(i+1)*(x-1)+v;m.push(w,b,C),m.push(b,A,C)}}function y(){for(let x=0;x<=t;x++)for(let v=0;v<=i;v++)c.x=x/t,c.y=v/i,d.push(c.x,c.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new Sh(new Lc[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class vm extends Oe{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],n=new Set,i=new R,s=new R;if(e.index!==null){const a=e.attributes.position,o=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:o.count,materialIndex:0}]);for(let c=0,h=l.length;c<h;++c){const u=l[c],f=u.start,d=u.count;for(let m=f,g=f+d;m<g;m+=3)for(let p=0;p<3;p++){const _=o.getX(m+p),y=o.getX(m+(p+1)%3);i.fromBufferAttribute(a,_),s.fromBufferAttribute(a,y),Jp(i,s,n)===!0&&(t.push(i.x,i.y,i.z),t.push(s.x,s.y,s.z))}}}else{const a=e.attributes.position;for(let o=0,l=a.count/3;o<l;o++)for(let c=0;c<3;c++){const h=3*o+c,u=3*o+(c+1)%3;i.fromBufferAttribute(a,h),s.fromBufferAttribute(a,u),Jp(i,s,n)===!0&&(t.push(i.x,i.y,i.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new Se(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function Jp(r,e,t){const n=`${r.x},${r.y},${r.z}-${e.x},${e.y},${e.z}`,i=`${e.x},${e.y},${e.z}-${r.x},${r.y},${r.z}`;return t.has(n)===!0||t.has(i)===!0?!1:(t.add(n),t.add(i),!0)}var jp=Object.freeze({__proto__:null,BoxGeometry:dr,CapsuleGeometry:fh,CircleGeometry:ko,ConeGeometry:dh,CylinderGeometry:xa,DodecahedronGeometry:ph,EdgesGeometry:gm,ExtrudeGeometry:gh,IcosahedronGeometry:_h,LatheGeometry:zo,OctahedronGeometry:Ho,PlaneGeometry:pr,PolyhedronGeometry:ds,RingGeometry:xh,ShapeGeometry:Vo,SphereGeometry:ya,TetrahedronGeometry:yh,TorusGeometry:vh,TorusKnotGeometry:Mh,TubeGeometry:Sh,WireframeGeometry:vm});class Mm extends Ut{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new ae(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class td extends kt{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class Go extends Ut{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new ae(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ae(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=fs,this.normalScale=new G(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Dn,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Xn extends Go{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new G(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Mt(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new ae(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new ae(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new ae(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class Sm extends Ut{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new ae(16777215),this.specular=new ae(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ae(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=fs,this.normalScale=new G(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Dn,this.combine=qo,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class bm extends Ut{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new ae(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ae(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=fs,this.normalScale=new G(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class Tm extends Ut{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=fs,this.normalScale=new G(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class Am extends Ut{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new ae(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ae(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=fs,this.normalScale=new G(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Dn,this.combine=qo,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class wm extends Ut{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new ae(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=fs,this.normalScale=new G(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Em extends rn{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function Hs(r,e,t){return!r||!t&&r.constructor===e?r:typeof e.BYTES_PER_ELEMENT=="number"?new e(r):Array.prototype.slice.call(r)}function Rm(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}function Cm(r){function e(i,s){return r[i]-r[s]}const t=r.length,n=new Array(t);for(let i=0;i!==t;++i)n[i]=i;return n.sort(e),n}function Yu(r,e,t){const n=r.length,i=new r.constructor(n);for(let s=0,a=0;a!==n;++s){const o=t[s]*e;for(let l=0;l!==e;++l)i[a++]=r[o+l]}return i}function nd(r,e,t,n){let i=1,s=r[0];for(;s!==void 0&&s[n]===void 0;)s=r[i++];if(s===void 0)return;let a=s[n];if(a!==void 0)if(Array.isArray(a))do a=s[n],a!==void 0&&(e.push(s.time),t.push.apply(t,a)),s=r[i++];while(s!==void 0);else if(a.toArray!==void 0)do a=s[n],a!==void 0&&(e.push(s.time),a.toArray(t,t.length)),s=r[i++];while(s!==void 0);else do a=s[n],a!==void 0&&(e.push(s.time),t.push(a)),s=r[i++];while(s!==void 0)}function h6(r,e,t,n,i=30){const s=r.clone();s.name=e;const a=[];for(let l=0;l<s.tracks.length;++l){const c=s.tracks[l],h=c.getValueSize(),u=[],f=[];for(let d=0;d<c.times.length;++d){const m=c.times[d]*i;if(!(m<t||m>=n)){u.push(c.times[d]);for(let g=0;g<h;++g)f.push(c.values[d*h+g])}}u.length!==0&&(c.times=Hs(u,c.times.constructor),c.values=Hs(f,c.values.constructor),a.push(c))}s.tracks=a;let o=1/0;for(let l=0;l<s.tracks.length;++l)o>s.tracks[l].times[0]&&(o=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*o);return s.resetDuration(),s}function u6(r,e=0,t=r,n=30){n<=0&&(n=30);const i=t.tracks.length,s=e/n;for(let a=0;a<i;++a){const o=t.tracks[a],l=o.ValueTypeName;if(l==="bool"||l==="string")continue;const c=r.tracks.find(function(_){return _.name===o.name&&_.ValueTypeName===l});if(c===void 0)continue;let h=0;const u=o.getValueSize();o.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(h=u/3);let f=0;const d=c.getValueSize();c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(f=d/3);const m=o.times.length-1;let g;if(s<=o.times[0]){const _=h,y=u-h;g=o.values.slice(_,y)}else if(s>=o.times[m]){const _=m*u+h,y=_+u-h;g=o.values.slice(_,y)}else{const _=o.createInterpolant(),y=h,x=u-h;_.evaluate(s),g=_.resultBuffer.slice(y,x)}l==="quaternion"&&new wt().fromArray(g).normalize().conjugate().toArray(g);const p=c.times.length;for(let _=0;_<p;++_){const y=_*d+f;if(l==="quaternion")wt.multiplyQuaternionsFlat(c.values,y,g,0,c.values,y);else{const x=d-f*2;for(let v=0;v<x;++v)c.values[y+v]-=g[v]}}}return r.blendMode=Df,r}const f6={convertArray:Hs,isTypedArray:Rm,getKeyframeOrder:Cm,sortedArray:Yu,flattenJSON:nd,subclip:h6,makeClipAdditive:u6};class va{constructor(e,t,n,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let n=this._cachedIndex,i=t[n],s=t[n-1];e:{t:{let a;n:{i:if(!(e<i)){for(let o=n+2;;){if(i===void 0){if(e<s)break i;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===o)break;if(s=i,i=t[++n],e<i)break t}a=t.length;break n}if(!(e>=s)){const o=t[1];e<o&&(n=2,s=o);for(let l=n-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(n===l)break;if(i=s,s=t[--n-1],e>=s)break t}a=n,n=0;break n}break e}for(;n<a;){const o=n+a>>>1;e<t[o]?a=o:n=o+1}if(i=t[n],s=t[n-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===void 0)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,s,i)}return this.interpolate_(n,s,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,i=this.valueSize,s=e*i;for(let a=0;a!==i;++a)t[a]=n[s+a];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class Pm extends va{constructor(e,t,n,i){super(e,t,n,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Bs,endingEnd:Bs}}intervalChanged_(e,t,n){const i=this.parameterPositions;let s=e-2,a=e+1,o=i[s],l=i[a];if(o===void 0)switch(this.getSettings_().endingStart){case zs:s=e,o=2*t-n;break;case co:s=i.length-2,o=t+i[s]-i[s+1];break;default:s=e,o=n}if(l===void 0)switch(this.getSettings_().endingEnd){case zs:a=e,l=2*n-t;break;case co:a=1,l=n+i[1]-i[0];break;default:a=e-1,l=t}const c=(n-t)*.5,h=this.valueSize;this._weightPrev=c/(t-o),this._weightNext=c/(l-n),this._offsetPrev=s*h,this._offsetNext=a*h}interpolate_(e,t,n,i){const s=this.resultBuffer,a=this.sampleValues,o=this.valueSize,l=e*o,c=l-o,h=this._offsetPrev,u=this._offsetNext,f=this._weightPrev,d=this._weightNext,m=(n-t)/(i-t),g=m*m,p=g*m,_=-f*p+2*f*g-f*m,y=(1+f)*p+(-1.5-2*f)*g+(-.5+f)*m+1,x=(-1-d)*p+(1.5+d)*g+.5*m,v=d*p-d*g;for(let w=0;w!==o;++w)s[w]=_*a[h+w]+y*a[c+w]+x*a[l+w]+v*a[u+w];return s}}class id extends va{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e,t,n,i){const s=this.resultBuffer,a=this.sampleValues,o=this.valueSize,l=e*o,c=l-o,h=(n-t)/(i-t),u=1-h;for(let f=0;f!==o;++f)s[f]=a[c+f]*u+a[l+f]*h;return s}}class Im extends va{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class ni{constructor(e,t,n,i){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Hs(t,this.TimeBufferType),this.values=Hs(n,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:Hs(e.times,Array),values:Hs(e.values,Array)};const i=e.getInterpolation();i!==e.DefaultInterpolation&&(n.interpolation=i)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new Im(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new id(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new Pm(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case na:t=this.InterpolantFactoryMethodDiscrete;break;case ia:t=this.InterpolantFactoryMethodLinear;break;case Zl:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(n);return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return na;case this.InterpolantFactoryMethodLinear:return ia;case this.InterpolantFactoryMethodSmooth:return Zl}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let n=0,i=t.length;n!==i;++n)t[n]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let n=0,i=t.length;n!==i;++n)t[n]*=e}return this}trim(e,t){const n=this.times,i=n.length;let s=0,a=i-1;for(;s!==i&&n[s]<e;)++s;for(;a!==-1&&n[a]>t;)--a;if(++a,s!==0||a!==i){s>=a&&(a=Math.max(a,1),s=a-1);const o=this.getValueSize();this.times=n.slice(s,a),this.values=this.values.slice(s*o,a*o)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,i=this.values,s=n.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let a=null;for(let o=0;o!==s;o++){const l=n[o];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,o,l),e=!1;break}if(a!==null&&a>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,o,l,a),e=!1;break}a=l}if(i!==void 0&&Rm(i))for(let o=0,l=i.length;o!==l;++o){const c=i[o];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,o,c),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),n=this.getValueSize(),i=this.getInterpolation()===Zl,s=e.length-1;let a=1;for(let o=1;o<s;++o){let l=!1;const c=e[o],h=e[o+1];if(c!==h&&(o!==1||c!==e[0]))if(i)l=!0;else{const u=o*n,f=u-n,d=u+n;for(let m=0;m!==n;++m){const g=t[u+m];if(g!==t[f+m]||g!==t[d+m]){l=!0;break}}}if(l){if(o!==a){e[a]=e[o];const u=o*n,f=a*n;for(let d=0;d!==n;++d)t[f+d]=t[u+d]}++a}}if(s>0){e[a]=e[s];for(let o=s*n,l=a*n,c=0;c!==n;++c)t[l+c]=t[o+c];++a}return a!==e.length?(this.times=e.slice(0,a),this.values=t.slice(0,a*n)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),n=this.constructor,i=new n(this.name,e,t);return i.createInterpolant=this.createInterpolant,i}}ni.prototype.TimeBufferType=Float32Array;ni.prototype.ValueBufferType=Float32Array;ni.prototype.DefaultInterpolation=ia;class mr extends ni{constructor(e,t,n){super(e,t,n)}}mr.prototype.ValueTypeName="bool";mr.prototype.ValueBufferType=Array;mr.prototype.DefaultInterpolation=na;mr.prototype.InterpolantFactoryMethodLinear=void 0;mr.prototype.InterpolantFactoryMethodSmooth=void 0;class sd extends ni{}sd.prototype.ValueTypeName="color";class rr extends ni{}rr.prototype.ValueTypeName="number";class qm extends va{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e,t,n,i){const s=this.resultBuffer,a=this.sampleValues,o=this.valueSize,l=(n-t)/(i-t);let c=e*o;for(let h=c+o;c!==h;c+=4)wt.slerpFlat(s,0,a,c-o,a,c,l);return s}}class ar extends ni{InterpolantFactoryMethodLinear(e){return new qm(this.times,this.values,this.getValueSize(),e)}}ar.prototype.ValueTypeName="quaternion";ar.prototype.InterpolantFactoryMethodSmooth=void 0;class gr extends ni{constructor(e,t,n){super(e,t,n)}}gr.prototype.ValueTypeName="string";gr.prototype.ValueBufferType=Array;gr.prototype.DefaultInterpolation=na;gr.prototype.InterpolantFactoryMethodLinear=void 0;gr.prototype.InterpolantFactoryMethodSmooth=void 0;class or extends ni{}or.prototype.ValueTypeName="vector";class la{constructor(e="",t=-1,n=[],i=Qc){this.name=e,this.tracks=n,this.duration=t,this.blendMode=i,this.uuid=qn(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],n=e.tracks,i=1/(e.fps||1);for(let a=0,o=n.length;a!==o;++a)t.push(p6(n[a]).scale(i));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],n=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,a=n.length;s!==a;++s)t.push(ni.toJSON(n[s]));return i}static CreateFromMorphTargetSequence(e,t,n,i){const s=t.length,a=[];for(let o=0;o<s;o++){let l=[],c=[];l.push((o+s-1)%s,o,(o+1)%s),c.push(0,1,0);const h=Cm(l);l=Yu(l,1,h),c=Yu(c,1,h),!i&&l[0]===0&&(l.push(s),c.push(c[0])),a.push(new rr(".morphTargetInfluences["+t[o].name+"]",l,c).scale(1/n))}return new this(e,-1,a)}static findByName(e,t){let n=e;if(!Array.isArray(e)){const i=e;n=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<n.length;i++)if(n[i].name===t)return n[i];return null}static CreateClipsFromMorphTargetSequences(e,t,n){const i={},s=/^([\w-]*?)([\d]+)$/;for(let o=0,l=e.length;o<l;o++){const c=e[o],h=c.name.match(s);if(h&&h.length>1){const u=h[1];let f=i[u];f||(i[u]=f=[]),f.push(c)}}const a=[];for(const o in i)a.push(this.CreateFromMorphTargetSequence(o,i[o],t,n));return a}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(u,f,d,m,g){if(d.length!==0){const p=[],_=[];nd(d,p,_,m),p.length!==0&&g.push(new u(f,p,_))}},i=[],s=e.name||"default",a=e.fps||30,o=e.blendMode;let l=e.length||-1;const c=e.hierarchy||[];for(let u=0;u<c.length;u++){const f=c[u].keys;if(!(!f||f.length===0))if(f[0].morphTargets){const d={};let m;for(m=0;m<f.length;m++)if(f[m].morphTargets)for(let g=0;g<f[m].morphTargets.length;g++)d[f[m].morphTargets[g]]=-1;for(const g in d){const p=[],_=[];for(let y=0;y!==f[m].morphTargets.length;++y){const x=f[m];p.push(x.time),_.push(x.morphTarget===g?1:0)}i.push(new rr(".morphTargetInfluence["+g+"]",p,_))}l=d.length*a}else{const d=".bones["+t[u].name+"]";n(or,d+".position",f,"pos",i),n(ar,d+".quaternion",f,"rot",i),n(or,d+".scale",f,"scl",i)}}return i.length===0?null:new this(s,l,i,o)}resetDuration(){const e=this.tracks;let t=0;for(let n=0,i=e.length;n!==i;++n){const s=this.tracks[n];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function d6(r){switch(r.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return rr;case"vector":case"vector2":case"vector3":case"vector4":return or;case"color":return sd;case"quaternion":return ar;case"bool":case"boolean":return mr;case"string":return gr}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+r)}function p6(r){if(r.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=d6(r.type);if(r.times===void 0){const t=[],n=[];nd(r.keys,t,n,"value"),r.times=t,r.values=n}return e.parse!==void 0?e.parse(r):new e(r.name,r.times,r.values,r.interpolation)}const Li={enabled:!1,files:{},add:function(r,e){this.enabled!==!1&&(this.files[r]=e)},get:function(r){if(this.enabled!==!1)return this.files[r]},remove:function(r){delete this.files[r]},clear:function(){this.files={}}};class bh{constructor(e,t,n){const i=this;let s=!1,a=0,o=0,l;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(h){o++,s===!1&&i.onStart!==void 0&&i.onStart(h,a,o),s=!0},this.itemEnd=function(h){a++,i.onProgress!==void 0&&i.onProgress(h,a,o),a===o&&(s=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(h){i.onError!==void 0&&i.onError(h)},this.resolveURL=function(h){return l?l(h):h},this.setURLModifier=function(h){return l=h,this},this.addHandler=function(h,u){return c.push(h,u),this},this.removeHandler=function(h){const u=c.indexOf(h);return u!==-1&&c.splice(u,2),this},this.getHandler=function(h){for(let u=0,f=c.length;u<f;u+=2){const d=c[u],m=c[u+1];if(d.global&&(d.lastIndex=0),d.test(h))return m}return null}}}const Lm=new bh;class an{constructor(e){this.manager=e!==void 0?e:Lm,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const n=this;return new Promise(function(i,s){n.load(e,i,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}an.DEFAULT_MATERIAL_NAME="__DEFAULT";const Ai={};class m6 extends Error{constructor(e,t){super(e),this.response=t}}class Gn extends an{constructor(e){super(e)}load(e,t,n,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=Li.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(Ai[e]!==void 0){Ai[e].push({onLoad:t,onProgress:n,onError:i});return}Ai[e]=[],Ai[e].push({onLoad:t,onProgress:n,onError:i});const a=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),o=this.mimeType,l=this.responseType;fetch(a).then(c=>{if(c.status===200||c.status===0){if(c.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||c.body===void 0||c.body.getReader===void 0)return c;const h=Ai[e],u=c.body.getReader(),f=c.headers.get("X-File-Size")||c.headers.get("Content-Length"),d=f?parseInt(f):0,m=d!==0;let g=0;const p=new ReadableStream({start(_){y();function y(){u.read().then(({done:x,value:v})=>{if(x)_.close();else{g+=v.byteLength;const w=new ProgressEvent("progress",{lengthComputable:m,loaded:g,total:d});for(let b=0,A=h.length;b<A;b++){const C=h[b];C.onProgress&&C.onProgress(w)}_.enqueue(v),y()}},x=>{_.error(x)})}}});return new Response(p)}else throw new m6(`fetch for "${c.url}" responded with ${c.status}: ${c.statusText}`,c)}).then(c=>{switch(l){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"document":return c.text().then(h=>new DOMParser().parseFromString(h,o));case"json":return c.json();default:if(o===void 0)return c.text();{const u=/charset="?([^;"\s]*)"?/i.exec(o),f=u&&u[1]?u[1].toLowerCase():void 0,d=new TextDecoder(f);return c.arrayBuffer().then(m=>d.decode(m))}}}).then(c=>{Li.add(e,c);const h=Ai[e];delete Ai[e];for(let u=0,f=h.length;u<f;u++){const d=h[u];d.onLoad&&d.onLoad(c)}}).catch(c=>{const h=Ai[e];if(h===void 0)throw this.manager.itemError(e),c;delete Ai[e];for(let u=0,f=h.length;u<f;u++){const d=h[u];d.onError&&d.onError(c)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class g6 extends an{constructor(e){super(e)}load(e,t,n,i){const s=this,a=new Gn(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(o){try{t(s.parse(JSON.parse(o)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},n,i)}parse(e){const t=[];for(let n=0;n<e.length;n++){const i=la.parse(e[n]);t.push(i)}return t}}class _6 extends an{constructor(e){super(e)}load(e,t,n,i){const s=this,a=[],o=new ch,l=new Gn(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(s.withCredentials);let c=0;function h(u){l.load(e[u],function(f){const d=s.parse(f,!0);a[u]={width:d.width,height:d.height,format:d.format,mipmaps:d.mipmaps},c+=1,c===6&&(d.mipmapCount===1&&(o.minFilter=St),o.image=a,o.format=d.format,o.needsUpdate=!0,t&&t(o))},n,i)}if(Array.isArray(e))for(let u=0,f=e.length;u<f;++u)h(u);else l.load(e,function(u){const f=s.parse(u,!0);if(f.isCubemap){const d=f.mipmaps.length/f.mipmapCount;for(let m=0;m<d;m++){a[m]={mipmaps:[]};for(let g=0;g<f.mipmapCount;g++)a[m].mipmaps.push(f.mipmaps[m*f.mipmapCount+g]),a[m].format=f.format,a[m].width=f.width,a[m].height=f.height}o.image=a}else o.image.width=f.width,o.image.height=f.height,o.mipmaps=f.mipmaps;f.mipmapCount===1&&(o.minFilter=St),o.format=f.format,o.needsUpdate=!0,t&&t(o)},n,i);return o}}class Mo extends an{constructor(e){super(e)}load(e,t,n,i){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,a=Li.get(e);if(a!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(a),s.manager.itemEnd(e)},0),a;const o=go("img");function l(){h(),Li.add(e,this),t&&t(this),s.manager.itemEnd(e)}function c(u){h(),i&&i(u),s.manager.itemError(e),s.manager.itemEnd(e)}function h(){o.removeEventListener("load",l,!1),o.removeEventListener("error",c,!1)}return o.addEventListener("load",l,!1),o.addEventListener("error",c,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(o.crossOrigin=this.crossOrigin),s.manager.itemStart(e),o.src=e,o}}class x6 extends an{constructor(e){super(e)}load(e,t,n,i){const s=new No;s.colorSpace=Xt;const a=new Mo(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);let o=0;function l(c){a.load(e[c],function(h){s.images[c]=h,o++,o===6&&(s.needsUpdate=!0,t&&t(s))},void 0,i)}for(let c=0;c<e.length;++c)l(c);return s}}class y6 extends an{constructor(e){super(e)}load(e,t,n,i){const s=this,a=new fi,o=new Gn(this.manager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.setWithCredentials(s.withCredentials),o.load(e,function(l){let c;try{c=s.parse(l)}catch(h){if(i!==void 0)i(h);else{console.error(h);return}}c.image!==void 0?a.image=c.image:c.data!==void 0&&(a.image.width=c.width,a.image.height=c.height,a.image.data=c.data),a.wrapS=c.wrapS!==void 0?c.wrapS:Pn,a.wrapT=c.wrapT!==void 0?c.wrapT:Pn,a.magFilter=c.magFilter!==void 0?c.magFilter:St,a.minFilter=c.minFilter!==void 0?c.minFilter:St,a.anisotropy=c.anisotropy!==void 0?c.anisotropy:1,c.colorSpace!==void 0&&(a.colorSpace=c.colorSpace),c.flipY!==void 0&&(a.flipY=c.flipY),c.format!==void 0&&(a.format=c.format),c.type!==void 0&&(a.type=c.type),c.mipmaps!==void 0&&(a.mipmaps=c.mipmaps,a.minFilter=kn),c.mipmapCount===1&&(a.minFilter=St),c.generateMipmaps!==void 0&&(a.generateMipmaps=c.generateMipmaps),a.needsUpdate=!0,t&&t(a,c)},n,i),a}}class rd extends an{constructor(e){super(e)}load(e,t,n,i){const s=new dt,a=new Mo(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,function(o){s.image=o,s.needsUpdate=!0,t!==void 0&&t(s)},n,i),s}}class ps extends Xe{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new ae(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(t.object.target=this.target.uuid),t}}class Dm extends ps{constructor(e,t,n){super(e,n),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Xe.DEFAULT_UP),this.updateMatrix(),this.groundColor=new ae(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const gu=new Ee,Qp=new R,e1=new R;class ad{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new G(512,512),this.map=null,this.mapPass=null,this.matrix=new Ee,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Uo,this._frameExtents=new G(1,1),this._viewportCount=1,this._viewports=[new rt(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;Qp.setFromMatrixPosition(e.matrixWorld),t.position.copy(Qp),e1.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(e1),t.updateMatrixWorld(),gu.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(gu),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(gu)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class v6 extends ad{constructor(){super(new Lt(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,n=sa*2*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(n!==t.fov||i!==t.aspect||s!==t.far)&&(t.fov=n,t.aspect=i,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class od extends ps{constructor(e,t,n=0,i=Math.PI/3,s=0,a=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Xe.DEFAULT_UP),this.updateMatrix(),this.target=new Xe,this.distance=n,this.angle=i,this.penumbra=s,this.decay=a,this.map=null,this.shadow=new v6}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const t1=new Ee,Da=new R,_u=new R;class M6 extends ad{constructor(){super(new Lt(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new G(4,2),this._viewportCount=6,this._viewports=[new rt(2,1,1,1),new rt(0,1,1,1),new rt(3,1,1,1),new rt(1,1,1,1),new rt(3,0,1,1),new rt(1,0,1,1)],this._cubeDirections=[new R(1,0,0),new R(-1,0,0),new R(0,0,1),new R(0,0,-1),new R(0,1,0),new R(0,-1,0)],this._cubeUps=[new R(0,1,0),new R(0,1,0),new R(0,1,0),new R(0,1,0),new R(0,0,1),new R(0,0,-1)]}updateMatrices(e,t=0){const n=this.camera,i=this.matrix,s=e.distance||n.far;s!==n.far&&(n.far=s,n.updateProjectionMatrix()),Da.setFromMatrixPosition(e.matrixWorld),n.position.copy(Da),_u.copy(n.position),_u.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(_u),n.updateMatrixWorld(),i.makeTranslation(-Da.x,-Da.y,-Da.z),t1.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(t1)}}class Th extends ps{constructor(e,t,n=0,i=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=i,this.shadow=new M6}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class S6 extends ad{constructor(){super(new ga(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class So extends ps{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Xe.DEFAULT_UP),this.updateMatrix(),this.target=new Xe,this.shadow=new S6}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class Dc extends ps{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class Nm extends ps{constructor(e,t,n=10,i=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=n,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class Um{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new R)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const n=e.x,i=e.y,s=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.282095),t.addScaledVector(a[1],.488603*i),t.addScaledVector(a[2],.488603*s),t.addScaledVector(a[3],.488603*n),t.addScaledVector(a[4],1.092548*(n*i)),t.addScaledVector(a[5],1.092548*(i*s)),t.addScaledVector(a[6],.315392*(3*s*s-1)),t.addScaledVector(a[7],1.092548*(n*s)),t.addScaledVector(a[8],.546274*(n*n-i*i)),t}getIrradianceAt(e,t){const n=e.x,i=e.y,s=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.886227),t.addScaledVector(a[1],2*.511664*i),t.addScaledVector(a[2],2*.511664*s),t.addScaledVector(a[3],2*.511664*n),t.addScaledVector(a[4],2*.429043*n*i),t.addScaledVector(a[5],2*.429043*i*s),t.addScaledVector(a[6],.743125*s*s-.247708),t.addScaledVector(a[7],2*.429043*n*s),t.addScaledVector(a[8],.429043*(n*n-i*i)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const n=this.coefficients;for(let i=0;i<9;i++)n[i].fromArray(e,t+i*3);return this}toArray(e=[],t=0){const n=this.coefficients;for(let i=0;i<9;i++)n[i].toArray(e,t+i*3);return e}static getBasisAt(e,t){const n=e.x,i=e.y,s=e.z;t[0]=.282095,t[1]=.488603*i,t[2]=.488603*s,t[3]=.488603*n,t[4]=1.092548*n*i,t[5]=1.092548*i*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*n*s,t[8]=.546274*(n*n-i*i)}}class Om extends ps{constructor(e=new Um,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class Ah extends an{constructor(e){super(e),this.textures={}}load(e,t,n,i){const s=this,a=new Gn(s.manager);a.setPath(s.path),a.setRequestHeader(s.requestHeader),a.setWithCredentials(s.withCredentials),a.load(e,function(o){try{t(s.parse(JSON.parse(o)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},n,i)}parse(e){const t=this.textures;function n(s){return t[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),t[s]}const i=Ah.createMaterialFromType(e.type);if(e.uuid!==void 0&&(i.uuid=e.uuid),e.name!==void 0&&(i.name=e.name),e.color!==void 0&&i.color!==void 0&&i.color.setHex(e.color),e.roughness!==void 0&&(i.roughness=e.roughness),e.metalness!==void 0&&(i.metalness=e.metalness),e.sheen!==void 0&&(i.sheen=e.sheen),e.sheenColor!==void 0&&(i.sheenColor=new ae().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(i.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&i.emissive!==void 0&&i.emissive.setHex(e.emissive),e.specular!==void 0&&i.specular!==void 0&&i.specular.setHex(e.specular),e.specularIntensity!==void 0&&(i.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&i.specularColor!==void 0&&i.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(i.shininess=e.shininess),e.clearcoat!==void 0&&(i.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&&(i.dispersion=e.dispersion),e.iridescence!==void 0&&(i.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(i.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(i.transmission=e.transmission),e.thickness!==void 0&&(i.thickness=e.thickness),e.attenuationDistance!==void 0&&(i.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&i.attenuationColor!==void 0&&i.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(i.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(i.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(i.fog=e.fog),e.flatShading!==void 0&&(i.flatShading=e.flatShading),e.blending!==void 0&&(i.blending=e.blending),e.combine!==void 0&&(i.combine=e.combine),e.side!==void 0&&(i.side=e.side),e.shadowSide!==void 0&&(i.shadowSide=e.shadowSide),e.opacity!==void 0&&(i.opacity=e.opacity),e.transparent!==void 0&&(i.transparent=e.transparent),e.alphaTest!==void 0&&(i.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(i.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(i.depthFunc=e.depthFunc),e.depthTest!==void 0&&(i.depthTest=e.depthTest),e.depthWrite!==void 0&&(i.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(i.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(i.blendSrc=e.blendSrc),e.blendDst!==void 0&&(i.blendDst=e.blendDst),e.blendEquation!==void 0&&(i.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(i.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(i.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(i.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&i.blendColor!==void 0&&i.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(i.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(i.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(i.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(i.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(i.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(i.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(i.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(i.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(i.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(i.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(i.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(i.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(i.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(i.rotation=e.rotation),e.linewidth!==void 0&&(i.linewidth=e.linewidth),e.dashSize!==void 0&&(i.dashSize=e.dashSize),e.gapSize!==void 0&&(i.gapSize=e.gapSize),e.scale!==void 0&&(i.scale=e.scale),e.polygonOffset!==void 0&&(i.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(i.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(i.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(i.dithering=e.dithering),e.alphaToCoverage!==void 0&&(i.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(i.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(i.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(i.visible=e.visible),e.toneMapped!==void 0&&(i.toneMapped=e.toneMapped),e.userData!==void 0&&(i.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?i.vertexColors=e.vertexColors>0:i.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const a=e.uniforms[s];switch(i.uniforms[s]={},a.type){case"t":i.uniforms[s].value=n(a.value);break;case"c":i.uniforms[s].value=new ae().setHex(a.value);break;case"v2":i.uniforms[s].value=new G().fromArray(a.value);break;case"v3":i.uniforms[s].value=new R().fromArray(a.value);break;case"v4":i.uniforms[s].value=new rt().fromArray(a.value);break;case"m3":i.uniforms[s].value=new ke().fromArray(a.value);break;case"m4":i.uniforms[s].value=new Ee().fromArray(a.value);break;default:i.uniforms[s].value=a.value}}if(e.defines!==void 0&&(i.defines=e.defines),e.vertexShader!==void 0&&(i.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(i.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(i.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)i.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(i.lights=e.lights),e.clipping!==void 0&&(i.clipping=e.clipping),e.size!==void 0&&(i.size=e.size),e.sizeAttenuation!==void 0&&(i.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(i.map=n(e.map)),e.matcap!==void 0&&(i.matcap=n(e.matcap)),e.alphaMap!==void 0&&(i.alphaMap=n(e.alphaMap)),e.bumpMap!==void 0&&(i.bumpMap=n(e.bumpMap)),e.bumpScale!==void 0&&(i.bumpScale=e.bumpScale),e.normalMap!==void 0&&(i.normalMap=n(e.normalMap)),e.normalMapType!==void 0&&(i.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),i.normalScale=new G().fromArray(s)}return e.displacementMap!==void 0&&(i.displacementMap=n(e.displacementMap)),e.displacementScale!==void 0&&(i.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(i.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(i.roughnessMap=n(e.roughnessMap)),e.metalnessMap!==void 0&&(i.metalnessMap=n(e.metalnessMap)),e.emissiveMap!==void 0&&(i.emissiveMap=n(e.emissiveMap)),e.emissiveIntensity!==void 0&&(i.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(i.specularMap=n(e.specularMap)),e.specularIntensityMap!==void 0&&(i.specularIntensityMap=n(e.specularIntensityMap)),e.specularColorMap!==void 0&&(i.specularColorMap=n(e.specularColorMap)),e.envMap!==void 0&&(i.envMap=n(e.envMap)),e.envMapRotation!==void 0&&i.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(i.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(i.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(i.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(i.lightMap=n(e.lightMap)),e.lightMapIntensity!==void 0&&(i.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(i.aoMap=n(e.aoMap)),e.aoMapIntensity!==void 0&&(i.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(i.gradientMap=n(e.gradientMap)),e.clearcoatMap!==void 0&&(i.clearcoatMap=n(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(i.clearcoatRoughnessMap=n(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(i.clearcoatNormalMap=n(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(i.clearcoatNormalScale=new G().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(i.iridescenceMap=n(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(i.iridescenceThicknessMap=n(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(i.transmissionMap=n(e.transmissionMap)),e.thicknessMap!==void 0&&(i.thicknessMap=n(e.thicknessMap)),e.anisotropyMap!==void 0&&(i.anisotropyMap=n(e.anisotropyMap)),e.sheenColorMap!==void 0&&(i.sheenColorMap=n(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(i.sheenRoughnessMap=n(e.sheenRoughnessMap)),i}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const t={ShadowMaterial:Mm,SpriteMaterial:Xf,RawShaderMaterial:td,ShaderMaterial:kt,PointsMaterial:Bo,MeshPhysicalMaterial:Xn,MeshStandardMaterial:Go,MeshPhongMaterial:Sm,MeshToonMaterial:bm,MeshNormalMaterial:Tm,MeshLambertMaterial:Am,MeshDepthMaterial:Gf,MeshDistanceMaterial:Wf,MeshBasicMaterial:Yt,MeshMatcapMaterial:wm,LineDashedMaterial:Em,LineBasicMaterial:rn,Material:Ut};return new t[e]}}class is{static decodeText(e){if(console.warn("THREE.LoaderUtils: decodeText() has been deprecated with r165 and will be removed with r175. Use TextDecoder instead."),typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let n=0,i=e.length;n<i;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class Fm extends Oe{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class Bm extends an{constructor(e){super(e)}load(e,t,n,i){const s=this,a=new Gn(s.manager);a.setPath(s.path),a.setRequestHeader(s.requestHeader),a.setWithCredentials(s.withCredentials),a.load(e,function(o){try{t(s.parse(JSON.parse(o)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},n,i)}parse(e){const t={},n={};function i(d,m){if(t[m]!==void 0)return t[m];const p=d.interleavedBuffers[m],_=s(d,p.buffer),y=Hr(p.type,_),x=new Oo(y,p.stride);return x.uuid=p.uuid,t[m]=x,x}function s(d,m){if(n[m]!==void 0)return n[m];const p=d.arrayBuffers[m],_=new Uint32Array(p).buffer;return n[m]=_,_}const a=e.isInstancedBufferGeometry?new Fm:new Oe,o=e.data.index;if(o!==void 0){const d=Hr(o.type,o.array);a.setIndex(new Qe(d,1))}const l=e.data.attributes;for(const d in l){const m=l[d];let g;if(m.isInterleavedBufferAttribute){const p=i(e.data,m.data);g=new cs(p,m.itemSize,m.offset,m.normalized)}else{const p=Hr(m.type,m.array),_=m.isInstancedBufferAttribute?ir:Qe;g=new _(p,m.itemSize,m.normalized)}m.name!==void 0&&(g.name=m.name),m.usage!==void 0&&g.setUsage(m.usage),a.setAttribute(d,g)}const c=e.data.morphAttributes;if(c)for(const d in c){const m=c[d],g=[];for(let p=0,_=m.length;p<_;p++){const y=m[p];let x;if(y.isInterleavedBufferAttribute){const v=i(e.data,y.data);x=new cs(v,y.itemSize,y.offset,y.normalized)}else{const v=Hr(y.type,y.array);x=new Qe(v,y.itemSize,y.normalized)}y.name!==void 0&&(x.name=y.name),g.push(x)}a.morphAttributes[d]=g}e.data.morphTargetsRelative&&(a.morphTargetsRelative=!0);const u=e.data.groups||e.data.drawcalls||e.data.offsets;if(u!==void 0)for(let d=0,m=u.length;d!==m;++d){const g=u[d];a.addGroup(g.start,g.count,g.materialIndex)}const f=e.data.boundingSphere;if(f!==void 0){const d=new R;f.center!==void 0&&d.fromArray(f.center),a.boundingSphere=new Kt(d,f.radius)}return e.name&&(a.name=e.name),e.userData&&(a.userData=e.userData),a}}class b6 extends an{constructor(e){super(e)}load(e,t,n,i){const s=this,a=this.path===""?is.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||a;const o=new Gn(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){let c=null;try{c=JSON.parse(l)}catch(u){i!==void 0&&i(u),console.error("THREE:ObjectLoader: Can't parse "+e+".",u.message);return}const h=c.metadata;if(h===void 0||h.type===void 0||h.type.toLowerCase()==="geometry"){i!==void 0&&i(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(c,t)},n,i)}async loadAsync(e,t){const n=this,i=this.path===""?is.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||i;const s=new Gn(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const a=await s.loadAsync(e,t),o=JSON.parse(a),l=o.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await n.parseAsync(o)}parse(e,t){const n=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,i),a=this.parseImages(e.images,function(){t!==void 0&&t(c)}),o=this.parseTextures(e.textures,a),l=this.parseMaterials(e.materials,o),c=this.parseObject(e.object,s,l,o,n),h=this.parseSkeletons(e.skeletons,c);if(this.bindSkeletons(c,h),this.bindLightTargets(c),t!==void 0){let u=!1;for(const f in a)if(a[f].data instanceof HTMLImageElement){u=!0;break}u===!1&&t(c)}return c}async parseAsync(e){const t=this.parseAnimations(e.animations),n=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,n),s=await this.parseImagesAsync(e.images),a=this.parseTextures(e.textures,s),o=this.parseMaterials(e.materials,a),l=this.parseObject(e.object,i,o,a,t),c=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,c),this.bindLightTargets(l),l}parseShapes(e){const t={};if(e!==void 0)for(let n=0,i=e.length;n<i;n++){const s=new $s().fromJSON(e[n]);t[s.uuid]=s}return t}parseSkeletons(e,t){const n={},i={};if(t.traverse(function(s){s.isBone&&(i[s.uuid]=s)}),e!==void 0)for(let s=0,a=e.length;s<a;s++){const o=new Fo().fromJSON(e[s],i);n[o.uuid]=o}return n}parseGeometries(e,t){const n={};if(e!==void 0){const i=new Bm;for(let s=0,a=e.length;s<a;s++){let o;const l=e[s];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":o=i.parse(l);break;default:l.type in jp?o=jp[l.type].fromJSON(l,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}o.uuid=l.uuid,l.name!==void 0&&(o.name=l.name),l.userData!==void 0&&(o.userData=l.userData),n[l.uuid]=o}}return n}parseMaterials(e,t){const n={},i={};if(e!==void 0){const s=new Ah;s.setTextures(t);for(let a=0,o=e.length;a<o;a++){const l=e[a];n[l.uuid]===void 0&&(n[l.uuid]=s.parse(l)),i[l.uuid]=n[l.uuid]}}return i}parseAnimations(e){const t={};if(e!==void 0)for(let n=0;n<e.length;n++){const i=e[n],s=la.parse(i);t[s.uuid]=s}return t}parseImages(e,t){const n=this,i={};let s;function a(l){return n.manager.itemStart(l),s.load(l,function(){n.manager.itemEnd(l)},void 0,function(){n.manager.itemError(l),n.manager.itemEnd(l)})}function o(l){if(typeof l=="string"){const c=l,h=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c)?c:n.resourcePath+c;return a(h)}else return l.data?{data:Hr(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new bh(t);s=new Mo(l),s.setCrossOrigin(this.crossOrigin);for(let c=0,h=e.length;c<h;c++){const u=e[c],f=u.url;if(Array.isArray(f)){const d=[];for(let m=0,g=f.length;m<g;m++){const p=f[m],_=o(p);_!==null&&(_ instanceof HTMLImageElement?d.push(_):d.push(new fi(_.data,_.width,_.height)))}i[u.uuid]=new ks(d)}else{const d=o(u.url);i[u.uuid]=new ks(d)}}}return i}async parseImagesAsync(e){const t=this,n={};let i;async function s(a){if(typeof a=="string"){const o=a,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(o)?o:t.resourcePath+o;return await i.loadAsync(l)}else return a.data?{data:Hr(a.type,a.data),width:a.width,height:a.height}:null}if(e!==void 0&&e.length>0){i=new Mo(this.manager),i.setCrossOrigin(this.crossOrigin);for(let a=0,o=e.length;a<o;a++){const l=e[a],c=l.url;if(Array.isArray(c)){const h=[];for(let u=0,f=c.length;u<f;u++){const d=c[u],m=await s(d);m!==null&&(m instanceof HTMLImageElement?h.push(m):h.push(new fi(m.data,m.width,m.height)))}n[l.uuid]=new ks(h)}else{const h=await s(l.url);n[l.uuid]=new ks(h)}}}return n}parseTextures(e,t){function n(s,a){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),a[s])}const i={};if(e!==void 0)for(let s=0,a=e.length;s<a;s++){const o=e[s];o.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',o.uuid),t[o.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",o.image);const l=t[o.image],c=l.data;let h;Array.isArray(c)?(h=new No,c.length===6&&(h.needsUpdate=!0)):(c&&c.data?h=new fi:h=new dt,c&&(h.needsUpdate=!0)),h.source=l,h.uuid=o.uuid,o.name!==void 0&&(h.name=o.name),o.mapping!==void 0&&(h.mapping=n(o.mapping,T6)),o.channel!==void 0&&(h.channel=o.channel),o.offset!==void 0&&h.offset.fromArray(o.offset),o.repeat!==void 0&&h.repeat.fromArray(o.repeat),o.center!==void 0&&h.center.fromArray(o.center),o.rotation!==void 0&&(h.rotation=o.rotation),o.wrap!==void 0&&(h.wrapS=n(o.wrap[0],n1),h.wrapT=n(o.wrap[1],n1)),o.format!==void 0&&(h.format=o.format),o.internalFormat!==void 0&&(h.internalFormat=o.internalFormat),o.type!==void 0&&(h.type=o.type),o.colorSpace!==void 0&&(h.colorSpace=o.colorSpace),o.minFilter!==void 0&&(h.minFilter=n(o.minFilter,i1)),o.magFilter!==void 0&&(h.magFilter=n(o.magFilter,i1)),o.anisotropy!==void 0&&(h.anisotropy=o.anisotropy),o.flipY!==void 0&&(h.flipY=o.flipY),o.generateMipmaps!==void 0&&(h.generateMipmaps=o.generateMipmaps),o.premultiplyAlpha!==void 0&&(h.premultiplyAlpha=o.premultiplyAlpha),o.unpackAlignment!==void 0&&(h.unpackAlignment=o.unpackAlignment),o.compareFunction!==void 0&&(h.compareFunction=o.compareFunction),o.userData!==void 0&&(h.userData=o.userData),i[o.uuid]=h}return i}parseObject(e,t,n,i,s){let a;function o(f){return t[f]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",f),t[f]}function l(f){if(f!==void 0){if(Array.isArray(f)){const d=[];for(let m=0,g=f.length;m<g;m++){const p=f[m];n[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",p),d.push(n[p])}return d}return n[f]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",f),n[f]}}function c(f){return i[f]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",f),i[f]}let h,u;switch(e.type){case"Scene":a=new oa,e.background!==void 0&&(Number.isInteger(e.background)?a.background=new ae(e.background):a.background=c(e.background)),e.environment!==void 0&&(a.environment=c(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?a.fog=new ah(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(a.fog=new rh(e.fog.color,e.fog.density)),e.fog.name!==""&&(a.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(a.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(a.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&a.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&&(a.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&&a.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":a=new Lt(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(a.focus=e.focus),e.zoom!==void 0&&(a.zoom=e.zoom),e.filmGauge!==void 0&&(a.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(a.filmOffset=e.filmOffset),e.view!==void 0&&(a.view=Object.assign({},e.view));break;case"OrthographicCamera":a=new ga(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(a.zoom=e.zoom),e.view!==void 0&&(a.view=Object.assign({},e.view));break;case"AmbientLight":a=new Dc(e.color,e.intensity);break;case"DirectionalLight":a=new So(e.color,e.intensity),a.target=e.target||"";break;case"PointLight":a=new Th(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":a=new Nm(e.color,e.intensity,e.width,e.height);break;case"SpotLight":a=new od(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),a.target=e.target||"";break;case"HemisphereLight":a=new Dm(e.color,e.groundColor,e.intensity);break;case"LightProbe":a=new Om().fromJSON(e);break;case"SkinnedMesh":h=o(e.geometry),u=l(e.material),a=new Yf(h,u),e.bindMode!==void 0&&(a.bindMode=e.bindMode),e.bindMatrix!==void 0&&a.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(a.skeleton=e.skeleton);break;case"Mesh":h=o(e.geometry),u=l(e.material),a=new ct(h,u);break;case"InstancedMesh":h=o(e.geometry),u=l(e.material);const f=e.count,d=e.instanceMatrix,m=e.instanceColor;a=new Kf(h,u,f),a.instanceMatrix=new ir(new Float32Array(d.array),16),m!==void 0&&(a.instanceColor=new ir(new Float32Array(m.array),m.itemSize));break;case"BatchedMesh":h=o(e.geometry),u=l(e.material),a=new hm(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,u),a.geometry=h,a.perObjectFrustumCulled=e.perObjectFrustumCulled,a.sortObjects=e.sortObjects,a._drawRanges=e.drawRanges,a._reservedRanges=e.reservedRanges,a._visibility=e.visibility,a._active=e.active,a._bounds=e.bounds.map(g=>{const p=new tn;p.min.fromArray(g.boxMin),p.max.fromArray(g.boxMax);const _=new Kt;return _.radius=g.sphereRadius,_.center.fromArray(g.sphereCenter),{boxInitialized:g.boxInitialized,box:p,sphereInitialized:g.sphereInitialized,sphere:_}}),a._maxInstanceCount=e.maxInstanceCount,a._maxVertexCount=e.maxVertexCount,a._maxIndexCount=e.maxIndexCount,a._geometryInitialized=e.geometryInitialized,a._geometryCount=e.geometryCount,a._matricesTexture=c(e.matricesTexture.uuid),e.colorsTexture!==void 0&&(a._colorsTexture=c(e.colorsTexture.uuid));break;case"LOD":a=new cm;break;case"Line":a=new Oi(o(e.geometry),l(e.material));break;case"LineLoop":a=new Zf(o(e.geometry),l(e.material));break;case"LineSegments":a=new ei(o(e.geometry),l(e.material));break;case"PointCloud":case"Points":a=new lh(o(e.geometry),l(e.material));break;case"Sprite":a=new lm(l(e.material));break;case"Group":a=new li;break;case"Bone":a=new oh;break;default:a=new Xe}if(a.uuid=e.uuid,e.name!==void 0&&(a.name=e.name),e.matrix!==void 0?(a.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(a.matrixAutoUpdate=e.matrixAutoUpdate),a.matrixAutoUpdate&&a.matrix.decompose(a.position,a.quaternion,a.scale)):(e.position!==void 0&&a.position.fromArray(e.position),e.rotation!==void 0&&a.rotation.fromArray(e.rotation),e.quaternion!==void 0&&a.quaternion.fromArray(e.quaternion),e.scale!==void 0&&a.scale.fromArray(e.scale)),e.up!==void 0&&a.up.fromArray(e.up),e.castShadow!==void 0&&(a.castShadow=e.castShadow),e.receiveShadow!==void 0&&(a.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.intensity!==void 0&&(a.shadow.intensity=e.shadow.intensity),e.shadow.bias!==void 0&&(a.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(a.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(a.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&a.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(a.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(a.visible=e.visible),e.frustumCulled!==void 0&&(a.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(a.renderOrder=e.renderOrder),e.userData!==void 0&&(a.userData=e.userData),e.layers!==void 0&&(a.layers.mask=e.layers),e.children!==void 0){const f=e.children;for(let d=0;d<f.length;d++)a.add(this.parseObject(f[d],t,n,i,s))}if(e.animations!==void 0){const f=e.animations;for(let d=0;d<f.length;d++){const m=f[d];a.animations.push(s[m])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(a.autoUpdate=e.autoUpdate);const f=e.levels;for(let d=0;d<f.length;d++){const m=f[d],g=a.getObjectByProperty("uuid",m.object);g!==void 0&&a.addLevel(g,m.distance,m.hysteresis)}}return a}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(n){if(n.isSkinnedMesh===!0&&n.skeleton!==void 0){const i=t[n.skeleton];i===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",n.skeleton):n.bind(i,n.bindMatrix)}})}bindLightTargets(e){e.traverse(function(t){if(t.isDirectionalLight||t.isSpotLight){const n=t.target,i=e.getObjectByProperty("uuid",n);i!==void 0?t.target=i:t.target=new Xe}})}}const T6={UVMapping:Wc,CubeReflectionMapping:Ni,CubeRefractionMapping:os,EquirectangularReflectionMapping:oo,EquirectangularRefractionMapping:lo,CubeUVReflectionMapping:ma},n1={RepeatWrapping:ls,ClampToEdgeWrapping:Pn,MirroredRepeatWrapping:ea},i1={NearestFilter:Nt,NearestMipmapNearestFilter:Xc,NearestMipmapLinearFilter:Fs,LinearFilter:St,LinearMipmapNearestFilter:Yr,LinearMipmapLinearFilter:kn};class zm extends an{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,n,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,a=Li.get(e);if(a!==void 0){if(s.manager.itemStart(e),a.then){a.then(c=>{t&&t(c),s.manager.itemEnd(e)}).catch(c=>{i&&i(c)});return}return setTimeout(function(){t&&t(a),s.manager.itemEnd(e)},0),a}const o={};o.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",o.headers=this.requestHeader;const l=fetch(e,o).then(function(c){return c.blob()}).then(function(c){return createImageBitmap(c,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(c){return Li.add(e,c),t&&t(c),s.manager.itemEnd(e),c}).catch(function(c){i&&i(c),Li.remove(e),s.manager.itemError(e),s.manager.itemEnd(e)});Li.add(e,l),s.manager.itemStart(e)}}let Nl;class ld{static getContext(){return Nl===void 0&&(Nl=new(window.AudioContext||window.webkitAudioContext)),Nl}static setContext(e){Nl=e}}class A6 extends an{constructor(e){super(e)}load(e,t,n,i){const s=this,a=new Gn(this.manager);a.setResponseType("arraybuffer"),a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){try{const c=l.slice(0);ld.getContext().decodeAudioData(c,function(u){t(u)}).catch(o)}catch(c){o(c)}},n,i);function o(l){i?i(l):console.error(l),s.manager.itemError(e)}}}const s1=new Ee,r1=new Ee,Ts=new Ee;class w6{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Lt,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Lt,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,Ts.copy(e.projectionMatrix);const i=t.eyeSep/2,s=i*t.near/t.focus,a=t.near*Math.tan(Zs*t.fov*.5)/t.zoom;let o,l;r1.elements[12]=-i,s1.elements[12]=i,o=-a*t.aspect+s,l=a*t.aspect+s,Ts.elements[0]=2*t.near/(l-o),Ts.elements[8]=(l+o)/(l-o),this.cameraL.projectionMatrix.copy(Ts),o=-a*t.aspect-s,l=a*t.aspect-s,Ts.elements[0]=2*t.near/(l-o),Ts.elements[8]=(l+o)/(l-o),this.cameraR.projectionMatrix.copy(Ts)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(r1),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(s1)}}class wh{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=a1(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=a1();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function a1(){return(typeof performance>"u"?Date:performance).now()}const As=new R,o1=new wt,E6=new R,ws=new R;class R6 extends Xe{constructor(){super(),this.type="AudioListener",this.context=ld.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new wh}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,n=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(As,o1,E6),ws.set(0,0,-1).applyQuaternion(o1),t.positionX){const i=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(As.x,i),t.positionY.linearRampToValueAtTime(As.y,i),t.positionZ.linearRampToValueAtTime(As.z,i),t.forwardX.linearRampToValueAtTime(ws.x,i),t.forwardY.linearRampToValueAtTime(ws.y,i),t.forwardZ.linearRampToValueAtTime(ws.z,i),t.upX.linearRampToValueAtTime(n.x,i),t.upY.linearRampToValueAtTime(n.y,i),t.upZ.linearRampToValueAtTime(n.z,i)}else t.setPosition(As.x,As.y,As.z),t.setOrientation(ws.x,ws.y,ws.z,n.x,n.y,n.z)}}class km extends Xe{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const Es=new R,l1=new wt,C6=new R,Rs=new R;class P6 extends km{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Es,l1,C6),Rs.set(0,0,1).applyQuaternion(l1);const t=this.panner;if(t.positionX){const n=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(Es.x,n),t.positionY.linearRampToValueAtTime(Es.y,n),t.positionZ.linearRampToValueAtTime(Es.z,n),t.orientationX.linearRampToValueAtTime(Rs.x,n),t.orientationY.linearRampToValueAtTime(Rs.y,n),t.orientationZ.linearRampToValueAtTime(Rs.z,n)}else t.setPosition(Es.x,Es.y,Es.z),t.setOrientation(Rs.x,Rs.y,Rs.z)}}class I6{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let n=0;n<t.length;n++)e+=t[n];return e/t.length}}class Hm{constructor(e,t,n){this.binding=e,this.valueSize=n;let i,s,a;switch(t){case"quaternion":i=this._slerp,s=this._slerpAdditive,a=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(n*6),this._workIndex=5;break;case"string":case"bool":i=this._select,s=this._select,a=this._setAdditiveIdentityOther,this.buffer=new Array(n*5);break;default:i=this._lerp,s=this._lerpAdditive,a=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(n*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=s,this._setIdentity=a,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const n=this.buffer,i=this.valueSize,s=e*i+i;let a=this.cumulativeWeight;if(a===0){for(let o=0;o!==i;++o)n[s+o]=n[o];a=t}else{a+=t;const o=t/a;this._mixBufferRegion(n,s,0,o,i)}this.cumulativeWeight=a}accumulateAdditive(e){const t=this.buffer,n=this.valueSize,i=n*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,i,0,e,n),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,n=this.buffer,i=e*t+t,s=this.cumulativeWeight,a=this.cumulativeWeightAdditive,o=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const l=t*this._origIndex;this._mixBufferRegion(n,i,l,1-s,t)}a>0&&this._mixBufferRegionAdditive(n,i,this._addIndex*t,1,t);for(let l=t,c=t+t;l!==c;++l)if(n[l]!==n[l+t]){o.setValue(n,i);break}}saveOriginalState(){const e=this.binding,t=this.buffer,n=this.valueSize,i=n*this._origIndex;e.getValue(t,i);for(let s=n,a=i;s!==a;++s)t[s]=t[i+s%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let n=e;n<t;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}_select(e,t,n,i,s){if(i>=.5)for(let a=0;a!==s;++a)e[t+a]=e[n+a]}_slerp(e,t,n,i){wt.slerpFlat(e,t,e,t,e,n,i)}_slerpAdditive(e,t,n,i,s){const a=this._workIndex*s;wt.multiplyQuaternionsFlat(e,a,e,t,e,n),wt.slerpFlat(e,t,e,t,e,a,i)}_lerp(e,t,n,i,s){const a=1-i;for(let o=0;o!==s;++o){const l=t+o;e[l]=e[l]*a+e[n+o]*i}}_lerpAdditive(e,t,n,i,s){for(let a=0;a!==s;++a){const o=t+a;e[o]=e[o]+e[n+a]*i}}}const cd="\\[\\]\\.:\\/",q6=new RegExp("["+cd+"]","g"),hd="[^"+cd+"]",L6="[^"+cd.replace("\\.","")+"]",D6=/((?:WC+[\/:])*)/.source.replace("WC",hd),N6=/(WCOD+)?/.source.replace("WCOD",L6),U6=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",hd),O6=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",hd),F6=new RegExp("^"+D6+N6+U6+O6+"$"),B6=["material","materials","bones","map"];class z6{constructor(e,t,n){const i=n||Je.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}getValue(e,t){this.bind();const n=this._targetGroup.nCachedObjects_,i=this._bindings[n];i!==void 0&&i.getValue(e,t)}setValue(e,t){const n=this._bindings;for(let i=this._targetGroup.nCachedObjects_,s=n.length;i!==s;++i)n[i].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}class Je{constructor(e,t,n){this.path=t,this.parsedPath=n||Je.parseTrackName(t),this.node=Je.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new Je.Composite(e,t,n):new Je(e,t,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(q6,"")}static parseTrackName(e){const t=F6.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=n.nodeName&&n.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){const s=n.nodeName.substring(i+1);B6.indexOf(s)!==-1&&(n.nodeName=n.nodeName.substring(0,i),n.objectName=s)}if(n.propertyName===null||n.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(n!==void 0)return n}if(e.children){const n=function(s){for(let a=0;a<s.length;a++){const o=s[a];if(o.name===t||o.uuid===t)return o;const l=n(o.children);if(l)return l}return null},i=n(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const n=this.resolvedProperty;for(let i=0,s=n.length;i!==s;++i)e[t++]=n[i]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const n=this.resolvedProperty;for(let i=0,s=n.length;i!==s;++i)n[i]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const n=this.resolvedProperty;for(let i=0,s=n.length;i!==s;++i)n[i]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const n=this.resolvedProperty;for(let i=0,s=n.length;i!==s;++i)n[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,n=t.objectName,i=t.propertyName;let s=t.propertyIndex;if(e||(e=Je.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(n){let c=t.objectIndex;switch(n){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let h=0;h<e.length;h++)if(e[h].name===c){c=h;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[n]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[n]}if(c!==void 0){if(e[c]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[c]}}const a=e[i];if(a===void 0){const c=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+c+"."+i+" but it wasn't found.",e);return}let o=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?o=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(o=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(i==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}l=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=s}else a.fromArray!==void 0&&a.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(l=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=i;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][o]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Je.Composite=z6;Je.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Je.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Je.prototype.GetterByBindingType=[Je.prototype._getValue_direct,Je.prototype._getValue_array,Je.prototype._getValue_arrayElement,Je.prototype._getValue_toArray];Je.prototype.SetterByBindingTypeAndVersioning=[[Je.prototype._setValue_direct,Je.prototype._setValue_direct_setNeedsUpdate,Je.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Je.prototype._setValue_array,Je.prototype._setValue_array_setNeedsUpdate,Je.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Je.prototype._setValue_arrayElement,Je.prototype._setValue_arrayElement_setNeedsUpdate,Je.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Je.prototype._setValue_fromArray,Je.prototype._setValue_fromArray_setNeedsUpdate,Je.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class k6{constructor(){this.isAnimationObjectGroup=!0,this.uuid=qn(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let n=0,i=arguments.length;n!==i;++n)e[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,n=this._paths,i=this._parsedPaths,s=this._bindings,a=s.length;let o,l=e.length,c=this.nCachedObjects_;for(let h=0,u=arguments.length;h!==u;++h){const f=arguments[h],d=f.uuid;let m=t[d];if(m===void 0){m=l++,t[d]=m,e.push(f);for(let g=0,p=a;g!==p;++g)s[g].push(new Je(f,n[g],i[g]))}else if(m<c){o=e[m];const g=--c,p=e[g];t[p.uuid]=m,e[m]=p,t[d]=g,e[g]=f;for(let _=0,y=a;_!==y;++_){const x=s[_],v=x[g];let w=x[m];x[m]=v,w===void 0&&(w=new Je(f,n[_],i[_])),x[g]=w}}else e[m]!==o&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=c}remove(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,i=n.length;let s=this.nCachedObjects_;for(let a=0,o=arguments.length;a!==o;++a){const l=arguments[a],c=l.uuid,h=t[c];if(h!==void 0&&h>=s){const u=s++,f=e[u];t[f.uuid]=h,e[h]=f,t[c]=u,e[u]=l;for(let d=0,m=i;d!==m;++d){const g=n[d],p=g[u],_=g[h];g[h]=p,g[u]=_}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,i=n.length;let s=this.nCachedObjects_,a=e.length;for(let o=0,l=arguments.length;o!==l;++o){const c=arguments[o],h=c.uuid,u=t[h];if(u!==void 0)if(delete t[h],u<s){const f=--s,d=e[f],m=--a,g=e[m];t[d.uuid]=u,e[u]=d,t[g.uuid]=f,e[f]=g,e.pop();for(let p=0,_=i;p!==_;++p){const y=n[p],x=y[f],v=y[m];y[u]=x,y[f]=v,y.pop()}}else{const f=--a,d=e[f];f>0&&(t[d.uuid]=u),e[u]=d,e.pop();for(let m=0,g=i;m!==g;++m){const p=n[m];p[u]=p[f],p.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const n=this._bindingsIndicesByPath;let i=n[e];const s=this._bindings;if(i!==void 0)return s[i];const a=this._paths,o=this._parsedPaths,l=this._objects,c=l.length,h=this.nCachedObjects_,u=new Array(c);i=s.length,n[e]=i,a.push(e),o.push(t),s.push(u);for(let f=h,d=l.length;f!==d;++f){const m=l[f];u[f]=new Je(m,e,t)}return u}unsubscribe_(e){const t=this._bindingsIndicesByPath,n=t[e];if(n!==void 0){const i=this._paths,s=this._parsedPaths,a=this._bindings,o=a.length-1,l=a[o],c=e[o];t[c]=n,a[n]=l,a.pop(),s[n]=s[o],s.pop(),i[n]=i[o],i.pop()}}}class Vm{constructor(e,t,n=null,i=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=n,this.blendMode=i;const s=t.tracks,a=s.length,o=new Array(a),l={endingStart:Bs,endingEnd:Bs};for(let c=0;c!==a;++c){const h=s[c].createInterpolant(null);o[c]=h,h.settings=l}this._interpolantSettings=l,this._interpolants=o,this._propertyBindings=new Array(a),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=q0,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){const i=this._clip.duration,s=e._clip.duration,a=s/i,o=i/s;e.warp(1,a,t),this.warp(o,1,t)}return this}crossFadeTo(e,t,n){return e.crossFadeFrom(this,t,n)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,n){const i=this._mixer,s=i.time,a=this.timeScale;let o=this._timeScaleInterpolant;o===null&&(o=i._lendControlInterpolant(),this._timeScaleInterpolant=o);const l=o.parameterPositions,c=o.sampleValues;return l[0]=s,l[1]=s+n,c[0]=e/a,c[1]=t/a,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,n,i){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const l=(e-s)*n;l<0||n===0?t=0:(this._startTime=null,t=n*l)}t*=this._updateTimeScale(e);const a=this._updateTime(t),o=this._updateWeight(e);if(o>0){const l=this._interpolants,c=this._propertyBindings;switch(this.blendMode){case Df:for(let h=0,u=l.length;h!==u;++h)l[h].evaluate(a),c[h].accumulateAdditive(o);break;case Qc:default:for(let h=0,u=l.length;h!==u;++h)l[h].evaluate(a),c[h].accumulate(i,o)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const n=this._weightInterpolant;if(n!==null){const i=n.evaluate(e)[0];t*=i,e>n.parameterPositions[1]&&(this.stopFading(),i===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const n=this._timeScaleInterpolant;if(n!==null){const i=n.evaluate(e)[0];t*=i,e>n.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,n=this.loop;let i=this.time+e,s=this._loopCount;const a=n===L0;if(e===0)return s===-1?i:a&&(s&1)===1?t-i:i;if(n===I0){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=t)i=t;else if(i<0)i=0;else{this.time=i;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,a)):this._setEndings(this.repetitions===0,!0,a)),i>=t||i<0){const o=Math.floor(i/t);i-=t*o,s+=Math.abs(o);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?t:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const c=e<0;this._setEndings(c,!c,a)}else this._setEndings(!1,!1,a);this._loopCount=s,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:o})}}else this.time=i;if(a&&(s&1)===1)return t-i}return i}_setEndings(e,t,n){const i=this._interpolantSettings;n?(i.endingStart=zs,i.endingEnd=zs):(e?i.endingStart=this.zeroSlopeAtStart?zs:Bs:i.endingStart=co,t?i.endingEnd=this.zeroSlopeAtEnd?zs:Bs:i.endingEnd=co)}_scheduleFading(e,t,n){const i=this._mixer,s=i.time;let a=this._weightInterpolant;a===null&&(a=i._lendControlInterpolant(),this._weightInterpolant=a);const o=a.parameterPositions,l=a.sampleValues;return o[0]=s,l[0]=t,o[1]=s+e,l[1]=n,this}}const H6=new Float32Array(1);class V6 extends xi{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const n=e._localRoot||this._root,i=e._clip.tracks,s=i.length,a=e._propertyBindings,o=e._interpolants,l=n.uuid,c=this._bindingsByRootAndName;let h=c[l];h===void 0&&(h={},c[l]=h);for(let u=0;u!==s;++u){const f=i[u],d=f.name;let m=h[d];if(m!==void 0)++m.referenceCount,a[u]=m;else{if(m=a[u],m!==void 0){m._cacheIndex===null&&(++m.referenceCount,this._addInactiveBinding(m,l,d));continue}const g=t&&t._propertyBindings[u].binding.parsedPath;m=new Hm(Je.create(n,d,g),f.ValueTypeName,f.getValueSize()),++m.referenceCount,this._addInactiveBinding(m,l,d),a[u]=m}o[u].resultBuffer=m.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const n=(e._localRoot||this._root).uuid,i=e._clip.uuid,s=this._actionsByClip[i];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,i,n)}const t=e._propertyBindings;for(let n=0,i=t.length;n!==i;++n){const s=t[n];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let n=0,i=t.length;n!==i;++n){const s=t[n];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,n){const i=this._actions,s=this._actionsByClip;let a=s[t];if(a===void 0)a={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=a;else{const o=a.knownActions;e._byClipCacheIndex=o.length,o.push(e)}e._cacheIndex=i.length,i.push(e),a.actionByRoot[n]=e}_removeInactiveAction(e){const t=this._actions,n=t[t.length-1],i=e._cacheIndex;n._cacheIndex=i,t[i]=n,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,a=this._actionsByClip,o=a[s],l=o.knownActions,c=l[l.length-1],h=e._byClipCacheIndex;c._byClipCacheIndex=h,l[h]=c,l.pop(),e._byClipCacheIndex=null;const u=o.actionByRoot,f=(e._localRoot||this._root).uuid;delete u[f],l.length===0&&delete a[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let n=0,i=t.length;n!==i;++n){const s=t[n];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,n=e._cacheIndex,i=this._nActiveActions++,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=n,t[n]=s}_takeBackAction(e){const t=this._actions,n=e._cacheIndex,i=--this._nActiveActions,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=n,t[n]=s}_addInactiveBinding(e,t,n){const i=this._bindingsByRootAndName,s=this._bindings;let a=i[t];a===void 0&&(a={},i[t]=a),a[n]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,n=e.binding,i=n.rootNode.uuid,s=n.path,a=this._bindingsByRootAndName,o=a[i],l=t[t.length-1],c=e._cacheIndex;l._cacheIndex=c,t[c]=l,t.pop(),delete o[s],Object.keys(o).length===0&&delete a[i]}_lendBinding(e){const t=this._bindings,n=e._cacheIndex,i=this._nActiveBindings++,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=n,t[n]=s}_takeBackBinding(e){const t=this._bindings,n=e._cacheIndex,i=--this._nActiveBindings,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=n,t[n]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let n=e[t];return n===void 0&&(n=new id(new Float32Array(2),new Float32Array(2),1,H6),n.__cacheIndex=t,e[t]=n),n}_takeBackControlInterpolant(e){const t=this._controlInterpolants,n=e.__cacheIndex,i=--this._nActiveControlInterpolants,s=t[i];e.__cacheIndex=i,t[i]=e,s.__cacheIndex=n,t[n]=s}clipAction(e,t,n){const i=t||this._root,s=i.uuid;let a=typeof e=="string"?la.findByName(i,e):e;const o=a!==null?a.uuid:e,l=this._actionsByClip[o];let c=null;if(n===void 0&&(a!==null?n=a.blendMode:n=Qc),l!==void 0){const u=l.actionByRoot[s];if(u!==void 0&&u.blendMode===n)return u;c=l.knownActions[0],a===null&&(a=c._clip)}if(a===null)return null;const h=new Vm(this,a,t,n);return this._bindAction(h,c),this._addInactiveAction(h,o,s),h}existingAction(e,t){const n=t||this._root,i=n.uuid,s=typeof e=="string"?la.findByName(n,e):e,a=s?s.uuid:e,o=this._actionsByClip[a];return o!==void 0&&o.actionByRoot[i]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let n=t-1;n>=0;--n)e[n].stop();return this}update(e){e*=this.timeScale;const t=this._actions,n=this._nActiveActions,i=this.time+=e,s=Math.sign(e),a=this._accuIndex^=1;for(let c=0;c!==n;++c)t[c]._update(i,e,s,a);const o=this._bindings,l=this._nActiveBindings;for(let c=0;c!==l;++c)o[c].apply(a);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,n=e.uuid,i=this._actionsByClip,s=i[n];if(s!==void 0){const a=s.knownActions;for(let o=0,l=a.length;o!==l;++o){const c=a[o];this._deactivateAction(c);const h=c._cacheIndex,u=t[t.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,u._cacheIndex=h,t[h]=u,t.pop(),this._removeInactiveBindingsForAction(c)}delete i[n]}}uncacheRoot(e){const t=e.uuid,n=this._actionsByClip;for(const a in n){const o=n[a].actionByRoot,l=o[t];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const i=this._bindingsByRootAndName,s=i[t];if(s!==void 0)for(const a in s){const o=s[a];o.restoreOriginalState(),this._removeInactiveBinding(o)}}uncacheAction(e,t){const n=this.existingAction(e,t);n!==null&&(this._deactivateAction(n),this._removeInactiveAction(n))}}class ud{constructor(e){this.value=e}clone(){return new ud(this.value.clone===void 0?this.value:this.value.clone())}}let G6=0;class W6 extends xi{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:G6++}),this.name="",this.usage=po,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let n=0,i=t.length;n<i;n++){const s=Array.isArray(t[n])?t[n]:[t[n]];for(let a=0;a<s.length;a++)this.uniforms.push(s[a].clone())}return this}clone(){return new this.constructor().copy(this)}}class X6 extends Oo{constructor(e,t,n=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=n}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class Y6{constructor(e,t,n,i,s){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=n,this.elementSize=i,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const c1=new Ee;class Gm{constructor(e,t,n=0,i=1/0){this.ray=new fr(e,t),this.near=n,this.far=i,this.camera=null,this.layers=new nh,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return c1.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(c1),this}intersectObject(e,t=!0,n=[]){return Ku(e,this,n,t),n.sort(h1),n}intersectObjects(e,t=!0,n=[]){for(let i=0,s=e.length;i<s;i++)Ku(e[i],this,n,t);return n.sort(h1),n}}function h1(r,e){return r.distance-e.distance}function Ku(r,e,t,n){let i=!0;if(r.layers.test(e.layers)&&r.raycast(e,t)===!1&&(i=!1),i===!0&&n===!0){const s=r.children;for(let a=0,o=s.length;a<o;a++)Ku(s[a],e,t,!0)}}class Zu{constructor(e=1,t=0,n=0){return this.radius=e,this.phi=t,this.theta=n,this}set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(Mt(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class K6{constructor(e=1,t=0,n=0){return this.radius=e,this.theta=t,this.y=n,this}set(e,t,n){return this.radius=e,this.theta=t,this.y=n,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}clone(){return new this.constructor().copy(this)}}class fd{constructor(e,t,n,i){fd.prototype.isMatrix2=!0,this.elements=[1,0,0,1],e!==void 0&&this.set(e,t,n,i)}identity(){return this.set(1,0,0,1),this}fromArray(e,t=0){for(let n=0;n<4;n++)this.elements[n]=e[n+t];return this}set(e,t,n,i){const s=this.elements;return s[0]=e,s[2]=t,s[1]=n,s[3]=i,this}}const u1=new G;class Z6{constructor(e=new G(1/0,1/0),t=new G(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=u1.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,u1).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const f1=new R,Ul=new R;class $6{constructor(e=new R,t=new R){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){f1.subVectors(e,this.start),Ul.subVectors(this.end,this.start);const n=Ul.dot(Ul);let s=Ul.dot(f1)/n;return t&&(s=Mt(s,0,1)),s}closestPointToPoint(e,t,n){const i=this.closestPointToPointParameter(e,t);return this.delta(n).multiplyScalar(i).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const d1=new R;class J6 extends Xe{constructor(e,t){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const n=new Oe,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let a=0,o=1,l=32;a<l;a++,o++){const c=a/l*Math.PI*2,h=o/l*Math.PI*2;i.push(Math.cos(c),Math.sin(c),1,Math.cos(h),Math.sin(h),1)}n.setAttribute("position",new Se(i,3));const s=new rn({fog:!1,toneMapped:!1});this.cone=new ei(n,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),d1.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(d1),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Ki=new R,Ol=new Ee,xu=new Ee;class j6 extends ei{constructor(e){const t=Wm(e),n=new Oe,i=[],s=[],a=new ae(0,0,1),o=new ae(0,1,0);for(let c=0;c<t.length;c++){const h=t[c];h.parent&&h.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),s.push(a.r,a.g,a.b),s.push(o.r,o.g,o.b))}n.setAttribute("position",new Se(i,3)),n.setAttribute("color",new Se(s,3));const l=new rn({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(n,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,n=this.geometry,i=n.getAttribute("position");xu.copy(this.root.matrixWorld).invert();for(let s=0,a=0;s<t.length;s++){const o=t[s];o.parent&&o.parent.isBone&&(Ol.multiplyMatrices(xu,o.matrixWorld),Ki.setFromMatrixPosition(Ol),i.setXYZ(a,Ki.x,Ki.y,Ki.z),Ol.multiplyMatrices(xu,o.parent.matrixWorld),Ki.setFromMatrixPosition(Ol),i.setXYZ(a+1,Ki.x,Ki.y,Ki.z),a+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function Wm(r){const e=[];r.isBone===!0&&e.push(r);for(let t=0;t<r.children.length;t++)e.push.apply(e,Wm(r.children[t]));return e}class Q6 extends ct{constructor(e,t,n){const i=new ya(t,4,2),s=new Yt({wireframe:!0,fog:!1,toneMapped:!1});super(i,s),this.light=e,this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const e7=new R,p1=new ae,m1=new ae;class t7 extends Xe{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="HemisphereLightHelper";const i=new Ho(t);i.rotateY(Math.PI*.5),this.material=new Yt({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=i.getAttribute("position"),a=new Float32Array(s.count*3);i.setAttribute("color",new Qe(a,3)),this.add(new ct(i,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");p1.copy(this.light.color),m1.copy(this.light.groundColor);for(let n=0,i=t.count;n<i;n++){const s=n<i/2?p1:m1;t.setXYZ(n,s.r,s.g,s.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(e7.setFromMatrixPosition(this.light.matrixWorld).negate())}}class n7 extends ei{constructor(e=10,t=10,n=4473924,i=8947848){n=new ae(n),i=new ae(i);const s=t/2,a=e/t,o=e/2,l=[],c=[];for(let f=0,d=0,m=-o;f<=t;f++,m+=a){l.push(-o,0,m,o,0,m),l.push(m,0,-o,m,0,o);const g=f===s?n:i;g.toArray(c,d),d+=3,g.toArray(c,d),d+=3,g.toArray(c,d),d+=3,g.toArray(c,d),d+=3}const h=new Oe;h.setAttribute("position",new Se(l,3)),h.setAttribute("color",new Se(c,3));const u=new rn({vertexColors:!0,toneMapped:!1});super(h,u),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class i7 extends ei{constructor(e=10,t=16,n=8,i=64,s=4473924,a=8947848){s=new ae(s),a=new ae(a);const o=[],l=[];if(t>1)for(let u=0;u<t;u++){const f=u/t*(Math.PI*2),d=Math.sin(f)*e,m=Math.cos(f)*e;o.push(0,0,0),o.push(d,0,m);const g=u&1?s:a;l.push(g.r,g.g,g.b),l.push(g.r,g.g,g.b)}for(let u=0;u<n;u++){const f=u&1?s:a,d=e-e/n*u;for(let m=0;m<i;m++){let g=m/i*(Math.PI*2),p=Math.sin(g)*d,_=Math.cos(g)*d;o.push(p,0,_),l.push(f.r,f.g,f.b),g=(m+1)/i*(Math.PI*2),p=Math.sin(g)*d,_=Math.cos(g)*d,o.push(p,0,_),l.push(f.r,f.g,f.b)}}const c=new Oe;c.setAttribute("position",new Se(o,3)),c.setAttribute("color",new Se(l,3));const h=new rn({vertexColors:!0,toneMapped:!1});super(c,h),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const g1=new R,Fl=new R,_1=new R;class s7 extends Xe{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="DirectionalLightHelper",t===void 0&&(t=1);let i=new Oe;i.setAttribute("position",new Se([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new rn({fog:!1,toneMapped:!1});this.lightPlane=new Oi(i,s),this.add(this.lightPlane),i=new Oe,i.setAttribute("position",new Se([0,0,0,0,0,1],3)),this.targetLine=new Oi(i,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),g1.setFromMatrixPosition(this.light.matrixWorld),Fl.setFromMatrixPosition(this.light.target.matrixWorld),_1.subVectors(Fl,g1),this.lightPlane.lookAt(Fl),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Fl),this.targetLine.scale.z=_1.length()}}const Bl=new R,vt=new ih;class r7 extends ei{constructor(e){const t=new Oe,n=new rn({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],s=[],a={};o("n1","n2"),o("n2","n4"),o("n4","n3"),o("n3","n1"),o("f1","f2"),o("f2","f4"),o("f4","f3"),o("f3","f1"),o("n1","f1"),o("n2","f2"),o("n3","f3"),o("n4","f4"),o("p","n1"),o("p","n2"),o("p","n3"),o("p","n4"),o("u1","u2"),o("u2","u3"),o("u3","u1"),o("c","t"),o("p","c"),o("cn1","cn2"),o("cn3","cn4"),o("cf1","cf2"),o("cf3","cf4");function o(m,g){l(m),l(g)}function l(m){i.push(0,0,0),s.push(0,0,0),a[m]===void 0&&(a[m]=[]),a[m].push(i.length/3-1)}t.setAttribute("position",new Se(i,3)),t.setAttribute("color",new Se(s,3)),super(t,n),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update();const c=new ae(16755200),h=new ae(16711680),u=new ae(43775),f=new ae(16777215),d=new ae(3355443);this.setColors(c,h,u,f,d)}setColors(e,t,n,i,s){const o=this.geometry.getAttribute("color");o.setXYZ(0,e.r,e.g,e.b),o.setXYZ(1,e.r,e.g,e.b),o.setXYZ(2,e.r,e.g,e.b),o.setXYZ(3,e.r,e.g,e.b),o.setXYZ(4,e.r,e.g,e.b),o.setXYZ(5,e.r,e.g,e.b),o.setXYZ(6,e.r,e.g,e.b),o.setXYZ(7,e.r,e.g,e.b),o.setXYZ(8,e.r,e.g,e.b),o.setXYZ(9,e.r,e.g,e.b),o.setXYZ(10,e.r,e.g,e.b),o.setXYZ(11,e.r,e.g,e.b),o.setXYZ(12,e.r,e.g,e.b),o.setXYZ(13,e.r,e.g,e.b),o.setXYZ(14,e.r,e.g,e.b),o.setXYZ(15,e.r,e.g,e.b),o.setXYZ(16,e.r,e.g,e.b),o.setXYZ(17,e.r,e.g,e.b),o.setXYZ(18,e.r,e.g,e.b),o.setXYZ(19,e.r,e.g,e.b),o.setXYZ(20,e.r,e.g,e.b),o.setXYZ(21,e.r,e.g,e.b),o.setXYZ(22,e.r,e.g,e.b),o.setXYZ(23,e.r,e.g,e.b),o.setXYZ(24,t.r,t.g,t.b),o.setXYZ(25,t.r,t.g,t.b),o.setXYZ(26,t.r,t.g,t.b),o.setXYZ(27,t.r,t.g,t.b),o.setXYZ(28,t.r,t.g,t.b),o.setXYZ(29,t.r,t.g,t.b),o.setXYZ(30,t.r,t.g,t.b),o.setXYZ(31,t.r,t.g,t.b),o.setXYZ(32,n.r,n.g,n.b),o.setXYZ(33,n.r,n.g,n.b),o.setXYZ(34,n.r,n.g,n.b),o.setXYZ(35,n.r,n.g,n.b),o.setXYZ(36,n.r,n.g,n.b),o.setXYZ(37,n.r,n.g,n.b),o.setXYZ(38,i.r,i.g,i.b),o.setXYZ(39,i.r,i.g,i.b),o.setXYZ(40,s.r,s.g,s.b),o.setXYZ(41,s.r,s.g,s.b),o.setXYZ(42,s.r,s.g,s.b),o.setXYZ(43,s.r,s.g,s.b),o.setXYZ(44,s.r,s.g,s.b),o.setXYZ(45,s.r,s.g,s.b),o.setXYZ(46,s.r,s.g,s.b),o.setXYZ(47,s.r,s.g,s.b),o.setXYZ(48,s.r,s.g,s.b),o.setXYZ(49,s.r,s.g,s.b),o.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,n=1,i=1;vt.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Tt("c",t,e,vt,0,0,-1),Tt("t",t,e,vt,0,0,1),Tt("n1",t,e,vt,-n,-i,-1),Tt("n2",t,e,vt,n,-i,-1),Tt("n3",t,e,vt,-n,i,-1),Tt("n4",t,e,vt,n,i,-1),Tt("f1",t,e,vt,-n,-i,1),Tt("f2",t,e,vt,n,-i,1),Tt("f3",t,e,vt,-n,i,1),Tt("f4",t,e,vt,n,i,1),Tt("u1",t,e,vt,n*.7,i*1.1,-1),Tt("u2",t,e,vt,-n*.7,i*1.1,-1),Tt("u3",t,e,vt,0,i*2,-1),Tt("cf1",t,e,vt,-n,0,1),Tt("cf2",t,e,vt,n,0,1),Tt("cf3",t,e,vt,0,-i,1),Tt("cf4",t,e,vt,0,i,1),Tt("cn1",t,e,vt,-n,0,-1),Tt("cn2",t,e,vt,n,0,-1),Tt("cn3",t,e,vt,0,-i,-1),Tt("cn4",t,e,vt,0,i,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Tt(r,e,t,n,i,s,a){Bl.set(i,s,a).unproject(n);const o=e[r];if(o!==void 0){const l=t.getAttribute("position");for(let c=0,h=o.length;c<h;c++)l.setXYZ(o[c],Bl.x,Bl.y,Bl.z)}}const zl=new tn;class a7 extends ei{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(8*3),s=new Oe;s.setIndex(new Qe(n,1)),s.setAttribute("position",new Qe(i,3)),super(s,new rn({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&zl.setFromObject(this.object),zl.isEmpty())return;const t=zl.min,n=zl.max,i=this.geometry.attributes.position,s=i.array;s[0]=n.x,s[1]=n.y,s[2]=n.z,s[3]=t.x,s[4]=n.y,s[5]=n.z,s[6]=t.x,s[7]=t.y,s[8]=n.z,s[9]=n.x,s[10]=t.y,s[11]=n.z,s[12]=n.x,s[13]=n.y,s[14]=t.z,s[15]=t.x,s[16]=n.y,s[17]=t.z,s[18]=t.x,s[19]=t.y,s[20]=t.z,s[21]=n.x,s[22]=t.y,s[23]=t.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class o7 extends ei{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new Oe;s.setIndex(new Qe(n,1)),s.setAttribute("position",new Se(i,3)),super(s,new rn({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class l7 extends Oi{constructor(e,t=1,n=16776960){const i=n,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],a=new Oe;a.setAttribute("position",new Se(s,3)),a.computeBoundingSphere(),super(a,new rn({color:i,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const o=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new Oe;l.setAttribute("position",new Se(o,3)),l.computeBoundingSphere(),this.add(new ct(l,new Yt({color:i,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const x1=new R;let kl,yu;class c7 extends Xe{constructor(e=new R(0,0,1),t=new R(0,0,0),n=1,i=16776960,s=n*.2,a=s*.2){super(),this.type="ArrowHelper",kl===void 0&&(kl=new Oe,kl.setAttribute("position",new Se([0,0,0,0,1,0],3)),yu=new xa(0,.5,1,5,1),yu.translate(0,-.5,0)),this.position.copy(t),this.line=new Oi(kl,new rn({color:i,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new ct(yu,new Yt({color:i,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,s,a)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{x1.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(x1,t)}}setLength(e,t=e*.2,n=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class h7 extends ei{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new Oe;i.setAttribute("position",new Se(t,3)),i.setAttribute("color",new Se(n,3));const s=new rn({vertexColors:!0,toneMapped:!1});super(i,s),this.type="AxesHelper"}setColors(e,t,n){const i=new ae,s=this.geometry.attributes.color.array;return i.set(e),i.toArray(s,0),i.toArray(s,3),i.set(t),i.toArray(s,6),i.toArray(s,9),i.set(n),i.toArray(s,12),i.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Xm{constructor(){this.type="ShapePath",this.color=new ae,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new _o,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,n,i){return this.currentPath.quadraticCurveTo(e,t,n,i),this}bezierCurveTo(e,t,n,i,s,a){return this.currentPath.bezierCurveTo(e,t,n,i,s,a),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(_){const y=[];for(let x=0,v=_.length;x<v;x++){const w=_[x],b=new $s;b.curves=w.curves,y.push(b)}return y}function n(_,y){const x=y.length;let v=!1;for(let w=x-1,b=0;b<x;w=b++){let A=y[w],C=y[b],M=C.x-A.x,S=C.y-A.y;if(Math.abs(S)>Number.EPSILON){if(S<0&&(A=y[b],M=-M,C=y[w],S=-S),_.y<A.y||_.y>C.y)continue;if(_.y===A.y){if(_.x===A.x)return!0}else{const q=S*(_.x-A.x)-M*(_.y-A.y);if(q===0)return!0;if(q<0)continue;v=!v}}else{if(_.y!==A.y)continue;if(C.x<=_.x&&_.x<=A.x||A.x<=_.x&&_.x<=C.x)return!0}}return v}const i=di.isClockWise,s=this.subPaths;if(s.length===0)return[];let a,o,l;const c=[];if(s.length===1)return o=s[0],l=new $s,l.curves=o.curves,c.push(l),c;let h=!i(s[0].getPoints());h=e?!h:h;const u=[],f=[];let d=[],m=0,g;f[m]=void 0,d[m]=[];for(let _=0,y=s.length;_<y;_++)o=s[_],g=o.getPoints(),a=i(g),a=e?!a:a,a?(!h&&f[m]&&m++,f[m]={s:new $s,p:g},f[m].s.curves=o.curves,h&&m++,d[m]=[]):d[m].push({h:o,p:g[0]});if(!f[0])return t(s);if(f.length>1){let _=!1,y=0;for(let x=0,v=f.length;x<v;x++)u[x]=[];for(let x=0,v=f.length;x<v;x++){const w=d[x];for(let b=0;b<w.length;b++){const A=w[b];let C=!0;for(let M=0;M<f.length;M++)n(A.p,f[M].p)&&(x!==M&&y++,C?(C=!1,u[M].push(A)):_=!0);C&&u[x].push(A)}}y>0&&_===!1&&(d=u)}let p;for(let _=0,y=f.length;_<y;_++){l=f[_].s,c.push(l),p=d[_];for(let x=0,v=p.length;x<v;x++)l.holes.push(p[x].h)}return c}}class Ym extends xi{constructor(e,t){super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(){}disconnect(){}dispose(){}update(){}}class u7 extends fn{constructor(e=1,t=1,n=1,i={}){console.warn('THREE.WebGLMultipleRenderTargets has been deprecated and will be removed in r172. Use THREE.WebGLRenderTarget and set the "count" parameter to enable MRT.'),super(e,t,{...i,count:n}),this.isWebGLMultipleRenderTargets=!0}get texture(){return this.textures}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Gc}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Gc);const f7=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:Sf,AddEquation:ji,AddOperation:R0,AdditiveAnimationBlendMode:Df,AdditiveBlending:ro,AgXToneMapping:bf,AlphaFormat:Rf,AlwaysCompare:G0,AlwaysDepth:M0,AlwaysStencilFunc:Bu,AmbientLight:Dc,AnimationAction:Vm,AnimationClip:la,AnimationLoader:g6,AnimationMixer:V6,AnimationObjectGroup:k6,AnimationUtils:f6,ArcCurve:um,ArrayCamera:rm,ArrowHelper:c7,AttachedBindMode:Fu,Audio:km,AudioAnalyser:I6,AudioContext:ld,AudioListener:R6,AudioLoader:A6,AxesHelper:h7,BackSide:un,BasicDepthPacking:N0,BasicShadowMap:m5,BatchedMesh:hm,Bone:oh,BooleanKeyframeTrack:mr,Box2:Z6,Box3:tn,Box3Helper:o7,BoxGeometry:dr,BoxHelper:a7,BufferAttribute:Qe,BufferGeometry:Oe,BufferGeometryLoader:Bm,ByteType:Af,Cache:Li,Camera:ih,CameraHelper:r7,CanvasTexture:Ux,CapsuleGeometry:fh,CatmullRomCurve3:fm,CineonToneMapping:Mf,CircleGeometry:ko,ClampToEdgeWrapping:Pn,Clock:wh,Color:ae,ColorKeyframeTrack:sd,ColorManagement:Ye,CompressedArrayTexture:Dx,CompressedCubeTexture:Nx,CompressedTexture:ch,CompressedTextureLoader:_6,ConeGeometry:dh,ConstantAlphaFactor:x0,ConstantColorFactor:g0,Controls:Ym,CubeCamera:J0,CubeReflectionMapping:Ni,CubeRefractionMapping:os,CubeTexture:No,CubeTextureLoader:x6,CubeUVReflectionMapping:ma,CubicBezierCurve:Jf,CubicBezierCurve3:dm,CubicInterpolant:Pm,CullFaceBack:Nu,CullFaceFront:e0,CullFaceFrontBack:p5,CullFaceNone:Q1,Curve:ti,CurvePath:mm,CustomBlending:n0,CustomToneMapping:C0,CylinderGeometry:xa,Cylindrical:K6,Data3DTexture:Bf,DataArrayTexture:th,DataTexture:fi,DataTextureLoader:y6,DataUtils:Tg,DecrementStencilOp:w5,DecrementWrapStencilOp:R5,DefaultLoadingManager:Lm,DepthFormat:Ks,DepthStencilFormat:nr,DepthTexture:Vf,DetachedBindMode:P0,DirectionalLight:So,DirectionalLightHelper:s7,DiscreteInterpolant:Im,DisplayP3ColorSpace:eh,DodecahedronGeometry:ph,DoubleSide:zn,DstAlphaFactor:u0,DstColorFactor:d0,DynamicCopyUsage:V5,DynamicDrawUsage:O5,DynamicReadUsage:z5,EdgesGeometry:gm,EllipseCurve:hh,EqualCompare:z0,EqualDepth:b0,EqualStencilFunc:q5,EquirectangularReflectionMapping:oo,EquirectangularRefractionMapping:lo,Euler:Dn,EventDispatcher:xi,ExtrudeGeometry:gh,FileLoader:Gn,Float16BufferAttribute:Pg,Float32BufferAttribute:Se,FloatType:_n,Fog:ah,FogExp2:rh,FramebufferTexture:Lx,FrontSide:mi,Frustum:Uo,GLBufferAttribute:Y6,GLSL1:W5,GLSL3:zu,GreaterCompare:k0,GreaterDepth:A0,GreaterEqualCompare:V0,GreaterEqualDepth:T0,GreaterEqualStencilFunc:U5,GreaterStencilFunc:D5,GridHelper:n7,Group:li,HalfFloatType:ui,HemisphereLight:Dm,HemisphereLightHelper:t7,IcosahedronGeometry:_h,ImageBitmapLoader:zm,ImageLoader:Mo,ImageUtils:Y0,IncrementStencilOp:A5,IncrementWrapStencilOp:E5,InstancedBufferAttribute:ir,InstancedBufferGeometry:Fm,InstancedInterleavedBuffer:X6,InstancedMesh:Kf,Int16BufferAttribute:Rg,Int32BufferAttribute:Cg,Int8BufferAttribute:Ag,IntType:Yc,InterleavedBuffer:Oo,InterleavedBufferAttribute:cs,Interpolant:va,InterpolateDiscrete:na,InterpolateLinear:ia,InterpolateSmooth:Zl,InvertStencilOp:C5,KeepStencilOp:Ls,KeyframeTrack:ni,LOD:cm,LatheGeometry:zo,Layers:nh,LessCompare:B0,LessDepth:S0,LessEqualCompare:Uf,LessEqualDepth:ao,LessEqualStencilFunc:L5,LessStencilFunc:I5,Light:ps,LightProbe:Om,Line:Oi,Line3:$6,LineBasicMaterial:rn,LineCurve:jf,LineCurve3:pm,LineDashedMaterial:Em,LineLoop:Zf,LineSegments:ei,LinearDisplayP3ColorSpace:Do,LinearFilter:St,LinearInterpolant:id,LinearMipMapLinearFilter:y5,LinearMipMapNearestFilter:x5,LinearMipmapLinearFilter:kn,LinearMipmapNearestFilter:Yr,LinearSRGBColorSpace:Ht,LinearToneMapping:yf,LinearTransfer:ho,Loader:an,LoaderUtils:is,LoadingManager:bh,LoopOnce:I0,LoopPingPong:L0,LoopRepeat:q0,LuminanceAlphaFormat:If,LuminanceFormat:Pf,MOUSE:Xs,Material:Ut,MaterialLoader:Ah,MathUtils:Ff,Matrix2:fd,Matrix3:ke,Matrix4:Ee,MaxEquation:a0,Mesh:ct,MeshBasicMaterial:Yt,MeshDepthMaterial:Gf,MeshDistanceMaterial:Wf,MeshLambertMaterial:Am,MeshMatcapMaterial:wm,MeshNormalMaterial:Tm,MeshPhongMaterial:Sm,MeshPhysicalMaterial:Xn,MeshStandardMaterial:Go,MeshToonMaterial:bm,MinEquation:r0,MirroredRepeatWrapping:ea,MixOperation:E0,MultiplyBlending:Ou,MultiplyOperation:qo,NearestFilter:Nt,NearestMipMapLinearFilter:_5,NearestMipMapNearestFilter:g5,NearestMipmapLinearFilter:Fs,NearestMipmapNearestFilter:Xc,NeutralToneMapping:Tf,NeverCompare:F0,NeverDepth:v0,NeverStencilFunc:P5,NoBlending:hi,NoColorSpace:Ii,NoToneMapping:Di,NormalAnimationBlendMode:Qc,NormalBlending:Ys,NotEqualCompare:H0,NotEqualDepth:w0,NotEqualStencilFunc:N5,NumberKeyframeTrack:rr,Object3D:Xe,ObjectLoader:b6,ObjectSpaceNormalMap:O0,OctahedronGeometry:Ho,OneFactor:l0,OneMinusConstantAlphaFactor:y0,OneMinusConstantColorFactor:_0,OneMinusDstAlphaFactor:f0,OneMinusDstColorFactor:p0,OneMinusSrcAlphaFactor:ic,OneMinusSrcColorFactor:h0,OrthographicCamera:ga,P3Primaries:fo,PCFShadowMap:xf,PCFSoftShadowMap:t0,PMREMGenerator:ku,Path:_o,PerspectiveCamera:Lt,Plane:Jn,PlaneGeometry:pr,PlaneHelper:l7,PointLight:Th,PointLightHelper:Q6,Points:lh,PointsMaterial:Bo,PolarGridHelper:i7,PolyhedronGeometry:ds,PositionalAudio:P6,PropertyBinding:Je,PropertyMixer:Hm,QuadraticBezierCurve:Qf,QuadraticBezierCurve3:ed,Quaternion:wt,QuaternionKeyframeTrack:ar,QuaternionLinearInterpolant:qm,RED_GREEN_RGTC2_Format:Rc,RED_RGTC1_Format:Lf,REVISION:Gc,RGBADepthPacking:U0,RGBAFormat:hn,RGBAIntegerFormat:jc,RGBA_ASTC_10x10_Format:Sc,RGBA_ASTC_10x5_Format:yc,RGBA_ASTC_10x6_Format:vc,RGBA_ASTC_10x8_Format:Mc,RGBA_ASTC_12x10_Format:bc,RGBA_ASTC_12x12_Format:Tc,RGBA_ASTC_4x4_Format:uc,RGBA_ASTC_5x4_Format:fc,RGBA_ASTC_5x5_Format:dc,RGBA_ASTC_6x5_Format:pc,RGBA_ASTC_6x6_Format:mc,RGBA_ASTC_8x5_Format:gc,RGBA_ASTC_8x6_Format:_c,RGBA_ASTC_8x8_Format:xc,RGBA_BPTC_Format:Ya,RGBA_ETC2_EAC_Format:hc,RGBA_PVRTC_2BPPV1_Format:oc,RGBA_PVRTC_4BPPV1_Format:ac,RGBA_S3TC_DXT1_Format:Ga,RGBA_S3TC_DXT3_Format:Wa,RGBA_S3TC_DXT5_Format:Xa,RGBDepthPacking:M5,RGBFormat:Cf,RGBIntegerFormat:v5,RGB_BPTC_SIGNED_Format:Ac,RGB_BPTC_UNSIGNED_Format:wc,RGB_ETC1_Format:lc,RGB_ETC2_Format:cc,RGB_PVRTC_2BPPV1_Format:rc,RGB_PVRTC_4BPPV1_Format:sc,RGB_S3TC_DXT1_Format:Va,RGDepthPacking:S5,RGFormat:qf,RGIntegerFormat:Jc,RawShaderMaterial:td,Ray:fr,Raycaster:Gm,Rec709Primaries:uo,RectAreaLight:Nm,RedFormat:$c,RedIntegerFormat:Lo,ReinhardToneMapping:vf,RenderTarget:K0,RepeatWrapping:ls,ReplaceStencilOp:T5,ReverseSubtractEquation:s0,RingGeometry:xh,SIGNED_RED_GREEN_RGTC2_Format:Cc,SIGNED_RED_RGTC1_Format:Ec,SRGBColorSpace:Xt,SRGBTransfer:ot,Scene:oa,ShaderChunk:Ve,ShaderLib:jn,ShaderMaterial:kt,ShadowMaterial:Mm,Shape:$s,ShapeGeometry:Vo,ShapePath:Xm,ShapeUtils:di,ShortType:wf,Skeleton:Fo,SkeletonHelper:j6,SkinnedMesh:Yf,Source:ks,Sphere:Kt,SphereGeometry:ya,Spherical:Zu,SphericalHarmonics3:Um,SplineCurve:uh,SpotLight:od,SpotLightHelper:J6,Sprite:lm,SpriteMaterial:Xf,SrcAlphaFactor:nc,SrcAlphaSaturateFactor:m0,SrcColorFactor:c0,StaticCopyUsage:H5,StaticDrawUsage:po,StaticReadUsage:B5,StereoCamera:w6,StreamCopyUsage:G5,StreamDrawUsage:F5,StreamReadUsage:k5,StringKeyframeTrack:gr,SubtractEquation:i0,SubtractiveBlending:Uu,TOUCH:Os,TangentSpaceNormalMap:fs,TetrahedronGeometry:yh,Texture:dt,TextureLoader:rd,TextureUtils:fx,TorusGeometry:vh,TorusKnotGeometry:Mh,Triangle:Rn,TriangleFanDrawMode:Pc,TriangleStripDrawMode:Nf,TrianglesDrawMode:D0,TubeGeometry:Sh,UVMapping:Wc,Uint16BufferAttribute:zf,Uint32BufferAttribute:kf,Uint8BufferAttribute:wg,Uint8ClampedBufferAttribute:Eg,Uniform:ud,UniformsGroup:W6,UniformsLib:ce,UniformsUtils:aa,UnsignedByteType:gi,UnsignedInt248Type:tr,UnsignedInt5999Type:Ef,UnsignedIntType:Ui,UnsignedShort4444Type:Kc,UnsignedShort5551Type:Zc,UnsignedShortType:ta,VSMShadowMap:si,Vector2:G,Vector3:R,Vector4:rt,VectorKeyframeTrack:or,VideoTexture:qx,WebGL3DRenderTarget:pg,WebGLArrayRenderTarget:dg,WebGLCoordinateSystem:oi,WebGLCubeRenderTarget:j0,WebGLMultipleRenderTargets:u7,WebGLRenderTarget:fn,WebGLRenderer:am,WebGLUtils:sm,WebGPUCoordinateSystem:mo,WireframeGeometry:vm,WrapAroundEnding:co,ZeroCurvatureEnding:Bs,ZeroFactor:o0,ZeroSlopeEnding:zs,ZeroStencilOp:b5,createCanvasElement:X0},Symbol.toStringTag,{value:"Module"})),y1={type:"change"},dd={type:"start"},Km={type:"end"},Hl=new fr,v1=new Jn,d7=Math.cos(70*Ff.DEG2RAD),Dt=new R,dn=2*Math.PI,at={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},vu=1e-6;class p7 extends Ym{constructor(e,t=null){super(e,t),this.state=at.NONE,this.enabled=!0,this.target=new R,this.cursor=new R,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minTargetRadius=0,this.maxTargetRadius=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:Xs.ROTATE,MIDDLE:Xs.DOLLY,RIGHT:Xs.PAN},this.touches={ONE:Os.ROTATE,TWO:Os.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this._lastPosition=new R,this._lastQuaternion=new wt,this._lastTargetPosition=new R,this._quat=new wt().setFromUnitVectors(e.up,new R(0,1,0)),this._quatInverse=this._quat.clone().invert(),this._spherical=new Zu,this._sphericalDelta=new Zu,this._scale=1,this._panOffset=new R,this._rotateStart=new G,this._rotateEnd=new G,this._rotateDelta=new G,this._panStart=new G,this._panEnd=new G,this._panDelta=new G,this._dollyStart=new G,this._dollyEnd=new G,this._dollyDelta=new G,this._dollyDirection=new R,this._mouse=new G,this._performCursorZoom=!1,this._pointers=[],this._pointerPositions={},this._controlActive=!1,this._onPointerMove=g7.bind(this),this._onPointerDown=m7.bind(this),this._onPointerUp=_7.bind(this),this._onContextMenu=T7.bind(this),this._onMouseWheel=v7.bind(this),this._onKeyDown=M7.bind(this),this._onTouchStart=S7.bind(this),this._onTouchMove=b7.bind(this),this._onMouseDown=x7.bind(this),this._onMouseMove=y7.bind(this),this._interceptControlDown=A7.bind(this),this._interceptControlUp=w7.bind(this),this.domElement!==null&&this.connect(),this.update()}connect(){this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointercancel",this._onPointerUp),this.domElement.addEventListener("contextmenu",this._onContextMenu),this.domElement.addEventListener("wheel",this._onMouseWheel,{passive:!1}),this.domElement.getRootNode().addEventListener("keydown",this._interceptControlDown,{passive:!0,capture:!0}),this.domElement.style.touchAction="none"}disconnect(){this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.domElement.removeEventListener("pointercancel",this._onPointerUp),this.domElement.removeEventListener("wheel",this._onMouseWheel),this.domElement.removeEventListener("contextmenu",this._onContextMenu),this.stopListenToKeyEvents(),this.domElement.getRootNode().removeEventListener("keydown",this._interceptControlDown,{capture:!0}),this.domElement.style.touchAction="auto"}dispose(){this.disconnect()}getPolarAngle(){return this._spherical.phi}getAzimuthalAngle(){return this._spherical.theta}getDistance(){return this.object.position.distanceTo(this.target)}listenToKeyEvents(e){e.addEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=e}stopListenToKeyEvents(){this._domElementKeyEvents!==null&&(this._domElementKeyEvents.removeEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=null)}saveState(){this.target0.copy(this.target),this.position0.copy(this.object.position),this.zoom0=this.object.zoom}reset(){this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this.dispatchEvent(y1),this.update(),this.state=at.NONE}update(e=null){const t=this.object.position;Dt.copy(t).sub(this.target),Dt.applyQuaternion(this._quat),this._spherical.setFromVector3(Dt),this.autoRotate&&this.state===at.NONE&&this._rotateLeft(this._getAutoRotationAngle(e)),this.enableDamping?(this._spherical.theta+=this._sphericalDelta.theta*this.dampingFactor,this._spherical.phi+=this._sphericalDelta.phi*this.dampingFactor):(this._spherical.theta+=this._sphericalDelta.theta,this._spherical.phi+=this._sphericalDelta.phi);let n=this.minAzimuthAngle,i=this.maxAzimuthAngle;isFinite(n)&&isFinite(i)&&(n<-Math.PI?n+=dn:n>Math.PI&&(n-=dn),i<-Math.PI?i+=dn:i>Math.PI&&(i-=dn),n<=i?this._spherical.theta=Math.max(n,Math.min(i,this._spherical.theta)):this._spherical.theta=this._spherical.theta>(n+i)/2?Math.max(n,this._spherical.theta):Math.min(i,this._spherical.theta)),this._spherical.phi=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,this._spherical.phi)),this._spherical.makeSafe(),this.enableDamping===!0?this.target.addScaledVector(this._panOffset,this.dampingFactor):this.target.add(this._panOffset),this.target.sub(this.cursor),this.target.clampLength(this.minTargetRadius,this.maxTargetRadius),this.target.add(this.cursor);let s=!1;if(this.zoomToCursor&&this._performCursorZoom||this.object.isOrthographicCamera)this._spherical.radius=this._clampDistance(this._spherical.radius);else{const a=this._spherical.radius;this._spherical.radius=this._clampDistance(this._spherical.radius*this._scale),s=a!=this._spherical.radius}if(Dt.setFromSpherical(this._spherical),Dt.applyQuaternion(this._quatInverse),t.copy(this.target).add(Dt),this.object.lookAt(this.target),this.enableDamping===!0?(this._sphericalDelta.theta*=1-this.dampingFactor,this._sphericalDelta.phi*=1-this.dampingFactor,this._panOffset.multiplyScalar(1-this.dampingFactor)):(this._sphericalDelta.set(0,0,0),this._panOffset.set(0,0,0)),this.zoomToCursor&&this._performCursorZoom){let a=null;if(this.object.isPerspectiveCamera){const o=Dt.length();a=this._clampDistance(o*this._scale);const l=o-a;this.object.position.addScaledVector(this._dollyDirection,l),this.object.updateMatrixWorld(),s=!!l}else if(this.object.isOrthographicCamera){const o=new R(this._mouse.x,this._mouse.y,0);o.unproject(this.object);const l=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),this.object.updateProjectionMatrix(),s=l!==this.object.zoom;const c=new R(this._mouse.x,this._mouse.y,0);c.unproject(this.object),this.object.position.sub(c).add(o),this.object.updateMatrixWorld(),a=Dt.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),this.zoomToCursor=!1;a!==null&&(this.screenSpacePanning?this.target.set(0,0,-1).transformDirection(this.object.matrix).multiplyScalar(a).add(this.object.position):(Hl.origin.copy(this.object.position),Hl.direction.set(0,0,-1).transformDirection(this.object.matrix),Math.abs(this.object.up.dot(Hl.direction))<d7?this.object.lookAt(this.target):(v1.setFromNormalAndCoplanarPoint(this.object.up,this.target),Hl.intersectPlane(v1,this.target))))}else if(this.object.isOrthographicCamera){const a=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),a!==this.object.zoom&&(this.object.updateProjectionMatrix(),s=!0)}return this._scale=1,this._performCursorZoom=!1,s||this._lastPosition.distanceToSquared(this.object.position)>vu||8*(1-this._lastQuaternion.dot(this.object.quaternion))>vu||this._lastTargetPosition.distanceToSquared(this.target)>vu?(this.dispatchEvent(y1),this._lastPosition.copy(this.object.position),this._lastQuaternion.copy(this.object.quaternion),this._lastTargetPosition.copy(this.target),!0):!1}_getAutoRotationAngle(e){return e!==null?dn/60*this.autoRotateSpeed*e:dn/60/60*this.autoRotateSpeed}_getZoomScale(e){const t=Math.abs(e*.01);return Math.pow(.95,this.zoomSpeed*t)}_rotateLeft(e){this._sphericalDelta.theta-=e}_rotateUp(e){this._sphericalDelta.phi-=e}_panLeft(e,t){Dt.setFromMatrixColumn(t,0),Dt.multiplyScalar(-e),this._panOffset.add(Dt)}_panUp(e,t){this.screenSpacePanning===!0?Dt.setFromMatrixColumn(t,1):(Dt.setFromMatrixColumn(t,0),Dt.crossVectors(this.object.up,Dt)),Dt.multiplyScalar(e),this._panOffset.add(Dt)}_pan(e,t){const n=this.domElement;if(this.object.isPerspectiveCamera){const i=this.object.position;Dt.copy(i).sub(this.target);let s=Dt.length();s*=Math.tan(this.object.fov/2*Math.PI/180),this._panLeft(2*e*s/n.clientHeight,this.object.matrix),this._panUp(2*t*s/n.clientHeight,this.object.matrix)}else this.object.isOrthographicCamera?(this._panLeft(e*(this.object.right-this.object.left)/this.object.zoom/n.clientWidth,this.object.matrix),this._panUp(t*(this.object.top-this.object.bottom)/this.object.zoom/n.clientHeight,this.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),this.enablePan=!1)}_dollyOut(e){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale/=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_dollyIn(e){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale*=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_updateZoomParameters(e,t){if(!this.zoomToCursor)return;this._performCursorZoom=!0;const n=this.domElement.getBoundingClientRect(),i=e-n.left,s=t-n.top,a=n.width,o=n.height;this._mouse.x=i/a*2-1,this._mouse.y=-(s/o)*2+1,this._dollyDirection.set(this._mouse.x,this._mouse.y,1).unproject(this.object).sub(this.object.position).normalize()}_clampDistance(e){return Math.max(this.minDistance,Math.min(this.maxDistance,e))}_handleMouseDownRotate(e){this._rotateStart.set(e.clientX,e.clientY)}_handleMouseDownDolly(e){this._updateZoomParameters(e.clientX,e.clientX),this._dollyStart.set(e.clientX,e.clientY)}_handleMouseDownPan(e){this._panStart.set(e.clientX,e.clientY)}_handleMouseMoveRotate(e){this._rotateEnd.set(e.clientX,e.clientY),this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);const t=this.domElement;this._rotateLeft(dn*this._rotateDelta.x/t.clientHeight),this._rotateUp(dn*this._rotateDelta.y/t.clientHeight),this._rotateStart.copy(this._rotateEnd),this.update()}_handleMouseMoveDolly(e){this._dollyEnd.set(e.clientX,e.clientY),this._dollyDelta.subVectors(this._dollyEnd,this._dollyStart),this._dollyDelta.y>0?this._dollyOut(this._getZoomScale(this._dollyDelta.y)):this._dollyDelta.y<0&&this._dollyIn(this._getZoomScale(this._dollyDelta.y)),this._dollyStart.copy(this._dollyEnd),this.update()}_handleMouseMovePan(e){this._panEnd.set(e.clientX,e.clientY),this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd),this.update()}_handleMouseWheel(e){this._updateZoomParameters(e.clientX,e.clientY),e.deltaY<0?this._dollyIn(this._getZoomScale(e.deltaY)):e.deltaY>0&&this._dollyOut(this._getZoomScale(e.deltaY)),this.update()}_handleKeyDown(e){let t=!1;switch(e.code){case this.keys.UP:e.ctrlKey||e.metaKey||e.shiftKey?this._rotateUp(dn*this.rotateSpeed/this.domElement.clientHeight):this._pan(0,this.keyPanSpeed),t=!0;break;case this.keys.BOTTOM:e.ctrlKey||e.metaKey||e.shiftKey?this._rotateUp(-dn*this.rotateSpeed/this.domElement.clientHeight):this._pan(0,-this.keyPanSpeed),t=!0;break;case this.keys.LEFT:e.ctrlKey||e.metaKey||e.shiftKey?this._rotateLeft(dn*this.rotateSpeed/this.domElement.clientHeight):this._pan(this.keyPanSpeed,0),t=!0;break;case this.keys.RIGHT:e.ctrlKey||e.metaKey||e.shiftKey?this._rotateLeft(-dn*this.rotateSpeed/this.domElement.clientHeight):this._pan(-this.keyPanSpeed,0),t=!0;break}t&&(e.preventDefault(),this.update())}_handleTouchStartRotate(e){if(this._pointers.length===1)this._rotateStart.set(e.pageX,e.pageY);else{const t=this._getSecondPointerPosition(e),n=.5*(e.pageX+t.x),i=.5*(e.pageY+t.y);this._rotateStart.set(n,i)}}_handleTouchStartPan(e){if(this._pointers.length===1)this._panStart.set(e.pageX,e.pageY);else{const t=this._getSecondPointerPosition(e),n=.5*(e.pageX+t.x),i=.5*(e.pageY+t.y);this._panStart.set(n,i)}}_handleTouchStartDolly(e){const t=this._getSecondPointerPosition(e),n=e.pageX-t.x,i=e.pageY-t.y,s=Math.sqrt(n*n+i*i);this._dollyStart.set(0,s)}_handleTouchStartDollyPan(e){this.enableZoom&&this._handleTouchStartDolly(e),this.enablePan&&this._handleTouchStartPan(e)}_handleTouchStartDollyRotate(e){this.enableZoom&&this._handleTouchStartDolly(e),this.enableRotate&&this._handleTouchStartRotate(e)}_handleTouchMoveRotate(e){if(this._pointers.length==1)this._rotateEnd.set(e.pageX,e.pageY);else{const n=this._getSecondPointerPosition(e),i=.5*(e.pageX+n.x),s=.5*(e.pageY+n.y);this._rotateEnd.set(i,s)}this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);const t=this.domElement;this._rotateLeft(dn*this._rotateDelta.x/t.clientHeight),this._rotateUp(dn*this._rotateDelta.y/t.clientHeight),this._rotateStart.copy(this._rotateEnd)}_handleTouchMovePan(e){if(this._pointers.length===1)this._panEnd.set(e.pageX,e.pageY);else{const t=this._getSecondPointerPosition(e),n=.5*(e.pageX+t.x),i=.5*(e.pageY+t.y);this._panEnd.set(n,i)}this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd)}_handleTouchMoveDolly(e){const t=this._getSecondPointerPosition(e),n=e.pageX-t.x,i=e.pageY-t.y,s=Math.sqrt(n*n+i*i);this._dollyEnd.set(0,s),this._dollyDelta.set(0,Math.pow(this._dollyEnd.y/this._dollyStart.y,this.zoomSpeed)),this._dollyOut(this._dollyDelta.y),this._dollyStart.copy(this._dollyEnd);const a=(e.pageX+t.x)*.5,o=(e.pageY+t.y)*.5;this._updateZoomParameters(a,o)}_handleTouchMoveDollyPan(e){this.enableZoom&&this._handleTouchMoveDolly(e),this.enablePan&&this._handleTouchMovePan(e)}_handleTouchMoveDollyRotate(e){this.enableZoom&&this._handleTouchMoveDolly(e),this.enableRotate&&this._handleTouchMoveRotate(e)}_addPointer(e){this._pointers.push(e.pointerId)}_removePointer(e){delete this._pointerPositions[e.pointerId];for(let t=0;t<this._pointers.length;t++)if(this._pointers[t]==e.pointerId){this._pointers.splice(t,1);return}}_isTrackingPointer(e){for(let t=0;t<this._pointers.length;t++)if(this._pointers[t]==e.pointerId)return!0;return!1}_trackPointer(e){let t=this._pointerPositions[e.pointerId];t===void 0&&(t=new G,this._pointerPositions[e.pointerId]=t),t.set(e.pageX,e.pageY)}_getSecondPointerPosition(e){const t=e.pointerId===this._pointers[0]?this._pointers[1]:this._pointers[0];return this._pointerPositions[t]}_customWheelEvent(e){const t=e.deltaMode,n={clientX:e.clientX,clientY:e.clientY,deltaY:e.deltaY};switch(t){case 1:n.deltaY*=16;break;case 2:n.deltaY*=100;break}return e.ctrlKey&&!this._controlActive&&(n.deltaY*=10),n}}function m7(r){this.enabled!==!1&&(this._pointers.length===0&&(this.domElement.setPointerCapture(r.pointerId),this.domElement.addEventListener("pointermove",this._onPointerMove),this.domElement.addEventListener("pointerup",this._onPointerUp)),!this._isTrackingPointer(r)&&(this._addPointer(r),r.pointerType==="touch"?this._onTouchStart(r):this._onMouseDown(r)))}function g7(r){this.enabled!==!1&&(r.pointerType==="touch"?this._onTouchMove(r):this._onMouseMove(r))}function _7(r){switch(this._removePointer(r),this._pointers.length){case 0:this.domElement.releasePointerCapture(r.pointerId),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.dispatchEvent(Km),this.state=at.NONE;break;case 1:const e=this._pointers[0],t=this._pointerPositions[e];this._onTouchStart({pointerId:e,pageX:t.x,pageY:t.y});break}}function x7(r){let e;switch(r.button){case 0:e=this.mouseButtons.LEFT;break;case 1:e=this.mouseButtons.MIDDLE;break;case 2:e=this.mouseButtons.RIGHT;break;default:e=-1}switch(e){case Xs.DOLLY:if(this.enableZoom===!1)return;this._handleMouseDownDolly(r),this.state=at.DOLLY;break;case Xs.ROTATE:if(r.ctrlKey||r.metaKey||r.shiftKey){if(this.enablePan===!1)return;this._handleMouseDownPan(r),this.state=at.PAN}else{if(this.enableRotate===!1)return;this._handleMouseDownRotate(r),this.state=at.ROTATE}break;case Xs.PAN:if(r.ctrlKey||r.metaKey||r.shiftKey){if(this.enableRotate===!1)return;this._handleMouseDownRotate(r),this.state=at.ROTATE}else{if(this.enablePan===!1)return;this._handleMouseDownPan(r),this.state=at.PAN}break;default:this.state=at.NONE}this.state!==at.NONE&&this.dispatchEvent(dd)}function y7(r){switch(this.state){case at.ROTATE:if(this.enableRotate===!1)return;this._handleMouseMoveRotate(r);break;case at.DOLLY:if(this.enableZoom===!1)return;this._handleMouseMoveDolly(r);break;case at.PAN:if(this.enablePan===!1)return;this._handleMouseMovePan(r);break}}function v7(r){this.enabled===!1||this.enableZoom===!1||this.state!==at.NONE||(r.preventDefault(),this.dispatchEvent(dd),this._handleMouseWheel(this._customWheelEvent(r)),this.dispatchEvent(Km))}function M7(r){this.enabled===!1||this.enablePan===!1||this._handleKeyDown(r)}function S7(r){switch(this._trackPointer(r),this._pointers.length){case 1:switch(this.touches.ONE){case Os.ROTATE:if(this.enableRotate===!1)return;this._handleTouchStartRotate(r),this.state=at.TOUCH_ROTATE;break;case Os.PAN:if(this.enablePan===!1)return;this._handleTouchStartPan(r),this.state=at.TOUCH_PAN;break;default:this.state=at.NONE}break;case 2:switch(this.touches.TWO){case Os.DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this._handleTouchStartDollyPan(r),this.state=at.TOUCH_DOLLY_PAN;break;case Os.DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this._handleTouchStartDollyRotate(r),this.state=at.TOUCH_DOLLY_ROTATE;break;default:this.state=at.NONE}break;default:this.state=at.NONE}this.state!==at.NONE&&this.dispatchEvent(dd)}function b7(r){switch(this._trackPointer(r),this.state){case at.TOUCH_ROTATE:if(this.enableRotate===!1)return;this._handleTouchMoveRotate(r),this.update();break;case at.TOUCH_PAN:if(this.enablePan===!1)return;this._handleTouchMovePan(r),this.update();break;case at.TOUCH_DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this._handleTouchMoveDollyPan(r),this.update();break;case at.TOUCH_DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this._handleTouchMoveDollyRotate(r),this.update();break;default:this.state=at.NONE}}function T7(r){this.enabled!==!1&&r.preventDefault()}function A7(r){r.key==="Control"&&(this._controlActive=!0,this.domElement.getRootNode().addEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}function w7(r){r.key==="Control"&&(this._controlActive=!1,this.domElement.getRootNode().removeEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}function M1(r,e){if(e===D0)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),r;if(e===Pc||e===Nf){let t=r.getIndex();if(t===null){const a=[],o=r.getAttribute("position");if(o!==void 0){for(let l=0;l<o.count;l++)a.push(l);r.setIndex(a),t=r.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),r}const n=t.count-2,i=[];if(e===Pc)for(let a=1;a<=n;a++)i.push(t.getX(0)),i.push(t.getX(a)),i.push(t.getX(a+1));else for(let a=0;a<n;a++)a%2===0?(i.push(t.getX(a)),i.push(t.getX(a+1)),i.push(t.getX(a+2))):(i.push(t.getX(a+2)),i.push(t.getX(a+1)),i.push(t.getX(a)));i.length/3!==n&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=r.clone();return s.setIndex(i),s.clearGroups(),s}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),r}class E7 extends an{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new q7(t)}),this.register(function(t){return new L7(t)}),this.register(function(t){return new H7(t)}),this.register(function(t){return new V7(t)}),this.register(function(t){return new G7(t)}),this.register(function(t){return new N7(t)}),this.register(function(t){return new U7(t)}),this.register(function(t){return new O7(t)}),this.register(function(t){return new F7(t)}),this.register(function(t){return new I7(t)}),this.register(function(t){return new B7(t)}),this.register(function(t){return new D7(t)}),this.register(function(t){return new k7(t)}),this.register(function(t){return new z7(t)}),this.register(function(t){return new C7(t)}),this.register(function(t){return new W7(t)}),this.register(function(t){return new X7(t)})}load(e,t,n,i){const s=this;let a;if(this.resourcePath!=="")a=this.resourcePath;else if(this.path!==""){const c=is.extractUrlBase(e);a=is.resolveURL(c,this.path)}else a=is.extractUrlBase(e);this.manager.itemStart(e);const o=function(c){i?i(c):console.error(c),s.manager.itemError(e),s.manager.itemEnd(e)},l=new Gn(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(c){try{s.parse(c,a,function(h){t(h),s.manager.itemEnd(e)},o)}catch(h){o(h)}},n,o)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,n,i){let s;const a={},o={},l=new TextDecoder;if(typeof e=="string")s=JSON.parse(e);else if(e instanceof ArrayBuffer)if(l.decode(new Uint8Array(e,0,4))===Zm){try{a[We.KHR_BINARY_GLTF]=new Y7(e)}catch(u){i&&i(u);return}s=JSON.parse(a[We.KHR_BINARY_GLTF].content)}else s=JSON.parse(l.decode(e));else s=e;if(s.asset===void 0||s.asset.version[0]<2){i&&i(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const c=new ay(s,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});c.fileLoader.setRequestHeader(this.requestHeader);for(let h=0;h<this.pluginCallbacks.length;h++){const u=this.pluginCallbacks[h](c);u.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),o[u.name]=u,a[u.name]=!0}if(s.extensionsUsed)for(let h=0;h<s.extensionsUsed.length;++h){const u=s.extensionsUsed[h],f=s.extensionsRequired||[];switch(u){case We.KHR_MATERIALS_UNLIT:a[u]=new P7;break;case We.KHR_DRACO_MESH_COMPRESSION:a[u]=new K7(s,this.dracoLoader);break;case We.KHR_TEXTURE_TRANSFORM:a[u]=new Z7;break;case We.KHR_MESH_QUANTIZATION:a[u]=new $7;break;default:f.indexOf(u)>=0&&o[u]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+u+'".')}}c.setExtensions(a),c.setPlugins(o),c.parse(n,i)}parseAsync(e,t){const n=this;return new Promise(function(i,s){n.parse(e,t,i,s)})}}function R7(){let r={};return{get:function(e){return r[e]},add:function(e,t){r[e]=t},remove:function(e){delete r[e]},removeAll:function(){r={}}}}const We={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class C7{constructor(e){this.parser=e,this.name=We.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let n=0,i=t.length;n<i;n++){const s=t[n];s.extensions&&s.extensions[this.name]&&s.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const t=this.parser,n="light:"+e;let i=t.cache.get(n);if(i)return i;const s=t.json,l=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let c;const h=new ae(16777215);l.color!==void 0&&h.setRGB(l.color[0],l.color[1],l.color[2],Ht);const u=l.range!==void 0?l.range:0;switch(l.type){case"directional":c=new So(h),c.target.position.set(0,0,-1),c.add(c.target);break;case"point":c=new Th(h),c.distance=u;break;case"spot":c=new od(h),c.distance=u,l.spot=l.spot||{},l.spot.innerConeAngle=l.spot.innerConeAngle!==void 0?l.spot.innerConeAngle:0,l.spot.outerConeAngle=l.spot.outerConeAngle!==void 0?l.spot.outerConeAngle:Math.PI/4,c.angle=l.spot.outerConeAngle,c.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,c.target.position.set(0,0,-1),c.add(c.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return c.position.set(0,0,0),c.decay=2,wi(c,l),l.intensity!==void 0&&(c.intensity=l.intensity),c.name=t.createUniqueName(l.name||"light_"+e),i=Promise.resolve(c),t.cache.add(n,i),i}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){const t=this,n=this.parser,s=n.json.nodes[e],o=(s.extensions&&s.extensions[this.name]||{}).light;return o===void 0?null:this._loadLight(o).then(function(l){return n._getNodeRef(t.cache,o,l)})}}class P7{constructor(){this.name=We.KHR_MATERIALS_UNLIT}getMaterialType(){return Yt}extendParams(e,t,n){const i=[];e.color=new ae(1,1,1),e.opacity=1;const s=t.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const a=s.baseColorFactor;e.color.setRGB(a[0],a[1],a[2],Ht),e.opacity=a[3]}s.baseColorTexture!==void 0&&i.push(n.assignTexture(e,"map",s.baseColorTexture,Xt))}return Promise.all(i)}}class I7{constructor(e){this.parser=e,this.name=We.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=i.extensions[this.name].emissiveStrength;return s!==void 0&&(t.emissiveIntensity=s),Promise.resolve()}}class q7{constructor(e){this.parser=e,this.name=We.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Xn}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],a=i.extensions[this.name];if(a.clearcoatFactor!==void 0&&(t.clearcoat=a.clearcoatFactor),a.clearcoatTexture!==void 0&&s.push(n.assignTexture(t,"clearcoatMap",a.clearcoatTexture)),a.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=a.clearcoatRoughnessFactor),a.clearcoatRoughnessTexture!==void 0&&s.push(n.assignTexture(t,"clearcoatRoughnessMap",a.clearcoatRoughnessTexture)),a.clearcoatNormalTexture!==void 0&&(s.push(n.assignTexture(t,"clearcoatNormalMap",a.clearcoatNormalTexture)),a.clearcoatNormalTexture.scale!==void 0)){const o=a.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new G(o,o)}return Promise.all(s)}}class L7{constructor(e){this.parser=e,this.name=We.KHR_MATERIALS_DISPERSION}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Xn}extendMaterialParams(e,t){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=i.extensions[this.name];return t.dispersion=s.dispersion!==void 0?s.dispersion:0,Promise.resolve()}}class D7{constructor(e){this.parser=e,this.name=We.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Xn}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],a=i.extensions[this.name];return a.iridescenceFactor!==void 0&&(t.iridescence=a.iridescenceFactor),a.iridescenceTexture!==void 0&&s.push(n.assignTexture(t,"iridescenceMap",a.iridescenceTexture)),a.iridescenceIor!==void 0&&(t.iridescenceIOR=a.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),a.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=a.iridescenceThicknessMinimum),a.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=a.iridescenceThicknessMaximum),a.iridescenceThicknessTexture!==void 0&&s.push(n.assignTexture(t,"iridescenceThicknessMap",a.iridescenceThicknessTexture)),Promise.all(s)}}class N7{constructor(e){this.parser=e,this.name=We.KHR_MATERIALS_SHEEN}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Xn}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[];t.sheenColor=new ae(0,0,0),t.sheenRoughness=0,t.sheen=1;const a=i.extensions[this.name];if(a.sheenColorFactor!==void 0){const o=a.sheenColorFactor;t.sheenColor.setRGB(o[0],o[1],o[2],Ht)}return a.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=a.sheenRoughnessFactor),a.sheenColorTexture!==void 0&&s.push(n.assignTexture(t,"sheenColorMap",a.sheenColorTexture,Xt)),a.sheenRoughnessTexture!==void 0&&s.push(n.assignTexture(t,"sheenRoughnessMap",a.sheenRoughnessTexture)),Promise.all(s)}}class U7{constructor(e){this.parser=e,this.name=We.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Xn}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],a=i.extensions[this.name];return a.transmissionFactor!==void 0&&(t.transmission=a.transmissionFactor),a.transmissionTexture!==void 0&&s.push(n.assignTexture(t,"transmissionMap",a.transmissionTexture)),Promise.all(s)}}class O7{constructor(e){this.parser=e,this.name=We.KHR_MATERIALS_VOLUME}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Xn}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],a=i.extensions[this.name];t.thickness=a.thicknessFactor!==void 0?a.thicknessFactor:0,a.thicknessTexture!==void 0&&s.push(n.assignTexture(t,"thicknessMap",a.thicknessTexture)),t.attenuationDistance=a.attenuationDistance||1/0;const o=a.attenuationColor||[1,1,1];return t.attenuationColor=new ae().setRGB(o[0],o[1],o[2],Ht),Promise.all(s)}}class F7{constructor(e){this.parser=e,this.name=We.KHR_MATERIALS_IOR}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Xn}extendMaterialParams(e,t){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=i.extensions[this.name];return t.ior=s.ior!==void 0?s.ior:1.5,Promise.resolve()}}class B7{constructor(e){this.parser=e,this.name=We.KHR_MATERIALS_SPECULAR}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Xn}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],a=i.extensions[this.name];t.specularIntensity=a.specularFactor!==void 0?a.specularFactor:1,a.specularTexture!==void 0&&s.push(n.assignTexture(t,"specularIntensityMap",a.specularTexture));const o=a.specularColorFactor||[1,1,1];return t.specularColor=new ae().setRGB(o[0],o[1],o[2],Ht),a.specularColorTexture!==void 0&&s.push(n.assignTexture(t,"specularColorMap",a.specularColorTexture,Xt)),Promise.all(s)}}class z7{constructor(e){this.parser=e,this.name=We.EXT_MATERIALS_BUMP}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Xn}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],a=i.extensions[this.name];return t.bumpScale=a.bumpFactor!==void 0?a.bumpFactor:1,a.bumpTexture!==void 0&&s.push(n.assignTexture(t,"bumpMap",a.bumpTexture)),Promise.all(s)}}class k7{constructor(e){this.parser=e,this.name=We.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Xn}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],a=i.extensions[this.name];return a.anisotropyStrength!==void 0&&(t.anisotropy=a.anisotropyStrength),a.anisotropyRotation!==void 0&&(t.anisotropyRotation=a.anisotropyRotation),a.anisotropyTexture!==void 0&&s.push(n.assignTexture(t,"anisotropyMap",a.anisotropyTexture)),Promise.all(s)}}class H7{constructor(e){this.parser=e,this.name=We.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,n=t.json,i=n.textures[e];if(!i.extensions||!i.extensions[this.name])return null;const s=i.extensions[this.name],a=t.options.ktx2Loader;if(!a){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,s.source,a)}}class V7{constructor(e){this.parser=e,this.name=We.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,i=n.json,s=i.textures[e];if(!s.extensions||!s.extensions[t])return null;const a=s.extensions[t],o=i.images[a.source];let l=n.textureLoader;if(o.uri){const c=n.options.manager.getHandler(o.uri);c!==null&&(l=c)}return this.detectSupport().then(function(c){if(c)return n.loadTextureImage(e,a.source,l);if(i.extensionsRequired&&i.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class G7{constructor(e){this.parser=e,this.name=We.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,i=n.json,s=i.textures[e];if(!s.extensions||!s.extensions[t])return null;const a=s.extensions[t],o=i.images[a.source];let l=n.textureLoader;if(o.uri){const c=n.options.manager.getHandler(o.uri);c!==null&&(l=c)}return this.detectSupport().then(function(c){if(c)return n.loadTextureImage(e,a.source,l);if(i.extensionsRequired&&i.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return n.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class W7{constructor(e){this.name=We.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,n=t.bufferViews[e];if(n.extensions&&n.extensions[this.name]){const i=n.extensions[this.name],s=this.parser.getDependency("buffer",i.buffer),a=this.parser.options.meshoptDecoder;if(!a||!a.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then(function(o){const l=i.byteOffset||0,c=i.byteLength||0,h=i.count,u=i.byteStride,f=new Uint8Array(o,l,c);return a.decodeGltfBufferAsync?a.decodeGltfBufferAsync(h,u,f,i.mode,i.filter).then(function(d){return d.buffer}):a.ready.then(function(){const d=new ArrayBuffer(h*u);return a.decodeGltfBuffer(new Uint8Array(d),h,u,f,i.mode,i.filter),d})})}else return null}}class X7{constructor(e){this.name=We.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,n=t.nodes[e];if(!n.extensions||!n.extensions[this.name]||n.mesh===void 0)return null;const i=t.meshes[n.mesh];for(const c of i.primitives)if(c.mode!==Bn.TRIANGLES&&c.mode!==Bn.TRIANGLE_STRIP&&c.mode!==Bn.TRIANGLE_FAN&&c.mode!==void 0)return null;const a=n.extensions[this.name].attributes,o=[],l={};for(const c in a)o.push(this.parser.getDependency("accessor",a[c]).then(h=>(l[c]=h,l[c])));return o.length<1?null:(o.push(this.parser.createNodeMesh(e)),Promise.all(o).then(c=>{const h=c.pop(),u=h.isGroup?h.children:[h],f=c[0].count,d=[];for(const m of u){const g=new Ee,p=new R,_=new wt,y=new R(1,1,1),x=new Kf(m.geometry,m.material,f);for(let v=0;v<f;v++)l.TRANSLATION&&p.fromBufferAttribute(l.TRANSLATION,v),l.ROTATION&&_.fromBufferAttribute(l.ROTATION,v),l.SCALE&&y.fromBufferAttribute(l.SCALE,v),x.setMatrixAt(v,g.compose(p,_,y));for(const v in l)if(v==="_COLOR_0"){const w=l[v];x.instanceColor=new ir(w.array,w.itemSize,w.normalized)}else v!=="TRANSLATION"&&v!=="ROTATION"&&v!=="SCALE"&&m.geometry.setAttribute(v,l[v]);Xe.prototype.copy.call(x,m),this.parser.assignFinalMaterial(x),d.push(x)}return h.isGroup?(h.clear(),h.add(...d),h):d[0]}))}}const Zm="glTF",Na=12,S1={JSON:1313821514,BIN:5130562};class Y7{constructor(e){this.name=We.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,Na),n=new TextDecoder;if(this.header={magic:n.decode(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==Zm)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const i=this.header.length-Na,s=new DataView(e,Na);let a=0;for(;a<i;){const o=s.getUint32(a,!0);a+=4;const l=s.getUint32(a,!0);if(a+=4,l===S1.JSON){const c=new Uint8Array(e,Na+a,o);this.content=n.decode(c)}else if(l===S1.BIN){const c=Na+a;this.body=e.slice(c,c+o)}a+=o}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class K7{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=We.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const n=this.json,i=this.dracoLoader,s=e.extensions[this.name].bufferView,a=e.extensions[this.name].attributes,o={},l={},c={};for(const h in a){const u=$u[h]||h.toLowerCase();o[u]=a[h]}for(const h in e.attributes){const u=$u[h]||h.toLowerCase();if(a[h]!==void 0){const f=n.accessors[e.attributes[h]],d=$r[f.componentType];c[u]=d.name,l[u]=f.normalized===!0}}return t.getDependency("bufferView",s).then(function(h){return new Promise(function(u,f){i.decodeDracoFile(h,function(d){for(const m in d.attributes){const g=d.attributes[m],p=l[m];p!==void 0&&(g.normalized=p)}u(d)},o,c,Ht,f)})})}}class Z7{constructor(){this.name=We.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(t.texCoord===void 0||t.texCoord===e.channel)&&t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.texCoord!==void 0&&(e.channel=t.texCoord),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class $7{constructor(){this.name=We.KHR_MESH_QUANTIZATION}}class $m extends va{constructor(e,t,n,i){super(e,t,n,i)}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,i=this.valueSize,s=e*i*3+i;for(let a=0;a!==i;a++)t[a]=n[s+a];return t}interpolate_(e,t,n,i){const s=this.resultBuffer,a=this.sampleValues,o=this.valueSize,l=o*2,c=o*3,h=i-t,u=(n-t)/h,f=u*u,d=f*u,m=e*c,g=m-c,p=-2*d+3*f,_=d-f,y=1-p,x=_-f+u;for(let v=0;v!==o;v++){const w=a[g+v+o],b=a[g+v+l]*h,A=a[m+v+o],C=a[m+v]*h;s[v]=y*w+x*b+p*A+_*C}return s}}const J7=new wt;class j7 extends $m{interpolate_(e,t,n,i){const s=super.interpolate_(e,t,n,i);return J7.fromArray(s).normalize().toArray(s),s}}const Bn={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},$r={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},b1={9728:Nt,9729:St,9984:Xc,9985:Yr,9986:Fs,9987:kn},T1={33071:Pn,33648:ea,10497:ls},Mu={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},$u={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Zi={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},Q7={CUBICSPLINE:void 0,LINEAR:ia,STEP:na},Su={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function ey(r){return r.DefaultMaterial===void 0&&(r.DefaultMaterial=new Go({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:mi})),r.DefaultMaterial}function Cs(r,e,t){for(const n in t.extensions)r[n]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[n]=t.extensions[n])}function wi(r,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(r.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function ty(r,e,t){let n=!1,i=!1,s=!1;for(let c=0,h=e.length;c<h;c++){const u=e[c];if(u.POSITION!==void 0&&(n=!0),u.NORMAL!==void 0&&(i=!0),u.COLOR_0!==void 0&&(s=!0),n&&i&&s)break}if(!n&&!i&&!s)return Promise.resolve(r);const a=[],o=[],l=[];for(let c=0,h=e.length;c<h;c++){const u=e[c];if(n){const f=u.POSITION!==void 0?t.getDependency("accessor",u.POSITION):r.attributes.position;a.push(f)}if(i){const f=u.NORMAL!==void 0?t.getDependency("accessor",u.NORMAL):r.attributes.normal;o.push(f)}if(s){const f=u.COLOR_0!==void 0?t.getDependency("accessor",u.COLOR_0):r.attributes.color;l.push(f)}}return Promise.all([Promise.all(a),Promise.all(o),Promise.all(l)]).then(function(c){const h=c[0],u=c[1],f=c[2];return n&&(r.morphAttributes.position=h),i&&(r.morphAttributes.normal=u),s&&(r.morphAttributes.color=f),r.morphTargetsRelative=!0,r})}function ny(r,e){if(r.updateMorphTargets(),e.weights!==void 0)for(let t=0,n=e.weights.length;t<n;t++)r.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(r.morphTargetInfluences.length===t.length){r.morphTargetDictionary={};for(let n=0,i=t.length;n<i;n++)r.morphTargetDictionary[t[n]]=n}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function iy(r){let e;const t=r.extensions&&r.extensions[We.KHR_DRACO_MESH_COMPRESSION];if(t?e="draco:"+t.bufferView+":"+t.indices+":"+bu(t.attributes):e=r.indices+":"+bu(r.attributes)+":"+r.mode,r.targets!==void 0)for(let n=0,i=r.targets.length;n<i;n++)e+=":"+bu(r.targets[n]);return e}function bu(r){let e="";const t=Object.keys(r).sort();for(let n=0,i=t.length;n<i;n++)e+=t[n]+":"+r[t[n]]+";";return e}function Ju(r){switch(r){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function sy(r){return r.search(/\.jpe?g($|\?)/i)>0||r.search(/^data\:image\/jpeg/)===0?"image/jpeg":r.search(/\.webp($|\?)/i)>0||r.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const ry=new Ee;class ay{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new R7,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let n=!1,i=-1,s=!1,a=-1;if(typeof navigator<"u"){const o=navigator.userAgent;n=/^((?!chrome|android).)*safari/i.test(o)===!0;const l=o.match(/Version\/(\d+)/);i=n&&l?parseInt(l[1],10):-1,s=o.indexOf("Firefox")>-1,a=s?o.match(/Firefox\/([0-9]+)\./)[1]:-1}typeof createImageBitmap>"u"||n&&i<17||s&&a<98?this.textureLoader=new rd(this.options.manager):this.textureLoader=new zm(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Gn(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const n=this,i=this.json,s=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(a){return a._markDefs&&a._markDefs()}),Promise.all(this._invokeAll(function(a){return a.beforeRoot&&a.beforeRoot()})).then(function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])}).then(function(a){const o={scene:a[0][i.scene||0],scenes:a[0],animations:a[1],cameras:a[2],asset:i.asset,parser:n,userData:{}};return Cs(s,o,i),wi(o,i),Promise.all(n._invokeAll(function(l){return l.afterRoot&&l.afterRoot(o)})).then(function(){for(const l of o.scenes)l.updateMatrixWorld();e(o)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[];for(let i=0,s=t.length;i<s;i++){const a=t[i].joints;for(let o=0,l=a.length;o<l;o++)e[a[o]].isBone=!0}for(let i=0,s=e.length;i<s;i++){const a=e[i];a.mesh!==void 0&&(this._addNodeRef(this.meshCache,a.mesh),a.skin!==void 0&&(n[a.mesh].isSkinnedMesh=!0)),a.camera!==void 0&&this._addNodeRef(this.cameraCache,a.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,n){if(e.refs[t]<=1)return n;const i=n.clone(),s=(a,o)=>{const l=this.associations.get(a);l!=null&&this.associations.set(o,l);for(const[c,h]of a.children.entries())s(h,o.children[c])};return s(n,i),i.name+="_instance_"+e.uses[t]++,i}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let n=0;n<t.length;n++){const i=e(t[n]);if(i)return i}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const n=[];for(let i=0;i<t.length;i++){const s=e(t[i]);s&&n.push(s)}return n}getDependency(e,t){const n=e+":"+t;let i=this.cache.get(n);if(!i){switch(e){case"scene":i=this.loadScene(t);break;case"node":i=this._invokeOne(function(s){return s.loadNode&&s.loadNode(t)});break;case"mesh":i=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(t)});break;case"accessor":i=this.loadAccessor(t);break;case"bufferView":i=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(t)});break;case"buffer":i=this.loadBuffer(t);break;case"material":i=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(t)});break;case"texture":i=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(t)});break;case"skin":i=this.loadSkin(t);break;case"animation":i=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(t)});break;case"camera":i=this.loadCamera(t);break;default:if(i=this._invokeOne(function(s){return s!=this&&s.getDependency&&s.getDependency(e,t)}),!i)throw new Error("Unknown type: "+e);break}this.cache.add(n,i)}return i}getDependencies(e){let t=this.cache.get(e);if(!t){const n=this,i=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(i.map(function(s,a){return n.getDependency(e,a)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],n=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[We.KHR_BINARY_GLTF].body);const i=this.options;return new Promise(function(s,a){n.load(is.resolveURL(t.uri,i.path),s,void 0,function(){a(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(n){const i=t.byteLength||0,s=t.byteOffset||0;return n.slice(s,s+i)})}loadAccessor(e){const t=this,n=this.json,i=this.json.accessors[e];if(i.bufferView===void 0&&i.sparse===void 0){const a=Mu[i.type],o=$r[i.componentType],l=i.normalized===!0,c=new o(i.count*a);return Promise.resolve(new Qe(c,a,l))}const s=[];return i.bufferView!==void 0?s.push(this.getDependency("bufferView",i.bufferView)):s.push(null),i.sparse!==void 0&&(s.push(this.getDependency("bufferView",i.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",i.sparse.values.bufferView))),Promise.all(s).then(function(a){const o=a[0],l=Mu[i.type],c=$r[i.componentType],h=c.BYTES_PER_ELEMENT,u=h*l,f=i.byteOffset||0,d=i.bufferView!==void 0?n.bufferViews[i.bufferView].byteStride:void 0,m=i.normalized===!0;let g,p;if(d&&d!==u){const _=Math.floor(f/d),y="InterleavedBuffer:"+i.bufferView+":"+i.componentType+":"+_+":"+i.count;let x=t.cache.get(y);x||(g=new c(o,_*d,i.count*d/h),x=new Oo(g,d/h),t.cache.add(y,x)),p=new cs(x,l,f%d/h,m)}else o===null?g=new c(i.count*l):g=new c(o,f,i.count*l),p=new Qe(g,l,m);if(i.sparse!==void 0){const _=Mu.SCALAR,y=$r[i.sparse.indices.componentType],x=i.sparse.indices.byteOffset||0,v=i.sparse.values.byteOffset||0,w=new y(a[1],x,i.sparse.count*_),b=new c(a[2],v,i.sparse.count*l);o!==null&&(p=new Qe(p.array.slice(),p.itemSize,p.normalized));for(let A=0,C=w.length;A<C;A++){const M=w[A];if(p.setX(M,b[A*l]),l>=2&&p.setY(M,b[A*l+1]),l>=3&&p.setZ(M,b[A*l+2]),l>=4&&p.setW(M,b[A*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return p})}loadTexture(e){const t=this.json,n=this.options,s=t.textures[e].source,a=t.images[s];let o=this.textureLoader;if(a.uri){const l=n.manager.getHandler(a.uri);l!==null&&(o=l)}return this.loadTextureImage(e,s,o)}loadTextureImage(e,t,n){const i=this,s=this.json,a=s.textures[e],o=s.images[t],l=(o.uri||o.bufferView)+":"+a.sampler;if(this.textureCache[l])return this.textureCache[l];const c=this.loadImageSource(t,n).then(function(h){h.flipY=!1,h.name=a.name||o.name||"",h.name===""&&typeof o.uri=="string"&&o.uri.startsWith("data:image/")===!1&&(h.name=o.uri);const f=(s.samplers||{})[a.sampler]||{};return h.magFilter=b1[f.magFilter]||St,h.minFilter=b1[f.minFilter]||kn,h.wrapS=T1[f.wrapS]||ls,h.wrapT=T1[f.wrapT]||ls,i.associations.set(h,{textures:e}),h}).catch(function(){return null});return this.textureCache[l]=c,c}loadImageSource(e,t){const n=this,i=this.json,s=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(u=>u.clone());const a=i.images[e],o=self.URL||self.webkitURL;let l=a.uri||"",c=!1;if(a.bufferView!==void 0)l=n.getDependency("bufferView",a.bufferView).then(function(u){c=!0;const f=new Blob([u],{type:a.mimeType});return l=o.createObjectURL(f),l});else if(a.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const h=Promise.resolve(l).then(function(u){return new Promise(function(f,d){let m=f;t.isImageBitmapLoader===!0&&(m=function(g){const p=new dt(g);p.needsUpdate=!0,f(p)}),t.load(is.resolveURL(u,s.path),m,void 0,d)})}).then(function(u){return c===!0&&o.revokeObjectURL(l),wi(u,a),u.userData.mimeType=a.mimeType||sy(a.uri),u}).catch(function(u){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),u});return this.sourceCache[e]=h,h}assignTexture(e,t,n,i){const s=this;return this.getDependency("texture",n.index).then(function(a){if(!a)return null;if(n.texCoord!==void 0&&n.texCoord>0&&(a=a.clone(),a.channel=n.texCoord),s.extensions[We.KHR_TEXTURE_TRANSFORM]){const o=n.extensions!==void 0?n.extensions[We.KHR_TEXTURE_TRANSFORM]:void 0;if(o){const l=s.associations.get(a);a=s.extensions[We.KHR_TEXTURE_TRANSFORM].extendTexture(a,o),s.associations.set(a,l)}}return i!==void 0&&(a.colorSpace=i),e[t]=a,a})}assignFinalMaterial(e){const t=e.geometry;let n=e.material;const i=t.attributes.tangent===void 0,s=t.attributes.color!==void 0,a=t.attributes.normal===void 0;if(e.isPoints){const o="PointsMaterial:"+n.uuid;let l=this.cache.get(o);l||(l=new Bo,Ut.prototype.copy.call(l,n),l.color.copy(n.color),l.map=n.map,l.sizeAttenuation=!1,this.cache.add(o,l)),n=l}else if(e.isLine){const o="LineBasicMaterial:"+n.uuid;let l=this.cache.get(o);l||(l=new rn,Ut.prototype.copy.call(l,n),l.color.copy(n.color),l.map=n.map,this.cache.add(o,l)),n=l}if(i||s||a){let o="ClonedMaterial:"+n.uuid+":";i&&(o+="derivative-tangents:"),s&&(o+="vertex-colors:"),a&&(o+="flat-shading:");let l=this.cache.get(o);l||(l=n.clone(),s&&(l.vertexColors=!0),a&&(l.flatShading=!0),i&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(o,l),this.associations.set(l,this.associations.get(n))),n=l}e.material=n}getMaterialType(){return Go}loadMaterial(e){const t=this,n=this.json,i=this.extensions,s=n.materials[e];let a;const o={},l=s.extensions||{},c=[];if(l[We.KHR_MATERIALS_UNLIT]){const u=i[We.KHR_MATERIALS_UNLIT];a=u.getMaterialType(),c.push(u.extendParams(o,s,t))}else{const u=s.pbrMetallicRoughness||{};if(o.color=new ae(1,1,1),o.opacity=1,Array.isArray(u.baseColorFactor)){const f=u.baseColorFactor;o.color.setRGB(f[0],f[1],f[2],Ht),o.opacity=f[3]}u.baseColorTexture!==void 0&&c.push(t.assignTexture(o,"map",u.baseColorTexture,Xt)),o.metalness=u.metallicFactor!==void 0?u.metallicFactor:1,o.roughness=u.roughnessFactor!==void 0?u.roughnessFactor:1,u.metallicRoughnessTexture!==void 0&&(c.push(t.assignTexture(o,"metalnessMap",u.metallicRoughnessTexture)),c.push(t.assignTexture(o,"roughnessMap",u.metallicRoughnessTexture))),a=this._invokeOne(function(f){return f.getMaterialType&&f.getMaterialType(e)}),c.push(Promise.all(this._invokeAll(function(f){return f.extendMaterialParams&&f.extendMaterialParams(e,o)})))}s.doubleSided===!0&&(o.side=zn);const h=s.alphaMode||Su.OPAQUE;if(h===Su.BLEND?(o.transparent=!0,o.depthWrite=!1):(o.transparent=!1,h===Su.MASK&&(o.alphaTest=s.alphaCutoff!==void 0?s.alphaCutoff:.5)),s.normalTexture!==void 0&&a!==Yt&&(c.push(t.assignTexture(o,"normalMap",s.normalTexture)),o.normalScale=new G(1,1),s.normalTexture.scale!==void 0)){const u=s.normalTexture.scale;o.normalScale.set(u,u)}if(s.occlusionTexture!==void 0&&a!==Yt&&(c.push(t.assignTexture(o,"aoMap",s.occlusionTexture)),s.occlusionTexture.strength!==void 0&&(o.aoMapIntensity=s.occlusionTexture.strength)),s.emissiveFactor!==void 0&&a!==Yt){const u=s.emissiveFactor;o.emissive=new ae().setRGB(u[0],u[1],u[2],Ht)}return s.emissiveTexture!==void 0&&a!==Yt&&c.push(t.assignTexture(o,"emissiveMap",s.emissiveTexture,Xt)),Promise.all(c).then(function(){const u=new a(o);return s.name&&(u.name=s.name),wi(u,s),t.associations.set(u,{materials:e}),s.extensions&&Cs(i,u,s),u})}createUniqueName(e){const t=Je.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,n=this.extensions,i=this.primitiveCache;function s(o){return n[We.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(o,t).then(function(l){return A1(l,o,t)})}const a=[];for(let o=0,l=e.length;o<l;o++){const c=e[o],h=iy(c),u=i[h];if(u)a.push(u.promise);else{let f;c.extensions&&c.extensions[We.KHR_DRACO_MESH_COMPRESSION]?f=s(c):f=A1(new Oe,c,t),i[h]={primitive:c,promise:f},a.push(f)}}return Promise.all(a)}loadMesh(e){const t=this,n=this.json,i=this.extensions,s=n.meshes[e],a=s.primitives,o=[];for(let l=0,c=a.length;l<c;l++){const h=a[l].material===void 0?ey(this.cache):this.getDependency("material",a[l].material);o.push(h)}return o.push(t.loadGeometries(a)),Promise.all(o).then(function(l){const c=l.slice(0,l.length-1),h=l[l.length-1],u=[];for(let d=0,m=h.length;d<m;d++){const g=h[d],p=a[d];let _;const y=c[d];if(p.mode===Bn.TRIANGLES||p.mode===Bn.TRIANGLE_STRIP||p.mode===Bn.TRIANGLE_FAN||p.mode===void 0)_=s.isSkinnedMesh===!0?new Yf(g,y):new ct(g,y),_.isSkinnedMesh===!0&&_.normalizeSkinWeights(),p.mode===Bn.TRIANGLE_STRIP?_.geometry=M1(_.geometry,Nf):p.mode===Bn.TRIANGLE_FAN&&(_.geometry=M1(_.geometry,Pc));else if(p.mode===Bn.LINES)_=new ei(g,y);else if(p.mode===Bn.LINE_STRIP)_=new Oi(g,y);else if(p.mode===Bn.LINE_LOOP)_=new Zf(g,y);else if(p.mode===Bn.POINTS)_=new lh(g,y);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+p.mode);Object.keys(_.geometry.morphAttributes).length>0&&ny(_,s),_.name=t.createUniqueName(s.name||"mesh_"+e),wi(_,s),p.extensions&&Cs(i,_,p),t.assignFinalMaterial(_),u.push(_)}for(let d=0,m=u.length;d<m;d++)t.associations.set(u[d],{meshes:e,primitives:d});if(u.length===1)return s.extensions&&Cs(i,u[0],s),u[0];const f=new li;s.extensions&&Cs(i,f,s),t.associations.set(f,{meshes:e});for(let d=0,m=u.length;d<m;d++)f.add(u[d]);return f})}loadCamera(e){let t;const n=this.json.cameras[e],i=n[n.type];if(!i){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return n.type==="perspective"?t=new Lt(Ff.radToDeg(i.yfov),i.aspectRatio||1,i.znear||1,i.zfar||2e6):n.type==="orthographic"&&(t=new ga(-i.xmag,i.xmag,i.ymag,-i.ymag,i.znear,i.zfar)),n.name&&(t.name=this.createUniqueName(n.name)),wi(t,n),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],n=[];for(let i=0,s=t.joints.length;i<s;i++)n.push(this._loadNodeShallow(t.joints[i]));return t.inverseBindMatrices!==void 0?n.push(this.getDependency("accessor",t.inverseBindMatrices)):n.push(null),Promise.all(n).then(function(i){const s=i.pop(),a=i,o=[],l=[];for(let c=0,h=a.length;c<h;c++){const u=a[c];if(u){o.push(u);const f=new Ee;s!==null&&f.fromArray(s.array,c*16),l.push(f)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[c])}return new Fo(o,l)})}loadAnimation(e){const t=this.json,n=this,i=t.animations[e],s=i.name?i.name:"animation_"+e,a=[],o=[],l=[],c=[],h=[];for(let u=0,f=i.channels.length;u<f;u++){const d=i.channels[u],m=i.samplers[d.sampler],g=d.target,p=g.node,_=i.parameters!==void 0?i.parameters[m.input]:m.input,y=i.parameters!==void 0?i.parameters[m.output]:m.output;g.node!==void 0&&(a.push(this.getDependency("node",p)),o.push(this.getDependency("accessor",_)),l.push(this.getDependency("accessor",y)),c.push(m),h.push(g))}return Promise.all([Promise.all(a),Promise.all(o),Promise.all(l),Promise.all(c),Promise.all(h)]).then(function(u){const f=u[0],d=u[1],m=u[2],g=u[3],p=u[4],_=[];for(let y=0,x=f.length;y<x;y++){const v=f[y],w=d[y],b=m[y],A=g[y],C=p[y];if(v===void 0)continue;v.updateMatrix&&v.updateMatrix();const M=n._createAnimationTracks(v,w,b,A,C);if(M)for(let S=0;S<M.length;S++)_.push(M[S])}return new la(s,void 0,_)})}createNodeMesh(e){const t=this.json,n=this,i=t.nodes[e];return i.mesh===void 0?null:n.getDependency("mesh",i.mesh).then(function(s){const a=n._getNodeRef(n.meshCache,i.mesh,s);return i.weights!==void 0&&a.traverse(function(o){if(o.isMesh)for(let l=0,c=i.weights.length;l<c;l++)o.morphTargetInfluences[l]=i.weights[l]}),a})}loadNode(e){const t=this.json,n=this,i=t.nodes[e],s=n._loadNodeShallow(e),a=[],o=i.children||[];for(let c=0,h=o.length;c<h;c++)a.push(n.getDependency("node",o[c]));const l=i.skin===void 0?Promise.resolve(null):n.getDependency("skin",i.skin);return Promise.all([s,Promise.all(a),l]).then(function(c){const h=c[0],u=c[1],f=c[2];f!==null&&h.traverse(function(d){d.isSkinnedMesh&&d.bind(f,ry)});for(let d=0,m=u.length;d<m;d++)h.add(u[d]);return h})}_loadNodeShallow(e){const t=this.json,n=this.extensions,i=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const s=t.nodes[e],a=s.name?i.createUniqueName(s.name):"",o=[],l=i._invokeOne(function(c){return c.createNodeMesh&&c.createNodeMesh(e)});return l&&o.push(l),s.camera!==void 0&&o.push(i.getDependency("camera",s.camera).then(function(c){return i._getNodeRef(i.cameraCache,s.camera,c)})),i._invokeAll(function(c){return c.createNodeAttachment&&c.createNodeAttachment(e)}).forEach(function(c){o.push(c)}),this.nodeCache[e]=Promise.all(o).then(function(c){let h;if(s.isBone===!0?h=new oh:c.length>1?h=new li:c.length===1?h=c[0]:h=new Xe,h!==c[0])for(let u=0,f=c.length;u<f;u++)h.add(c[u]);if(s.name&&(h.userData.name=s.name,h.name=a),wi(h,s),s.extensions&&Cs(n,h,s),s.matrix!==void 0){const u=new Ee;u.fromArray(s.matrix),h.applyMatrix4(u)}else s.translation!==void 0&&h.position.fromArray(s.translation),s.rotation!==void 0&&h.quaternion.fromArray(s.rotation),s.scale!==void 0&&h.scale.fromArray(s.scale);return i.associations.has(h)||i.associations.set(h,{}),i.associations.get(h).nodes=e,h}),this.nodeCache[e]}loadScene(e){const t=this.extensions,n=this.json.scenes[e],i=this,s=new li;n.name&&(s.name=i.createUniqueName(n.name)),wi(s,n),n.extensions&&Cs(t,s,n);const a=n.nodes||[],o=[];for(let l=0,c=a.length;l<c;l++)o.push(i.getDependency("node",a[l]));return Promise.all(o).then(function(l){for(let h=0,u=l.length;h<u;h++)s.add(l[h]);const c=h=>{const u=new Map;for(const[f,d]of i.associations)(f instanceof Ut||f instanceof dt)&&u.set(f,d);return h.traverse(f=>{const d=i.associations.get(f);d!=null&&u.set(f,d)}),u};return i.associations=c(s),s})}_createAnimationTracks(e,t,n,i,s){const a=[],o=e.name?e.name:e.uuid,l=[];Zi[s.path]===Zi.weights?e.traverse(function(f){f.morphTargetInfluences&&l.push(f.name?f.name:f.uuid)}):l.push(o);let c;switch(Zi[s.path]){case Zi.weights:c=rr;break;case Zi.rotation:c=ar;break;case Zi.position:case Zi.scale:c=or;break;default:switch(n.itemSize){case 1:c=rr;break;case 2:case 3:default:c=or;break}break}const h=i.interpolation!==void 0?Q7[i.interpolation]:ia,u=this._getArrayFromAccessor(n);for(let f=0,d=l.length;f<d;f++){const m=new c(l[f]+"."+Zi[s.path],t.array,u,h);i.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(m),a.push(m)}return a}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){const n=Ju(t.constructor),i=new Float32Array(t.length);for(let s=0,a=t.length;s<a;s++)i[s]=t[s]*n;t=i}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(n){const i=this instanceof ar?j7:$m;return new i(this.times,this.values,this.getValueSize()/3,n)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function oy(r,e,t){const n=e.attributes,i=new tn;if(n.POSITION!==void 0){const o=t.json.accessors[n.POSITION],l=o.min,c=o.max;if(l!==void 0&&c!==void 0){if(i.set(new R(l[0],l[1],l[2]),new R(c[0],c[1],c[2])),o.normalized){const h=Ju($r[o.componentType]);i.min.multiplyScalar(h),i.max.multiplyScalar(h)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const s=e.targets;if(s!==void 0){const o=new R,l=new R;for(let c=0,h=s.length;c<h;c++){const u=s[c];if(u.POSITION!==void 0){const f=t.json.accessors[u.POSITION],d=f.min,m=f.max;if(d!==void 0&&m!==void 0){if(l.setX(Math.max(Math.abs(d[0]),Math.abs(m[0]))),l.setY(Math.max(Math.abs(d[1]),Math.abs(m[1]))),l.setZ(Math.max(Math.abs(d[2]),Math.abs(m[2]))),f.normalized){const g=Ju($r[f.componentType]);l.multiplyScalar(g)}o.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}i.expandByVector(o)}r.boundingBox=i;const a=new Kt;i.getCenter(a.center),a.radius=i.min.distanceTo(i.max)/2,r.boundingSphere=a}function A1(r,e,t){const n=e.attributes,i=[];function s(a,o){return t.getDependency("accessor",a).then(function(l){r.setAttribute(o,l)})}for(const a in n){const o=$u[a]||a.toLowerCase();o in r.attributes||i.push(s(n[a],o))}if(e.indices!==void 0&&!r.index){const a=t.getDependency("accessor",e.indices).then(function(o){r.setIndex(o)});i.push(a)}return Ye.workingColorSpace!==Ht&&"COLOR_0"in n&&console.warn(`THREE.GLTFLoader: Converting vertex colors from "srgb-linear" to "${Ye.workingColorSpace}" not supported.`),wi(r,e),oy(r,e,t),Promise.all(i).then(function(){return e.targets!==void 0?ty(r,e.targets,t):r})}const Jm={name:"CopyShader",uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform float opacity;

		uniform sampler2D tDiffuse;

		varying vec2 vUv;

		void main() {

			vec4 texel = texture2D( tDiffuse, vUv );
			gl_FragColor = opacity * texel;


		}`};class Ma{constructor(){this.isPass=!0,this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}dispose(){}}const ly=new ga(-1,1,1,-1,0,1);class cy extends Oe{constructor(){super(),this.setAttribute("position",new Se([-1,3,0,-1,-1,0,3,-1,0],3)),this.setAttribute("uv",new Se([0,2,0,0,2,0],2))}}const hy=new cy;class pd{constructor(e){this._mesh=new ct(hy,e)}dispose(){this._mesh.geometry.dispose()}render(e){e.render(this._mesh,ly)}get material(){return this._mesh.material}set material(e){this._mesh.material=e}}class jm extends Ma{constructor(e,t){super(),this.textureID=t!==void 0?t:"tDiffuse",e instanceof kt?(this.uniforms=e.uniforms,this.material=e):e&&(this.uniforms=aa.clone(e.uniforms),this.material=new kt({name:e.name!==void 0?e.name:"unspecified",defines:Object.assign({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this.fsQuad=new pd(this.material)}render(e,t,n){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=n.texture),this.fsQuad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this.fsQuad.render(e))}dispose(){this.material.dispose(),this.fsQuad.dispose()}}class w1 extends Ma{constructor(e,t){super(),this.scene=e,this.camera=t,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(e,t,n){const i=e.getContext(),s=e.state;s.buffers.color.setMask(!1),s.buffers.depth.setMask(!1),s.buffers.color.setLocked(!0),s.buffers.depth.setLocked(!0);let a,o;this.inverse?(a=0,o=1):(a=1,o=0),s.buffers.stencil.setTest(!0),s.buffers.stencil.setOp(i.REPLACE,i.REPLACE,i.REPLACE),s.buffers.stencil.setFunc(i.ALWAYS,a,4294967295),s.buffers.stencil.setClear(o),s.buffers.stencil.setLocked(!0),e.setRenderTarget(n),this.clear&&e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(t),this.clear&&e.clear(),e.render(this.scene,this.camera),s.buffers.color.setLocked(!1),s.buffers.depth.setLocked(!1),s.buffers.color.setMask(!0),s.buffers.depth.setMask(!0),s.buffers.stencil.setLocked(!1),s.buffers.stencil.setFunc(i.EQUAL,1,4294967295),s.buffers.stencil.setOp(i.KEEP,i.KEEP,i.KEEP),s.buffers.stencil.setLocked(!0)}}class uy extends Ma{constructor(){super(),this.needsSwap=!1}render(e){e.state.buffers.stencil.setLocked(!1),e.state.buffers.stencil.setTest(!1)}}class Qm{constructor(e,t){if(this.renderer=e,this._pixelRatio=e.getPixelRatio(),t===void 0){const n=e.getSize(new G);this._width=n.width,this._height=n.height,t=new fn(this._width*this._pixelRatio,this._height*this._pixelRatio,{type:ui}),t.texture.name="EffectComposer.rt1"}else this._width=t.width,this._height=t.height;this.renderTarget1=t,this.renderTarget2=t.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],this.copyPass=new jm(Jm),this.copyPass.material.blending=hi,this.clock=new wh}swapBuffers(){const e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e}addPass(e){this.passes.push(e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(e,t){this.passes.splice(t,0,e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(e){const t=this.passes.indexOf(e);t!==-1&&this.passes.splice(t,1)}isLastEnabledPass(e){for(let t=e+1;t<this.passes.length;t++)if(this.passes[t].enabled)return!1;return!0}render(e){e===void 0&&(e=this.clock.getDelta());const t=this.renderer.getRenderTarget();let n=!1;for(let i=0,s=this.passes.length;i<s;i++){const a=this.passes[i];if(a.enabled!==!1){if(a.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(i),a.render(this.renderer,this.writeBuffer,this.readBuffer,e,n),a.needsSwap){if(n){const o=this.renderer.getContext(),l=this.renderer.state.buffers.stencil;l.setFunc(o.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),l.setFunc(o.EQUAL,1,4294967295)}this.swapBuffers()}w1!==void 0&&(a instanceof w1?n=!0:a instanceof uy&&(n=!1))}}this.renderer.setRenderTarget(t)}reset(e){if(e===void 0){const t=this.renderer.getSize(new G);this._pixelRatio=this.renderer.getPixelRatio(),this._width=t.width,this._height=t.height,e=this.renderTarget1.clone(),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(e,t){this._width=e,this._height=t;const n=this._width*this._pixelRatio,i=this._height*this._pixelRatio;this.renderTarget1.setSize(n,i),this.renderTarget2.setSize(n,i);for(let s=0;s<this.passes.length;s++)this.passes[s].setSize(n,i)}setPixelRatio(e){this._pixelRatio=e,this.setSize(this._width,this._height)}dispose(){this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.copyPass.dispose()}}class e2 extends Ma{constructor(e,t,n=null,i=null,s=null){super(),this.scene=e,this.camera=t,this.overrideMaterial=n,this.clearColor=i,this.clearAlpha=s,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,this._oldClearColor=new ae}render(e,t,n){const i=e.autoClear;e.autoClear=!1;let s,a;this.overrideMaterial!==null&&(a=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor!==null&&(e.getClearColor(this._oldClearColor),e.setClearColor(this.clearColor,e.getClearAlpha())),this.clearAlpha!==null&&(s=e.getClearAlpha(),e.setClearAlpha(this.clearAlpha)),this.clearDepth==!0&&e.clearDepth(),e.setRenderTarget(this.renderToScreen?null:n),this.clear===!0&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),e.render(this.scene,this.camera),this.clearColor!==null&&e.setClearColor(this._oldClearColor),this.clearAlpha!==null&&e.setClearAlpha(s),this.overrideMaterial!==null&&(this.scene.overrideMaterial=a),e.autoClear=i}}const fy={name:"LuminosityHighPassShader",shaderID:"luminosityHighPass",uniforms:{tDiffuse:{value:null},luminosityThreshold:{value:1},smoothWidth:{value:1},defaultColor:{value:new ae(0)},defaultOpacity:{value:0}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform sampler2D tDiffuse;
		uniform vec3 defaultColor;
		uniform float defaultOpacity;
		uniform float luminosityThreshold;
		uniform float smoothWidth;

		varying vec2 vUv;

		void main() {

			vec4 texel = texture2D( tDiffuse, vUv );

			float v = luminance( texel.xyz );

			vec4 outputColor = vec4( defaultColor.rgb, defaultOpacity );

			float alpha = smoothstep( luminosityThreshold, luminosityThreshold + smoothWidth, v );

			gl_FragColor = mix( outputColor, texel, alpha );

		}`};class ca extends Ma{constructor(e,t,n,i){super(),this.strength=t!==void 0?t:1,this.radius=n,this.threshold=i,this.resolution=e!==void 0?new G(e.x,e.y):new G(256,256),this.clearColor=new ae(0,0,0),this.renderTargetsHorizontal=[],this.renderTargetsVertical=[],this.nMips=5;let s=Math.round(this.resolution.x/2),a=Math.round(this.resolution.y/2);this.renderTargetBright=new fn(s,a,{type:ui}),this.renderTargetBright.texture.name="UnrealBloomPass.bright",this.renderTargetBright.texture.generateMipmaps=!1;for(let u=0;u<this.nMips;u++){const f=new fn(s,a,{type:ui});f.texture.name="UnrealBloomPass.h"+u,f.texture.generateMipmaps=!1,this.renderTargetsHorizontal.push(f);const d=new fn(s,a,{type:ui});d.texture.name="UnrealBloomPass.v"+u,d.texture.generateMipmaps=!1,this.renderTargetsVertical.push(d),s=Math.round(s/2),a=Math.round(a/2)}const o=fy;this.highPassUniforms=aa.clone(o.uniforms),this.highPassUniforms.luminosityThreshold.value=i,this.highPassUniforms.smoothWidth.value=.01,this.materialHighPassFilter=new kt({uniforms:this.highPassUniforms,vertexShader:o.vertexShader,fragmentShader:o.fragmentShader}),this.separableBlurMaterials=[];const l=[3,5,7,9,11];s=Math.round(this.resolution.x/2),a=Math.round(this.resolution.y/2);for(let u=0;u<this.nMips;u++)this.separableBlurMaterials.push(this.getSeperableBlurMaterial(l[u])),this.separableBlurMaterials[u].uniforms.invSize.value=new G(1/s,1/a),s=Math.round(s/2),a=Math.round(a/2);this.compositeMaterial=this.getCompositeMaterial(this.nMips),this.compositeMaterial.uniforms.blurTexture1.value=this.renderTargetsVertical[0].texture,this.compositeMaterial.uniforms.blurTexture2.value=this.renderTargetsVertical[1].texture,this.compositeMaterial.uniforms.blurTexture3.value=this.renderTargetsVertical[2].texture,this.compositeMaterial.uniforms.blurTexture4.value=this.renderTargetsVertical[3].texture,this.compositeMaterial.uniforms.blurTexture5.value=this.renderTargetsVertical[4].texture,this.compositeMaterial.uniforms.bloomStrength.value=t,this.compositeMaterial.uniforms.bloomRadius.value=.1;const c=[1,.8,.6,.4,.2];this.compositeMaterial.uniforms.bloomFactors.value=c,this.bloomTintColors=[new R(1,1,1),new R(1,1,1),new R(1,1,1),new R(1,1,1),new R(1,1,1)],this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors;const h=Jm;this.copyUniforms=aa.clone(h.uniforms),this.blendMaterial=new kt({uniforms:this.copyUniforms,vertexShader:h.vertexShader,fragmentShader:h.fragmentShader,blending:ro,depthTest:!1,depthWrite:!1,transparent:!0}),this.enabled=!0,this.needsSwap=!1,this._oldClearColor=new ae,this.oldClearAlpha=1,this.basic=new Yt,this.fsQuad=new pd(null)}dispose(){for(let e=0;e<this.renderTargetsHorizontal.length;e++)this.renderTargetsHorizontal[e].dispose();for(let e=0;e<this.renderTargetsVertical.length;e++)this.renderTargetsVertical[e].dispose();this.renderTargetBright.dispose();for(let e=0;e<this.separableBlurMaterials.length;e++)this.separableBlurMaterials[e].dispose();this.compositeMaterial.dispose(),this.blendMaterial.dispose(),this.basic.dispose(),this.fsQuad.dispose()}setSize(e,t){let n=Math.round(e/2),i=Math.round(t/2);this.renderTargetBright.setSize(n,i);for(let s=0;s<this.nMips;s++)this.renderTargetsHorizontal[s].setSize(n,i),this.renderTargetsVertical[s].setSize(n,i),this.separableBlurMaterials[s].uniforms.invSize.value=new G(1/n,1/i),n=Math.round(n/2),i=Math.round(i/2)}render(e,t,n,i,s){e.getClearColor(this._oldClearColor),this.oldClearAlpha=e.getClearAlpha();const a=e.autoClear;e.autoClear=!1,e.setClearColor(this.clearColor,0),s&&e.state.buffers.stencil.setTest(!1),this.renderToScreen&&(this.fsQuad.material=this.basic,this.basic.map=n.texture,e.setRenderTarget(null),e.clear(),this.fsQuad.render(e)),this.highPassUniforms.tDiffuse.value=n.texture,this.highPassUniforms.luminosityThreshold.value=this.threshold,this.fsQuad.material=this.materialHighPassFilter,e.setRenderTarget(this.renderTargetBright),e.clear(),this.fsQuad.render(e);let o=this.renderTargetBright;for(let l=0;l<this.nMips;l++)this.fsQuad.material=this.separableBlurMaterials[l],this.separableBlurMaterials[l].uniforms.colorTexture.value=o.texture,this.separableBlurMaterials[l].uniforms.direction.value=ca.BlurDirectionX,e.setRenderTarget(this.renderTargetsHorizontal[l]),e.clear(),this.fsQuad.render(e),this.separableBlurMaterials[l].uniforms.colorTexture.value=this.renderTargetsHorizontal[l].texture,this.separableBlurMaterials[l].uniforms.direction.value=ca.BlurDirectionY,e.setRenderTarget(this.renderTargetsVertical[l]),e.clear(),this.fsQuad.render(e),o=this.renderTargetsVertical[l];this.fsQuad.material=this.compositeMaterial,this.compositeMaterial.uniforms.bloomStrength.value=this.strength,this.compositeMaterial.uniforms.bloomRadius.value=this.radius,this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,e.setRenderTarget(this.renderTargetsHorizontal[0]),e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.blendMaterial,this.copyUniforms.tDiffuse.value=this.renderTargetsHorizontal[0].texture,s&&e.state.buffers.stencil.setTest(!0),this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(n),this.fsQuad.render(e)),e.setClearColor(this._oldClearColor,this.oldClearAlpha),e.autoClear=a}getSeperableBlurMaterial(e){const t=[];for(let n=0;n<e;n++)t.push(.39894*Math.exp(-.5*n*n/(e*e))/e);return new kt({defines:{KERNEL_RADIUS:e},uniforms:{colorTexture:{value:null},invSize:{value:new G(.5,.5)},direction:{value:new G(.5,.5)},gaussianCoefficients:{value:t}},vertexShader:`varying vec2 vUv;
				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`#include <common>
				varying vec2 vUv;
				uniform sampler2D colorTexture;
				uniform vec2 invSize;
				uniform vec2 direction;
				uniform float gaussianCoefficients[KERNEL_RADIUS];

				void main() {
					float weightSum = gaussianCoefficients[0];
					vec3 diffuseSum = texture2D( colorTexture, vUv ).rgb * weightSum;
					for( int i = 1; i < KERNEL_RADIUS; i ++ ) {
						float x = float(i);
						float w = gaussianCoefficients[i];
						vec2 uvOffset = direction * invSize * x;
						vec3 sample1 = texture2D( colorTexture, vUv + uvOffset ).rgb;
						vec3 sample2 = texture2D( colorTexture, vUv - uvOffset ).rgb;
						diffuseSum += (sample1 + sample2) * w;
						weightSum += 2.0 * w;
					}
					gl_FragColor = vec4(diffuseSum/weightSum, 1.0);
				}`})}getCompositeMaterial(e){return new kt({defines:{NUM_MIPS:e},uniforms:{blurTexture1:{value:null},blurTexture2:{value:null},blurTexture3:{value:null},blurTexture4:{value:null},blurTexture5:{value:null},bloomStrength:{value:1},bloomFactors:{value:null},bloomTintColors:{value:null},bloomRadius:{value:0}},vertexShader:`varying vec2 vUv;
				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`varying vec2 vUv;
				uniform sampler2D blurTexture1;
				uniform sampler2D blurTexture2;
				uniform sampler2D blurTexture3;
				uniform sampler2D blurTexture4;
				uniform sampler2D blurTexture5;
				uniform float bloomStrength;
				uniform float bloomRadius;
				uniform float bloomFactors[NUM_MIPS];
				uniform vec3 bloomTintColors[NUM_MIPS];

				float lerpBloomFactor(const in float factor) {
					float mirrorFactor = 1.2 - factor;
					return mix(factor, mirrorFactor, bloomRadius);
				}

				void main() {
					gl_FragColor = bloomStrength * ( lerpBloomFactor(bloomFactors[0]) * vec4(bloomTintColors[0], 1.0) * texture2D(blurTexture1, vUv) +
						lerpBloomFactor(bloomFactors[1]) * vec4(bloomTintColors[1], 1.0) * texture2D(blurTexture2, vUv) +
						lerpBloomFactor(bloomFactors[2]) * vec4(bloomTintColors[2], 1.0) * texture2D(blurTexture3, vUv) +
						lerpBloomFactor(bloomFactors[3]) * vec4(bloomTintColors[3], 1.0) * texture2D(blurTexture4, vUv) +
						lerpBloomFactor(bloomFactors[4]) * vec4(bloomTintColors[4], 1.0) * texture2D(blurTexture5, vUv) );
				}`})}}ca.BlurDirectionX=new G(1,0);ca.BlurDirectionY=new G(0,1);const dy={name:"OutputShader",uniforms:{tDiffuse:{value:null},toneMappingExposure:{value:1}},vertexShader:`
		precision highp float;

		uniform mat4 modelViewMatrix;
		uniform mat4 projectionMatrix;

		attribute vec3 position;
		attribute vec2 uv;

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`
	
		precision highp float;

		uniform sampler2D tDiffuse;

		#include <tonemapping_pars_fragment>
		#include <colorspace_pars_fragment>

		varying vec2 vUv;

		void main() {

			gl_FragColor = texture2D( tDiffuse, vUv );

			// tone mapping

			#ifdef LINEAR_TONE_MAPPING

				gl_FragColor.rgb = LinearToneMapping( gl_FragColor.rgb );

			#elif defined( REINHARD_TONE_MAPPING )

				gl_FragColor.rgb = ReinhardToneMapping( gl_FragColor.rgb );

			#elif defined( CINEON_TONE_MAPPING )

				gl_FragColor.rgb = CineonToneMapping( gl_FragColor.rgb );

			#elif defined( ACES_FILMIC_TONE_MAPPING )

				gl_FragColor.rgb = ACESFilmicToneMapping( gl_FragColor.rgb );

			#elif defined( AGX_TONE_MAPPING )

				gl_FragColor.rgb = AgXToneMapping( gl_FragColor.rgb );

			#elif defined( NEUTRAL_TONE_MAPPING )

				gl_FragColor.rgb = NeutralToneMapping( gl_FragColor.rgb );

			#endif

			// color space

			#ifdef SRGB_TRANSFER

				gl_FragColor = sRGBTransferOETF( gl_FragColor );

			#endif

		}`};class t2 extends Ma{constructor(){super();const e=dy;this.uniforms=aa.clone(e.uniforms),this.material=new td({name:e.name,uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader}),this.fsQuad=new pd(this.material),this._outputColorSpace=null,this._toneMapping=null}render(e,t,n){this.uniforms.tDiffuse.value=n.texture,this.uniforms.toneMappingExposure.value=e.toneMappingExposure,(this._outputColorSpace!==e.outputColorSpace||this._toneMapping!==e.toneMapping)&&(this._outputColorSpace=e.outputColorSpace,this._toneMapping=e.toneMapping,this.material.defines={},Ye.getTransfer(this._outputColorSpace)===ot&&(this.material.defines.SRGB_TRANSFER=""),this._toneMapping===yf?this.material.defines.LINEAR_TONE_MAPPING="":this._toneMapping===vf?this.material.defines.REINHARD_TONE_MAPPING="":this._toneMapping===Mf?this.material.defines.CINEON_TONE_MAPPING="":this._toneMapping===Sf?this.material.defines.ACES_FILMIC_TONE_MAPPING="":this._toneMapping===bf?this.material.defines.AGX_TONE_MAPPING="":this._toneMapping===Tf&&(this.material.defines.NEUTRAL_TONE_MAPPING=""),this.material.needsUpdate=!0),this.renderToScreen===!0?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this.fsQuad.render(e))}dispose(){this.material.dispose(),this.fsQuad.dispose()}}const py={name:"FXAAShader",uniforms:{tDiffuse:{value:null},resolution:{value:new G(1/1024,1/512)}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`
		precision highp float;

		uniform sampler2D tDiffuse;

		uniform vec2 resolution;

		varying vec2 vUv;

		// FXAA 3.11 implementation by NVIDIA, ported to WebGL by Agost Biro (biro@archilogic.com)

		//----------------------------------------------------------------------------------
		// File:        es3-keplerFXAAassetsshaders/FXAA_DefaultES.frag
		// SDK Version: v3.00
		// Email:       gameworks@nvidia.com
		// Site:        http://developer.nvidia.com/
		//
		// Copyright (c) 2014-2015, NVIDIA CORPORATION. All rights reserved.
		//
		// Redistribution and use in source and binary forms, with or without
		// modification, are permitted provided that the following conditions
		// are met:
		//  * Redistributions of source code must retain the above copyright
		//    notice, this list of conditions and the following disclaimer.
		//  * Redistributions in binary form must reproduce the above copyright
		//    notice, this list of conditions and the following disclaimer in the
		//    documentation and/or other materials provided with the distribution.
		//  * Neither the name of NVIDIA CORPORATION nor the names of its
		//    contributors may be used to endorse or promote products derived
		//    from this software without specific prior written permission.
		//
		// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS ''AS IS'' AND ANY
		// EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
		// IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
		// PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT OWNER OR
		// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
		// EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
		// PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
		// PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
		// OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
		// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
		// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
		//
		//----------------------------------------------------------------------------------

		#ifndef FXAA_DISCARD
			//
			// Only valid for PC OpenGL currently.
			// Probably will not work when FXAA_GREEN_AS_LUMA = 1.
			//
			// 1 = Use discard on pixels which don't need AA.
			//     For APIs which enable concurrent TEX+ROP from same surface.
			// 0 = Return unchanged color on pixels which don't need AA.
			//
			#define FXAA_DISCARD 0
		#endif

		/*--------------------------------------------------------------------------*/
		#define FxaaTexTop(t, p) texture2D(t, p, -100.0)
		#define FxaaTexOff(t, p, o, r) texture2D(t, p + (o * r), -100.0)
		/*--------------------------------------------------------------------------*/

		#define NUM_SAMPLES 5

		// assumes colors have premultipliedAlpha, so that the calculated color contrast is scaled by alpha
		float contrast( vec4 a, vec4 b ) {
			vec4 diff = abs( a - b );
			return max( max( max( diff.r, diff.g ), diff.b ), diff.a );
		}

		/*============================================================================

									FXAA3 QUALITY - PC

		============================================================================*/

		/*--------------------------------------------------------------------------*/
		vec4 FxaaPixelShader(
			vec2 posM,
			sampler2D tex,
			vec2 fxaaQualityRcpFrame,
			float fxaaQualityEdgeThreshold,
			float fxaaQualityinvEdgeThreshold
		) {
			vec4 rgbaM = FxaaTexTop(tex, posM);
			vec4 rgbaS = FxaaTexOff(tex, posM, vec2( 0.0, 1.0), fxaaQualityRcpFrame.xy);
			vec4 rgbaE = FxaaTexOff(tex, posM, vec2( 1.0, 0.0), fxaaQualityRcpFrame.xy);
			vec4 rgbaN = FxaaTexOff(tex, posM, vec2( 0.0,-1.0), fxaaQualityRcpFrame.xy);
			vec4 rgbaW = FxaaTexOff(tex, posM, vec2(-1.0, 0.0), fxaaQualityRcpFrame.xy);
			// . S .
			// W M E
			// . N .

			bool earlyExit = max( max( max(
					contrast( rgbaM, rgbaN ),
					contrast( rgbaM, rgbaS ) ),
					contrast( rgbaM, rgbaE ) ),
					contrast( rgbaM, rgbaW ) )
					< fxaaQualityEdgeThreshold;
			// . 0 .
			// 0 0 0
			// . 0 .

			#if (FXAA_DISCARD == 1)
				if(earlyExit) FxaaDiscard;
			#else
				if(earlyExit) return rgbaM;
			#endif

			float contrastN = contrast( rgbaM, rgbaN );
			float contrastS = contrast( rgbaM, rgbaS );
			float contrastE = contrast( rgbaM, rgbaE );
			float contrastW = contrast( rgbaM, rgbaW );

			float relativeVContrast = ( contrastN + contrastS ) - ( contrastE + contrastW );
			relativeVContrast *= fxaaQualityinvEdgeThreshold;

			bool horzSpan = relativeVContrast > 0.;
			// . 1 .
			// 0 0 0
			// . 1 .

			// 45 deg edge detection and corners of objects, aka V/H contrast is too similar
			if( abs( relativeVContrast ) < .3 ) {
				// locate the edge
				vec2 dirToEdge;
				dirToEdge.x = contrastE > contrastW ? 1. : -1.;
				dirToEdge.y = contrastS > contrastN ? 1. : -1.;
				// . 2 .      . 1 .
				// 1 0 2  ~=  0 0 1
				// . 1 .      . 0 .

				// tap 2 pixels and see which ones are "outside" the edge, to
				// determine if the edge is vertical or horizontal

				vec4 rgbaAlongH = FxaaTexOff(tex, posM, vec2( dirToEdge.x, -dirToEdge.y ), fxaaQualityRcpFrame.xy);
				float matchAlongH = contrast( rgbaM, rgbaAlongH );
				// . 1 .
				// 0 0 1
				// . 0 H

				vec4 rgbaAlongV = FxaaTexOff(tex, posM, vec2( -dirToEdge.x, dirToEdge.y ), fxaaQualityRcpFrame.xy);
				float matchAlongV = contrast( rgbaM, rgbaAlongV );
				// V 1 .
				// 0 0 1
				// . 0 .

				relativeVContrast = matchAlongV - matchAlongH;
				relativeVContrast *= fxaaQualityinvEdgeThreshold;

				if( abs( relativeVContrast ) < .3 ) { // 45 deg edge
					// 1 1 .
					// 0 0 1
					// . 0 1

					// do a simple blur
					return mix(
						rgbaM,
						(rgbaN + rgbaS + rgbaE + rgbaW) * .25,
						.4
					);
				}

				horzSpan = relativeVContrast > 0.;
			}

			if(!horzSpan) rgbaN = rgbaW;
			if(!horzSpan) rgbaS = rgbaE;
			// . 0 .      1
			// 1 0 1  ->  0
			// . 0 .      1

			bool pairN = contrast( rgbaM, rgbaN ) > contrast( rgbaM, rgbaS );
			if(!pairN) rgbaN = rgbaS;

			vec2 offNP;
			offNP.x = (!horzSpan) ? 0.0 : fxaaQualityRcpFrame.x;
			offNP.y = ( horzSpan) ? 0.0 : fxaaQualityRcpFrame.y;

			bool doneN = false;
			bool doneP = false;

			float nDist = 0.;
			float pDist = 0.;

			vec2 posN = posM;
			vec2 posP = posM;

			int iterationsUsedN = 0;
			int iterationsUsedP = 0;
			for( int i = 0; i < NUM_SAMPLES; i++ ) {

				float increment = float(i + 1);

				if(!doneN) {
					nDist += increment;
					posN = posM + offNP * nDist;
					vec4 rgbaEndN = FxaaTexTop(tex, posN.xy);
					doneN = contrast( rgbaEndN, rgbaM ) > contrast( rgbaEndN, rgbaN );
					iterationsUsedN = i;
				}

				if(!doneP) {
					pDist += increment;
					posP = posM - offNP * pDist;
					vec4 rgbaEndP = FxaaTexTop(tex, posP.xy);
					doneP = contrast( rgbaEndP, rgbaM ) > contrast( rgbaEndP, rgbaN );
					iterationsUsedP = i;
				}

				if(doneN || doneP) break;
			}


			if ( !doneP && !doneN ) return rgbaM; // failed to find end of edge

			float dist = min(
				doneN ? float( iterationsUsedN ) / float( NUM_SAMPLES - 1 ) : 1.,
				doneP ? float( iterationsUsedP ) / float( NUM_SAMPLES - 1 ) : 1.
			);

			// hacky way of reduces blurriness of mostly diagonal edges
			// but reduces AA quality
			dist = pow(dist, .5);

			dist = 1. - dist;

			return mix(
				rgbaM,
				rgbaN,
				dist * .5
			);
		}

		void main() {
			const float edgeDetectionQuality = .2;
			const float invEdgeDetectionQuality = 1. / edgeDetectionQuality;

			gl_FragColor = FxaaPixelShader(
				vUv,
				tDiffuse,
				resolution,
				edgeDetectionQuality, // [0,1] contrast needed, otherwise early discard
				invEdgeDetectionQuality
			);

		}
	`};var Ja=function(){var r=0,e=document.createElement("div");e.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",e.addEventListener("click",function(h){h.preventDefault(),n(++r%e.children.length)},!1);function t(h){return e.appendChild(h.dom),h}function n(h){for(var u=0;u<e.children.length;u++)e.children[u].style.display=u===h?"block":"none";r=h}var i=(performance||Date).now(),s=i,a=0,o=t(new Ja.Panel("FPS","#0ff","#002")),l=t(new Ja.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var c=t(new Ja.Panel("MB","#f08","#201"));return n(0),{REVISION:16,dom:e,addPanel:t,showPanel:n,begin:function(){i=(performance||Date).now()},end:function(){a++;var h=(performance||Date).now();if(l.update(h-i,200),h>=s+1e3&&(o.update(a*1e3/(h-s),100),s=h,a=0,c)){var u=performance.memory;c.update(u.usedJSHeapSize/1048576,u.jsHeapSizeLimit/1048576)}return h},update:function(){i=this.end()},domElement:e,setMode:n}};Ja.Panel=function(r,e,t){var n=1/0,i=0,s=Math.round,a=s(window.devicePixelRatio||1),o=80*a,l=48*a,c=3*a,h=2*a,u=3*a,f=15*a,d=74*a,m=30*a,g=document.createElement("canvas");g.width=o,g.height=l,g.style.cssText="width:80px;height:48px";var p=g.getContext("2d");return p.font="bold "+9*a+"px Helvetica,Arial,sans-serif",p.textBaseline="top",p.fillStyle=t,p.fillRect(0,0,o,l),p.fillStyle=e,p.fillText(r,c,h),p.fillRect(u,f,d,m),p.fillStyle=t,p.globalAlpha=.9,p.fillRect(u,f,d,m),{dom:g,update:function(_,y){n=Math.min(n,_),i=Math.max(i,_),p.fillStyle=t,p.globalAlpha=1,p.fillRect(0,0,o,f),p.fillStyle=e,p.fillText(s(_)+" "+r+" ("+s(n)+"-"+s(i)+")",c,h),p.drawImage(g,u+a,f,d-a,m,u,f,d-a,m),p.fillRect(u+d-a,f,a,m),p.fillStyle=t,p.globalAlpha=.9,p.fillRect(u+d-a,f,a,s((1-_/y)*m))}}};var my=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function gy(r){if(r.__esModule)return r;var e=r.default;if(typeof e=="function"){var t=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(r).forEach(function(n){var i=Object.getOwnPropertyDescriptor(r,n);Object.defineProperty(t,n,i.get?i:{enumerable:!0,get:function(){return r[n]}})}),t}function _y(r){throw new Error('Could not dynamically require "'+r+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var ju={exports:{}};const xy=gy(f7);(function(r,e){(function(){var t=this,n=typeof _y<"u",i=t.THREE||n&&xy;if(!i)throw new Error("MeshLine requires three.js");class s extends i.BufferGeometry{constructor(){super(),this.isMeshLine=!0,this.type="MeshLine",this.positions=[],this.previous=[],this.next=[],this.side=[],this.width=[],this.indices_array=[],this.uvs=[],this.counters=[],this._points=[],this._geom=null,this.widthCallback=null,this.matrixWorld=new i.Matrix4,Object.defineProperties(this,{geometry:{enumerable:!0,get:function(){return this}},geom:{enumerable:!0,get:function(){return this._geom},set:function(h){this.setGeometry(h,this.widthCallback)}},points:{enumerable:!0,get:function(){return this._points},set:function(h){this.setPoints(h,this.widthCallback)}}})}}s.prototype.setMatrixWorld=function(c){this.matrixWorld=c},s.prototype.setGeometry=function(c,h){this._geometry=c,this.setPoints(c.getAttribute("position").array,h)},s.prototype.setPoints=function(c,h){if(!(c instanceof Float32Array)&&!(c instanceof Array)){console.error("ERROR: The BufferArray of points is not instancied correctly.");return}if(this._points=c,this.widthCallback=h,this.positions=[],this.counters=[],c.length&&c[0]instanceof i.Vector3)for(var u=0;u<c.length;u++){var f=c[u],d=u/c.length;this.positions.push(f.x,f.y,f.z),this.positions.push(f.x,f.y,f.z),this.counters.push(d),this.counters.push(d)}else for(var u=0;u<c.length;u+=3){var d=u/c.length;this.positions.push(c[u],c[u+1],c[u+2]),this.positions.push(c[u],c[u+1],c[u+2]),this.counters.push(d),this.counters.push(d)}this.process()};function a(c,h){var u=new i.Matrix4,f=new i.Ray,d=new i.Sphere,m=new i.Vector3,g=this.geometry;if(g.boundingSphere||g.computeBoundingSphere(),d.copy(g.boundingSphere),d.applyMatrix4(this.matrixWorld),c.ray.intersectSphere(d,m)!==!1){u.copy(this.matrixWorld).invert(),f.copy(c.ray).applyMatrix4(u);var p=new i.Vector3,_=new i.Vector3,y=new i.Vector3,x=this instanceof i.LineSegments?2:1,v=g.index,w=g.attributes;if(v!==null)for(var b=v.array,A=w.position.array,C=w.width.array,M=0,S=b.length-1;M<S;M+=x){var q=b[M],O=b[M+1];p.fromArray(A,q*3),_.fromArray(A,O*3);var N=C[Math.floor(M/3)]!==void 0?C[Math.floor(M/3)]:1,z=c.params.Line.threshold+this.material.lineWidth*N/2,V=z*z,F=f.distanceSqToSegment(p,_,m,y);if(!(F>V)){m.applyMatrix4(this.matrixWorld);var X=c.ray.origin.distanceTo(m);X<c.near||X>c.far||(h.push({distance:X,point:y.clone().applyMatrix4(this.matrixWorld),index:M,face:null,faceIndex:null,object:this}),M=S)}}}}s.prototype.raycast=a,s.prototype.compareV3=function(c,h){var u=c*6,f=h*6;return this.positions[u]===this.positions[f]&&this.positions[u+1]===this.positions[f+1]&&this.positions[u+2]===this.positions[f+2]},s.prototype.copyV3=function(c){var h=c*6;return[this.positions[h],this.positions[h+1],this.positions[h+2]]},s.prototype.process=function(){var c=this.positions.length/6;this.previous=[],this.next=[],this.side=[],this.width=[],this.indices_array=[],this.uvs=[];var h,u;this.compareV3(0,c-1)?u=this.copyV3(c-2):u=this.copyV3(0),this.previous.push(u[0],u[1],u[2]),this.previous.push(u[0],u[1],u[2]);for(var f=0;f<c;f++){if(this.side.push(1),this.side.push(-1),this.widthCallback?h=this.widthCallback(f/(c-1)):h=1,this.width.push(h),this.width.push(h),this.uvs.push(f/(c-1),0),this.uvs.push(f/(c-1),1),f<c-1){u=this.copyV3(f),this.previous.push(u[0],u[1],u[2]),this.previous.push(u[0],u[1],u[2]);var d=f*2;this.indices_array.push(d,d+1,d+2),this.indices_array.push(d+2,d+1,d+3)}f>0&&(u=this.copyV3(f),this.next.push(u[0],u[1],u[2]),this.next.push(u[0],u[1],u[2]))}this.compareV3(c-1,0)?u=this.copyV3(1):u=this.copyV3(c-1),this.next.push(u[0],u[1],u[2]),this.next.push(u[0],u[1],u[2]),!this._attributes||this._attributes.position.count!==this.positions.length?this._attributes={position:new i.BufferAttribute(new Float32Array(this.positions),3),previous:new i.BufferAttribute(new Float32Array(this.previous),3),next:new i.BufferAttribute(new Float32Array(this.next),3),side:new i.BufferAttribute(new Float32Array(this.side),1),width:new i.BufferAttribute(new Float32Array(this.width),1),uv:new i.BufferAttribute(new Float32Array(this.uvs),2),index:new i.BufferAttribute(new Uint16Array(this.indices_array),1),counters:new i.BufferAttribute(new Float32Array(this.counters),1)}:(this._attributes.position.copyArray(new Float32Array(this.positions)),this._attributes.position.needsUpdate=!0,this._attributes.previous.copyArray(new Float32Array(this.previous)),this._attributes.previous.needsUpdate=!0,this._attributes.next.copyArray(new Float32Array(this.next)),this._attributes.next.needsUpdate=!0,this._attributes.side.copyArray(new Float32Array(this.side)),this._attributes.side.needsUpdate=!0,this._attributes.width.copyArray(new Float32Array(this.width)),this._attributes.width.needsUpdate=!0,this._attributes.uv.copyArray(new Float32Array(this.uvs)),this._attributes.uv.needsUpdate=!0,this._attributes.index.copyArray(new Uint16Array(this.indices_array)),this._attributes.index.needsUpdate=!0),this.setAttribute("position",this._attributes.position),this.setAttribute("previous",this._attributes.previous),this.setAttribute("next",this._attributes.next),this.setAttribute("side",this._attributes.side),this.setAttribute("width",this._attributes.width),this.setAttribute("uv",this._attributes.uv),this.setAttribute("counters",this._attributes.counters),this.setIndex(this._attributes.index),this.computeBoundingSphere(),this.computeBoundingBox()};function o(c,h,u,f,d){var m;if(c=c.subarray||c.slice?c:c.buffer,u=u.subarray||u.slice?u:u.buffer,c=h?c.subarray?c.subarray(h,d&&h+d):c.slice(h,d&&h+d):c,u.set)u.set(c,f);else for(m=0;m<c.length;m++)u[m+f]=c[m];return u}s.prototype.advance=function(c){var h=this._attributes.position.array,u=this._attributes.previous.array,f=this._attributes.next.array,d=h.length;o(h,0,u,0,d),o(h,6,h,0,d-6),h[d-6]=c.x,h[d-5]=c.y,h[d-4]=c.z,h[d-3]=c.x,h[d-2]=c.y,h[d-1]=c.z,o(h,6,f,0,d-6),f[d-6]=c.x,f[d-5]=c.y,f[d-4]=c.z,f[d-3]=c.x,f[d-2]=c.y,f[d-1]=c.z,this._attributes.position.needsUpdate=!0,this._attributes.previous.needsUpdate=!0,this._attributes.next.needsUpdate=!0},i.ShaderChunk.meshline_vert=["",i.ShaderChunk.logdepthbuf_pars_vertex,i.ShaderChunk.fog_pars_vertex,"","attribute vec3 previous;","attribute vec3 next;","attribute float side;","attribute float width;","attribute float counters;","","uniform vec2 resolution;","uniform float lineWidth;","uniform vec3 color;","uniform float opacity;","uniform float sizeAttenuation;","","varying vec2 vUV;","varying vec4 vColor;","varying float vCounters;","","vec2 fix( vec4 i, float aspect ) {","","    vec2 res = i.xy / i.w;","    res.x *= aspect;","	 vCounters = counters;","    return res;","","}","","void main() {","","    float aspect = resolution.x / resolution.y;","","    vColor = vec4( color, opacity );","    vUV = uv;","","    mat4 m = projectionMatrix * modelViewMatrix;","    vec4 finalPosition = m * vec4( position, 1.0 );","    vec4 prevPos = m * vec4( previous, 1.0 );","    vec4 nextPos = m * vec4( next, 1.0 );","","    vec2 currentP = fix( finalPosition, aspect );","    vec2 prevP = fix( prevPos, aspect );","    vec2 nextP = fix( nextPos, aspect );","","    float w = lineWidth * width;","","    vec2 dir;","    if( nextP == currentP ) dir = normalize( currentP - prevP );","    else if( prevP == currentP ) dir = normalize( nextP - currentP );","    else {","        vec2 dir1 = normalize( currentP - prevP );","        vec2 dir2 = normalize( nextP - currentP );","        dir = normalize( dir1 + dir2 );","","        vec2 perp = vec2( -dir1.y, dir1.x );","        vec2 miter = vec2( -dir.y, dir.x );","        //w = clamp( w / dot( miter, perp ), 0., 4. * lineWidth * width );","","    }","","    //vec2 normal = ( cross( vec3( dir, 0. ), vec3( 0., 0., 1. ) ) ).xy;","    vec4 normal = vec4( -dir.y, dir.x, 0., 1. );","    normal.xy *= .5 * w;","    normal *= projectionMatrix;","    if( sizeAttenuation == 0. ) {","        normal.xy *= finalPosition.w;","        normal.xy /= ( vec4( resolution, 0., 1. ) * projectionMatrix ).xy;","    }","","    finalPosition.xy += normal.xy * side;","","    gl_Position = finalPosition;","",i.ShaderChunk.logdepthbuf_vertex,i.ShaderChunk.fog_vertex&&"    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );",i.ShaderChunk.fog_vertex,"}"].join(`
`),i.ShaderChunk.meshline_frag=["",i.ShaderChunk.fog_pars_fragment,i.ShaderChunk.logdepthbuf_pars_fragment,"","uniform sampler2D map;","uniform sampler2D alphaMap;","uniform float useMap;","uniform float useAlphaMap;","uniform float useDash;","uniform float dashArray;","uniform float dashOffset;","uniform float dashRatio;","uniform float visibility;","uniform float alphaTest;","uniform vec2 repeat;","","varying vec2 vUV;","varying vec4 vColor;","varying float vCounters;","","void main() {","",i.ShaderChunk.logdepthbuf_fragment,"","    vec4 c = vColor;","    if( useMap == 1. ) c *= texture2D( map, vUV * repeat );","    if( useAlphaMap == 1. ) c.a *= texture2D( alphaMap, vUV * repeat ).a;","    if( c.a < alphaTest ) discard;","    if( useDash == 1. ){","        c.a *= ceil(mod(vCounters + dashOffset, dashArray) - (dashArray * dashRatio));","    }","    gl_FragColor = c;","    gl_FragColor.a *= step(vCounters, visibility);","",i.ShaderChunk.fog_fragment,"}"].join(`
`);class l extends i.ShaderMaterial{constructor(h){super({uniforms:Object.assign({},i.UniformsLib.fog,{lineWidth:{value:1},map:{value:null},useMap:{value:0},alphaMap:{value:null},useAlphaMap:{value:0},color:{value:new i.Color(16777215)},opacity:{value:1},resolution:{value:new i.Vector2(1,1)},sizeAttenuation:{value:1},dashArray:{value:0},dashOffset:{value:0},dashRatio:{value:.5},useDash:{value:0},visibility:{value:1},alphaTest:{value:0},repeat:{value:new i.Vector2(1,1)}}),vertexShader:i.ShaderChunk.meshline_vert,fragmentShader:i.ShaderChunk.meshline_frag}),this.isMeshLineMaterial=!0,this.type="MeshLineMaterial",Object.defineProperties(this,{lineWidth:{enumerable:!0,get:function(){return this.uniforms.lineWidth.value},set:function(u){this.uniforms.lineWidth.value=u}},map:{enumerable:!0,get:function(){return this.uniforms.map.value},set:function(u){this.uniforms.map.value=u}},useMap:{enumerable:!0,get:function(){return this.uniforms.useMap.value},set:function(u){this.uniforms.useMap.value=u}},alphaMap:{enumerable:!0,get:function(){return this.uniforms.alphaMap.value},set:function(u){this.uniforms.alphaMap.value=u}},useAlphaMap:{enumerable:!0,get:function(){return this.uniforms.useAlphaMap.value},set:function(u){this.uniforms.useAlphaMap.value=u}},color:{enumerable:!0,get:function(){return this.uniforms.color.value},set:function(u){this.uniforms.color.value=u}},opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(u){this.uniforms.opacity.value=u}},resolution:{enumerable:!0,get:function(){return this.uniforms.resolution.value},set:function(u){this.uniforms.resolution.value.copy(u)}},sizeAttenuation:{enumerable:!0,get:function(){return this.uniforms.sizeAttenuation.value},set:function(u){this.uniforms.sizeAttenuation.value=u}},dashArray:{enumerable:!0,get:function(){return this.uniforms.dashArray.value},set:function(u){this.uniforms.dashArray.value=u,this.useDash=u!==0?1:0}},dashOffset:{enumerable:!0,get:function(){return this.uniforms.dashOffset.value},set:function(u){this.uniforms.dashOffset.value=u}},dashRatio:{enumerable:!0,get:function(){return this.uniforms.dashRatio.value},set:function(u){this.uniforms.dashRatio.value=u}},useDash:{enumerable:!0,get:function(){return this.uniforms.useDash.value},set:function(u){this.uniforms.useDash.value=u}},visibility:{enumerable:!0,get:function(){return this.uniforms.visibility.value},set:function(u){this.uniforms.visibility.value=u}},alphaTest:{enumerable:!0,get:function(){return this.uniforms.alphaTest.value},set:function(u){this.uniforms.alphaTest.value=u}},repeat:{enumerable:!0,get:function(){return this.uniforms.repeat.value},set:function(u){this.uniforms.repeat.value.copy(u)}}}),this.setValues(h)}}l.prototype.copy=function(c){return i.ShaderMaterial.prototype.copy.call(this,c),this.lineWidth=c.lineWidth,this.map=c.map,this.useMap=c.useMap,this.alphaMap=c.alphaMap,this.useAlphaMap=c.useAlphaMap,this.color.copy(c.color),this.opacity=c.opacity,this.resolution.copy(c.resolution),this.sizeAttenuation=c.sizeAttenuation,this.dashArray.copy(c.dashArray),this.dashOffset.copy(c.dashOffset),this.dashRatio.copy(c.dashRatio),this.useDash=c.useDash,this.visibility=c.visibility,this.alphaTest=c.alphaTest,this.repeat.copy(c.repeat),this},r.exports&&(e=r.exports={MeshLine:s,MeshLineMaterial:l,MeshLineRaycast:a}),e.MeshLine=s,e.MeshLineMaterial=l,e.MeshLineRaycast=a}).call(my)})(ju,ju.exports);var Nc=ju.exports;const Vs=(r,e)=>Math.random()*(e-r)+r;class yy extends ct{constructor({width:e=.1,speed:t=.01,visibleLength:n=.5,color:i=new Color("#000000"),opacity:s=1,position:a=new R(0,0,0),points:o=!1,length:l=2,nbrOfPoints:c=3,orientation:h=new R(1,0,0),turbulence:u=new R(0,0,0),transformLineMethod:f=!1}={}){let d=[];if(o)d=new Oe().setFromPoints(o);else{const v=new R,w=h.normalize().multiplyScalar(l/c);d.push(v.clone());for(let A=0;A<c-1;A++)v.add(w),d.push(v.clone().set(v.x+Vs(-u.x,u.x),v.y+Vs(-u.y,u.y),v.z+Vs(-u.z,u.z)));d.push(v.add(w).clone());const b=new uh(d);d=new Oe().setFromPoints(b.getPoints(50))}const m=new Nc.MeshLine;m.setGeometry(d,f);const g=m.geometry,p=2,_=0,y=1-n*.5,x=new Nc.MeshLineMaterial({lineWidth:e,dashArray:p,dashOffset:_,dashRatio:y,opacity:s,transparent:!0,depthWrite:!1,color:i});super(g,x),this.position.copy(a),this.speed=t,this.voidLength=p*y,this.dashLength=p-this.voidLength,this.dyingAt=1,this.diedAt=this.dyingAt+this.dashLength,this.update=this.update.bind(this)}update(){this.material.uniforms.dashOffset.value-=this.speed,this.isDying()&&(this.material.uniforms.opacity.value=.9+(this.material.uniforms.dashOffset.value+1)/this.dashLength)}isDied(){return this.material.uniforms.dashOffset.value<-this.diedAt}isDying(){return this.material.uniforms.dashOffset.value<-this.dyingAt}}class vy extends Xe{constructor({frequency:e=.1}={},t){super(),this.frequency=e,this.lineStaticProps=t,this.isStarted=!1,this.i=0,this.lines=[],this.nbrOfLines=-1,this.update=this.update.bind(this),this.start=this.start.bind(this),this.stop=this.stop.bind(this)}start(){this.isStarted=!0}stop(e){this.isStarted=!1}addLine(e){const t=new yy(Object.assign({},this.lineStaticProps,e));return this.lines.push(t),this.add(t),this.nbrOfLines++,t}removeLine(e){this.remove(e),this.nbrOfLines--}update(){for(this.isStarted&&Math.random()<this.frequency&&this.addLine(),this.i=this.nbrOfLines;this.i>=0;this.i--)this.lines[this.i].update();const e=[];for(this.i=this.nbrOfLines;this.i>=0;this.i--)this.lines[this.i].isDied()?this.removeLine(this.lines[this.i]):e.push(this.lines[this.i]);this.lines=e}}class My extends an{constructor(e){super(e)}load(e,t,n,i){const s=this,a=new Gn(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(o){const l=s.parse(JSON.parse(o));t&&t(l)},n,i)}parse(e){return new Sy(e)}}class Sy{constructor(e){this.isFont=!0,this.type="Font",this.data=e}generateShapes(e,t=100){const n=[],i=by(e,t,this.data);for(let s=0,a=i.length;s<a;s++)n.push(...i[s].toShapes());return n}}function by(r,e,t){const n=Array.from(r),i=e/t.resolution,s=(t.boundingBox.yMax-t.boundingBox.yMin+t.underlineThickness)*i,a=[];let o=0,l=0;for(let c=0;c<n.length;c++){const h=n[c];if(h===`
`)o=0,l-=s;else{const u=Ty(h,i,o,l,t);o+=u.offsetX,a.push(u.path)}}return a}function Ty(r,e,t,n,i){const s=i.glyphs[r]||i.glyphs["?"];if(!s){console.error('THREE.Font: character "'+r+'" does not exists in font family '+i.familyName+".");return}const a=new Xm;let o,l,c,h,u,f,d,m;if(s.o){const g=s._cachedOutline||(s._cachedOutline=s.o.split(" "));for(let p=0,_=g.length;p<_;)switch(g[p++]){case"m":o=g[p++]*e+t,l=g[p++]*e+n,a.moveTo(o,l);break;case"l":o=g[p++]*e+t,l=g[p++]*e+n,a.lineTo(o,l);break;case"q":c=g[p++]*e+t,h=g[p++]*e+n,u=g[p++]*e+t,f=g[p++]*e+n,a.quadraticCurveTo(u,f,c,h);break;case"b":c=g[p++]*e+t,h=g[p++]*e+n,u=g[p++]*e+t,f=g[p++]*e+n,d=g[p++]*e+t,m=g[p++]*e+n,a.bezierCurveTo(u,f,d,m,c,h);break}}return{offsetX:s.ha*e,path:a}}function Ei(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function n2(r,e){r.prototype=Object.create(e.prototype),r.prototype.constructor=r,r.__proto__=e}/*!
 * GSAP 3.12.5
 * https://gsap.com
 *
 * @license Copyright 2008-2024, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var Ln={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},ha={duration:.5,overwrite:!1,delay:0},md,nn,ft,Hn=1e8,ht=1/Hn,Qu=Math.PI*2,Ay=Qu/4,wy=0,i2=Math.sqrt,Ey=Math.cos,Ry=Math.sin,Vt=function(e){return typeof e=="string"},bt=function(e){return typeof e=="function"},Fi=function(e){return typeof e=="number"},gd=function(e){return typeof e>"u"},_i=function(e){return typeof e=="object"},xn=function(e){return e!==!1},_d=function(){return typeof window<"u"},Vl=function(e){return bt(e)||Vt(e)},s2=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},sn=Array.isArray,ef=/(?:-?\.?\d|\.)+/gi,r2=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,Wr=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,Tu=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,a2=/[+-]=-?[.\d]+/,o2=/[^,'"\[\]\s]+/gi,Cy=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,mt,ri,tf,xd,Nn={},Uc={},l2,c2=function(e){return(Uc=lr(e,Nn))&&Sn},yd=function(e,t){return console.warn("Invalid property",e,"set to",t,"Missing plugin? gsap.registerPlugin()")},bo=function(e,t){return!t&&console.warn(e)},h2=function(e,t){return e&&(Nn[e]=t)&&Uc&&(Uc[e]=t)||Nn},To=function(){return 0},Py={suppressEvents:!0,isStart:!0,kill:!1},Jl={suppressEvents:!0,kill:!1},Iy={suppressEvents:!0},vd={},ss=[],nf={},u2,En={},Au={},E1=30,jl=[],Md="",Sd=function(e){var t=e[0],n,i;if(_i(t)||bt(t)||(e=[e]),!(n=(t._gsap||{}).harness)){for(i=jl.length;i--&&!jl[i].targetTest(t););n=jl[i]}for(i=e.length;i--;)e[i]&&(e[i]._gsap||(e[i]._gsap=new N2(e[i],n)))||e.splice(i,1);return e},Js=function(e){return e._gsap||Sd(Vn(e))[0]._gsap},f2=function(e,t,n){return(n=e[t])&&bt(n)?e[t]():gd(n)&&e.getAttribute&&e.getAttribute(t)||n},yn=function(e,t){return(e=e.split(",")).forEach(t)||e},At=function(e){return Math.round(e*1e5)/1e5||0},zt=function(e){return Math.round(e*1e7)/1e7||0},Jr=function(e,t){var n=t.charAt(0),i=parseFloat(t.substr(2));return e=parseFloat(e),n==="+"?e+i:n==="-"?e-i:n==="*"?e*i:e/i},qy=function(e,t){for(var n=t.length,i=0;e.indexOf(t[i])<0&&++i<n;);return i<n},Oc=function(){var e=ss.length,t=ss.slice(0),n,i;for(nf={},ss.length=0,n=0;n<e;n++)i=t[n],i&&i._lazy&&(i.render(i._lazy[0],i._lazy[1],!0)._lazy=0)},d2=function(e,t,n,i){ss.length&&!nn&&Oc(),e.render(t,n,nn&&t<0&&(e._initted||e._startAt)),ss.length&&!nn&&Oc()},p2=function(e){var t=parseFloat(e);return(t||t===0)&&(e+"").match(o2).length<2?t:Vt(e)?e.trim():e},m2=function(e){return e},Wn=function(e,t){for(var n in t)n in e||(e[n]=t[n]);return e},Ly=function(e){return function(t,n){for(var i in n)i in t||i==="duration"&&e||i==="ease"||(t[i]=n[i])}},lr=function(e,t){for(var n in t)e[n]=t[n];return e},R1=function r(e,t){for(var n in t)n!=="__proto__"&&n!=="constructor"&&n!=="prototype"&&(e[n]=_i(t[n])?r(e[n]||(e[n]={}),t[n]):t[n]);return e},Fc=function(e,t){var n={},i;for(i in e)i in t||(n[i]=e[i]);return n},ja=function(e){var t=e.parent||mt,n=e.keyframes?Ly(sn(e.keyframes)):Wn;if(xn(e.inherit))for(;t;)n(e,t.vars.defaults),t=t.parent||t._dp;return e},Dy=function(e,t){for(var n=e.length,i=n===t.length;i&&n--&&e[n]===t[n];);return n<0},g2=function(e,t,n,i,s){var a=e[i],o;if(s)for(o=t[s];a&&a[s]>o;)a=a._prev;return a?(t._next=a._next,a._next=t):(t._next=e[n],e[n]=t),t._next?t._next._prev=t:e[i]=t,t._prev=a,t.parent=t._dp=e,t},Eh=function(e,t,n,i){n===void 0&&(n="_first"),i===void 0&&(i="_last");var s=t._prev,a=t._next;s?s._next=a:e[n]===t&&(e[n]=a),a?a._prev=s:e[i]===t&&(e[i]=s),t._next=t._prev=t.parent=null},hs=function(e,t){e.parent&&(!t||e.parent.autoRemoveChildren)&&e.parent.remove&&e.parent.remove(e),e._act=0},js=function(e,t){if(e&&(!t||t._end>e._dur||t._start<0))for(var n=e;n;)n._dirty=1,n=n.parent;return e},Ny=function(e){for(var t=e.parent;t&&t.parent;)t._dirty=1,t.totalDuration(),t=t.parent;return e},sf=function(e,t,n,i){return e._startAt&&(nn?e._startAt.revert(Jl):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(t,!0,i))},Uy=function r(e){return!e||e._ts&&r(e.parent)},C1=function(e){return e._repeat?ua(e._tTime,e=e.duration()+e._rDelay)*e:0},ua=function(e,t){var n=Math.floor(e/=t);return e&&n===e?n-1:n},Bc=function(e,t){return(e-t._start)*t._ts+(t._ts>=0?0:t._dirty?t.totalDuration():t._tDur)},Rh=function(e){return e._end=zt(e._start+(e._tDur/Math.abs(e._ts||e._rts||ht)||0))},Ch=function(e,t){var n=e._dp;return n&&n.smoothChildTiming&&e._ts&&(e._start=zt(n._time-(e._ts>0?t/e._ts:((e._dirty?e.totalDuration():e._tDur)-t)/-e._ts)),Rh(e),n._dirty||js(n,e)),e},_2=function(e,t){var n;if((t._time||!t._dur&&t._initted||t._start<e._time&&(t._dur||!t.add))&&(n=Bc(e.rawTime(),t),(!t._dur||Wo(0,t.totalDuration(),n)-t._tTime>ht)&&t.render(n,!0)),js(e,t)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(n=e;n._dp;)n.rawTime()>=0&&n.totalTime(n._tTime),n=n._dp;e._zTime=-ht}},ai=function(e,t,n,i){return t.parent&&hs(t),t._start=zt((Fi(n)?n:n||e!==mt?Fn(e,n,t):e._time)+t._delay),t._end=zt(t._start+(t.totalDuration()/Math.abs(t.timeScale())||0)),g2(e,t,"_first","_last",e._sort?"_start":0),rf(t)||(e._recent=t),i||_2(e,t),e._ts<0&&Ch(e,e._tTime),e},x2=function(e,t){return(Nn.ScrollTrigger||yd("scrollTrigger",t))&&Nn.ScrollTrigger.create(t,e)},y2=function(e,t,n,i,s){if(Td(e,t,s),!e._initted)return 1;if(!n&&e._pt&&!nn&&(e._dur&&e.vars.lazy!==!1||!e._dur&&e.vars.lazy)&&u2!==Cn.frame)return ss.push(e),e._lazy=[s,i],1},Oy=function r(e){var t=e.parent;return t&&t._ts&&t._initted&&!t._lock&&(t.rawTime()<0||r(t))},rf=function(e){var t=e.data;return t==="isFromStart"||t==="isStart"},Fy=function(e,t,n,i){var s=e.ratio,a=t<0||!t&&(!e._start&&Oy(e)&&!(!e._initted&&rf(e))||(e._ts<0||e._dp._ts<0)&&!rf(e))?0:1,o=e._rDelay,l=0,c,h,u;if(o&&e._repeat&&(l=Wo(0,e._tDur,t),h=ua(l,o),e._yoyo&&h&1&&(a=1-a),h!==ua(e._tTime,o)&&(s=1-a,e.vars.repeatRefresh&&e._initted&&e.invalidate())),a!==s||nn||i||e._zTime===ht||!t&&e._zTime){if(!e._initted&&y2(e,t,i,n,l))return;for(u=e._zTime,e._zTime=t||(n?ht:0),n||(n=t&&!u),e.ratio=a,e._from&&(a=1-a),e._time=0,e._tTime=l,c=e._pt;c;)c.r(a,c.d),c=c._next;t<0&&sf(e,t,n,!0),e._onUpdate&&!n&&In(e,"onUpdate"),l&&e._repeat&&!n&&e.parent&&In(e,"onRepeat"),(t>=e._tDur||t<0)&&e.ratio===a&&(a&&hs(e,1),!n&&!nn&&(In(e,a?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=t)},By=function(e,t,n){var i;if(n>t)for(i=e._first;i&&i._start<=n;){if(i.data==="isPause"&&i._start>t)return i;i=i._next}else for(i=e._last;i&&i._start>=n;){if(i.data==="isPause"&&i._start<t)return i;i=i._prev}},fa=function(e,t,n,i){var s=e._repeat,a=zt(t)||0,o=e._tTime/e._tDur;return o&&!i&&(e._time*=a/e._dur),e._dur=a,e._tDur=s?s<0?1e10:zt(a*(s+1)+e._rDelay*s):a,o>0&&!i&&Ch(e,e._tTime=e._tDur*o),e.parent&&Rh(e),n||js(e.parent,e),e},P1=function(e){return e instanceof en?js(e):fa(e,e._dur)},zy={_start:0,endTime:To,totalDuration:To},Fn=function r(e,t,n){var i=e.labels,s=e._recent||zy,a=e.duration()>=Hn?s.endTime(!1):e._dur,o,l,c;return Vt(t)&&(isNaN(t)||t in i)?(l=t.charAt(0),c=t.substr(-1)==="%",o=t.indexOf("="),l==="<"||l===">"?(o>=0&&(t=t.replace(/=/,"")),(l==="<"?s._start:s.endTime(s._repeat>=0))+(parseFloat(t.substr(1))||0)*(c?(o<0?s:n).totalDuration()/100:1)):o<0?(t in i||(i[t]=a),i[t]):(l=parseFloat(t.charAt(o-1)+t.substr(o+1)),c&&n&&(l=l/100*(sn(n)?n[0]:n).totalDuration()),o>1?r(e,t.substr(0,o-1),n)+l:a+l)):t==null?a:+t},Qa=function(e,t,n){var i=Fi(t[1]),s=(i?2:1)+(e<2?0:1),a=t[s],o,l;if(i&&(a.duration=t[1]),a.parent=n,e){for(o=a,l=n;l&&!("immediateRender"in o);)o=l.vars.defaults||{},l=xn(l.vars.inherit)&&l.parent;a.immediateRender=xn(o.immediateRender),e<2?a.runBackwards=1:a.startAt=t[s-1]}return new It(t[0],a,t[s+1])},ms=function(e,t){return e||e===0?t(e):t},Wo=function(e,t,n){return n<e?e:n>t?t:n},Qt=function(e,t){return!Vt(e)||!(t=Cy.exec(e))?"":t[1]},ky=function(e,t,n){return ms(n,function(i){return Wo(e,t,i)})},af=[].slice,v2=function(e,t){return e&&_i(e)&&"length"in e&&(!t&&!e.length||e.length-1 in e&&_i(e[0]))&&!e.nodeType&&e!==ri},Hy=function(e,t,n){return n===void 0&&(n=[]),e.forEach(function(i){var s;return Vt(i)&&!t||v2(i,1)?(s=n).push.apply(s,Vn(i)):n.push(i)})||n},Vn=function(e,t,n){return ft&&!t&&ft.selector?ft.selector(e):Vt(e)&&!n&&(tf||!da())?af.call((t||xd).querySelectorAll(e),0):sn(e)?Hy(e,n):v2(e)?af.call(e,0):e?[e]:[]},of=function(e){return e=Vn(e)[0]||bo("Invalid scope")||{},function(t){var n=e.current||e.nativeElement||e;return Vn(t,n.querySelectorAll?n:n===e?bo("Invalid scope")||xd.createElement("div"):e)}},M2=function(e){return e.sort(function(){return .5-Math.random()})},S2=function(e){if(bt(e))return e;var t=_i(e)?e:{each:e},n=Qs(t.ease),i=t.from||0,s=parseFloat(t.base)||0,a={},o=i>0&&i<1,l=isNaN(i)||o,c=t.axis,h=i,u=i;return Vt(i)?h=u={center:.5,edges:.5,end:1}[i]||0:!o&&l&&(h=i[0],u=i[1]),function(f,d,m){var g=(m||t).length,p=a[g],_,y,x,v,w,b,A,C,M;if(!p){if(M=t.grid==="auto"?0:(t.grid||[1,Hn])[1],!M){for(A=-Hn;A<(A=m[M++].getBoundingClientRect().left)&&M<g;);M<g&&M--}for(p=a[g]=[],_=l?Math.min(M,g)*h-.5:i%M,y=M===Hn?0:l?g*u/M-.5:i/M|0,A=0,C=Hn,b=0;b<g;b++)x=b%M-_,v=y-(b/M|0),p[b]=w=c?Math.abs(c==="y"?v:x):i2(x*x+v*v),w>A&&(A=w),w<C&&(C=w);i==="random"&&M2(p),p.max=A-C,p.min=C,p.v=g=(parseFloat(t.amount)||parseFloat(t.each)*(M>g?g-1:c?c==="y"?g/M:M:Math.max(M,g/M))||0)*(i==="edges"?-1:1),p.b=g<0?s-g:s,p.u=Qt(t.amount||t.each)||0,n=n&&g<0?q2(n):n}return g=(p[f]-p.min)/p.max||0,zt(p.b+(n?n(g):g)*p.v)+p.u}},lf=function(e){var t=Math.pow(10,((e+"").split(".")[1]||"").length);return function(n){var i=zt(Math.round(parseFloat(n)/e)*e*t);return(i-i%1)/t+(Fi(n)?0:Qt(n))}},b2=function(e,t){var n=sn(e),i,s;return!n&&_i(e)&&(i=n=e.radius||Hn,e.values?(e=Vn(e.values),(s=!Fi(e[0]))&&(i*=i)):e=lf(e.increment)),ms(t,n?bt(e)?function(a){return s=e(a),Math.abs(s-a)<=i?s:a}:function(a){for(var o=parseFloat(s?a.x:a),l=parseFloat(s?a.y:0),c=Hn,h=0,u=e.length,f,d;u--;)s?(f=e[u].x-o,d=e[u].y-l,f=f*f+d*d):f=Math.abs(e[u]-o),f<c&&(c=f,h=u);return h=!i||c<=i?e[h]:a,s||h===a||Fi(a)?h:h+Qt(a)}:lf(e))},T2=function(e,t,n,i){return ms(sn(e)?!t:n===!0?!!(n=0):!i,function(){return sn(e)?e[~~(Math.random()*e.length)]:(n=n||1e-5)&&(i=n<1?Math.pow(10,(n+"").length-2):1)&&Math.floor(Math.round((e-n/2+Math.random()*(t-e+n*.99))/n)*n*i)/i})},Vy=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(i){return t.reduce(function(s,a){return a(s)},i)}},Gy=function(e,t){return function(n){return e(parseFloat(n))+(t||Qt(n))}},Wy=function(e,t,n){return w2(e,t,0,1,n)},A2=function(e,t,n){return ms(n,function(i){return e[~~t(i)]})},Xy=function r(e,t,n){var i=t-e;return sn(e)?A2(e,r(0,e.length),t):ms(n,function(s){return(i+(s-e)%i)%i+e})},Yy=function r(e,t,n){var i=t-e,s=i*2;return sn(e)?A2(e,r(0,e.length-1),t):ms(n,function(a){return a=(s+(a-e)%s)%s||0,e+(a>i?s-a:a)})},Ao=function(e){for(var t=0,n="",i,s,a,o;~(i=e.indexOf("random(",t));)a=e.indexOf(")",i),o=e.charAt(i+7)==="[",s=e.substr(i+7,a-i-7).match(o?o2:ef),n+=e.substr(t,i-t)+T2(o?s:+s[0],o?0:+s[1],+s[2]||1e-5),t=a+1;return n+e.substr(t,e.length-t)},w2=function(e,t,n,i,s){var a=t-e,o=i-n;return ms(s,function(l){return n+((l-e)/a*o||0)})},Ky=function r(e,t,n,i){var s=isNaN(e+t)?0:function(d){return(1-d)*e+d*t};if(!s){var a=Vt(e),o={},l,c,h,u,f;if(n===!0&&(i=1)&&(n=null),a)e={p:e},t={p:t};else if(sn(e)&&!sn(t)){for(h=[],u=e.length,f=u-2,c=1;c<u;c++)h.push(r(e[c-1],e[c]));u--,s=function(m){m*=u;var g=Math.min(f,~~m);return h[g](m-g)},n=t}else i||(e=lr(sn(e)?[]:{},e));if(!h){for(l in t)bd.call(o,e,l,"get",t[l]);s=function(m){return Ed(m,o)||(a?e.p:e)}}}return ms(n,s)},I1=function(e,t,n){var i=e.labels,s=Hn,a,o,l;for(a in i)o=i[a]-t,o<0==!!n&&o&&s>(o=Math.abs(o))&&(l=a,s=o);return l},In=function(e,t,n){var i=e.vars,s=i[t],a=ft,o=e._ctx,l,c,h;if(s)return l=i[t+"Params"],c=i.callbackScope||e,n&&ss.length&&Oc(),o&&(ft=o),h=l?s.apply(c,l):s.call(c),ft=a,h},za=function(e){return hs(e),e.scrollTrigger&&e.scrollTrigger.kill(!!nn),e.progress()<1&&In(e,"onInterrupt"),e},Xr,E2=[],R2=function(e){if(e)if(e=!e.name&&e.default||e,_d()||e.headless){var t=e.name,n=bt(e),i=t&&!n&&e.init?function(){this._props=[]}:e,s={init:To,render:Ed,add:bd,kill:hv,modifier:cv,rawVars:0},a={targetTest:0,get:0,getSetter:wd,aliases:{},register:0};if(da(),e!==i){if(En[t])return;Wn(i,Wn(Fc(e,s),a)),lr(i.prototype,lr(s,Fc(e,a))),En[i.prop=t]=i,e.targetTest&&(jl.push(i),vd[t]=1),t=(t==="css"?"CSS":t.charAt(0).toUpperCase()+t.substr(1))+"Plugin"}h2(t,i),e.register&&e.register(Sn,i,vn)}else E2.push(e)},lt=255,ka={aqua:[0,lt,lt],lime:[0,lt,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,lt],navy:[0,0,128],white:[lt,lt,lt],olive:[128,128,0],yellow:[lt,lt,0],orange:[lt,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[lt,0,0],pink:[lt,192,203],cyan:[0,lt,lt],transparent:[lt,lt,lt,0]},wu=function(e,t,n){return e+=e<0?1:e>1?-1:0,(e*6<1?t+(n-t)*e*6:e<.5?n:e*3<2?t+(n-t)*(2/3-e)*6:t)*lt+.5|0},C2=function(e,t,n){var i=e?Fi(e)?[e>>16,e>>8&lt,e&lt]:0:ka.black,s,a,o,l,c,h,u,f,d,m;if(!i){if(e.substr(-1)===","&&(e=e.substr(0,e.length-1)),ka[e])i=ka[e];else if(e.charAt(0)==="#"){if(e.length<6&&(s=e.charAt(1),a=e.charAt(2),o=e.charAt(3),e="#"+s+s+a+a+o+o+(e.length===5?e.charAt(4)+e.charAt(4):"")),e.length===9)return i=parseInt(e.substr(1,6),16),[i>>16,i>>8&lt,i&lt,parseInt(e.substr(7),16)/255];e=parseInt(e.substr(1),16),i=[e>>16,e>>8&lt,e&lt]}else if(e.substr(0,3)==="hsl"){if(i=m=e.match(ef),!t)l=+i[0]%360/360,c=+i[1]/100,h=+i[2]/100,a=h<=.5?h*(c+1):h+c-h*c,s=h*2-a,i.length>3&&(i[3]*=1),i[0]=wu(l+1/3,s,a),i[1]=wu(l,s,a),i[2]=wu(l-1/3,s,a);else if(~e.indexOf("="))return i=e.match(r2),n&&i.length<4&&(i[3]=1),i}else i=e.match(ef)||ka.transparent;i=i.map(Number)}return t&&!m&&(s=i[0]/lt,a=i[1]/lt,o=i[2]/lt,u=Math.max(s,a,o),f=Math.min(s,a,o),h=(u+f)/2,u===f?l=c=0:(d=u-f,c=h>.5?d/(2-u-f):d/(u+f),l=u===s?(a-o)/d+(a<o?6:0):u===a?(o-s)/d+2:(s-a)/d+4,l*=60),i[0]=~~(l+.5),i[1]=~~(c*100+.5),i[2]=~~(h*100+.5)),n&&i.length<4&&(i[3]=1),i},P2=function(e){var t=[],n=[],i=-1;return e.split(rs).forEach(function(s){var a=s.match(Wr)||[];t.push.apply(t,a),n.push(i+=a.length+1)}),t.c=n,t},q1=function(e,t,n){var i="",s=(e+i).match(rs),a=t?"hsla(":"rgba(",o=0,l,c,h,u;if(!s)return e;if(s=s.map(function(f){return(f=C2(f,t,1))&&a+(t?f[0]+","+f[1]+"%,"+f[2]+"%,"+f[3]:f.join(","))+")"}),n&&(h=P2(e),l=n.c,l.join(i)!==h.c.join(i)))for(c=e.replace(rs,"1").split(Wr),u=c.length-1;o<u;o++)i+=c[o]+(~l.indexOf(o)?s.shift()||a+"0,0,0,0)":(h.length?h:s.length?s:n).shift());if(!c)for(c=e.split(rs),u=c.length-1;o<u;o++)i+=c[o]+s[o];return i+c[u]},rs=function(){var r="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",e;for(e in ka)r+="|"+e+"\\b";return new RegExp(r+")","gi")}(),Zy=/hsl[a]?\(/,I2=function(e){var t=e.join(" "),n;if(rs.lastIndex=0,rs.test(t))return n=Zy.test(t),e[1]=q1(e[1],n),e[0]=q1(e[0],n,P2(e[1])),!0},wo,Cn=function(){var r=Date.now,e=500,t=33,n=r(),i=n,s=1e3/240,a=s,o=[],l,c,h,u,f,d,m=function g(p){var _=r()-i,y=p===!0,x,v,w,b;if((_>e||_<0)&&(n+=_-t),i+=_,w=i-n,x=w-a,(x>0||y)&&(b=++u.frame,f=w-u.time*1e3,u.time=w=w/1e3,a+=x+(x>=s?4:s-x),v=1),y||(l=c(g)),v)for(d=0;d<o.length;d++)o[d](w,f,b,p)};return u={time:0,frame:0,tick:function(){m(!0)},deltaRatio:function(p){return f/(1e3/(p||60))},wake:function(){l2&&(!tf&&_d()&&(ri=tf=window,xd=ri.document||{},Nn.gsap=Sn,(ri.gsapVersions||(ri.gsapVersions=[])).push(Sn.version),c2(Uc||ri.GreenSockGlobals||!ri.gsap&&ri||{}),E2.forEach(R2)),h=typeof requestAnimationFrame<"u"&&requestAnimationFrame,l&&u.sleep(),c=h||function(p){return setTimeout(p,a-u.time*1e3+1|0)},wo=1,m(2))},sleep:function(){(h?cancelAnimationFrame:clearTimeout)(l),wo=0,c=To},lagSmoothing:function(p,_){e=p||1/0,t=Math.min(_||33,e)},fps:function(p){s=1e3/(p||240),a=u.time*1e3+s},add:function(p,_,y){var x=_?function(v,w,b,A){p(v,w,b,A),u.remove(x)}:p;return u.remove(p),o[y?"unshift":"push"](x),da(),x},remove:function(p,_){~(_=o.indexOf(p))&&o.splice(_,1)&&d>=_&&d--},_listeners:o},u}(),da=function(){return!wo&&Cn.wake()},Ke={},$y=/^[\d.\-M][\d.\-,\s]/,Jy=/["']/g,jy=function(e){for(var t={},n=e.substr(1,e.length-3).split(":"),i=n[0],s=1,a=n.length,o,l,c;s<a;s++)l=n[s],o=s!==a-1?l.lastIndexOf(","):l.length,c=l.substr(0,o),t[i]=isNaN(c)?c.replace(Jy,"").trim():+c,i=l.substr(o+1).trim();return t},Qy=function(e){var t=e.indexOf("(")+1,n=e.indexOf(")"),i=e.indexOf("(",t);return e.substring(t,~i&&i<n?e.indexOf(")",n+1):n)},ev=function(e){var t=(e+"").split("("),n=Ke[t[0]];return n&&t.length>1&&n.config?n.config.apply(null,~e.indexOf("{")?[jy(t[1])]:Qy(e).split(",").map(p2)):Ke._CE&&$y.test(e)?Ke._CE("",e):n},q2=function(e){return function(t){return 1-e(1-t)}},L2=function r(e,t){for(var n=e._first,i;n;)n instanceof en?r(n,t):n.vars.yoyoEase&&(!n._yoyo||!n._repeat)&&n._yoyo!==t&&(n.timeline?r(n.timeline,t):(i=n._ease,n._ease=n._yEase,n._yEase=i,n._yoyo=t)),n=n._next},Qs=function(e,t){return e&&(bt(e)?e:Ke[e]||ev(e))||t},_r=function(e,t,n,i){n===void 0&&(n=function(l){return 1-t(1-l)}),i===void 0&&(i=function(l){return l<.5?t(l*2)/2:1-t((1-l)*2)/2});var s={easeIn:t,easeOut:n,easeInOut:i},a;return yn(e,function(o){Ke[o]=Nn[o]=s,Ke[a=o.toLowerCase()]=n;for(var l in s)Ke[a+(l==="easeIn"?".in":l==="easeOut"?".out":".inOut")]=Ke[o+"."+l]=s[l]}),s},D2=function(e){return function(t){return t<.5?(1-e(1-t*2))/2:.5+e((t-.5)*2)/2}},Eu=function r(e,t,n){var i=t>=1?t:1,s=(n||(e?.3:.45))/(t<1?t:1),a=s/Qu*(Math.asin(1/i)||0),o=function(h){return h===1?1:i*Math.pow(2,-10*h)*Ry((h-a)*s)+1},l=e==="out"?o:e==="in"?function(c){return 1-o(1-c)}:D2(o);return s=Qu/s,l.config=function(c,h){return r(e,c,h)},l},Ru=function r(e,t){t===void 0&&(t=1.70158);var n=function(a){return a?--a*a*((t+1)*a+t)+1:0},i=e==="out"?n:e==="in"?function(s){return 1-n(1-s)}:D2(n);return i.config=function(s){return r(e,s)},i};yn("Linear,Quad,Cubic,Quart,Quint,Strong",function(r,e){var t=e<5?e+1:e;_r(r+",Power"+(t-1),e?function(n){return Math.pow(n,t)}:function(n){return n},function(n){return 1-Math.pow(1-n,t)},function(n){return n<.5?Math.pow(n*2,t)/2:1-Math.pow((1-n)*2,t)/2})});Ke.Linear.easeNone=Ke.none=Ke.Linear.easeIn;_r("Elastic",Eu("in"),Eu("out"),Eu());(function(r,e){var t=1/e,n=2*t,i=2.5*t,s=function(o){return o<t?r*o*o:o<n?r*Math.pow(o-1.5/e,2)+.75:o<i?r*(o-=2.25/e)*o+.9375:r*Math.pow(o-2.625/e,2)+.984375};_r("Bounce",function(a){return 1-s(1-a)},s)})(7.5625,2.75);_r("Expo",function(r){return r?Math.pow(2,10*(r-1)):0});_r("Circ",function(r){return-(i2(1-r*r)-1)});_r("Sine",function(r){return r===1?1:-Ey(r*Ay)+1});_r("Back",Ru("in"),Ru("out"),Ru());Ke.SteppedEase=Ke.steps=Nn.SteppedEase={config:function(e,t){e===void 0&&(e=1);var n=1/e,i=e+(t?0:1),s=t?1:0,a=1-ht;return function(o){return((i*Wo(0,a,o)|0)+s)*n}}};ha.ease=Ke["quad.out"];yn("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(r){return Md+=r+","+r+"Params,"});var N2=function(e,t){this.id=wy++,e._gsap=this,this.target=e,this.harness=t,this.get=t?t.get:f2,this.set=t?t.getSetter:wd},Eo=function(){function r(t){this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat===1/0?-2:t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,fa(this,+t.duration,1,1),this.data=t.data,ft&&(this._ctx=ft,ft.data.push(this)),wo||Cn.wake()}var e=r.prototype;return e.delay=function(n){return n||n===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+n-this._delay),this._delay=n,this):this._delay},e.duration=function(n){return arguments.length?this.totalDuration(this._repeat>0?n+(n+this._rDelay)*this._repeat:n):this.totalDuration()&&this._dur},e.totalDuration=function(n){return arguments.length?(this._dirty=0,fa(this,this._repeat<0?n:(n-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(n,i){if(da(),!arguments.length)return this._tTime;var s=this._dp;if(s&&s.smoothChildTiming&&this._ts){for(Ch(this,n),!s._dp||s.parent||_2(s,this);s&&s.parent;)s.parent._time!==s._start+(s._ts>=0?s._tTime/s._ts:(s.totalDuration()-s._tTime)/-s._ts)&&s.totalTime(s._tTime,!0),s=s.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&n<this._tDur||this._ts<0&&n>0||!this._tDur&&!n)&&ai(this._dp,this,this._start-this._delay)}return(this._tTime!==n||!this._dur&&!i||this._initted&&Math.abs(this._zTime)===ht||!n&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=n),d2(this,n,i)),this},e.time=function(n,i){return arguments.length?this.totalTime(Math.min(this.totalDuration(),n+C1(this))%(this._dur+this._rDelay)||(n?this._dur:0),i):this._time},e.totalProgress=function(n,i){return arguments.length?this.totalTime(this.totalDuration()*n,i):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>0?1:0},e.progress=function(n,i){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-n:n)+C1(this),i):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},e.iteration=function(n,i){var s=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(n-1)*s,i):this._repeat?ua(this._tTime,s)+1:1},e.timeScale=function(n,i){if(!arguments.length)return this._rts===-ht?0:this._rts;if(this._rts===n)return this;var s=this.parent&&this._ts?Bc(this.parent._time,this):this._tTime;return this._rts=+n||0,this._ts=this._ps||n===-ht?0:this._rts,this.totalTime(Wo(-Math.abs(this._delay),this._tDur,s),i!==!1),Rh(this),Ny(this)},e.paused=function(n){return arguments.length?(this._ps!==n&&(this._ps=n,n?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(da(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==ht&&(this._tTime-=ht)))),this):this._ps},e.startTime=function(n){if(arguments.length){this._start=n;var i=this.parent||this._dp;return i&&(i._sort||!this.parent)&&ai(i,this,n-this._delay),this}return this._start},e.endTime=function(n){return this._start+(xn(n)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(n){var i=this.parent||this._dp;return i?n&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?Bc(i.rawTime(n),this):this._tTime:this._tTime},e.revert=function(n){n===void 0&&(n=Iy);var i=nn;return nn=n,(this._initted||this._startAt)&&(this.timeline&&this.timeline.revert(n),this.totalTime(-.01,n.suppressEvents)),this.data!=="nested"&&n.kill!==!1&&this.kill(),nn=i,this},e.globalTime=function(n){for(var i=this,s=arguments.length?n:i.rawTime();i;)s=i._start+s/(Math.abs(i._ts)||1),i=i._dp;return!this.parent&&this._sat?this._sat.globalTime(n):s},e.repeat=function(n){return arguments.length?(this._repeat=n===1/0?-2:n,P1(this)):this._repeat===-2?1/0:this._repeat},e.repeatDelay=function(n){if(arguments.length){var i=this._time;return this._rDelay=n,P1(this),i?this.time(i):this}return this._rDelay},e.yoyo=function(n){return arguments.length?(this._yoyo=n,this):this._yoyo},e.seek=function(n,i){return this.totalTime(Fn(this,n),xn(i))},e.restart=function(n,i){return this.play().totalTime(n?-this._delay:0,xn(i))},e.play=function(n,i){return n!=null&&this.seek(n,i),this.reversed(!1).paused(!1)},e.reverse=function(n,i){return n!=null&&this.seek(n||this.totalDuration(),i),this.reversed(!0).paused(!1)},e.pause=function(n,i){return n!=null&&this.seek(n,i),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(n){return arguments.length?(!!n!==this.reversed()&&this.timeScale(-this._rts||(n?-ht:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-ht,this},e.isActive=function(){var n=this.parent||this._dp,i=this._start,s;return!!(!n||this._ts&&this._initted&&n.isActive()&&(s=n.rawTime(!0))>=i&&s<this.endTime(!0)-ht)},e.eventCallback=function(n,i,s){var a=this.vars;return arguments.length>1?(i?(a[n]=i,s&&(a[n+"Params"]=s),n==="onUpdate"&&(this._onUpdate=i)):delete a[n],this):a[n]},e.then=function(n){var i=this;return new Promise(function(s){var a=bt(n)?n:m2,o=function(){var c=i.then;i.then=null,bt(a)&&(a=a(i))&&(a.then||a===i)&&(i.then=c),s(a),i.then=c};i._initted&&i.totalProgress()===1&&i._ts>=0||!i._tTime&&i._ts<0?o():i._prom=o})},e.kill=function(){za(this)},r}();Wn(Eo.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-ht,_prom:0,_ps:!1,_rts:1});var en=function(r){n2(e,r);function e(n,i){var s;return n===void 0&&(n={}),s=r.call(this,n)||this,s.labels={},s.smoothChildTiming=!!n.smoothChildTiming,s.autoRemoveChildren=!!n.autoRemoveChildren,s._sort=xn(n.sortChildren),mt&&ai(n.parent||mt,Ei(s),i),n.reversed&&s.reverse(),n.paused&&s.paused(!0),n.scrollTrigger&&x2(Ei(s),n.scrollTrigger),s}var t=e.prototype;return t.to=function(i,s,a){return Qa(0,arguments,this),this},t.from=function(i,s,a){return Qa(1,arguments,this),this},t.fromTo=function(i,s,a,o){return Qa(2,arguments,this),this},t.set=function(i,s,a){return s.duration=0,s.parent=this,ja(s).repeatDelay||(s.repeat=0),s.immediateRender=!!s.immediateRender,new It(i,s,Fn(this,a),1),this},t.call=function(i,s,a){return ai(this,It.delayedCall(0,i,s),a)},t.staggerTo=function(i,s,a,o,l,c,h){return a.duration=s,a.stagger=a.stagger||o,a.onComplete=c,a.onCompleteParams=h,a.parent=this,new It(i,a,Fn(this,l)),this},t.staggerFrom=function(i,s,a,o,l,c,h){return a.runBackwards=1,ja(a).immediateRender=xn(a.immediateRender),this.staggerTo(i,s,a,o,l,c,h)},t.staggerFromTo=function(i,s,a,o,l,c,h,u){return o.startAt=a,ja(o).immediateRender=xn(o.immediateRender),this.staggerTo(i,s,o,l,c,h,u)},t.render=function(i,s,a){var o=this._time,l=this._dirty?this.totalDuration():this._tDur,c=this._dur,h=i<=0?0:zt(i),u=this._zTime<0!=i<0&&(this._initted||!c),f,d,m,g,p,_,y,x,v,w,b,A;if(this!==mt&&h>l&&i>=0&&(h=l),h!==this._tTime||a||u){if(o!==this._time&&c&&(h+=this._time-o,i+=this._time-o),f=h,v=this._start,x=this._ts,_=!x,u&&(c||(o=this._zTime),(i||!s)&&(this._zTime=i)),this._repeat){if(b=this._yoyo,p=c+this._rDelay,this._repeat<-1&&i<0)return this.totalTime(p*100+i,s,a);if(f=zt(h%p),h===l?(g=this._repeat,f=c):(g=~~(h/p),g&&g===h/p&&(f=c,g--),f>c&&(f=c)),w=ua(this._tTime,p),!o&&this._tTime&&w!==g&&this._tTime-w*p-this._dur<=0&&(w=g),b&&g&1&&(f=c-f,A=1),g!==w&&!this._lock){var C=b&&w&1,M=C===(b&&g&1);if(g<w&&(C=!C),o=C?0:h%c?c:h,this._lock=1,this.render(o||(A?0:zt(g*p)),s,!c)._lock=0,this._tTime=h,!s&&this.parent&&In(this,"onRepeat"),this.vars.repeatRefresh&&!A&&(this.invalidate()._lock=1),o&&o!==this._time||_!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(c=this._dur,l=this._tDur,M&&(this._lock=2,o=C?c:-1e-4,this.render(o,!0),this.vars.repeatRefresh&&!A&&this.invalidate()),this._lock=0,!this._ts&&!_)return this;L2(this,A)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(y=By(this,zt(o),zt(f)),y&&(h-=f-(f=y._start))),this._tTime=h,this._time=f,this._act=!x,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=i,o=0),!o&&f&&!s&&!g&&(In(this,"onStart"),this._tTime!==h))return this;if(f>=o&&i>=0)for(d=this._first;d;){if(m=d._next,(d._act||f>=d._start)&&d._ts&&y!==d){if(d.parent!==this)return this.render(i,s,a);if(d.render(d._ts>0?(f-d._start)*d._ts:(d._dirty?d.totalDuration():d._tDur)+(f-d._start)*d._ts,s,a),f!==this._time||!this._ts&&!_){y=0,m&&(h+=this._zTime=-ht);break}}d=m}else{d=this._last;for(var S=i<0?i:f;d;){if(m=d._prev,(d._act||S<=d._end)&&d._ts&&y!==d){if(d.parent!==this)return this.render(i,s,a);if(d.render(d._ts>0?(S-d._start)*d._ts:(d._dirty?d.totalDuration():d._tDur)+(S-d._start)*d._ts,s,a||nn&&(d._initted||d._startAt)),f!==this._time||!this._ts&&!_){y=0,m&&(h+=this._zTime=S?-ht:ht);break}}d=m}}if(y&&!s&&(this.pause(),y.render(f>=o?0:-ht)._zTime=f>=o?1:-1,this._ts))return this._start=v,Rh(this),this.render(i,s,a);this._onUpdate&&!s&&In(this,"onUpdate",!0),(h===l&&this._tTime>=this.totalDuration()||!h&&o)&&(v===this._start||Math.abs(x)!==Math.abs(this._ts))&&(this._lock||((i||!c)&&(h===l&&this._ts>0||!h&&this._ts<0)&&hs(this,1),!s&&!(i<0&&!o)&&(h||o||!l)&&(In(this,h===l&&i>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(h<l&&this.timeScale()>0)&&this._prom())))}return this},t.add=function(i,s){var a=this;if(Fi(s)||(s=Fn(this,s,i)),!(i instanceof Eo)){if(sn(i))return i.forEach(function(o){return a.add(o,s)}),this;if(Vt(i))return this.addLabel(i,s);if(bt(i))i=It.delayedCall(0,i);else return this}return this!==i?ai(this,i,s):this},t.getChildren=function(i,s,a,o){i===void 0&&(i=!0),s===void 0&&(s=!0),a===void 0&&(a=!0),o===void 0&&(o=-Hn);for(var l=[],c=this._first;c;)c._start>=o&&(c instanceof It?s&&l.push(c):(a&&l.push(c),i&&l.push.apply(l,c.getChildren(!0,s,a)))),c=c._next;return l},t.getById=function(i){for(var s=this.getChildren(1,1,1),a=s.length;a--;)if(s[a].vars.id===i)return s[a]},t.remove=function(i){return Vt(i)?this.removeLabel(i):bt(i)?this.killTweensOf(i):(Eh(this,i),i===this._recent&&(this._recent=this._last),js(this))},t.totalTime=function(i,s){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=zt(Cn.time-(this._ts>0?i/this._ts:(this.totalDuration()-i)/-this._ts))),r.prototype.totalTime.call(this,i,s),this._forcing=0,this):this._tTime},t.addLabel=function(i,s){return this.labels[i]=Fn(this,s),this},t.removeLabel=function(i){return delete this.labels[i],this},t.addPause=function(i,s,a){var o=It.delayedCall(0,s||To,a);return o.data="isPause",this._hasPause=1,ai(this,o,Fn(this,i))},t.removePause=function(i){var s=this._first;for(i=Fn(this,i);s;)s._start===i&&s.data==="isPause"&&hs(s),s=s._next},t.killTweensOf=function(i,s,a){for(var o=this.getTweensOf(i,a),l=o.length;l--;)es!==o[l]&&o[l].kill(i,s);return this},t.getTweensOf=function(i,s){for(var a=[],o=Vn(i),l=this._first,c=Fi(s),h;l;)l instanceof It?qy(l._targets,o)&&(c?(!es||l._initted&&l._ts)&&l.globalTime(0)<=s&&l.globalTime(l.totalDuration())>s:!s||l.isActive())&&a.push(l):(h=l.getTweensOf(o,s)).length&&a.push.apply(a,h),l=l._next;return a},t.tweenTo=function(i,s){s=s||{};var a=this,o=Fn(a,i),l=s,c=l.startAt,h=l.onStart,u=l.onStartParams,f=l.immediateRender,d,m=It.to(a,Wn({ease:s.ease||"none",lazy:!1,immediateRender:!1,time:o,overwrite:"auto",duration:s.duration||Math.abs((o-(c&&"time"in c?c.time:a._time))/a.timeScale())||ht,onStart:function(){if(a.pause(),!d){var p=s.duration||Math.abs((o-(c&&"time"in c?c.time:a._time))/a.timeScale());m._dur!==p&&fa(m,p,0,1).render(m._time,!0,!0),d=1}h&&h.apply(m,u||[])}},s));return f?m.render(0):m},t.tweenFromTo=function(i,s,a){return this.tweenTo(s,Wn({startAt:{time:Fn(this,i)}},a))},t.recent=function(){return this._recent},t.nextLabel=function(i){return i===void 0&&(i=this._time),I1(this,Fn(this,i))},t.previousLabel=function(i){return i===void 0&&(i=this._time),I1(this,Fn(this,i),1)},t.currentLabel=function(i){return arguments.length?this.seek(i,!0):this.previousLabel(this._time+ht)},t.shiftChildren=function(i,s,a){a===void 0&&(a=0);for(var o=this._first,l=this.labels,c;o;)o._start>=a&&(o._start+=i,o._end+=i),o=o._next;if(s)for(c in l)l[c]>=a&&(l[c]+=i);return js(this)},t.invalidate=function(i){var s=this._first;for(this._lock=0;s;)s.invalidate(i),s=s._next;return r.prototype.invalidate.call(this,i)},t.clear=function(i){i===void 0&&(i=!0);for(var s=this._first,a;s;)a=s._next,this.remove(s),s=a;return this._dp&&(this._time=this._tTime=this._pTime=0),i&&(this.labels={}),js(this)},t.totalDuration=function(i){var s=0,a=this,o=a._last,l=Hn,c,h,u;if(arguments.length)return a.timeScale((a._repeat<0?a.duration():a.totalDuration())/(a.reversed()?-i:i));if(a._dirty){for(u=a.parent;o;)c=o._prev,o._dirty&&o.totalDuration(),h=o._start,h>l&&a._sort&&o._ts&&!a._lock?(a._lock=1,ai(a,o,h-o._delay,1)._lock=0):l=h,h<0&&o._ts&&(s-=h,(!u&&!a._dp||u&&u.smoothChildTiming)&&(a._start+=h/a._ts,a._time-=h,a._tTime-=h),a.shiftChildren(-h,!1,-1/0),l=0),o._end>s&&o._ts&&(s=o._end),o=c;fa(a,a===mt&&a._time>s?a._time:s,1,1),a._dirty=0}return a._tDur},e.updateRoot=function(i){if(mt._ts&&(d2(mt,Bc(i,mt)),u2=Cn.frame),Cn.frame>=E1){E1+=Ln.autoSleep||120;var s=mt._first;if((!s||!s._ts)&&Ln.autoSleep&&Cn._listeners.length<2){for(;s&&!s._ts;)s=s._next;s||Cn.sleep()}}},e}(Eo);Wn(en.prototype,{_lock:0,_hasPause:0,_forcing:0});var tv=function(e,t,n,i,s,a,o){var l=new vn(this._pt,e,t,0,1,k2,null,s),c=0,h=0,u,f,d,m,g,p,_,y;for(l.b=n,l.e=i,n+="",i+="",(_=~i.indexOf("random("))&&(i=Ao(i)),a&&(y=[n,i],a(y,e,t),n=y[0],i=y[1]),f=n.match(Tu)||[];u=Tu.exec(i);)m=u[0],g=i.substring(c,u.index),d?d=(d+1)%5:g.substr(-5)==="rgba("&&(d=1),m!==f[h++]&&(p=parseFloat(f[h-1])||0,l._pt={_next:l._pt,p:g||h===1?g:",",s:p,c:m.charAt(1)==="="?Jr(p,m)-p:parseFloat(m)-p,m:d&&d<4?Math.round:0},c=Tu.lastIndex);return l.c=c<i.length?i.substring(c,i.length):"",l.fp=o,(a2.test(i)||_)&&(l.e=0),this._pt=l,l},bd=function(e,t,n,i,s,a,o,l,c,h){bt(i)&&(i=i(s||0,e,a));var u=e[t],f=n!=="get"?n:bt(u)?c?e[t.indexOf("set")||!bt(e["get"+t.substr(3)])?t:"get"+t.substr(3)](c):e[t]():u,d=bt(u)?c?av:B2:Ad,m;if(Vt(i)&&(~i.indexOf("random(")&&(i=Ao(i)),i.charAt(1)==="="&&(m=Jr(f,i)+(Qt(f)||0),(m||m===0)&&(i=m))),!h||f!==i||cf)return!isNaN(f*i)&&i!==""?(m=new vn(this._pt,e,t,+f||0,i-(f||0),typeof u=="boolean"?lv:z2,0,d),c&&(m.fp=c),o&&m.modifier(o,this,e),this._pt=m):(!u&&!(t in e)&&yd(t,i),tv.call(this,e,t,f,i,d,l||Ln.stringFilter,c))},nv=function(e,t,n,i,s){if(bt(e)&&(e=eo(e,s,t,n,i)),!_i(e)||e.style&&e.nodeType||sn(e)||s2(e))return Vt(e)?eo(e,s,t,n,i):e;var a={},o;for(o in e)a[o]=eo(e[o],s,t,n,i);return a},U2=function(e,t,n,i,s,a){var o,l,c,h;if(En[e]&&(o=new En[e]).init(s,o.rawVars?t[e]:nv(t[e],i,s,a,n),n,i,a)!==!1&&(n._pt=l=new vn(n._pt,s,e,0,1,o.render,o,0,o.priority),n!==Xr))for(c=n._ptLookup[n._targets.indexOf(s)],h=o._props.length;h--;)c[o._props[h]]=l;return o},es,cf,Td=function r(e,t,n){var i=e.vars,s=i.ease,a=i.startAt,o=i.immediateRender,l=i.lazy,c=i.onUpdate,h=i.runBackwards,u=i.yoyoEase,f=i.keyframes,d=i.autoRevert,m=e._dur,g=e._startAt,p=e._targets,_=e.parent,y=_&&_.data==="nested"?_.vars.targets:p,x=e._overwrite==="auto"&&!md,v=e.timeline,w,b,A,C,M,S,q,O,N,z,V,F,X;if(v&&(!f||!s)&&(s="none"),e._ease=Qs(s,ha.ease),e._yEase=u?q2(Qs(u===!0?s:u,ha.ease)):0,u&&e._yoyo&&!e._repeat&&(u=e._yEase,e._yEase=e._ease,e._ease=u),e._from=!v&&!!i.runBackwards,!v||f&&!i.stagger){if(O=p[0]?Js(p[0]).harness:0,F=O&&i[O.prop],w=Fc(i,vd),g&&(g._zTime<0&&g.progress(1),t<0&&h&&o&&!d?g.render(-1,!0):g.revert(h&&m?Jl:Py),g._lazy=0),a){if(hs(e._startAt=It.set(p,Wn({data:"isStart",overwrite:!1,parent:_,immediateRender:!0,lazy:!g&&xn(l),startAt:null,delay:0,onUpdate:c&&function(){return In(e,"onUpdate")},stagger:0},a))),e._startAt._dp=0,e._startAt._sat=e,t<0&&(nn||!o&&!d)&&e._startAt.revert(Jl),o&&m&&t<=0&&n<=0){t&&(e._zTime=t);return}}else if(h&&m&&!g){if(t&&(o=!1),A=Wn({overwrite:!1,data:"isFromStart",lazy:o&&!g&&xn(l),immediateRender:o,stagger:0,parent:_},w),F&&(A[O.prop]=F),hs(e._startAt=It.set(p,A)),e._startAt._dp=0,e._startAt._sat=e,t<0&&(nn?e._startAt.revert(Jl):e._startAt.render(-1,!0)),e._zTime=t,!o)r(e._startAt,ht,ht);else if(!t)return}for(e._pt=e._ptCache=0,l=m&&xn(l)||l&&!m,b=0;b<p.length;b++){if(M=p[b],q=M._gsap||Sd(p)[b]._gsap,e._ptLookup[b]=z={},nf[q.id]&&ss.length&&Oc(),V=y===p?b:y.indexOf(M),O&&(N=new O).init(M,F||w,e,V,y)!==!1&&(e._pt=C=new vn(e._pt,M,N.name,0,1,N.render,N,0,N.priority),N._props.forEach(function(W){z[W]=C}),N.priority&&(S=1)),!O||F)for(A in w)En[A]&&(N=U2(A,w,e,V,M,y))?N.priority&&(S=1):z[A]=C=bd.call(e,M,A,"get",w[A],V,y,0,i.stringFilter);e._op&&e._op[b]&&e.kill(M,e._op[b]),x&&e._pt&&(es=e,mt.killTweensOf(M,z,e.globalTime(t)),X=!e.parent,es=0),e._pt&&l&&(nf[q.id]=1)}S&&H2(e),e._onInit&&e._onInit(e)}e._onUpdate=c,e._initted=(!e._op||e._pt)&&!X,f&&t<=0&&v.render(Hn,!0,!0)},iv=function(e,t,n,i,s,a,o,l){var c=(e._pt&&e._ptCache||(e._ptCache={}))[t],h,u,f,d;if(!c)for(c=e._ptCache[t]=[],f=e._ptLookup,d=e._targets.length;d--;){if(h=f[d][t],h&&h.d&&h.d._pt)for(h=h.d._pt;h&&h.p!==t&&h.fp!==t;)h=h._next;if(!h)return cf=1,e.vars[t]="+=0",Td(e,o),cf=0,l?bo(t+" not eligible for reset"):1;c.push(h)}for(d=c.length;d--;)u=c[d],h=u._pt||u,h.s=(i||i===0)&&!s?i:h.s+(i||0)+a*h.c,h.c=n-h.s,u.e&&(u.e=At(n)+Qt(u.e)),u.b&&(u.b=h.s+Qt(u.b))},sv=function(e,t){var n=e[0]?Js(e[0]).harness:0,i=n&&n.aliases,s,a,o,l;if(!i)return t;s=lr({},t);for(a in i)if(a in s)for(l=i[a].split(","),o=l.length;o--;)s[l[o]]=s[a];return s},rv=function(e,t,n,i){var s=t.ease||i||"power1.inOut",a,o;if(sn(t))o=n[e]||(n[e]=[]),t.forEach(function(l,c){return o.push({t:c/(t.length-1)*100,v:l,e:s})});else for(a in t)o=n[a]||(n[a]=[]),a==="ease"||o.push({t:parseFloat(e),v:t[a],e:s})},eo=function(e,t,n,i,s){return bt(e)?e.call(t,n,i,s):Vt(e)&&~e.indexOf("random(")?Ao(e):e},O2=Md+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",F2={};yn(O2+",id,stagger,delay,duration,paused,scrollTrigger",function(r){return F2[r]=1});var It=function(r){n2(e,r);function e(n,i,s,a){var o;typeof i=="number"&&(s.duration=i,i=s,s=null),o=r.call(this,a?i:ja(i))||this;var l=o.vars,c=l.duration,h=l.delay,u=l.immediateRender,f=l.stagger,d=l.overwrite,m=l.keyframes,g=l.defaults,p=l.scrollTrigger,_=l.yoyoEase,y=i.parent||mt,x=(sn(n)||s2(n)?Fi(n[0]):"length"in i)?[n]:Vn(n),v,w,b,A,C,M,S,q;if(o._targets=x.length?Sd(x):bo("GSAP target "+n+" not found. https://gsap.com",!Ln.nullTargetWarn)||[],o._ptLookup=[],o._overwrite=d,m||f||Vl(c)||Vl(h)){if(i=o.vars,v=o.timeline=new en({data:"nested",defaults:g||{},targets:y&&y.data==="nested"?y.vars.targets:x}),v.kill(),v.parent=v._dp=Ei(o),v._start=0,f||Vl(c)||Vl(h)){if(A=x.length,S=f&&S2(f),_i(f))for(C in f)~O2.indexOf(C)&&(q||(q={}),q[C]=f[C]);for(w=0;w<A;w++)b=Fc(i,F2),b.stagger=0,_&&(b.yoyoEase=_),q&&lr(b,q),M=x[w],b.duration=+eo(c,Ei(o),w,M,x),b.delay=(+eo(h,Ei(o),w,M,x)||0)-o._delay,!f&&A===1&&b.delay&&(o._delay=h=b.delay,o._start+=h,b.delay=0),v.to(M,b,S?S(w,M,x):0),v._ease=Ke.none;v.duration()?c=h=0:o.timeline=0}else if(m){ja(Wn(v.vars.defaults,{ease:"none"})),v._ease=Qs(m.ease||i.ease||"none");var O=0,N,z,V;if(sn(m))m.forEach(function(F){return v.to(x,F,">")}),v.duration();else{b={};for(C in m)C==="ease"||C==="easeEach"||rv(C,m[C],b,m.easeEach);for(C in b)for(N=b[C].sort(function(F,X){return F.t-X.t}),O=0,w=0;w<N.length;w++)z=N[w],V={ease:z.e,duration:(z.t-(w?N[w-1].t:0))/100*c},V[C]=z.v,v.to(x,V,O),O+=V.duration;v.duration()<c&&v.to({},{duration:c-v.duration()})}}c||o.duration(c=v.duration())}else o.timeline=0;return d===!0&&!md&&(es=Ei(o),mt.killTweensOf(x),es=0),ai(y,Ei(o),s),i.reversed&&o.reverse(),i.paused&&o.paused(!0),(u||!c&&!m&&o._start===zt(y._time)&&xn(u)&&Uy(Ei(o))&&y.data!=="nested")&&(o._tTime=-ht,o.render(Math.max(0,-h)||0)),p&&x2(Ei(o),p),o}var t=e.prototype;return t.render=function(i,s,a){var o=this._time,l=this._tDur,c=this._dur,h=i<0,u=i>l-ht&&!h?l:i<ht?0:i,f,d,m,g,p,_,y,x,v;if(!c)Fy(this,i,s,a);else if(u!==this._tTime||!i||a||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==h){if(f=u,x=this.timeline,this._repeat){if(g=c+this._rDelay,this._repeat<-1&&h)return this.totalTime(g*100+i,s,a);if(f=zt(u%g),u===l?(m=this._repeat,f=c):(m=~~(u/g),m&&m===zt(u/g)&&(f=c,m--),f>c&&(f=c)),_=this._yoyo&&m&1,_&&(v=this._yEase,f=c-f),p=ua(this._tTime,g),f===o&&!a&&this._initted&&m===p)return this._tTime=u,this;m!==p&&(x&&this._yEase&&L2(x,_),this.vars.repeatRefresh&&!_&&!this._lock&&this._time!==g&&this._initted&&(this._lock=a=1,this.render(zt(g*m),!0).invalidate()._lock=0))}if(!this._initted){if(y2(this,h?i:f,a,s,u))return this._tTime=0,this;if(o!==this._time&&!(a&&this.vars.repeatRefresh&&m!==p))return this;if(c!==this._dur)return this.render(i,s,a)}if(this._tTime=u,this._time=f,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=y=(v||this._ease)(f/c),this._from&&(this.ratio=y=1-y),f&&!o&&!s&&!m&&(In(this,"onStart"),this._tTime!==u))return this;for(d=this._pt;d;)d.r(y,d.d),d=d._next;x&&x.render(i<0?i:x._dur*x._ease(f/this._dur),s,a)||this._startAt&&(this._zTime=i),this._onUpdate&&!s&&(h&&sf(this,i,s,a),In(this,"onUpdate")),this._repeat&&m!==p&&this.vars.onRepeat&&!s&&this.parent&&In(this,"onRepeat"),(u===this._tDur||!u)&&this._tTime===u&&(h&&!this._onUpdate&&sf(this,i,!0,!0),(i||!c)&&(u===this._tDur&&this._ts>0||!u&&this._ts<0)&&hs(this,1),!s&&!(h&&!o)&&(u||o||_)&&(In(this,u===l?"onComplete":"onReverseComplete",!0),this._prom&&!(u<l&&this.timeScale()>0)&&this._prom()))}return this},t.targets=function(){return this._targets},t.invalidate=function(i){return(!i||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(i),r.prototype.invalidate.call(this,i)},t.resetTo=function(i,s,a,o,l){wo||Cn.wake(),this._ts||this.play();var c=Math.min(this._dur,(this._dp._time-this._start)*this._ts),h;return this._initted||Td(this,c),h=this._ease(c/this._dur),iv(this,i,s,a,o,h,c,l)?this.resetTo(i,s,a,o,1):(Ch(this,0),this.parent||g2(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},t.kill=function(i,s){if(s===void 0&&(s="all"),!i&&(!s||s==="all"))return this._lazy=this._pt=0,this.parent?za(this):this;if(this.timeline){var a=this.timeline.totalDuration();return this.timeline.killTweensOf(i,s,es&&es.vars.overwrite!==!0)._first||za(this),this.parent&&a!==this.timeline.totalDuration()&&fa(this,this._dur*this.timeline._tDur/a,0,1),this}var o=this._targets,l=i?Vn(i):o,c=this._ptLookup,h=this._pt,u,f,d,m,g,p,_;if((!s||s==="all")&&Dy(o,l))return s==="all"&&(this._pt=0),za(this);for(u=this._op=this._op||[],s!=="all"&&(Vt(s)&&(g={},yn(s,function(y){return g[y]=1}),s=g),s=sv(o,s)),_=o.length;_--;)if(~l.indexOf(o[_])){f=c[_],s==="all"?(u[_]=s,m=f,d={}):(d=u[_]=u[_]||{},m=s);for(g in m)p=f&&f[g],p&&((!("kill"in p.d)||p.d.kill(g)===!0)&&Eh(this,p,"_pt"),delete f[g]),d!=="all"&&(d[g]=1)}return this._initted&&!this._pt&&h&&za(this),this},e.to=function(i,s){return new e(i,s,arguments[2])},e.from=function(i,s){return Qa(1,arguments)},e.delayedCall=function(i,s,a,o){return new e(s,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:i,onComplete:s,onReverseComplete:s,onCompleteParams:a,onReverseCompleteParams:a,callbackScope:o})},e.fromTo=function(i,s,a){return Qa(2,arguments)},e.set=function(i,s){return s.duration=0,s.repeatDelay||(s.repeat=0),new e(i,s)},e.killTweensOf=function(i,s,a){return mt.killTweensOf(i,s,a)},e}(Eo);Wn(It.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});yn("staggerTo,staggerFrom,staggerFromTo",function(r){It[r]=function(){var e=new en,t=af.call(arguments,0);return t.splice(r==="staggerFromTo"?5:4,0,0),e[r].apply(e,t)}});var Ad=function(e,t,n){return e[t]=n},B2=function(e,t,n){return e[t](n)},av=function(e,t,n,i){return e[t](i.fp,n)},ov=function(e,t,n){return e.setAttribute(t,n)},wd=function(e,t){return bt(e[t])?B2:gd(e[t])&&e.setAttribute?ov:Ad},z2=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e6)/1e6,t)},lv=function(e,t){return t.set(t.t,t.p,!!(t.s+t.c*e),t)},k2=function(e,t){var n=t._pt,i="";if(!e&&t.b)i=t.b;else if(e===1&&t.e)i=t.e;else{for(;n;)i=n.p+(n.m?n.m(n.s+n.c*e):Math.round((n.s+n.c*e)*1e4)/1e4)+i,n=n._next;i+=t.c}t.set(t.t,t.p,i,t)},Ed=function(e,t){for(var n=t._pt;n;)n.r(e,n.d),n=n._next},cv=function(e,t,n,i){for(var s=this._pt,a;s;)a=s._next,s.p===i&&s.modifier(e,t,n),s=a},hv=function(e){for(var t=this._pt,n,i;t;)i=t._next,t.p===e&&!t.op||t.op===e?Eh(this,t,"_pt"):t.dep||(n=1),t=i;return!n},uv=function(e,t,n,i){i.mSet(e,t,i.m.call(i.tween,n,i.mt),i)},H2=function(e){for(var t=e._pt,n,i,s,a;t;){for(n=t._next,i=s;i&&i.pr>t.pr;)i=i._next;(t._prev=i?i._prev:a)?t._prev._next=t:s=t,(t._next=i)?i._prev=t:a=t,t=n}e._pt=s},vn=function(){function r(t,n,i,s,a,o,l,c,h){this.t=n,this.s=s,this.c=a,this.p=i,this.r=o||z2,this.d=l||this,this.set=c||Ad,this.pr=h||0,this._next=t,t&&(t._prev=this)}var e=r.prototype;return e.modifier=function(n,i,s){this.mSet=this.mSet||this.set,this.set=uv,this.m=n,this.mt=s,this.tween=i},r}();yn(Md+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(r){return vd[r]=1});Nn.TweenMax=Nn.TweenLite=It;Nn.TimelineLite=Nn.TimelineMax=en;mt=new en({sortChildren:!1,defaults:ha,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});Ln.stringFilter=I2;var er=[],Ql={},fv=[],L1=0,dv=0,Cu=function(e){return(Ql[e]||fv).map(function(t){return t()})},hf=function(){var e=Date.now(),t=[];e-L1>2&&(Cu("matchMediaInit"),er.forEach(function(n){var i=n.queries,s=n.conditions,a,o,l,c;for(o in i)a=ri.matchMedia(i[o]).matches,a&&(l=1),a!==s[o]&&(s[o]=a,c=1);c&&(n.revert(),l&&t.push(n))}),Cu("matchMediaRevert"),t.forEach(function(n){return n.onMatch(n,function(i){return n.add(null,i)})}),L1=e,Cu("matchMedia"))},V2=function(){function r(t,n){this.selector=n&&of(n),this.data=[],this._r=[],this.isReverted=!1,this.id=dv++,t&&this.add(t)}var e=r.prototype;return e.add=function(n,i,s){bt(n)&&(s=i,i=n,n=bt);var a=this,o=function(){var c=ft,h=a.selector,u;return c&&c!==a&&c.data.push(a),s&&(a.selector=of(s)),ft=a,u=i.apply(a,arguments),bt(u)&&a._r.push(u),ft=c,a.selector=h,a.isReverted=!1,u};return a.last=o,n===bt?o(a,function(l){return a.add(null,l)}):n?a[n]=o:o},e.ignore=function(n){var i=ft;ft=null,n(this),ft=i},e.getTweens=function(){var n=[];return this.data.forEach(function(i){return i instanceof r?n.push.apply(n,i.getTweens()):i instanceof It&&!(i.parent&&i.parent.data==="nested")&&n.push(i)}),n},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(n,i){var s=this;if(n?function(){for(var o=s.getTweens(),l=s.data.length,c;l--;)c=s.data[l],c.data==="isFlip"&&(c.revert(),c.getChildren(!0,!0,!1).forEach(function(h){return o.splice(o.indexOf(h),1)}));for(o.map(function(h){return{g:h._dur||h._delay||h._sat&&!h._sat.vars.immediateRender?h.globalTime(0):-1/0,t:h}}).sort(function(h,u){return u.g-h.g||-1/0}).forEach(function(h){return h.t.revert(n)}),l=s.data.length;l--;)c=s.data[l],c instanceof en?c.data!=="nested"&&(c.scrollTrigger&&c.scrollTrigger.revert(),c.kill()):!(c instanceof It)&&c.revert&&c.revert(n);s._r.forEach(function(h){return h(n,s)}),s.isReverted=!0}():this.data.forEach(function(o){return o.kill&&o.kill()}),this.clear(),i)for(var a=er.length;a--;)er[a].id===this.id&&er.splice(a,1)},e.revert=function(n){this.kill(n||{})},r}(),pv=function(){function r(t){this.contexts=[],this.scope=t,ft&&ft.data.push(this)}var e=r.prototype;return e.add=function(n,i,s){_i(n)||(n={matches:n});var a=new V2(0,s||this.scope),o=a.conditions={},l,c,h;ft&&!a.selector&&(a.selector=ft.selector),this.contexts.push(a),i=a.add("onMatch",i),a.queries=n;for(c in n)c==="all"?h=1:(l=ri.matchMedia(n[c]),l&&(er.indexOf(a)<0&&er.push(a),(o[c]=l.matches)&&(h=1),l.addListener?l.addListener(hf):l.addEventListener("change",hf)));return h&&i(a,function(u){return a.add(null,u)}),this},e.revert=function(n){this.kill(n||{})},e.kill=function(n){this.contexts.forEach(function(i){return i.kill(n,!0)})},r}(),zc={registerPlugin:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t.forEach(function(i){return R2(i)})},timeline:function(e){return new en(e)},getTweensOf:function(e,t){return mt.getTweensOf(e,t)},getProperty:function(e,t,n,i){Vt(e)&&(e=Vn(e)[0]);var s=Js(e||{}).get,a=n?m2:p2;return n==="native"&&(n=""),e&&(t?a((En[t]&&En[t].get||s)(e,t,n,i)):function(o,l,c){return a((En[o]&&En[o].get||s)(e,o,l,c))})},quickSetter:function(e,t,n){if(e=Vn(e),e.length>1){var i=e.map(function(h){return Sn.quickSetter(h,t,n)}),s=i.length;return function(h){for(var u=s;u--;)i[u](h)}}e=e[0]||{};var a=En[t],o=Js(e),l=o.harness&&(o.harness.aliases||{})[t]||t,c=a?function(h){var u=new a;Xr._pt=0,u.init(e,n?h+n:h,Xr,0,[e]),u.render(1,u),Xr._pt&&Ed(1,Xr)}:o.set(e,l);return a?c:function(h){return c(e,l,n?h+n:h,o,1)}},quickTo:function(e,t,n){var i,s=Sn.to(e,lr((i={},i[t]="+=0.1",i.paused=!0,i),n||{})),a=function(l,c,h){return s.resetTo(t,l,c,h)};return a.tween=s,a},isTweening:function(e){return mt.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=Qs(e.ease,ha.ease)),R1(ha,e||{})},config:function(e){return R1(Ln,e||{})},registerEffect:function(e){var t=e.name,n=e.effect,i=e.plugins,s=e.defaults,a=e.extendTimeline;(i||"").split(",").forEach(function(o){return o&&!En[o]&&!Nn[o]&&bo(t+" effect requires "+o+" plugin.")}),Au[t]=function(o,l,c){return n(Vn(o),Wn(l||{},s),c)},a&&(en.prototype[t]=function(o,l,c){return this.add(Au[t](o,_i(l)?l:(c=l)&&{},this),c)})},registerEase:function(e,t){Ke[e]=Qs(t)},parseEase:function(e,t){return arguments.length?Qs(e,t):Ke},getById:function(e){return mt.getById(e)},exportRoot:function(e,t){e===void 0&&(e={});var n=new en(e),i,s;for(n.smoothChildTiming=xn(e.smoothChildTiming),mt.remove(n),n._dp=0,n._time=n._tTime=mt._time,i=mt._first;i;)s=i._next,(t||!(!i._dur&&i instanceof It&&i.vars.onComplete===i._targets[0]))&&ai(n,i,i._start-i._delay),i=s;return ai(mt,n,0),n},context:function(e,t){return e?new V2(e,t):ft},matchMedia:function(e){return new pv(e)},matchMediaRefresh:function(){return er.forEach(function(e){var t=e.conditions,n,i;for(i in t)t[i]&&(t[i]=!1,n=1);n&&e.revert()})||hf()},addEventListener:function(e,t){var n=Ql[e]||(Ql[e]=[]);~n.indexOf(t)||n.push(t)},removeEventListener:function(e,t){var n=Ql[e],i=n&&n.indexOf(t);i>=0&&n.splice(i,1)},utils:{wrap:Xy,wrapYoyo:Yy,distribute:S2,random:T2,snap:b2,normalize:Wy,getUnit:Qt,clamp:ky,splitColor:C2,toArray:Vn,selector:of,mapRange:w2,pipe:Vy,unitize:Gy,interpolate:Ky,shuffle:M2},install:c2,effects:Au,ticker:Cn,updateRoot:en.updateRoot,plugins:En,globalTimeline:mt,core:{PropTween:vn,globals:h2,Tween:It,Timeline:en,Animation:Eo,getCache:Js,_removeLinkedListItem:Eh,reverting:function(){return nn},context:function(e){return e&&ft&&(ft.data.push(e),e._ctx=ft),ft},suppressOverwrites:function(e){return md=e}}};yn("to,from,fromTo,delayedCall,set,killTweensOf",function(r){return zc[r]=It[r]});Cn.add(en.updateRoot);Xr=zc.to({},{duration:0});var mv=function(e,t){for(var n=e._pt;n&&n.p!==t&&n.op!==t&&n.fp!==t;)n=n._next;return n},gv=function(e,t){var n=e._targets,i,s,a;for(i in t)for(s=n.length;s--;)a=e._ptLookup[s][i],a&&(a=a.d)&&(a._pt&&(a=mv(a,i)),a&&a.modifier&&a.modifier(t[i],e,n[s],i))},Pu=function(e,t){return{name:e,rawVars:1,init:function(i,s,a){a._onInit=function(o){var l,c;if(Vt(s)&&(l={},yn(s,function(h){return l[h]=1}),s=l),t){l={};for(c in s)l[c]=t(s[c]);s=l}gv(o,s)}}}},Sn=zc.registerPlugin({name:"attr",init:function(e,t,n,i,s){var a,o,l;this.tween=n;for(a in t)l=e.getAttribute(a)||"",o=this.add(e,"setAttribute",(l||0)+"",t[a],i,s,0,0,a),o.op=a,o.b=l,this._props.push(a)},render:function(e,t){for(var n=t._pt;n;)nn?n.set(n.t,n.p,n.b,n):n.r(e,n.d),n=n._next}},{name:"endArray",init:function(e,t){for(var n=t.length;n--;)this.add(e,n,e[n]||0,t[n],0,0,0,0,0,1)}},Pu("roundProps",lf),Pu("modifiers"),Pu("snap",b2))||zc;It.version=en.version=Sn.version="3.12.5";l2=1;_d()&&da();Ke.Power0;Ke.Power1;Ke.Power2;Ke.Power3;Ke.Power4;Ke.Linear;Ke.Quad;Ke.Cubic;Ke.Quart;Ke.Quint;Ke.Strong;Ke.Elastic;var _v=Ke.Back;Ke.SteppedEase;Ke.Bounce;Ke.Sine;Ke.Expo;Ke.Circ;/*!
 * CSSPlugin 3.12.5
 * https://gsap.com
 *
 * Copyright 2008-2024, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var D1,ts,jr,Rd,Gs,N1,Cd,xv=function(){return typeof window<"u"},Bi={},Ns=180/Math.PI,Qr=Math.PI/180,zr=Math.atan2,U1=1e8,Pd=/([A-Z])/g,yv=/(left|right|width|margin|padding|x)/i,vv=/[\s,\(]\S/,ci={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},uf=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},Mv=function(e,t){return t.set(t.t,t.p,e===1?t.e:Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},Sv=function(e,t){return t.set(t.t,t.p,e?Math.round((t.s+t.c*e)*1e4)/1e4+t.u:t.b,t)},bv=function(e,t){var n=t.s+t.c*e;t.set(t.t,t.p,~~(n+(n<0?-.5:.5))+t.u,t)},G2=function(e,t){return t.set(t.t,t.p,e?t.e:t.b,t)},W2=function(e,t){return t.set(t.t,t.p,e!==1?t.b:t.e,t)},Tv=function(e,t,n){return e.style[t]=n},Av=function(e,t,n){return e.style.setProperty(t,n)},wv=function(e,t,n){return e._gsap[t]=n},Ev=function(e,t,n){return e._gsap.scaleX=e._gsap.scaleY=n},Rv=function(e,t,n,i,s){var a=e._gsap;a.scaleX=a.scaleY=n,a.renderTransform(s,a)},Cv=function(e,t,n,i,s){var a=e._gsap;a[t]=n,a.renderTransform(s,a)},_t="transform",Mn=_t+"Origin",Pv=function r(e,t){var n=this,i=this.target,s=i.style,a=i._gsap;if(e in Bi&&s){if(this.tfm=this.tfm||{},e!=="transform")e=ci[e]||e,~e.indexOf(",")?e.split(",").forEach(function(o){return n.tfm[o]=Ci(i,o)}):this.tfm[e]=a.x?a[e]:Ci(i,e),e===Mn&&(this.tfm.zOrigin=a.zOrigin);else return ci.transform.split(",").forEach(function(o){return r.call(n,o,t)});if(this.props.indexOf(_t)>=0)return;a.svg&&(this.svgo=i.getAttribute("data-svg-origin"),this.props.push(Mn,t,"")),e=_t}(s||t)&&this.props.push(e,t,s[e])},X2=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},Iv=function(){var e=this.props,t=this.target,n=t.style,i=t._gsap,s,a;for(s=0;s<e.length;s+=3)e[s+1]?t[e[s]]=e[s+2]:e[s+2]?n[e[s]]=e[s+2]:n.removeProperty(e[s].substr(0,2)==="--"?e[s]:e[s].replace(Pd,"-$1").toLowerCase());if(this.tfm){for(a in this.tfm)i[a]=this.tfm[a];i.svg&&(i.renderTransform(),t.setAttribute("data-svg-origin",this.svgo||"")),s=Cd(),(!s||!s.isStart)&&!n[_t]&&(X2(n),i.zOrigin&&n[Mn]&&(n[Mn]+=" "+i.zOrigin+"px",i.zOrigin=0,i.renderTransform()),i.uncache=1)}},Y2=function(e,t){var n={target:e,props:[],revert:Iv,save:Pv};return e._gsap||Sn.core.getCache(e),t&&t.split(",").forEach(function(i){return n.save(i)}),n},K2,ff=function(e,t){var n=ts.createElementNS?ts.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):ts.createElement(e);return n&&n.style?n:ts.createElement(e)},pi=function r(e,t,n){var i=getComputedStyle(e);return i[t]||i.getPropertyValue(t.replace(Pd,"-$1").toLowerCase())||i.getPropertyValue(t)||!n&&r(e,pa(t)||t,1)||""},O1="O,Moz,ms,Ms,Webkit".split(","),pa=function(e,t,n){var i=t||Gs,s=i.style,a=5;if(e in s&&!n)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);a--&&!(O1[a]+e in s););return a<0?null:(a===3?"ms":a>=0?O1[a]:"")+e},df=function(){xv()&&window.document&&(D1=window,ts=D1.document,jr=ts.documentElement,Gs=ff("div")||{style:{}},ff("div"),_t=pa(_t),Mn=_t+"Origin",Gs.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",K2=!!pa("perspective"),Cd=Sn.core.reverting,Rd=1)},Iu=function r(e){var t=ff("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),n=this.parentNode,i=this.nextSibling,s=this.style.cssText,a;if(jr.appendChild(t),t.appendChild(this),this.style.display="block",e)try{a=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=r}catch{}else this._gsapBBox&&(a=this._gsapBBox());return n&&(i?n.insertBefore(this,i):n.appendChild(this)),jr.removeChild(t),this.style.cssText=s,a},F1=function(e,t){for(var n=t.length;n--;)if(e.hasAttribute(t[n]))return e.getAttribute(t[n])},Z2=function(e){var t;try{t=e.getBBox()}catch{t=Iu.call(e,!0)}return t&&(t.width||t.height)||e.getBBox===Iu||(t=Iu.call(e,!0)),t&&!t.width&&!t.x&&!t.y?{x:+F1(e,["x","cx","x1"])||0,y:+F1(e,["y","cy","y1"])||0,width:0,height:0}:t},$2=function(e){return!!(e.getCTM&&(!e.parentNode||e.ownerSVGElement)&&Z2(e))},cr=function(e,t){if(t){var n=e.style,i;t in Bi&&t!==Mn&&(t=_t),n.removeProperty?(i=t.substr(0,2),(i==="ms"||t.substr(0,6)==="webkit")&&(t="-"+t),n.removeProperty(i==="--"?t:t.replace(Pd,"-$1").toLowerCase())):n.removeAttribute(t)}},ns=function(e,t,n,i,s,a){var o=new vn(e._pt,t,n,0,1,a?W2:G2);return e._pt=o,o.b=i,o.e=s,e._props.push(n),o},B1={deg:1,rad:1,turn:1},qv={grid:1,flex:1},us=function r(e,t,n,i){var s=parseFloat(n)||0,a=(n+"").trim().substr((s+"").length)||"px",o=Gs.style,l=yv.test(t),c=e.tagName.toLowerCase()==="svg",h=(c?"client":"offset")+(l?"Width":"Height"),u=100,f=i==="px",d=i==="%",m,g,p,_;if(i===a||!s||B1[i]||B1[a])return s;if(a!=="px"&&!f&&(s=r(e,t,n,"px")),_=e.getCTM&&$2(e),(d||a==="%")&&(Bi[t]||~t.indexOf("adius")))return m=_?e.getBBox()[l?"width":"height"]:e[h],At(d?s/m*u:s/100*m);if(o[l?"width":"height"]=u+(f?a:i),g=~t.indexOf("adius")||i==="em"&&e.appendChild&&!c?e:e.parentNode,_&&(g=(e.ownerSVGElement||{}).parentNode),(!g||g===ts||!g.appendChild)&&(g=ts.body),p=g._gsap,p&&d&&p.width&&l&&p.time===Cn.time&&!p.uncache)return At(s/p.width*u);if(d&&(t==="height"||t==="width")){var y=e.style[t];e.style[t]=u+i,m=e[h],y?e.style[t]=y:cr(e,t)}else(d||a==="%")&&!qv[pi(g,"display")]&&(o.position=pi(e,"position")),g===e&&(o.position="static"),g.appendChild(Gs),m=Gs[h],g.removeChild(Gs),o.position="absolute";return l&&d&&(p=Js(g),p.time=Cn.time,p.width=g[h]),At(f?m*s/u:m&&s?u/m*s:0)},Ci=function(e,t,n,i){var s;return Rd||df(),t in ci&&t!=="transform"&&(t=ci[t],~t.indexOf(",")&&(t=t.split(",")[0])),Bi[t]&&t!=="transform"?(s=Co(e,i),s=t!=="transformOrigin"?s[t]:s.svg?s.origin:Hc(pi(e,Mn))+" "+s.zOrigin+"px"):(s=e.style[t],(!s||s==="auto"||i||~(s+"").indexOf("calc("))&&(s=kc[t]&&kc[t](e,t,n)||pi(e,t)||f2(e,t)||(t==="opacity"?1:0))),n&&!~(s+"").trim().indexOf(" ")?us(e,t,s,n)+n:s},Lv=function(e,t,n,i){if(!n||n==="none"){var s=pa(t,e,1),a=s&&pi(e,s,1);a&&a!==n?(t=s,n=a):t==="borderColor"&&(n=pi(e,"borderTopColor"))}var o=new vn(this._pt,e.style,t,0,1,k2),l=0,c=0,h,u,f,d,m,g,p,_,y,x,v,w;if(o.b=n,o.e=i,n+="",i+="",i==="auto"&&(g=e.style[t],e.style[t]=i,i=pi(e,t)||i,g?e.style[t]=g:cr(e,t)),h=[n,i],I2(h),n=h[0],i=h[1],f=n.match(Wr)||[],w=i.match(Wr)||[],w.length){for(;u=Wr.exec(i);)p=u[0],y=i.substring(l,u.index),m?m=(m+1)%5:(y.substr(-5)==="rgba("||y.substr(-5)==="hsla(")&&(m=1),p!==(g=f[c++]||"")&&(d=parseFloat(g)||0,v=g.substr((d+"").length),p.charAt(1)==="="&&(p=Jr(d,p)+v),_=parseFloat(p),x=p.substr((_+"").length),l=Wr.lastIndex-x.length,x||(x=x||Ln.units[t]||v,l===i.length&&(i+=x,o.e+=x)),v!==x&&(d=us(e,t,g,x)||0),o._pt={_next:o._pt,p:y||c===1?y:",",s:d,c:_-d,m:m&&m<4||t==="zIndex"?Math.round:0});o.c=l<i.length?i.substring(l,i.length):""}else o.r=t==="display"&&i==="none"?W2:G2;return a2.test(i)&&(o.e=0),this._pt=o,o},z1={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},Dv=function(e){var t=e.split(" "),n=t[0],i=t[1]||"50%";return(n==="top"||n==="bottom"||i==="left"||i==="right")&&(e=n,n=i,i=e),t[0]=z1[n]||n,t[1]=z1[i]||i,t.join(" ")},Nv=function(e,t){if(t.tween&&t.tween._time===t.tween._dur){var n=t.t,i=n.style,s=t.u,a=n._gsap,o,l,c;if(s==="all"||s===!0)i.cssText="",l=1;else for(s=s.split(","),c=s.length;--c>-1;)o=s[c],Bi[o]&&(l=1,o=o==="transformOrigin"?Mn:_t),cr(n,o);l&&(cr(n,_t),a&&(a.svg&&n.removeAttribute("transform"),Co(n,1),a.uncache=1,X2(i)))}},kc={clearProps:function(e,t,n,i,s){if(s.data!=="isFromStart"){var a=e._pt=new vn(e._pt,t,n,0,0,Nv);return a.u=i,a.pr=-10,a.tween=s,e._props.push(n),1}}},Ro=[1,0,0,1,0,0],J2={},j2=function(e){return e==="matrix(1, 0, 0, 1, 0, 0)"||e==="none"||!e},k1=function(e){var t=pi(e,_t);return j2(t)?Ro:t.substr(7).match(r2).map(At)},Id=function(e,t){var n=e._gsap||Js(e),i=e.style,s=k1(e),a,o,l,c;return n.svg&&e.getAttribute("transform")?(l=e.transform.baseVal.consolidate().matrix,s=[l.a,l.b,l.c,l.d,l.e,l.f],s.join(",")==="1,0,0,1,0,0"?Ro:s):(s===Ro&&!e.offsetParent&&e!==jr&&!n.svg&&(l=i.display,i.display="block",a=e.parentNode,(!a||!e.offsetParent)&&(c=1,o=e.nextElementSibling,jr.appendChild(e)),s=k1(e),l?i.display=l:cr(e,"display"),c&&(o?a.insertBefore(e,o):a?a.appendChild(e):jr.removeChild(e))),t&&s.length>6?[s[0],s[1],s[4],s[5],s[12],s[13]]:s)},pf=function(e,t,n,i,s,a){var o=e._gsap,l=s||Id(e,!0),c=o.xOrigin||0,h=o.yOrigin||0,u=o.xOffset||0,f=o.yOffset||0,d=l[0],m=l[1],g=l[2],p=l[3],_=l[4],y=l[5],x=t.split(" "),v=parseFloat(x[0])||0,w=parseFloat(x[1])||0,b,A,C,M;n?l!==Ro&&(A=d*p-m*g)&&(C=v*(p/A)+w*(-g/A)+(g*y-p*_)/A,M=v*(-m/A)+w*(d/A)-(d*y-m*_)/A,v=C,w=M):(b=Z2(e),v=b.x+(~x[0].indexOf("%")?v/100*b.width:v),w=b.y+(~(x[1]||x[0]).indexOf("%")?w/100*b.height:w)),i||i!==!1&&o.smooth?(_=v-c,y=w-h,o.xOffset=u+(_*d+y*g)-_,o.yOffset=f+(_*m+y*p)-y):o.xOffset=o.yOffset=0,o.xOrigin=v,o.yOrigin=w,o.smooth=!!i,o.origin=t,o.originIsAbsolute=!!n,e.style[Mn]="0px 0px",a&&(ns(a,o,"xOrigin",c,v),ns(a,o,"yOrigin",h,w),ns(a,o,"xOffset",u,o.xOffset),ns(a,o,"yOffset",f,o.yOffset)),e.setAttribute("data-svg-origin",v+" "+w)},Co=function(e,t){var n=e._gsap||new N2(e);if("x"in n&&!t&&!n.uncache)return n;var i=e.style,s=n.scaleX<0,a="px",o="deg",l=getComputedStyle(e),c=pi(e,Mn)||"0",h,u,f,d,m,g,p,_,y,x,v,w,b,A,C,M,S,q,O,N,z,V,F,X,W,le,de,me,Ie,Ze,Y,ee;return h=u=f=g=p=_=y=x=v=0,d=m=1,n.svg=!!(e.getCTM&&$2(e)),l.translate&&((l.translate!=="none"||l.scale!=="none"||l.rotate!=="none")&&(i[_t]=(l.translate!=="none"?"translate3d("+(l.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(l.rotate!=="none"?"rotate("+l.rotate+") ":"")+(l.scale!=="none"?"scale("+l.scale.split(" ").join(",")+") ":"")+(l[_t]!=="none"?l[_t]:"")),i.scale=i.rotate=i.translate="none"),A=Id(e,n.svg),n.svg&&(n.uncache?(W=e.getBBox(),c=n.xOrigin-W.x+"px "+(n.yOrigin-W.y)+"px",X=""):X=!t&&e.getAttribute("data-svg-origin"),pf(e,X||c,!!X||n.originIsAbsolute,n.smooth!==!1,A)),w=n.xOrigin||0,b=n.yOrigin||0,A!==Ro&&(q=A[0],O=A[1],N=A[2],z=A[3],h=V=A[4],u=F=A[5],A.length===6?(d=Math.sqrt(q*q+O*O),m=Math.sqrt(z*z+N*N),g=q||O?zr(O,q)*Ns:0,y=N||z?zr(N,z)*Ns+g:0,y&&(m*=Math.abs(Math.cos(y*Qr))),n.svg&&(h-=w-(w*q+b*N),u-=b-(w*O+b*z))):(ee=A[6],Ze=A[7],de=A[8],me=A[9],Ie=A[10],Y=A[11],h=A[12],u=A[13],f=A[14],C=zr(ee,Ie),p=C*Ns,C&&(M=Math.cos(-C),S=Math.sin(-C),X=V*M+de*S,W=F*M+me*S,le=ee*M+Ie*S,de=V*-S+de*M,me=F*-S+me*M,Ie=ee*-S+Ie*M,Y=Ze*-S+Y*M,V=X,F=W,ee=le),C=zr(-N,Ie),_=C*Ns,C&&(M=Math.cos(-C),S=Math.sin(-C),X=q*M-de*S,W=O*M-me*S,le=N*M-Ie*S,Y=z*S+Y*M,q=X,O=W,N=le),C=zr(O,q),g=C*Ns,C&&(M=Math.cos(C),S=Math.sin(C),X=q*M+O*S,W=V*M+F*S,O=O*M-q*S,F=F*M-V*S,q=X,V=W),p&&Math.abs(p)+Math.abs(g)>359.9&&(p=g=0,_=180-_),d=At(Math.sqrt(q*q+O*O+N*N)),m=At(Math.sqrt(F*F+ee*ee)),C=zr(V,F),y=Math.abs(C)>2e-4?C*Ns:0,v=Y?1/(Y<0?-Y:Y):0),n.svg&&(X=e.getAttribute("transform"),n.forceCSS=e.setAttribute("transform","")||!j2(pi(e,_t)),X&&e.setAttribute("transform",X))),Math.abs(y)>90&&Math.abs(y)<270&&(s?(d*=-1,y+=g<=0?180:-180,g+=g<=0?180:-180):(m*=-1,y+=y<=0?180:-180)),t=t||n.uncache,n.x=h-((n.xPercent=h&&(!t&&n.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-h)?-50:0)))?e.offsetWidth*n.xPercent/100:0)+a,n.y=u-((n.yPercent=u&&(!t&&n.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-u)?-50:0)))?e.offsetHeight*n.yPercent/100:0)+a,n.z=f+a,n.scaleX=At(d),n.scaleY=At(m),n.rotation=At(g)+o,n.rotationX=At(p)+o,n.rotationY=At(_)+o,n.skewX=y+o,n.skewY=x+o,n.transformPerspective=v+a,(n.zOrigin=parseFloat(c.split(" ")[2])||!t&&n.zOrigin||0)&&(i[Mn]=Hc(c)),n.xOffset=n.yOffset=0,n.force3D=Ln.force3D,n.renderTransform=n.svg?Ov:K2?Q2:Uv,n.uncache=0,n},Hc=function(e){return(e=e.split(" "))[0]+" "+e[1]},qu=function(e,t,n){var i=Qt(t);return At(parseFloat(t)+parseFloat(us(e,"x",n+"px",i)))+i},Uv=function(e,t){t.z="0px",t.rotationY=t.rotationX="0deg",t.force3D=0,Q2(e,t)},Ps="0deg",Ua="0px",Is=") ",Q2=function(e,t){var n=t||this,i=n.xPercent,s=n.yPercent,a=n.x,o=n.y,l=n.z,c=n.rotation,h=n.rotationY,u=n.rotationX,f=n.skewX,d=n.skewY,m=n.scaleX,g=n.scaleY,p=n.transformPerspective,_=n.force3D,y=n.target,x=n.zOrigin,v="",w=_==="auto"&&e&&e!==1||_===!0;if(x&&(u!==Ps||h!==Ps)){var b=parseFloat(h)*Qr,A=Math.sin(b),C=Math.cos(b),M;b=parseFloat(u)*Qr,M=Math.cos(b),a=qu(y,a,A*M*-x),o=qu(y,o,-Math.sin(b)*-x),l=qu(y,l,C*M*-x+x)}p!==Ua&&(v+="perspective("+p+Is),(i||s)&&(v+="translate("+i+"%, "+s+"%) "),(w||a!==Ua||o!==Ua||l!==Ua)&&(v+=l!==Ua||w?"translate3d("+a+", "+o+", "+l+") ":"translate("+a+", "+o+Is),c!==Ps&&(v+="rotate("+c+Is),h!==Ps&&(v+="rotateY("+h+Is),u!==Ps&&(v+="rotateX("+u+Is),(f!==Ps||d!==Ps)&&(v+="skew("+f+", "+d+Is),(m!==1||g!==1)&&(v+="scale("+m+", "+g+Is),y.style[_t]=v||"translate(0, 0)"},Ov=function(e,t){var n=t||this,i=n.xPercent,s=n.yPercent,a=n.x,o=n.y,l=n.rotation,c=n.skewX,h=n.skewY,u=n.scaleX,f=n.scaleY,d=n.target,m=n.xOrigin,g=n.yOrigin,p=n.xOffset,_=n.yOffset,y=n.forceCSS,x=parseFloat(a),v=parseFloat(o),w,b,A,C,M;l=parseFloat(l),c=parseFloat(c),h=parseFloat(h),h&&(h=parseFloat(h),c+=h,l+=h),l||c?(l*=Qr,c*=Qr,w=Math.cos(l)*u,b=Math.sin(l)*u,A=Math.sin(l-c)*-f,C=Math.cos(l-c)*f,c&&(h*=Qr,M=Math.tan(c-h),M=Math.sqrt(1+M*M),A*=M,C*=M,h&&(M=Math.tan(h),M=Math.sqrt(1+M*M),w*=M,b*=M)),w=At(w),b=At(b),A=At(A),C=At(C)):(w=u,C=f,b=A=0),(x&&!~(a+"").indexOf("px")||v&&!~(o+"").indexOf("px"))&&(x=us(d,"x",a,"px"),v=us(d,"y",o,"px")),(m||g||p||_)&&(x=At(x+m-(m*w+g*A)+p),v=At(v+g-(m*b+g*C)+_)),(i||s)&&(M=d.getBBox(),x=At(x+i/100*M.width),v=At(v+s/100*M.height)),M="matrix("+w+","+b+","+A+","+C+","+x+","+v+")",d.setAttribute("transform",M),y&&(d.style[_t]=M)},Fv=function(e,t,n,i,s){var a=360,o=Vt(s),l=parseFloat(s)*(o&&~s.indexOf("rad")?Ns:1),c=l-i,h=i+c+"deg",u,f;return o&&(u=s.split("_")[1],u==="short"&&(c%=a,c!==c%(a/2)&&(c+=c<0?a:-a)),u==="cw"&&c<0?c=(c+a*U1)%a-~~(c/a)*a:u==="ccw"&&c>0&&(c=(c-a*U1)%a-~~(c/a)*a)),e._pt=f=new vn(e._pt,t,n,i,c,Mv),f.e=h,f.u="deg",e._props.push(n),f},H1=function(e,t){for(var n in t)e[n]=t[n];return e},Bv=function(e,t,n){var i=H1({},n._gsap),s="perspective,force3D,transformOrigin,svgOrigin",a=n.style,o,l,c,h,u,f,d,m;i.svg?(c=n.getAttribute("transform"),n.setAttribute("transform",""),a[_t]=t,o=Co(n,1),cr(n,_t),n.setAttribute("transform",c)):(c=getComputedStyle(n)[_t],a[_t]=t,o=Co(n,1),a[_t]=c);for(l in Bi)c=i[l],h=o[l],c!==h&&s.indexOf(l)<0&&(d=Qt(c),m=Qt(h),u=d!==m?us(n,l,c,m):parseFloat(c),f=parseFloat(h),e._pt=new vn(e._pt,o,l,u,f-u,uf),e._pt.u=m||0,e._props.push(l));H1(o,i)};yn("padding,margin,Width,Radius",function(r,e){var t="Top",n="Right",i="Bottom",s="Left",a=(e<3?[t,n,i,s]:[t+s,t+n,i+n,i+s]).map(function(o){return e<2?r+o:"border"+o+r});kc[e>1?"border"+r:r]=function(o,l,c,h,u){var f,d;if(arguments.length<4)return f=a.map(function(m){return Ci(o,m,c)}),d=f.join(" "),d.split(f[0]).length===5?f[0]:d;f=(h+"").split(" "),d={},a.forEach(function(m,g){return d[m]=f[g]=f[g]||f[(g-1)/2|0]}),o.init(l,d,u)}});var e5={name:"css",register:df,targetTest:function(e){return e.style&&e.nodeType},init:function(e,t,n,i,s){var a=this._props,o=e.style,l=n.vars.startAt,c,h,u,f,d,m,g,p,_,y,x,v,w,b,A,C;Rd||df(),this.styles=this.styles||Y2(e),C=this.styles.props,this.tween=n;for(g in t)if(g!=="autoRound"&&(h=t[g],!(En[g]&&U2(g,t,n,i,e,s)))){if(d=typeof h,m=kc[g],d==="function"&&(h=h.call(n,i,e,s),d=typeof h),d==="string"&&~h.indexOf("random(")&&(h=Ao(h)),m)m(this,e,g,h,n)&&(A=1);else if(g.substr(0,2)==="--")c=(getComputedStyle(e).getPropertyValue(g)+"").trim(),h+="",rs.lastIndex=0,rs.test(c)||(p=Qt(c),_=Qt(h)),_?p!==_&&(c=us(e,g,c,_)+_):p&&(h+=p),this.add(o,"setProperty",c,h,i,s,0,0,g),a.push(g),C.push(g,0,o[g]);else if(d!=="undefined"){if(l&&g in l?(c=typeof l[g]=="function"?l[g].call(n,i,e,s):l[g],Vt(c)&&~c.indexOf("random(")&&(c=Ao(c)),Qt(c+"")||c==="auto"||(c+=Ln.units[g]||Qt(Ci(e,g))||""),(c+"").charAt(1)==="="&&(c=Ci(e,g))):c=Ci(e,g),f=parseFloat(c),y=d==="string"&&h.charAt(1)==="="&&h.substr(0,2),y&&(h=h.substr(2)),u=parseFloat(h),g in ci&&(g==="autoAlpha"&&(f===1&&Ci(e,"visibility")==="hidden"&&u&&(f=0),C.push("visibility",0,o.visibility),ns(this,o,"visibility",f?"inherit":"hidden",u?"inherit":"hidden",!u)),g!=="scale"&&g!=="transform"&&(g=ci[g],~g.indexOf(",")&&(g=g.split(",")[0]))),x=g in Bi,x){if(this.styles.save(g),v||(w=e._gsap,w.renderTransform&&!t.parseTransform||Co(e,t.parseTransform),b=t.smoothOrigin!==!1&&w.smooth,v=this._pt=new vn(this._pt,o,_t,0,1,w.renderTransform,w,0,-1),v.dep=1),g==="scale")this._pt=new vn(this._pt,w,"scaleY",w.scaleY,(y?Jr(w.scaleY,y+u):u)-w.scaleY||0,uf),this._pt.u=0,a.push("scaleY",g),g+="X";else if(g==="transformOrigin"){C.push(Mn,0,o[Mn]),h=Dv(h),w.svg?pf(e,h,0,b,0,this):(_=parseFloat(h.split(" ")[2])||0,_!==w.zOrigin&&ns(this,w,"zOrigin",w.zOrigin,_),ns(this,o,g,Hc(c),Hc(h)));continue}else if(g==="svgOrigin"){pf(e,h,1,b,0,this);continue}else if(g in J2){Fv(this,w,g,f,y?Jr(f,y+h):h);continue}else if(g==="smoothOrigin"){ns(this,w,"smooth",w.smooth,h);continue}else if(g==="force3D"){w[g]=h;continue}else if(g==="transform"){Bv(this,h,e);continue}}else g in o||(g=pa(g)||g);if(x||(u||u===0)&&(f||f===0)&&!vv.test(h)&&g in o)p=(c+"").substr((f+"").length),u||(u=0),_=Qt(h)||(g in Ln.units?Ln.units[g]:p),p!==_&&(f=us(e,g,c,_)),this._pt=new vn(this._pt,x?w:o,g,f,(y?Jr(f,y+u):u)-f,!x&&(_==="px"||g==="zIndex")&&t.autoRound!==!1?bv:uf),this._pt.u=_||0,p!==_&&_!=="%"&&(this._pt.b=c,this._pt.r=Sv);else if(g in o)Lv.call(this,e,g,c,y?y+h:h);else if(g in e)this.add(e,g,c||e[g],y?y+h:h,i,s);else if(g!=="parseTransform"){yd(g,h);continue}x||(g in o?C.push(g,0,o[g]):C.push(g,1,c||e[g])),a.push(g)}}A&&H2(this)},render:function(e,t){if(t.tween._time||!Cd())for(var n=t._pt;n;)n.r(e,n.d),n=n._next;else t.styles.revert()},get:Ci,aliases:ci,getSetter:function(e,t,n){var i=ci[t];return i&&i.indexOf(",")<0&&(t=i),t in Bi&&t!==Mn&&(e._gsap.x||Ci(e,"x"))?n&&N1===n?t==="scale"?Ev:wv:(N1=n||{})&&(t==="scale"?Rv:Cv):e.style&&!gd(e.style[t])?Tv:~t.indexOf("-")?Av:wd(e,t)},core:{_removeProperty:cr,_getMatrix:Id}};Sn.utils.checkPrefix=pa;Sn.core.getStyleSaver=Y2;(function(r,e,t,n){var i=yn(r+","+e+","+t,function(s){Bi[s]=1});yn(e,function(s){Ln.units[s]="deg",J2[s]=1}),ci[i[13]]=r+","+e,yn(n,function(s){var a=s.split(":");ci[a[1]]=i[a[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");yn("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(r){Ln.units[r]="px"});Sn.registerPlugin(e5);var zv=Sn.registerPlugin(e5)||Sn;zv.core.Tween;class kv extends Xe{constructor(e,t,{size:n=.8,letterSpacing:i=.03,clr:s=16777215,duration:a=.6,opacity:o=1,wireframe:l=!1}={}){super(),this.basePosition=0,this.size=n,this.basePositions=[],[...e].forEach(h=>{if(h===" ")this.basePosition+=n*.5;else{const u=new Vo(t.generateShapes(h,n,1));u.computeBoundingBox();const f=new Yt({color:s,opacity:0,transparent:!0,wireframe:l,wireframeLinewidth:.1}),d=new ct(u,f);d.position.x=this.basePosition,this.basePositions.push(this.basePosition),this.basePosition+=u.boundingBox.max.x+i,this.add(d)}}),this.tm=new en({paused:!0}),this.tm.set({},{},`+=${a*1.1}`),this.children.forEach((h,u)=>{const f={opacity:0,position:-.5,index:u,color:"rgba(0,0,0,1)",colorRate:Math.random(.15,.25)};this.tm.to(f,a,{opacity:o,position:0+this.basePositions[f.index]-.03*f.index,ease:_v.easeOut.config(3),onUpdate:()=>{h.material.opacity=f.opacity,h.position.x=f.position+f.index*i*-.0125,h.material.color.b=Math.cos(a*f.index),h.material.color.r=Math.sin(a*f.index*Math.random(4,8)),h.material.color.g=Math.sin(a*f.index*Math.random(2,4))}},`-=${a-.03}`)}),this.show=this.show.bind(this),this.hide=this.hide.bind(this)}show(){this.tm.play()}hide(){this.tm.reverse()}}new ya(.5,2,2);new Yt({color:15528177,transparent:!0,opacity:.3});const Hv=(r,e)=>Math.floor(Math.random()*(e-r+1))+r,Vv=r=>r[Hv(0,r.length-1)];class Gv{constructor(e){Bd(this,"Renderer");this.Renderer=new am({canvas:e,alpha:!0,antialias:!0}),this.Renderer.setClearColor(0),this.Renderer.autoClear=!1,this.OnResize()}OnResize(){this.Renderer.setSize(window.innerWidth,window.innerHeight),this.Renderer.setPixelRatio(Math.min(window.devicePixelRatio,2))}}const t5=new pr(3,.75);t5.computeBoundingBox();class to extends ct{constructor(e){const t=new Yt({color:16777215,side:zn,map:e,transparent:!0});super(t5,t),this.OnHoverStart=function(n){this.scale.set(1.15,1.15,1.15),this.OnHoverStartCallback&&this.OnHoverStartCallback(n)},this.OnHoverEnd=function(n){this.scale.set(1,1,1),this.OnHoverEndCallback&&this.OnHoverEndCallback(n)},this.OnMouseDown=function(n){this.scale.set(1.25,1.25,1.25),this.OnMouseDownCallback&&this.OnMouseDownCallback(n)},this.OnMouseUp=function(n){this.scale.set(1,1,1),this.OnMouseUpCallback&&this.OnMouseUpCallback(n)},this.OnHoverStartCallback=function(n){},this.OnHoverEndCallback=function(n){},this.OnMouseDownCallback=function(n){},this.OnMouseUpCallback=function(n){}}}const Wv={glyphs:{0:{ha:724,x_min:109,x_max:793,o:"m 444 160 q 510 195 473 160 q 579 283 546 228 l 514 283 q 593 488 568 371 q 608 616 608 557 q 606 655 608 636 l 583 655 l 583 664 q 547 780 574 739 q 496 816 524 816 q 431 781 469 816 q 341 655 387 739 l 363 655 q 305 488 325 582 q 290 359 290 418 q 297 283 290 318 l 363 283 q 393 194 372 228 q 444 160 415 160 m 319 -19 q 133 104 195 -19 l 220 104 q 175 283 180 180 l 110 283 q 109 326 109 304 q 127 488 109 402 q 179 655 146 576 l 157 655 q 281 856 206 770 l 347 856 q 600 994 468 994 q 793 856 731 994 l 728 856 q 766 655 766 770 l 789 655 l 789 650 q 770 488 789 573 q 701 283 747 378 l 766 283 q 646 104 716 180 l 558 104 q 319 -19 443 -19 z "},1:{ha:427,x_min:131,x_max:624,o:"m 346 -11 l 165 -11 l 190 104 l 277 104 l 315 282 l 249 282 l 323 631 q 191 580 264 598 l 134 565 l 153 654 l 131 654 l 152 751 l 175 758 q 273 808 235 777 q 320 855 301 831 l 385 855 q 398 873 393 864 q 428 933 420 908 q 446 991 436 958 q 624 991 475 991 l 595 855 l 530 855 l 487 654 l 509 654 l 429 282 l 495 282 l 458 104 l 370 104 l 346 -11 z "},2:{ha:724,x_min:-3,x_max:827,o:"m 637 -11 l -3 -11 q 22 104 18 91 l 110 104 q 236 282 137 191 l 171 282 q 425 468 233 344 q 577 576 544 544 q 616 633 612 613 l 620 654 l 598 654 q 602 696 602 677 q 509 810 602 810 q 420 788 460 810 q 358 729 381 767 q 311 654 334 691 l 286 654 l 155 712 l 206 795 q 252 855 227 827 l 317 855 q 420 937 362 905 q 612 987 509 987 q 827 855 774 987 l 761 855 q 784 732 784 800 q 777 654 784 695 l 799 654 l 795 633 q 694 466 778 551 q 610 397 660 432 q 502 325 561 363 q 436 282 469 304 l 502 282 q 349 168 396 212 l 762 168 l 748 104 l 661 104 l 637 -11 z "},3:{ha:724,x_min:81,x_max:794,o:"m 296 -19 q 138 34 201 -19 q 81 104 103 62 l 169 104 q 141 180 151 138 q 123 263 132 222 l 174 283 l 109 283 l 237 333 l 247 283 l 313 283 l 319 251 q 422 160 338 160 q 538 203 486 160 q 597 283 581 238 l 532 283 q 543 340 543 311 q 513 420 543 382 q 420 458 483 458 l 331 458 l 369 636 l 458 636 q 525 655 494 636 l 503 655 l 505 656 q 558 726 549 682 q 560 743 560 734 q 539 792 560 768 q 474 816 518 816 q 415 801 444 816 q 368 762 387 786 l 310 683 l 170 766 q 238 856 232 850 l 303 856 q 421 954 353 918 q 578 994 498 994 q 710 958 654 994 q 791 861 766 922 l 794 856 l 728 856 q 743 780 743 820 q 711 655 743 717 l 733 655 q 656 555 707 601 q 725 378 725 481 q 711 283 725 328 l 777 283 q 667 104 748 182 l 579 104 q 472 26 532 58 q 296 -19 387 -19 z "},4:{ha:724,x_min:69,x_max:785,o:"m 440 399 l 491 640 l 288 399 l 440 399 m 509 -11 l 331 -11 l 355 104 l 443 104 l 468 221 l 122 221 l 135 282 l 69 282 l 100 427 l 293 654 l 271 654 l 441 855 l 507 855 l 610 977 l 785 977 l 759 855 l 694 855 l 651 654 l 673 654 l 618 399 l 734 399 l 709 282 l 774 282 l 762 221 l 646 221 l 621 104 l 534 104 l 509 -11 z "},5:{ha:724,x_min:50,x_max:841,o:"m 190 282 l 186 282 l 189 284 l 190 282 m 300 -20 q 50 104 143 -20 l 138 104 q 95 168 124 121 l 252 282 l 256 282 q 280 243 268 262 q 311 205 292 224 q 357 172 330 185 q 425 159 385 159 q 535 200 486 159 q 592 282 577 235 l 527 282 q 547 371 530 291 q 550 401 550 387 q 521 477 550 441 q 431 513 492 513 q 261 456 341 513 l 243 456 q 127 519 236 458 l 173 654 l 151 654 l 218 855 l 284 855 l 327 981 l 841 981 l 814 855 l 748 855 l 737 802 l 380 802 l 338 678 q 448 692 393 692 q 592 654 530 692 l 614 654 l 616 653 q 715 533 684 613 q 732 439 732 488 q 725 371 732 406 q 705 282 708 292 l 771 282 q 665 104 745 182 l 578 104 q 471 24 530 56 q 300 -20 388 -20 z "},6:{ha:724,x_min:98,x_max:827,o:"m 455 160 q 545 201 503 160 q 597 283 582 237 l 532 283 q 543 349 543 317 q 525 416 543 387 q 452 458 500 458 q 360 416 404 458 q 299 309 313 371 q 296 283 296 296 l 361 283 l 361 271 q 362 253 361 262 q 455 160 393 160 m 329 -19 q 129 104 197 -19 l 216 104 q 165 283 173 180 l 100 283 q 98 330 98 306 q 115 488 98 405 q 169 655 134 576 l 147 655 q 277 856 198 770 l 343 856 q 610 994 470 994 q 809 907 736 994 l 827 885 l 792 856 l 727 856 l 610 759 l 592 780 q 507 816 562 816 q 427 779 469 816 q 333 655 370 730 l 355 655 q 326 585 339 625 q 361 608 343 599 q 490 636 425 636 q 630 591 572 636 q 711 472 688 547 q 724 385 724 431 q 716 309 724 348 q 709 283 713 295 l 775 283 q 673 104 747 182 l 586 104 q 490 26 543 58 q 329 -19 411 -19 z "},7:{ha:724,x_min:123,x_max:922,o:"m 300 -11 l 123 -11 l 130 20 q 157 104 138 58 l 245 104 q 342 282 275 174 l 277 282 q 332 364 303 323 q 547 654 428 504 l 524 654 q 642 798 579 724 l 642 799 l 179 799 l 191 855 l 257 855 l 283 977 l 922 977 l 897 855 l 831 855 l 808 747 q 731 654 761 691 l 753 654 q 472 282 581 444 l 537 282 q 427 104 461 170 l 340 104 q 307 20 315 54 l 300 -11 z "},8:{ha:724,x_min:68,x_max:797,o:"m 465 636 q 529 655 500 636 l 507 655 l 509 656 q 562 745 562 688 q 543 792 562 769 q 481 816 524 816 q 406 789 440 816 q 361 708 361 754 q 387 655 361 676 l 409 655 q 465 636 431 636 m 429 160 q 541 203 490 160 q 599 283 583 238 l 534 283 q 545 342 545 316 q 516 420 545 383 q 427 458 488 458 q 315 414 366 458 q 250 309 263 371 q 248 287 248 297 l 248 283 l 313 283 l 313 275 q 336 203 313 235 q 429 160 369 160 m 304 -19 q 151 26 215 -19 q 79 104 105 58 l 166 104 q 130 237 130 164 q 134 283 130 259 l 68 283 l 73 309 q 143 463 90 392 q 235 555 183 516 q 202 655 205 601 l 180 655 q 180 673 180 664 q 248 856 180 770 l 313 856 l 318 861 q 438 957 368 921 q 585 994 509 994 q 715 958 660 994 q 797 856 773 919 l 731 856 q 745 781 745 821 q 713 655 745 715 l 735 655 q 660 555 709 601 q 713 463 696 516 q 726 378 726 422 q 712 283 726 328 l 778 283 q 669 104 749 182 l 582 104 q 476 26 534 58 q 304 -19 393 -19 z "},9:{ha:724,x_min:87,x_max:795,o:"m 440 517 q 532 558 488 517 q 590 655 576 600 l 568 655 q 575 700 575 678 q 574 722 575 711 q 534 792 559 767 q 481 815 511 815 q 391 774 434 815 q 330 655 344 728 l 352 655 q 350 627 350 640 q 371 552 350 588 q 440 517 393 517 m 304 -19 q 105 68 178 -19 l 87 90 l 104 104 l 192 104 l 326 216 l 345 195 q 430 159 374 159 q 509 195 468 159 q 583 283 548 229 l 517 283 q 568 391 546 330 q 531 368 550 376 q 402 339 467 339 q 262 384 320 339 q 180 503 204 428 q 168 588 168 543 q 174 655 168 621 l 153 655 q 250 856 174 768 l 315 856 q 425 948 363 911 q 585 994 503 994 q 794 856 726 994 l 728 856 q 773 655 771 770 l 795 655 l 795 644 q 778 488 795 570 q 707 283 754 377 l 772 283 q 645 104 720 180 l 558 104 q 304 -19 436 -19 z "},"\0":{ha:724,x_min:-60,x_max:969,o:"m -60 -11 l -36 104 l 51 104 l 88 282 l 23 282 l 102 654 l 81 654 l 123 855 l 189 855 l 214 977 l 969 977 l 943 855 l 878 855 l 835 654 l 857 654 l 777 282 l 843 282 l 806 104 l 718 104 l 694 -11 l -60 -11 z "},"":{ha:724,x_min:-60,x_max:969,o:"m -60 -11 l -36 104 l 51 104 l 88 282 l 23 282 l 102 654 l 81 654 l 123 855 l 189 855 l 214 977 l 969 977 l 943 855 l 878 855 l 835 654 l 857 654 l 777 282 l 843 282 l 806 104 l 718 104 l 694 -11 l -60 -11 z "}," ":{ha:483,x_min:0,x_max:0,o:""},"":{ha:483,x_min:0,x_max:0,o:""},a:{ha:845,x_min:-55,x_max:920,o:"m 617 399 l 575 654 l 553 654 l 547 692 l 526 654 l 547 654 l 397 399 l 617 399 m 851 -11 l 662 -11 l 643 104 l 730 104 l 711 220 l 358 220 l 290 104 l 203 104 l 136 -11 l -55 -11 l 12 104 l 100 104 l 204 282 l 138 282 l 357 654 l 335 654 l 453 855 l 519 855 l 590 977 l 757 977 l 777 855 l 711 855 l 744 654 l 766 654 l 825 282 l 891 282 l 920 104 l 833 104 l 851 -11 z "},b:{ha:845,x_min:-1,x_max:904,o:"m 551 572 q 639 606 598 572 q 677 654 665 627 l 655 654 q 669 711 669 680 q 647 770 669 742 q 578 799 625 799 l 349 799 l 319 654 l 340 654 l 323 572 l 551 572 m 589 168 q 676 201 636 168 q 726 282 715 234 l 660 282 q 663 307 663 295 q 640 366 663 338 q 571 394 618 394 l 285 394 l 261 282 l 327 282 l 303 168 l 589 168 m 464 -11 l -1 -11 l 24 104 l 111 104 l 149 282 l 83 282 l 162 654 l 140 654 l 183 855 l 248 855 l 274 977 l 681 977 q 820 937 762 977 q 892 855 867 905 l 826 855 l 827 853 q 852 749 852 806 q 837 654 852 704 l 859 654 q 773 513 834 576 q 829 428 810 478 q 845 344 845 389 q 838 282 845 314 l 904 282 q 806 104 883 182 l 719 104 q 618 29 674 58 q 464 -11 544 -11 z "},c:{ha:845,x_min:89,x_max:972,o:"m 418 -25 q 149 104 246 -22 l 237 104 q 160 282 178 179 l 95 282 q 89 361 89 321 q 165 654 89 511 l 142 654 q 303 855 203 770 l 369 855 q 699 989 522 986 q 972 855 872 987 l 906 855 l 930 822 l 772 703 l 756 726 q 596 811 697 810 q 454 768 523 810 q 335 654 386 726 l 357 654 q 280 482 300 574 q 271 397 271 438 q 293 282 271 335 l 359 282 q 420 197 380 230 q 545 153 471 155 q 741 239 646 154 l 767 262 l 876 144 l 829 104 l 741 104 q 418 -25 589 -22 z "},d:{ha:845,x_min:17,x_max:911,o:"m 461 165 q 685 282 581 165 l 619 282 q 720 482 696 368 q 730 564 730 526 q 715 654 730 613 l 693 654 q 627 758 673 718 q 508 799 578 799 l 366 799 l 336 654 l 357 654 l 278 282 l 344 282 l 319 165 l 461 165 m 336 -11 l 17 -11 l 41 104 l 129 104 l 166 282 l 100 282 l 180 654 l 158 654 l 201 855 l 267 855 l 292 977 l 612 977 q 872 855 776 977 l 807 855 q 886 654 873 770 l 908 654 q 911 598 911 627 q 899 482 911 542 q 819 282 876 375 l 884 282 q 727 104 822 178 l 640 104 q 336 -11 495 -11 z "},e:{ha:845,x_min:-1,x_max:1029,o:"m 753 -11 l -1 -11 l 23 104 l 111 104 l 148 282 l 82 282 l 161 654 l 140 654 l 182 855 l 248 855 l 273 977 l 1029 977 l 1003 855 l 937 855 l 925 798 l 348 798 l 317 654 l 339 654 l 321 572 l 784 572 l 746 394 l 283 394 l 260 282 l 326 282 l 301 167 l 878 167 l 865 104 l 778 104 l 753 -11 z "},f:{ha:785,x_min:8,x_max:981,o:"m 185 -11 l 8 -11 l 33 104 l 119 104 l 157 282 l 92 282 l 172 654 l 150 654 l 192 855 l 257 855 l 283 977 l 981 977 l 955 855 l 889 855 l 878 799 l 357 799 l 327 654 l 349 654 l 332 572 l 732 572 l 694 394 l 294 394 l 270 282 l 335 282 l 297 104 l 210 104 l 185 -11 z "},g:{ha:905,x_min:90,x_max:998,o:"m 394 -24 q 136 104 224 -24 l 223 104 q 159 282 171 178 l 94 282 q 90 340 90 310 q 106 482 90 407 q 165 654 126 574 l 143 654 q 291 855 199 771 l 356 855 q 675 989 500 989 q 848 966 778 989 q 962 895 918 944 l 998 855 l 932 855 l 949 835 l 802 703 l 749 763 q 721 785 739 774 q 668 803 703 795 q 572 811 633 811 q 443 771 504 811 q 332 655 380 729 l 332 654 l 353 654 q 285 482 305 579 q 273 380 273 427 q 288 282 273 326 l 353 282 q 408 194 371 227 q 519 153 452 153 q 706 212 631 153 q 769 282 745 241 l 703 282 q 731 349 721 313 l 741 395 l 477 395 l 515 572 l 957 572 l 895 282 l 961 282 l 923 104 l 836 104 l 811 -10 l 633 -10 l 643 37 q 394 -24 529 -24 z "},h:{ha:845,x_min:-1,x_max:1029,o:"m 754 -11 l 576 -11 l 601 104 l 688 104 l 725 282 l 660 282 l 684 394 l 284 394 l 260 282 l 326 282 l 289 104 l 201 104 l 177 -11 l -1 -11 l 23 104 l 111 104 l 148 282 l 82 282 l 161 654 l 140 654 l 182 855 l 248 855 l 274 977 l 452 977 l 427 855 l 361 855 l 318 654 l 340 654 l 322 572 l 722 572 l 739 654 l 718 654 l 760 855 l 825 855 l 851 977 l 1029 977 l 1003 855 l 938 855 l 895 654 l 917 654 l 838 282 l 903 282 l 865 104 l 779 104 l 754 -11 z "},i:{ha:362,x_min:46,x_max:499,o:"m 224 -11 l 46 -11 l 71 104 l 158 104 l 196 282 l 130 282 l 210 654 l 188 654 l 231 855 l 296 855 l 321 977 l 499 977 l 473 855 l 408 855 l 366 654 l 387 654 l 308 282 l 374 282 l 336 104 l 248 104 l 224 -11 z "},j:{ha:604,x_min:-1,x_max:779,o:"m 196 -24 q 60 23 119 -24 q -1 104 20 56 l 87 104 q 63 176 76 125 l 240 250 l 248 222 q 276 172 256 191 q 320 154 297 154 q 425 188 389 154 q 475 282 457 218 l 409 282 q 489 654 412 292 l 467 654 l 498 800 l 321 800 l 332 855 l 398 855 l 424 977 l 779 977 l 753 855 l 688 855 l 645 654 l 667 654 q 588 288 591 296 l 587 282 l 652 282 q 564 104 625 176 l 477 104 q 438 64 459 83 q 196 -24 337 -24 z "},k:{ha:845,x_min:-12,x_max:1088,o:"m 793 -11 l 567 -11 l 503 104 l 590 104 l 488 282 l 422 282 l 353 406 l 261 330 l 250 282 l 316 282 l 279 104 l 191 104 l 167 -11 l -12 -11 l 13 104 l 100 104 l 138 282 l 73 282 l 152 654 l 130 654 l 172 855 l 238 855 l 264 977 l 442 977 l 416 855 l 351 855 l 308 654 l 330 654 l 315 583 l 401 654 l 380 654 l 623 855 l 688 855 l 836 977 l 1088 977 l 941 855 l 875 855 l 631 654 l 653 654 l 507 533 l 648 282 l 714 282 l 816 104 l 728 104 l 793 -11 z "},l:{ha:724,x_min:-4,x_max:762,o:"m 636 -11 l -4 -11 l 20 104 l 108 104 l 146 282 l 80 282 l 159 654 l 138 654 l 180 855 l 246 855 l 272 977 l 450 977 l 425 855 l 359 855 l 316 654 l 338 654 l 258 282 l 324 282 l 300 167 l 762 167 l 748 104 l 661 104 l 636 -11 z "},m:{ha:966,x_min:1,x_max:1148,o:"m 779 282 l 816 454 l 715 282 l 779 282 m 585 274 l 590 282 l 584 282 l 585 274 m 328 282 l 301 454 l 264 282 l 328 282 m 872 -11 l 694 -11 l 719 104 l 806 104 l 844 282 l 781 282 l 675 104 l 588 104 l 521 -11 l 354 -11 l 336 104 l 423 104 l 394 282 l 330 282 l 292 104 l 204 104 l 180 -11 l 1 -11 l 26 104 l 113 104 l 151 282 l 86 282 l 165 654 l 143 654 l 185 855 l 251 855 l 277 977 l 450 977 l 469 855 l 404 855 l 437 654 l 458 654 l 518 282 l 524 282 l 743 654 l 721 654 l 838 855 l 904 855 l 977 977 l 1148 977 l 1122 855 l 1056 855 l 1014 654 l 1036 654 l 957 282 l 1022 282 l 984 104 l 897 104 l 872 -11 z "},n:{ha:845,x_min:0,x_max:1030,o:"m 755 -11 l 581 -11 l 534 104 l 621 104 l 547 282 l 481 282 l 336 635 l 261 282 l 327 282 l 290 104 l 202 104 l 178 -11 l 0 -11 l 24 104 l 112 104 l 149 282 l 83 282 l 163 654 l 141 654 l 184 855 l 250 855 l 275 977 l 449 977 l 499 855 l 434 855 l 516 654 l 538 654 l 672 331 l 741 654 l 718 654 l 761 855 l 827 855 l 852 977 l 1030 977 l 1004 855 l 939 855 l 896 654 l 918 654 l 838 282 l 904 282 l 867 104 l 779 104 l 755 -11 z "},o:{ha:966,x_min:112,x_max:1030,o:"m 567 155 q 708 198 640 155 q 804 282 761 231 l 739 282 q 838 484 814 370 q 848 568 848 528 q 836 654 848 614 l 814 654 q 742 768 792 726 q 619 811 692 811 q 477 768 546 811 q 357 654 409 726 l 379 654 l 375 650 q 303 484 323 575 q 294 399 294 439 q 317 282 294 336 l 382 282 q 444 198 404 231 q 567 155 493 155 m 441 -22 q 174 104 273 -22 l 262 104 q 184 282 202 180 l 119 282 q 112 362 112 321 q 125 484 112 420 q 188 654 144 574 l 165 654 q 326 855 227 770 l 392 855 q 722 989 548 989 q 996 855 897 989 l 931 855 q 1006 654 994 770 l 1027 654 q 1030 605 1030 630 q 1017 484 1030 547 q 938 282 994 376 l 1003 282 q 850 104 943 180 l 763 104 q 441 -22 610 -22 z "},p:{ha:845,x_min:33,x_max:983,o:"m 643 572 q 730 606 690 572 q 769 654 756 627 l 747 654 q 762 710 762 682 q 739 770 762 741 q 669 799 716 799 l 383 799 l 353 654 l 374 654 l 357 572 l 643 572 m 211 -11 l 33 -11 l 57 104 l 144 104 l 182 282 l 117 282 l 196 654 l 174 654 l 217 855 l 283 855 l 309 977 l 773 977 q 911 937 853 977 q 983 855 958 905 l 918 855 l 918 853 q 944 748 944 806 q 928 654 944 698 l 950 654 q 888 538 930 592 q 760 433 834 473 q 605 394 685 394 l 319 394 l 295 282 l 361 282 l 323 104 l 235 104 l 211 -11 z "},q:{ha:966,x_min:100,x_max:1018,o:"m 555 155 q 674 186 616 155 l 599 282 l 533 282 l 512 310 l 665 436 l 755 319 q 836 567 836 435 q 823 654 836 624 l 802 654 q 730 768 780 726 q 606 811 680 811 q 465 768 534 811 q 345 654 397 726 l 367 654 l 364 650 q 292 484 311 575 q 282 399 282 439 q 305 282 282 336 l 370 282 q 432 198 392 231 q 555 155 482 155 m 770 -48 l 688 58 q 429 -22 560 -22 q 162 104 261 -22 l 250 104 q 172 282 189 180 l 106 282 q 100 362 100 321 q 113 484 100 420 q 175 654 132 574 l 153 654 q 313 855 214 770 l 379 855 q 710 989 535 989 q 984 855 885 989 l 918 855 q 994 654 981 770 l 1015 654 q 1018 602 1018 629 q 1005 484 1018 545 q 925 282 982 377 l 990 282 q 924 189 961 233 l 991 104 l 904 104 l 923 79 l 770 -48 z "},r:{ha:845,x_min:25,x_max:975,o:"m 635 572 q 722 606 682 572 q 761 654 748 627 l 739 654 q 753 711 753 682 q 731 771 753 743 q 661 800 709 800 l 375 800 l 345 654 l 366 654 l 349 572 l 635 572 m 203 -11 l 25 -11 l 50 104 l 137 104 l 175 282 l 109 282 l 189 654 l 167 654 l 210 855 l 275 855 l 300 977 l 764 977 q 903 938 844 977 q 975 855 950 905 l 909 855 l 910 853 q 935 749 935 806 q 920 654 935 700 l 942 654 q 880 539 922 592 q 752 434 826 473 q 616 395 686 399 l 676 282 l 742 282 l 838 104 l 751 104 l 812 -10 l 589 -10 l 528 104 l 615 104 l 519 282 l 454 282 l 394 395 l 311 395 l 287 282 l 353 282 l 315 104 l 227 104 l 203 -11 z "},s:{ha:845,x_min:85,x_max:951,o:"m 375 -22 q 172 26 256 -22 q 85 104 117 58 l 172 104 q 143 161 153 130 l 119 241 l 206 282 l 140 282 l 228 323 l 241 282 l 307 282 l 319 245 q 379 182 331 206 q 500 155 431 155 q 612 174 559 155 q 698 221 665 193 q 734 282 732 250 l 669 282 l 669 290 q 655 328 669 310 q 589 376 634 357 q 486 394 545 394 q 301 432 380 394 q 183 537 222 471 q 157 640 157 585 l 157 654 l 135 654 q 140 692 136 673 q 227 846 158 777 l 237 855 l 303 855 q 455 951 366 915 q 656 989 551 989 q 859 941 774 989 q 951 855 919 907 l 886 855 q 909 805 900 831 l 933 726 l 783 654 l 805 654 l 780 642 l 777 654 l 755 654 l 734 722 q 671 785 721 760 q 553 811 621 811 q 440 792 493 811 q 354 745 388 774 q 317 679 317 714 q 322 654 317 666 l 344 654 q 419 591 360 616 q 524 572 464 572 q 708 534 629 572 q 825 429 787 495 q 852 327 852 382 q 848 282 852 305 l 913 282 q 825 120 897 193 q 806 104 816 111 l 719 104 q 575 16 658 49 q 375 -22 480 -22 z "},t:{ha:845,x_min:181,x_max:1040,o:"m 475 -11 l 297 -11 l 321 104 l 409 104 l 447 282 l 381 282 l 460 654 l 439 654 l 469 799 l 181 799 l 193 855 l 259 855 l 285 977 l 1040 977 l 1014 855 l 948 855 l 936 799 l 648 799 l 617 654 l 639 654 l 559 282 l 625 282 l 587 104 l 500 104 l 475 -11 z "},u:{ha:845,x_min:94,x_max:1031,o:"m 376 -22 q 190 26 265 -22 q 114 104 142 58 l 201 104 q 158 264 158 172 l 159 283 l 94 283 q 104 365 95 322 l 165 655 l 144 655 l 186 856 l 252 856 l 277 978 l 455 978 l 429 856 l 363 856 l 321 655 l 343 655 l 281 365 q 275 302 275 331 q 275 283 275 292 l 341 283 q 367 210 344 240 q 502 156 406 156 q 660 210 597 156 q 717 283 694 240 l 651 283 q 679 365 669 319 l 741 655 l 719 655 l 762 856 l 827 856 l 853 978 l 1031 978 l 1006 856 l 940 856 l 897 655 l 919 655 l 857 365 q 833 283 848 322 l 899 283 q 781 104 859 179 l 693 104 q 583 26 644 58 q 376 -22 488 -22 z "},v:{ha:845,x_min:140,x_max:1093,o:"m 447 -11 l 280 -11 l 262 104 l 349 104 l 320 282 l 254 282 l 195 654 l 173 654 l 140 855 l 205 855 l 186 977 l 376 977 l 395 855 l 330 855 l 363 654 l 385 654 l 445 282 l 451 282 l 669 654 l 648 654 l 764 855 l 830 855 l 902 977 l 1093 977 l 1021 855 l 955 855 l 838 654 l 859 654 l 641 282 l 707 282 l 602 104 l 514 104 l 447 -11 z "},w:{ha:1086,x_min:146,x_max:1272,o:"m 853 -11 l 684 -11 l 675 104 l 763 104 l 749 282 l 684 282 l 657 626 l 484 282 l 549 282 l 460 104 l 372 104 l 315 -11 l 146 -11 l 154 104 l 241 104 l 253 282 l 188 282 l 213 654 l 191 654 l 204 855 l 269 855 l 278 977 l 458 977 l 450 855 l 384 855 l 371 654 l 393 654 l 378 441 l 486 654 l 464 654 l 564 855 l 630 855 l 692 977 l 859 977 l 868 855 l 802 855 l 819 654 l 840 654 l 857 441 l 933 654 l 911 654 l 983 855 l 1048 855 l 1092 977 l 1272 977 l 1227 855 l 1162 855 l 1091 654 l 1113 654 l 980 282 l 1045 282 l 981 104 l 894 104 l 853 -11 z "},x:{ha:845,x_min:-94,x_max:1143,o:"m 868 -11 l 646 -11 l 585 104 l 672 104 l 576 282 l 511 282 l 483 335 l 432 282 l 498 282 l 326 104 l 239 104 l 129 -11 l -94 -11 l 16 104 l 104 104 l 275 282 l 210 282 l 403 483 l 311 654 l 290 654 l 182 855 l 248 855 l 182 977 l 404 977 l 470 855 l 405 855 l 512 654 l 534 654 l 546 631 l 568 654 l 546 654 l 739 855 l 804 855 l 922 977 l 1143 977 l 1027 855 l 961 855 l 768 654 l 790 654 l 625 483 l 733 282 l 798 282 l 895 104 l 807 104 l 868 -11 z "},y:{ha:845,x_min:149,x_max:1112,o:"m 444 -11 l 266 -11 l 290 104 l 378 104 l 416 282 l 351 282 l 387 454 l 279 654 l 257 654 l 149 855 l 214 855 l 149 977 l 372 977 l 437 855 l 372 855 l 479 654 l 502 654 l 513 631 l 536 654 l 513 654 l 706 855 l 771 855 l 889 977 l 1112 977 l 994 855 l 928 855 l 736 654 l 758 654 l 565 454 l 528 282 l 593 282 l 555 104 l 468 104 l 444 -11 z "},z:{ha:845,x_min:-2,x_max:1029,o:"m 753 -11 l -2 -11 l 22 104 l 110 104 l 126 178 l 237 282 l 171 282 l 568 654 l 547 654 l 701 799 l 170 799 l 182 855 l 248 855 l 274 977 l 1029 977 l 1003 855 l 937 855 l 923 787 l 781 654 l 803 654 l 405 282 l 471 282 l 348 168 l 878 168 l 865 104 l 777 104 l 753 -11 z "},A:{ha:845,x_min:-55,x_max:920,o:"m 617 399 l 575 654 l 553 654 l 547 692 l 526 654 l 547 654 l 397 399 l 617 399 m 851 -11 l 662 -11 l 643 104 l 730 104 l 711 220 l 358 220 l 290 104 l 203 104 l 136 -11 l -55 -11 l 12 104 l 100 104 l 204 282 l 138 282 l 357 654 l 335 654 l 453 855 l 519 855 l 590 977 l 757 977 l 777 855 l 711 855 l 744 654 l 766 654 l 825 282 l 891 282 l 920 104 l 833 104 l 851 -11 z "},B:{ha:845,x_min:-1,x_max:904,o:"m 551 572 q 639 606 598 572 q 677 654 665 627 l 655 654 q 669 711 669 680 q 647 770 669 742 q 578 799 625 799 l 349 799 l 319 654 l 340 654 l 323 572 l 551 572 m 589 168 q 676 201 636 168 q 726 282 715 234 l 660 282 q 663 307 663 295 q 640 366 663 338 q 571 394 618 394 l 285 394 l 261 282 l 327 282 l 303 168 l 589 168 m 464 -11 l -1 -11 l 24 104 l 111 104 l 149 282 l 83 282 l 162 654 l 140 654 l 183 855 l 248 855 l 274 977 l 681 977 q 820 937 762 977 q 892 855 867 905 l 826 855 l 827 853 q 852 749 852 806 q 837 654 852 704 l 859 654 q 773 513 834 576 q 829 428 810 478 q 845 344 845 389 q 838 282 845 314 l 904 282 q 806 104 883 182 l 719 104 q 618 29 674 58 q 464 -11 544 -11 z "},C:{ha:845,x_min:89,x_max:972,o:"m 418 -25 q 149 104 246 -22 l 237 104 q 160 282 178 179 l 95 282 q 89 361 89 321 q 165 654 89 511 l 142 654 q 303 855 203 770 l 369 855 q 699 989 522 986 q 972 855 872 987 l 906 855 l 930 822 l 772 703 l 756 726 q 596 811 697 810 q 454 768 523 810 q 335 654 386 726 l 357 654 q 280 482 300 574 q 271 397 271 438 q 293 282 271 335 l 359 282 q 420 197 380 230 q 545 153 471 155 q 741 239 646 154 l 767 262 l 876 144 l 829 104 l 741 104 q 418 -25 589 -22 z "},D:{ha:845,x_min:17,x_max:911,o:"m 461 165 q 685 282 581 165 l 619 282 q 720 482 696 368 q 730 564 730 526 q 715 654 730 613 l 693 654 q 627 758 673 718 q 508 799 578 799 l 366 799 l 336 654 l 357 654 l 278 282 l 344 282 l 319 165 l 461 165 m 336 -11 l 17 -11 l 41 104 l 129 104 l 166 282 l 100 282 l 180 654 l 158 654 l 201 855 l 267 855 l 292 977 l 612 977 q 872 855 776 977 l 807 855 q 886 654 873 770 l 908 654 q 911 598 911 627 q 899 482 911 542 q 819 282 876 375 l 884 282 q 727 104 822 178 l 640 104 q 336 -11 495 -11 z "},E:{ha:845,x_min:-1,x_max:1029,o:"m 753 -11 l -1 -11 l 23 104 l 111 104 l 148 282 l 82 282 l 161 654 l 140 654 l 182 855 l 248 855 l 273 977 l 1029 977 l 1003 855 l 937 855 l 925 798 l 348 798 l 317 654 l 339 654 l 321 572 l 784 572 l 746 394 l 283 394 l 260 282 l 326 282 l 301 167 l 878 167 l 865 104 l 778 104 l 753 -11 z "},F:{ha:785,x_min:8,x_max:981,o:"m 185 -11 l 8 -11 l 33 104 l 119 104 l 157 282 l 92 282 l 172 654 l 150 654 l 192 855 l 257 855 l 283 977 l 981 977 l 955 855 l 889 855 l 878 799 l 357 799 l 327 654 l 349 654 l 332 572 l 732 572 l 694 394 l 294 394 l 270 282 l 335 282 l 297 104 l 210 104 l 185 -11 z "},G:{ha:905,x_min:90,x_max:998,o:"m 394 -24 q 136 104 224 -24 l 223 104 q 159 282 171 178 l 94 282 q 90 340 90 310 q 106 482 90 407 q 165 654 126 574 l 143 654 q 291 855 199 771 l 356 855 q 675 989 500 989 q 848 966 778 989 q 962 895 918 944 l 998 855 l 932 855 l 949 835 l 802 703 l 749 763 q 721 785 739 774 q 668 803 703 795 q 572 811 633 811 q 443 771 504 811 q 332 655 380 729 l 332 654 l 353 654 q 285 482 305 579 q 273 380 273 427 q 288 282 273 326 l 353 282 q 408 194 371 227 q 519 153 452 153 q 706 212 631 153 q 769 282 745 241 l 703 282 q 731 349 721 313 l 741 395 l 477 395 l 515 572 l 957 572 l 895 282 l 961 282 l 923 104 l 836 104 l 811 -10 l 633 -10 l 643 37 q 394 -24 529 -24 z "},H:{ha:845,x_min:-1,x_max:1029,o:"m 754 -11 l 576 -11 l 601 104 l 688 104 l 725 282 l 660 282 l 684 394 l 284 394 l 260 282 l 326 282 l 289 104 l 201 104 l 177 -11 l -1 -11 l 23 104 l 111 104 l 148 282 l 82 282 l 161 654 l 140 654 l 182 855 l 248 855 l 274 977 l 452 977 l 427 855 l 361 855 l 318 654 l 340 654 l 322 572 l 722 572 l 739 654 l 718 654 l 760 855 l 825 855 l 851 977 l 1029 977 l 1003 855 l 938 855 l 895 654 l 917 654 l 838 282 l 903 282 l 865 104 l 779 104 l 754 -11 z "},I:{ha:362,x_min:46,x_max:499,o:"m 224 -11 l 46 -11 l 71 104 l 158 104 l 196 282 l 130 282 l 210 654 l 188 654 l 231 855 l 296 855 l 321 977 l 499 977 l 473 855 l 408 855 l 366 654 l 387 654 l 308 282 l 374 282 l 336 104 l 248 104 l 224 -11 z "},J:{ha:604,x_min:-1,x_max:779,o:"m 196 -24 q 60 23 119 -24 q -1 104 20 56 l 87 104 q 63 176 76 125 l 240 250 l 248 222 q 276 172 256 191 q 320 154 297 154 q 425 188 389 154 q 475 282 457 218 l 409 282 q 489 654 412 292 l 467 654 l 498 800 l 321 800 l 332 855 l 398 855 l 424 977 l 779 977 l 753 855 l 688 855 l 645 654 l 667 654 q 588 288 591 296 l 587 282 l 652 282 q 564 104 625 176 l 477 104 q 438 64 459 83 q 196 -24 337 -24 z "},K:{ha:845,x_min:-12,x_max:1088,o:"m 793 -11 l 567 -11 l 503 104 l 590 104 l 488 282 l 422 282 l 353 406 l 261 330 l 250 282 l 316 282 l 279 104 l 191 104 l 167 -11 l -12 -11 l 13 104 l 100 104 l 138 282 l 73 282 l 152 654 l 130 654 l 172 855 l 238 855 l 264 977 l 442 977 l 416 855 l 351 855 l 308 654 l 330 654 l 315 583 l 401 654 l 380 654 l 623 855 l 688 855 l 836 977 l 1088 977 l 941 855 l 875 855 l 631 654 l 653 654 l 507 533 l 648 282 l 714 282 l 816 104 l 728 104 l 793 -11 z "},L:{ha:724,x_min:-4,x_max:762,o:"m 636 -11 l -4 -11 l 20 104 l 108 104 l 146 282 l 80 282 l 159 654 l 138 654 l 180 855 l 246 855 l 272 977 l 450 977 l 425 855 l 359 855 l 316 654 l 338 654 l 258 282 l 324 282 l 300 167 l 762 167 l 748 104 l 661 104 l 636 -11 z "},M:{ha:966,x_min:1,x_max:1148,o:"m 779 282 l 816 454 l 715 282 l 779 282 m 585 274 l 590 282 l 584 282 l 585 274 m 328 282 l 301 454 l 264 282 l 328 282 m 872 -11 l 694 -11 l 719 104 l 806 104 l 844 282 l 781 282 l 675 104 l 588 104 l 521 -11 l 354 -11 l 336 104 l 423 104 l 394 282 l 330 282 l 292 104 l 204 104 l 180 -11 l 1 -11 l 26 104 l 113 104 l 151 282 l 86 282 l 165 654 l 143 654 l 185 855 l 251 855 l 277 977 l 450 977 l 469 855 l 404 855 l 437 654 l 458 654 l 518 282 l 524 282 l 743 654 l 721 654 l 838 855 l 904 855 l 977 977 l 1148 977 l 1122 855 l 1056 855 l 1014 654 l 1036 654 l 957 282 l 1022 282 l 984 104 l 897 104 l 872 -11 z "},N:{ha:845,x_min:0,x_max:1030,o:"m 755 -11 l 581 -11 l 534 104 l 621 104 l 547 282 l 481 282 l 336 635 l 261 282 l 327 282 l 290 104 l 202 104 l 178 -11 l 0 -11 l 24 104 l 112 104 l 149 282 l 83 282 l 163 654 l 141 654 l 184 855 l 250 855 l 275 977 l 449 977 l 499 855 l 434 855 l 516 654 l 538 654 l 672 331 l 741 654 l 718 654 l 761 855 l 827 855 l 852 977 l 1030 977 l 1004 855 l 939 855 l 896 654 l 918 654 l 838 282 l 904 282 l 867 104 l 779 104 l 755 -11 z "},O:{ha:966,x_min:112,x_max:1030,o:"m 567 155 q 708 198 640 155 q 804 282 761 231 l 739 282 q 838 484 814 370 q 848 568 848 528 q 836 654 848 614 l 814 654 q 742 768 792 726 q 619 811 692 811 q 477 768 546 811 q 357 654 409 726 l 379 654 l 375 650 q 303 484 323 575 q 294 399 294 439 q 317 282 294 336 l 382 282 q 444 198 404 231 q 567 155 493 155 m 441 -22 q 174 104 273 -22 l 262 104 q 184 282 202 180 l 119 282 q 112 362 112 321 q 125 484 112 420 q 188 654 144 574 l 165 654 q 326 855 227 770 l 392 855 q 722 989 548 989 q 996 855 897 989 l 931 855 q 1006 654 994 770 l 1027 654 q 1030 605 1030 630 q 1017 484 1030 547 q 938 282 994 376 l 1003 282 q 850 104 943 180 l 763 104 q 441 -22 610 -22 z "},P:{ha:845,x_min:33,x_max:983,o:"m 643 572 q 730 606 690 572 q 769 654 756 627 l 747 654 q 762 710 762 682 q 739 770 762 741 q 669 799 716 799 l 383 799 l 353 654 l 374 654 l 357 572 l 643 572 m 211 -11 l 33 -11 l 57 104 l 144 104 l 182 282 l 117 282 l 196 654 l 174 654 l 217 855 l 283 855 l 309 977 l 773 977 q 911 937 853 977 q 983 855 958 905 l 918 855 l 918 853 q 944 748 944 806 q 928 654 944 698 l 950 654 q 888 538 930 592 q 760 433 834 473 q 605 394 685 394 l 319 394 l 295 282 l 361 282 l 323 104 l 235 104 l 211 -11 z "},Q:{ha:966,x_min:100,x_max:1018,o:"m 555 155 q 674 186 616 155 l 599 282 l 533 282 l 512 310 l 665 436 l 755 319 q 836 567 836 435 q 823 654 836 624 l 802 654 q 730 768 780 726 q 606 811 680 811 q 465 768 534 811 q 345 654 397 726 l 367 654 l 364 650 q 292 484 311 575 q 282 399 282 439 q 305 282 282 336 l 370 282 q 432 198 392 231 q 555 155 482 155 m 770 -48 l 688 58 q 429 -22 560 -22 q 162 104 261 -22 l 250 104 q 172 282 189 180 l 106 282 q 100 362 100 321 q 113 484 100 420 q 175 654 132 574 l 153 654 q 313 855 214 770 l 379 855 q 710 989 535 989 q 984 855 885 989 l 918 855 q 994 654 981 770 l 1015 654 q 1018 602 1018 629 q 1005 484 1018 545 q 925 282 982 377 l 990 282 q 924 189 961 233 l 991 104 l 904 104 l 923 79 l 770 -48 z "},R:{ha:845,x_min:25,x_max:975,o:"m 635 572 q 722 606 682 572 q 761 654 748 627 l 739 654 q 753 711 753 682 q 731 771 753 743 q 661 800 709 800 l 375 800 l 345 654 l 366 654 l 349 572 l 635 572 m 203 -11 l 25 -11 l 50 104 l 137 104 l 175 282 l 109 282 l 189 654 l 167 654 l 210 855 l 275 855 l 300 977 l 764 977 q 903 938 844 977 q 975 855 950 905 l 909 855 l 910 853 q 935 749 935 806 q 920 654 935 700 l 942 654 q 880 539 922 592 q 752 434 826 473 q 616 395 686 399 l 676 282 l 742 282 l 838 104 l 751 104 l 812 -10 l 589 -10 l 528 104 l 615 104 l 519 282 l 454 282 l 394 395 l 311 395 l 287 282 l 353 282 l 315 104 l 227 104 l 203 -11 z "},S:{ha:845,x_min:85,x_max:951,o:"m 375 -22 q 172 26 256 -22 q 85 104 117 58 l 172 104 q 143 161 153 130 l 119 241 l 206 282 l 140 282 l 228 323 l 241 282 l 307 282 l 319 245 q 379 182 331 206 q 500 155 431 155 q 612 174 559 155 q 698 221 665 193 q 734 282 732 250 l 669 282 l 669 290 q 655 328 669 310 q 589 376 634 357 q 486 394 545 394 q 301 432 380 394 q 183 537 222 471 q 157 640 157 585 l 157 654 l 135 654 q 140 692 136 673 q 227 846 158 777 l 237 855 l 303 855 q 455 951 366 915 q 656 989 551 989 q 859 941 774 989 q 951 855 919 907 l 886 855 q 909 805 900 831 l 933 726 l 783 654 l 805 654 l 780 642 l 777 654 l 755 654 l 734 722 q 671 785 721 760 q 553 811 621 811 q 440 792 493 811 q 354 745 388 774 q 317 679 317 714 q 322 654 317 666 l 344 654 q 419 591 360 616 q 524 572 464 572 q 708 534 629 572 q 825 429 787 495 q 852 327 852 382 q 848 282 852 305 l 913 282 q 825 120 897 193 q 806 104 816 111 l 719 104 q 575 16 658 49 q 375 -22 480 -22 z "},T:{ha:845,x_min:181,x_max:1040,o:"m 475 -11 l 297 -11 l 321 104 l 409 104 l 447 282 l 381 282 l 460 654 l 439 654 l 469 799 l 181 799 l 193 855 l 259 855 l 285 977 l 1040 977 l 1014 855 l 948 855 l 936 799 l 648 799 l 617 654 l 639 654 l 559 282 l 625 282 l 587 104 l 500 104 l 475 -11 z "},U:{ha:845,x_min:94,x_max:1031,o:"m 376 -22 q 190 26 265 -22 q 114 104 142 58 l 201 104 q 158 264 158 172 l 159 283 l 94 283 q 104 365 95 322 l 165 655 l 144 655 l 186 856 l 252 856 l 277 978 l 455 978 l 429 856 l 363 856 l 321 655 l 343 655 l 281 365 q 275 302 275 331 q 275 283 275 292 l 341 283 q 367 210 344 240 q 502 156 406 156 q 660 210 597 156 q 717 283 694 240 l 651 283 q 679 365 669 319 l 741 655 l 719 655 l 762 856 l 827 856 l 853 978 l 1031 978 l 1006 856 l 940 856 l 897 655 l 919 655 l 857 365 q 833 283 848 322 l 899 283 q 781 104 859 179 l 693 104 q 583 26 644 58 q 376 -22 488 -22 z "},V:{ha:845,x_min:140,x_max:1093,o:"m 447 -11 l 280 -11 l 262 104 l 349 104 l 320 282 l 254 282 l 195 654 l 173 654 l 140 855 l 205 855 l 186 977 l 376 977 l 395 855 l 330 855 l 363 654 l 385 654 l 445 282 l 451 282 l 669 654 l 648 654 l 764 855 l 830 855 l 902 977 l 1093 977 l 1021 855 l 955 855 l 838 654 l 859 654 l 641 282 l 707 282 l 602 104 l 514 104 l 447 -11 z "},W:{ha:1086,x_min:146,x_max:1272,o:"m 853 -11 l 684 -11 l 675 104 l 763 104 l 749 282 l 684 282 l 657 626 l 484 282 l 549 282 l 460 104 l 372 104 l 315 -11 l 146 -11 l 154 104 l 241 104 l 253 282 l 188 282 l 213 654 l 191 654 l 204 855 l 269 855 l 278 977 l 458 977 l 450 855 l 384 855 l 371 654 l 393 654 l 378 441 l 486 654 l 464 654 l 564 855 l 630 855 l 692 977 l 859 977 l 868 855 l 802 855 l 819 654 l 840 654 l 857 441 l 933 654 l 911 654 l 983 855 l 1048 855 l 1092 977 l 1272 977 l 1227 855 l 1162 855 l 1091 654 l 1113 654 l 980 282 l 1045 282 l 981 104 l 894 104 l 853 -11 z "},X:{ha:845,x_min:-94,x_max:1143,o:"m 868 -11 l 646 -11 l 585 104 l 672 104 l 576 282 l 511 282 l 483 335 l 432 282 l 498 282 l 326 104 l 239 104 l 129 -11 l -94 -11 l 16 104 l 104 104 l 275 282 l 210 282 l 403 483 l 311 654 l 290 654 l 182 855 l 248 855 l 182 977 l 404 977 l 470 855 l 405 855 l 512 654 l 534 654 l 546 631 l 568 654 l 546 654 l 739 855 l 804 855 l 922 977 l 1143 977 l 1027 855 l 961 855 l 768 654 l 790 654 l 625 483 l 733 282 l 798 282 l 895 104 l 807 104 l 868 -11 z "},Y:{ha:845,x_min:149,x_max:1112,o:"m 444 -11 l 266 -11 l 290 104 l 378 104 l 416 282 l 351 282 l 387 454 l 279 654 l 257 654 l 149 855 l 214 855 l 149 977 l 372 977 l 437 855 l 372 855 l 479 654 l 502 654 l 513 631 l 536 654 l 513 654 l 706 855 l 771 855 l 889 977 l 1112 977 l 994 855 l 928 855 l 736 654 l 758 654 l 565 454 l 528 282 l 593 282 l 555 104 l 468 104 l 444 -11 z "},Z:{ha:845,x_min:-2,x_max:1029,o:"m 753 -11 l -2 -11 l 22 104 l 110 104 l 126 178 l 237 282 l 171 282 l 568 654 l 547 654 l 701 799 l 170 799 l 182 855 l 248 855 l 274 977 l 1029 977 l 1003 855 l 937 855 l 923 787 l 781 654 l 803 654 l 405 282 l 471 282 l 348 168 l 878 168 l 865 104 l 777 104 l 753 -11 z "},".":{ha:282,x_min:-18,x_max:334,o:"m 199 -31 l -18 -31 l 11 104 l 98 104 l 116 187 l 334 187 l 316 104 l 229 104 l 199 -31 z "},":":{ha:282,x_min:-18,x_max:369,o:"m 345 548 l 127 548 l 150 654 l 127 654 l 151 766 l 369 766 l 345 654 l 368 654 l 345 548 m 199 -31 l -18 -31 l 11 104 l 98 104 l 116 187 l 334 187 l 316 104 l 229 104 l 199 -31 z "},",":{ha:282,x_min:-52,x_max:334,o:"m 57 -186 l -52 -186 l 90 -31 l -18 -31 l 10 104 l 98 104 l 116 187 l 334 187 l 315 104 l 228 104 l 199 -31 l 57 -186 z "},";":{ha:282,x_min:-51,x_max:369,o:"m 345 549 l 127 549 l 149 655 l 127 655 l 151 767 l 369 767 l 345 655 l 367 655 l 345 549 m 58 -186 l -51 -186 l 91 -31 l -18 -31 l 11 104 l 98 104 l 116 188 l 334 188 l 316 104 l 229 104 l 199 -31 l 58 -186 z "},"'":{ha:282,x_min:181,x_max:504,o:"m 304 668 l 196 668 l 181 855 l 246 855 l 286 1042 l 504 1042 l 464 855 l 399 855 l 304 668 z "},'"':{ha:526,x_min:187,x_max:743,o:"m 543 668 l 434 668 l 420 855 l 405 855 l 311 668 l 201 668 l 187 855 l 253 855 l 292 1042 l 510 1042 l 471 855 l 486 855 l 525 1042 l 743 1042 l 703 855 l 637 855 l 543 668 z "},"(":{ha:422,x_min:62,x_max:623,o:"m 311 -184 l 121 -184 q 94 -58 109 -113 q 62 104 75 18 l 149 104 q 139 231 139 170 q 141 282 139 257 l 75 282 q 90 394 79 336 q 186 650 123 543 l 189 654 l 167 654 q 288 849 224 759 l 291 855 l 357 855 q 435 977 393 909 l 623 977 q 550 855 572 889 l 485 855 q 432 773 460 814 q 356 654 393 715 l 378 654 q 343 595 359 625 q 268 394 293 504 q 255 282 257 336 l 321 282 l 321 265 q 339 104 321 197 l 252 104 q 272 17 260 59 q 300 -125 290 -56 l 311 -184 z "},"!":{ha:282,x_min:-18,x_max:480,o:"m 199 -31 l -18 -31 l 11 104 l 98 104 l 116 188 l 334 188 l 316 104 l 229 104 l 199 -31 m 320 221 l 144 221 l 155 283 l 90 283 l 158 655 l 136 655 l 173 856 l 239 856 l 261 978 l 480 978 l 451 856 l 386 856 l 337 655 l 359 655 l 270 283 l 336 283 l 320 221 z "},"?":{ha:673,x_min:162,x_max:829,o:"m 380 -31 l 162 -31 l 191 104 l 278 104 l 296 187 l 513 187 l 496 104 l 408 104 l 380 -31 m 501 220 l 323 220 l 336 282 l 271 282 q 300 383 286 354 q 386 491 330 445 q 496 568 437 532 q 595 644 581 623 l 602 654 l 581 654 q 603 721 603 690 q 564 794 603 768 q 512 808 542 808 q 396 769 452 808 q 294 692 371 752 l 200 823 l 243 855 l 309 855 q 387 913 368 901 q 616 986 495 986 q 751 948 692 986 q 829 855 804 913 l 764 855 q 785 758 785 809 q 764 654 785 704 l 787 654 q 655 483 747 551 q 572 426 614 453 q 463 340 473 363 q 448 282 459 330 l 514 282 l 501 220 z "},")":{ha:422,x_min:-50,x_max:493,o:"m 140 -184 l -50 -184 q 75 17 33 -45 q 132 104 104 59 l 219 104 q 313 282 286 211 l 248 282 q 283 395 269 336 q 297 526 297 464 q 283 654 297 581 l 262 654 q 237 773 252 715 q 218 855 226 814 l 283 855 q 263 977 277 889 l 451 977 q 477 855 464 909 l 412 855 q 451 654 435 777 l 473 654 q 479 570 479 631 q 427 282 479 426 l 493 282 q 409 104 464 199 l 321 104 q 220 -58 272 18 q 140 -184 184 -111 z "},"+":{ha:604,x_min:66,x_max:656,o:"m 445 105 l 267 105 l 304 278 l 132 278 l 132 282 l 66 282 l 104 456 l 277 456 l 313 630 l 491 630 l 454 456 l 628 456 l 591 282 l 656 282 l 655 278 l 482 278 l 445 105 z "},"-":{ha:604,x_min:98,x_max:661,o:"m 623 279 l 98 279 l 136 457 l 661 457 l 623 279 z "},"*":{ha:422,x_min:174,x_max:602,o:"m 369 677 l 332 758 l 260 678 l 174 745 l 252 833 l 184 855 l 250 855 l 235 860 l 296 976 l 377 948 l 397 1042 l 518 1042 l 498 948 l 591 976 l 602 860 l 585 855 l 519 855 l 443 833 l 484 745 l 369 677 z "},"/":{ha:484,x_min:-69,x_max:758,o:"m 121 -11 l -69 -11 l -3 104 l 85 104 l 189 282 l 123 282 l 338 654 l 317 654 l 433 855 l 498 855 l 568 977 l 758 977 l 688 855 l 622 855 l 506 654 l 528 654 l 313 282 l 378 282 l 275 104 l 187 104 l 121 -11 z "},"=":{ha:604,x_min:66,x_max:657,o:"m 631 163 l 106 163 l 132 282 l 66 282 l 79 341 l 604 341 l 591 282 l 657 282 l 631 163 m 615 395 l 90 395 l 128 573 l 653 573 l 615 395 z "},"\\":{ha:484,x_min:148,x_max:540,o:"m 470 -11 l 280 -11 l 262 104 l 350 104 l 323 282 l 257 282 l 201 654 l 178 654 l 148 855 l 214 855 l 195 977 l 384 977 l 403 855 l 338 855 l 368 654 l 390 654 l 447 282 l 513 282 l 540 104 l 452 104 l 470 -11 z "},_:{ha:483,x_min:-60,x_max:503,o:"m 465 -184 l -60 -184 l -22 -5 l 503 -5 l 465 -184 z "},"[":{ha:422,x_min:-37,x_max:627,o:"m 315 -184 l -37 -184 l 24 104 l 112 104 l 150 282 l 84 282 l 163 654 l 142 654 l 184 855 l 249 855 l 275 977 l 627 977 l 601 855 l 535 855 l 524 800 l 351 800 l 320 654 l 342 654 l 262 282 l 328 282 l 290 104 l 203 104 l 179 -7 l 352 -7 l 315 -184 z "},"]":{ha:422,x_min:-47,x_max:616,o:"m 304 -184 l -47 -184 l -10 -7 l 163 -7 l 186 104 l 274 104 l 312 282 l 246 282 l 326 654 l 304 654 l 334 800 l 161 800 l 173 855 l 238 855 l 264 977 l 616 977 l 590 855 l 524 855 l 482 654 l 504 654 l 425 282 l 490 282 l 452 104 l 365 104 l 304 -184 z "},"|":{ha:241,x_min:-64,x_max:475,o:"m 115 -243 l -64 -243 l 10 104 l 98 104 l 135 282 l 69 282 l 149 654 l 127 654 l 170 855 l 235 855 l 297 1150 l 475 1150 l 413 855 l 348 855 l 305 654 l 327 654 l 248 282 l 313 282 l 276 104 l 189 104 l 115 -243 z "},"":{ha:604,x_min:98,x_max:661,o:"m 623 279 l 98 279 l 136 457 l 661 457 l 623 279 z "},"":{ha:282,x_min:181,x_max:504,o:"m 304 668 l 196 668 l 181 855 l 246 855 l 286 1042 l 504 1042 l 464 855 l 399 855 l 304 668 z "},"":{ha:526,x_min:187,x_max:743,o:"m 543 668 l 434 668 l 420 855 l 405 855 l 311 668 l 201 668 l 187 855 l 253 855 l 292 1042 l 510 1042 l 471 855 l 486 855 l 525 1042 l 743 1042 l 703 855 l 637 855 l 543 668 z "},:{ha:282,x_min:181,x_max:504,o:"m 304 668 l 196 668 l 181 855 l 246 855 l 286 1042 l 504 1042 l 464 855 l 399 855 l 304 668 z "},:{ha:282,x_min:181,x_max:504,o:"m 304 668 l 196 668 l 181 855 l 246 855 l 286 1042 l 504 1042 l 464 855 l 399 855 l 304 668 z "},:{ha:282,x_min:181,x_max:504,o:"m 304 668 l 196 668 l 181 855 l 246 855 l 286 1042 l 504 1042 l 464 855 l 399 855 l 304 668 z "},"":{ha:282,x_min:181,x_max:504,o:"m 304 668 l 196 668 l 181 855 l 246 855 l 286 1042 l 504 1042 l 464 855 l 399 855 l 304 668 z "},"":{ha:282,x_min:181,x_max:504,o:"m 304 668 l 196 668 l 181 855 l 246 855 l 286 1042 l 504 1042 l 464 855 l 399 855 l 304 668 z "},"":{ha:282,x_min:181,x_max:504,o:"m 304 668 l 196 668 l 181 855 l 246 855 l 286 1042 l 504 1042 l 464 855 l 399 855 l 304 668 z "},"":{ha:282,x_min:181,x_max:504,o:"m 304 668 l 196 668 l 181 855 l 246 855 l 286 1042 l 504 1042 l 464 855 l 399 855 l 304 668 z "},"":{ha:526,x_min:187,x_max:743,o:"m 543 668 l 434 668 l 420 855 l 405 855 l 311 668 l 201 668 l 187 855 l 253 855 l 292 1042 l 510 1042 l 471 855 l 486 855 l 525 1042 l 743 1042 l 703 855 l 637 855 l 543 668 z "},"":{ha:526,x_min:187,x_max:743,o:"m 543 668 l 434 668 l 420 855 l 405 855 l 311 668 l 201 668 l 187 855 l 253 855 l 292 1042 l 510 1042 l 471 855 l 486 855 l 525 1042 l 743 1042 l 703 855 l 637 855 l 543 668 z "},"":{ha:526,x_min:187,x_max:743,o:"m 543 668 l 434 668 l 420 855 l 405 855 l 311 668 l 201 668 l 187 855 l 253 855 l 292 1042 l 510 1042 l 471 855 l 486 855 l 525 1042 l 743 1042 l 703 855 l 637 855 l 543 668 z "},"":{ha:526,x_min:187,x_max:743,o:"m 543 668 l 434 668 l 420 855 l 405 855 l 311 668 l 201 668 l 187 855 l 253 855 l 292 1042 l 510 1042 l 471 855 l 486 855 l 525 1042 l 743 1042 l 703 855 l 637 855 l 543 668 z "},"":{ha:727,x_min:-18,x_max:779,o:"m 240 104 l 222 104 l 193 -31 l -18 -31 l 11 104 l 98 104 l 116 187 l 327 187 l 309 104 l 328 104 l 345 187 l 549 187 l 532 104 l 550 104 l 568 187 l 779 187 l 761 104 l 673 104 l 644 -31 l 433 -31 l 463 104 l 444 104 l 415 -31 l 211 -31 l 240 104 z "},"":{ha:604,x_min:98,x_max:661,o:"m 623 279 l 98 279 l 136 457 l 661 457 l 623 279 z "},"":{ha:604,x_min:98,x_max:661,o:"m 623 279 l 98 279 l 136 457 l 661 457 l 623 279 z "},"":{ha:604,x_min:98,x_max:661,o:"m 623 279 l 98 279 l 136 457 l 661 457 l 623 279 z "},"":{ha:604,x_min:98,x_max:661,o:"m 623 279 l 98 279 l 136 457 l 661 457 l 623 279 z "},"":{ha:604,x_min:98,x_max:661,o:"m 623 279 l 98 279 l 136 457 l 661 457 l 623 279 z "},$:{ha:845,x_min:85,x_max:951,o:"m 576 163 q 699 221 650 180 q 734 282 732 250 l 669 282 l 669 290 q 655 328 669 310 q 558 386 625 370 l 536 282 l 602 282 l 576 163 m 450 581 l 467 654 l 444 654 l 475 803 q 353 745 403 786 q 317 679 317 714 q 322 654 317 666 l 344 654 q 353 638 347 646 q 450 581 385 597 m 415 -184 l 266 -184 l 301 -17 q 172 26 229 -7 q 85 104 117 58 l 172 104 q 143 161 153 130 l 119 241 l 206 282 l 140 282 l 228 323 l 241 282 l 307 282 l 319 245 q 379 182 331 206 q 427 163 401 170 l 452 282 l 387 282 l 412 399 q 301 432 350 408 q 183 537 222 471 q 156 642 156 585 l 157 654 l 135 654 q 140 692 136 673 q 227 846 158 777 l 237 855 l 302 855 q 456 951 366 915 q 580 985 515 976 l 615 1150 l 764 1150 l 729 984 q 860 940 802 974 q 951 855 919 907 l 886 855 q 909 805 900 831 l 933 726 l 783 654 l 754 654 l 734 722 q 672 785 721 760 q 625 802 650 796 l 593 654 l 616 654 l 597 567 q 707 534 658 559 q 825 429 787 495 q 852 326 852 382 q 848 282 852 304 l 913 282 q 825 120 897 193 l 806 104 l 719 104 q 575 16 658 49 q 450 -18 515 -9 l 415 -184 z "},"#":{ha:724,x_min:67,x_max:876,o:"m 424 104 l 463 220 l 412 220 l 372 104 l 424 104 m 458 399 l 515 568 l 464 568 l 407 399 l 458 399 m 553 745 l 590 855 l 538 855 l 501 745 l 553 745 m 477 -11 l 298 -11 l 336 104 l 285 104 l 247 -11 l 67 -11 l 106 104 l 193 104 l 233 220 l 151 220 l 163 282 l 98 282 l 123 399 l 227 399 l 284 568 l 216 568 l 235 654 l 213 654 l 232 745 l 322 745 l 359 855 l 425 855 l 466 977 l 645 977 l 604 855 l 656 855 l 696 977 l 876 977 l 836 855 l 770 855 l 732 745 l 814 745 l 795 654 l 817 654 l 799 568 l 694 568 l 637 399 l 705 399 l 680 282 l 746 282 l 733 220 l 643 220 l 604 104 l 516 104 l 477 -11 z "},"%":{ha:975,x_min:149,x_max:1027,o:"m 799 159 q 825 191 810 167 q 843 241 837 212 q 847 275 847 260 l 847 283 l 804 283 q 786 206 786 245 q 799 159 786 174 m 781 283 l 781 292 q 768 324 777 315 q 739 283 751 311 l 781 283 m 557 629 l 572 655 l 568 655 q 557 629 563 642 m 366 637 q 382 655 374 643 l 361 655 q 388 720 380 682 q 392 754 392 739 q 379 802 392 788 q 335 720 347 779 q 331 684 331 701 q 335 655 331 669 l 357 655 q 366 637 361 642 m 673 -21 q 543 58 585 -21 q 524 104 530 80 l 612 104 q 604 169 604 135 q 623 283 604 224 l 612 283 l 509 104 l 422 104 l 355 -10 l 165 -10 l 231 104 l 319 104 l 422 283 l 357 283 l 530 583 q 493 536 513 558 q 327 456 415 456 q 197 536 239 456 q 171 646 171 585 l 171 655 l 149 655 q 157 720 149 686 q 214 856 173 795 l 280 856 q 317 902 296 880 q 483 982 394 982 q 614 902 571 982 q 632 856 625 880 l 566 856 q 574 791 574 826 q 547 655 574 725 l 551 655 l 667 856 l 732 856 l 803 978 l 992 978 l 922 856 l 856 856 l 740 655 l 762 655 l 547 283 l 557 283 q 642 425 585 364 q 806 504 718 504 q 938 425 895 504 q 964 317 964 377 q 962 283 964 300 l 1027 283 q 1021 241 1026 262 q 963 104 1005 165 l 876 104 q 839 58 859 80 q 673 -21 762 -21 z "},"&":{ha:725,x_min:71,x_max:758,o:"m 400 654 q 431 685 417 669 q 461 759 461 720 q 458 779 461 770 q 434 811 449 803 l 425 806 q 377 722 377 774 q 394 654 377 692 l 400 654 m 378 157 q 498 220 431 157 q 472 282 486 253 l 406 282 q 342 394 383 330 q 294 351 315 372 q 260 282 269 323 l 326 282 q 323 245 323 262 q 378 157 323 157 m 252 -22 q 145 7 189 -22 q 71 104 91 42 l 158 104 q 140 206 140 150 q 147 282 140 242 l 81 282 l 84 293 q 201 484 106 396 q 258 532 229 509 q 218 654 222 600 l 196 654 q 195 682 195 668 q 253 855 195 774 l 319 855 l 323 862 q 421 953 366 918 q 538 990 484 990 q 639 953 592 990 q 700 855 682 916 l 634 855 q 643 793 643 825 q 606 654 643 722 l 627 654 q 553 557 593 597 q 502 512 528 534 q 564 404 534 463 l 601 471 l 758 416 q 684 282 697 302 l 749 282 q 704 213 728 245 q 725 104 718 162 l 637 104 q 648 -11 642 64 l 460 -11 q 456 50 457 37 q 252 -22 353 -22 z "},"@":{ha:967,x_min:96,x_max:1029,o:"m 346 282 q 332 361 332 319 q 339 426 332 392 q 439 605 361 530 q 506 654 472 636 l 484 654 q 591 682 535 682 q 631 678 612 682 l 631 682 l 809 682 l 804 654 l 825 654 l 777 426 q 770 381 770 395 q 772 370 770 374 q 777 351 774 355 q 812 412 800 368 l 819 441 l 819 442 q 848 651 848 581 l 848 654 l 826 654 q 809 739 825 709 q 747 785 790 772 q 616 799 698 799 q 366 654 457 799 l 387 654 q 302 431 331 566 q 285 292 288 361 l 284 282 l 346 282 m 541 347 q 570 366 553 347 q 602 451 602 402 q 595 485 602 470 q 574 504 586 504 q 546 485 562 504 q 514 400 514 449 q 521 366 514 381 q 541 347 529 347 m 739 -127 l 419 -127 q 229 -83 304 -127 q 96 104 127 -23 l 183 104 q 168 234 168 162 q 169 282 168 258 l 103 282 q 191 637 113 465 q 200 654 195 648 l 178 654 q 326 855 237 779 l 391 855 q 718 977 530 977 q 907 951 831 977 q 1027 858 987 923 l 1029 855 l 964 855 q 1004 673 1004 787 l 1004 654 l 1025 654 q 994 428 1022 559 q 929 282 976 342 l 995 282 q 908 201 956 231 q 800 168 854 169 q 699 212 737 168 q 569 169 636 169 q 429 246 477 169 q 412 282 418 264 l 350 282 l 350 271 q 403 104 350 160 l 315 104 q 457 52 363 52 l 777 52 l 739 -127 z "},"<":{ha:604,x_min:67,x_max:669,o:"m 615 87 l 138 282 l 72 282 l 67 284 l 102 452 l 669 648 l 628 458 l 370 368 l 579 282 l 644 282 l 656 278 l 615 87 z "},">":{ha:604,x_min:81,x_max:653,o:"m 94 87 l 134 278 l 146 282 l 81 282 l 327 368 l 106 458 l 147 648 l 629 452 l 593 284 l 588 282 l 653 282 l 94 87 z "},"{":{ha:422,x_min:47,x_max:616,o:"m 304 -184 l 216 -184 q 81 -136 124 -184 q 47 -43 47 -97 q 54 20 47 -14 l 71 104 l 159 104 q 191 260 191 256 q 187 274 191 269 q 170 278 183 278 l 138 278 l 139 282 l 74 282 l 123 515 l 155 515 q 175 520 168 515 q 185 538 181 525 l 210 654 l 189 654 l 214 772 q 243 855 224 821 l 309 855 q 373 929 332 897 q 528 977 437 977 l 616 977 l 591 855 l 526 855 l 513 799 q 402 797 408 799 q 392 772 397 795 l 367 654 l 389 654 l 365 541 q 320 444 355 495 q 277 396 301 417 q 307 296 307 355 l 307 282 l 372 282 q 369 252 372 267 l 337 104 l 250 104 q 229 -4 229 5 q 342 -6 233 -6 l 304 -184 z "},"}":{ha:422,x_min:-47,x_max:522,o:"m 41 -184 l -47 -184 l -9 -6 q 106 -3 104 -6 q 130 104 109 5 l 217 104 q 258 282 253 269 l 192 282 q 271 396 218 350 q 241 500 241 437 q 245 541 241 522 l 269 654 l 247 654 q 275 797 275 789 l 272 797 q 161 799 266 799 l 174 855 l 239 855 l 265 977 l 354 977 q 488 929 445 977 q 522 855 516 897 l 456 855 q 457 832 457 844 q 450 772 457 805 l 425 654 l 447 654 q 422 532 422 536 q 426 519 422 524 q 444 515 430 515 l 475 515 l 425 282 l 491 282 l 490 278 l 458 278 q 439 273 446 278 q 428 255 432 268 l 395 104 l 308 104 l 290 20 q 197 -136 271 -79 q 41 -184 133 -184 z "},"^":{ha:604,x_min:117,x_max:678,o:"m 678 452 l 488 452 l 455 654 l 433 654 l 427 692 l 405 654 l 427 654 l 308 452 l 117 452 l 237 654 l 215 654 l 333 855 l 399 855 l 470 977 l 637 977 l 656 855 l 591 855 l 623 654 l 645 654 l 678 452 z "},"~":{ha:845,x_min:94,x_max:887,o:"m 698 220 q 588 242 639 220 q 509 282 547 260 l 444 282 l 433 288 q 366 323 399 308 q 311 336 338 336 q 285 334 289 336 q 272 279 282 328 l 94 279 l 101 310 q 206 475 125 424 q 349 515 267 515 q 458 493 408 515 q 548 447 505 473 q 615 412 582 427 q 670 399 644 399 q 696 401 691 399 q 709 456 698 408 l 887 456 l 880 425 q 804 282 861 334 l 870 282 q 698 220 804 220 z "},"":{ha:845,x_min:-8,x_max:885,o:"m 760 -11 l 414 -11 l 438 104 l 526 104 l 563 282 l 497 282 l 566 608 l 375 282 l 441 282 l 336 104 l 249 104 l 182 -11 l -8 -11 l 59 104 l 146 104 l 250 282 l 185 282 l 404 654 l 382 654 l 500 855 l 566 855 l 637 977 l 867 977 l 841 855 l 776 855 l 733 654 l 755 654 l 675 282 l 741 282 l 716 167 l 885 167 l 872 104 l 785 104 l 760 -11 z "},"":{ha:604,x_min:135,x_max:672,o:"m 414 220 q 258 282 317 220 l 192 282 q 135 424 135 341 q 142 483 135 452 q 242 654 163 581 l 220 654 q 437 745 320 745 q 607 669 546 745 l 617 654 l 639 654 q 672 541 672 604 q 666 483 672 513 q 530 282 640 361 l 595 282 q 414 220 511 220 z "},"":{ha:282,x_min:-59,x_max:372,o:"m 160 -243 l -59 -243 l 24 104 l 111 104 l 155 282 l 89 282 l 145 514 l 321 514 l 279 282 l 345 282 l 311 104 l 224 104 l 160 -243 m 349 549 l 133 549 l 155 654 l 134 654 l 157 764 l 372 764 l 349 654 l 371 654 l 349 549 z "},"":{ha:673,x_min:37,x_max:658,o:"m 271 -243 q 136 -205 195 -243 q 52 -99 77 -167 q 37 -12 37 -56 q 63 104 37 48 l 151 104 q 275 260 191 197 l 306 282 l 240 282 q 292 317 267 301 q 402 404 391 380 q 429 523 407 416 l 607 523 l 591 445 q 565 360 580 389 q 510 282 544 317 l 576 282 q 435 175 532 235 q 339 104 357 125 l 252 104 l 249 100 q 219 29 220 60 q 258 -50 219 -24 q 309 -65 280 -65 q 425 -26 370 -65 q 527 52 455 -5 l 621 -79 l 576 -113 q 499 -170 544 -140 q 398 -221 455 -200 q 271 -243 341 -243 m 633 557 l 418 557 l 439 654 l 417 654 l 442 773 l 658 773 l 633 654 l 654 654 l 633 557 z "},"":{ha:604,x_min:135,x_max:672,o:"m 414 220 q 258 282 317 220 l 192 282 q 135 424 135 341 q 142 483 135 452 q 242 654 163 581 l 220 654 q 437 745 320 745 q 607 669 546 745 l 617 654 l 639 654 q 672 541 672 604 q 666 483 672 513 q 530 282 640 361 l 595 282 q 414 220 511 220 z "},"":{ha:845,x_min:56,x_max:1023,o:"m 526 -25 q 256 104 353 -22 l 343 104 q 268 282 285 180 l 203 282 q 199 306 201 294 l 56 306 l 187 456 l 203 456 l 209 482 l 215 509 l 100 509 l 227 654 l 205 654 l 209 659 l 252 659 q 410 855 314 772 l 476 855 q 806 989 629 986 q 1011 924 927 987 l 1023 915 l 1011 855 l 945 855 l 905 667 l 863 726 q 703 811 805 810 q 562 768 629 810 q 444 659 494 726 l 862 659 l 859 654 l 880 654 l 753 509 l 393 509 l 387 482 l 382 456 l 724 456 l 593 306 l 391 306 q 400 282 395 294 l 466 282 q 527 197 487 231 q 652 153 578 155 q 847 239 753 154 l 896 282 l 911 282 l 873 104 l 785 104 l 774 50 l 758 40 q 526 -25 646 -23 m 845 282 l 831 282 l 848 298 l 845 282 z "},"":{ha:1086,x_min:117,x_max:1151,o:"m 849 282 q 962 484 937 370 q 969 553 969 519 q 949 654 969 610 l 928 654 q 836 767 899 725 q 682 811 771 811 q 507 767 591 811 q 369 654 427 725 l 391 654 l 385 648 q 307 484 326 574 q 299 411 299 446 q 332 282 299 340 l 380 282 q 348 412 348 342 q 356 484 348 446 q 439 654 376 577 l 417 654 q 455 696 435 675 q 675 789 561 789 q 871 706 795 789 l 890 684 l 857 654 l 878 654 l 763 553 l 745 574 q 659 612 712 612 q 584 576 620 612 q 534 484 545 539 q 530 446 530 464 q 544 391 530 415 q 604 355 565 355 q 707 393 658 355 l 734 414 l 829 284 l 826 282 l 849 282 m 630 156 q 804 200 720 156 q 915 282 865 233 l 892 282 l 866 262 q 633 178 753 178 q 453 270 518 178 l 446 282 l 398 282 q 475 200 427 233 q 630 156 540 156 m 505 -22 q 198 104 314 -22 l 286 104 q 192 282 215 180 l 127 282 q 117 375 117 327 q 129 484 117 427 q 194 654 148 574 l 172 654 q 349 855 237 770 l 414 855 q 785 989 587 989 q 1099 855 983 989 l 1034 855 q 1124 654 1107 770 l 1146 654 q 1151 590 1151 623 q 1139 484 1151 538 q 1055 282 1116 376 l 1120 282 q 952 104 1054 180 l 865 104 q 505 -22 695 -22 z "},"":{ha:724,x_min:171,x_max:857,o:"m 484 526 q 593 568 543 526 q 653 654 638 605 l 631 654 q 638 701 638 684 q 610 775 638 740 q 523 811 583 811 q 414 770 465 811 q 349 654 356 722 l 371 654 q 370 636 370 645 q 393 568 370 598 q 484 526 425 526 m 446 349 q 295 392 359 349 q 203 507 232 435 q 187 598 187 550 q 193 654 187 625 l 171 654 q 273 855 186 764 l 338 855 q 456 946 390 910 q 627 989 538 989 q 779 946 715 989 q 857 855 830 910 l 791 855 l 793 854 q 820 739 820 802 q 810 654 820 709 l 831 654 q 757 507 810 574 q 617 392 699 435 q 446 349 535 349 z "},"":{ha:665,x_min:50,x_max:747,o:"m 259 283 l 376 559 q 286 475 324 532 q 240 368 252 427 q 234 313 234 340 q 236 283 234 298 l 259 283 m 310 248 l 325 283 l 302 283 q 310 248 304 264 m 189 -190 l 50 -159 l 132 36 q 74 104 98 64 l 161 104 q 117 272 117 177 l 117 283 l 52 283 q 62 368 52 324 q 148 563 84 475 q 233 655 186 615 l 212 655 q 437 754 316 745 l 481 856 l 547 856 l 574 920 l 713 889 l 699 856 l 633 856 l 582 734 q 699 655 648 709 l 720 655 q 724 651 722 653 q 747 626 726 650 l 595 497 l 577 518 q 528 558 555 543 l 412 283 l 477 283 l 425 160 q 580 219 505 161 l 606 239 l 703 112 l 694 104 l 606 104 q 297 -19 454 -19 q 262 -17 279 -19 l 189 -190 z "},:{ha:724,x_min:-52,x_max:800,o:"m 126 -243 l -52 -243 l 22 104 l 109 104 l 146 282 l 81 282 l 82 286 q 159 654 83 296 l 138 654 l 157 746 l 336 746 l 316 654 l 338 654 l 260 282 l 326 282 l 325 265 q 332 223 325 241 q 376 175 346 191 q 440 159 406 159 q 513 175 475 159 q 606 282 581 205 l 541 282 q 621 654 545 294 l 600 654 l 619 746 l 798 746 l 778 654 l 800 654 l 720 282 l 785 282 l 748 104 l 661 104 l 637 -11 l 458 -11 l 469 41 q 315 -20 393 -20 q 180 11 237 -20 l 126 -243 z "},"":{ha:604,x_min:94,x_max:675,o:"m 385 269 l 347 87 l 128 282 l 96 282 l 94 284 l 130 452 l 433 648 l 394 466 l 675 648 l 635 458 l 496 368 l 592 282 l 625 282 l 630 278 l 589 87 l 385 269 m 370 444 l 254 368 l 338 292 l 370 444 z "},"":{ha:604,x_min:85,x_max:635,o:"m 376 466 l 415 648 l 635 452 l 600 284 l 596 282 l 629 282 l 328 87 l 368 270 l 85 87 l 126 278 l 133 282 l 100 282 l 232 368 l 132 458 l 172 648 l 376 466 m 359 292 l 475 368 l 391 444 l 359 292 z "},"":{ha:362,x_min:92,x_max:432,o:"m 346 87 l 127 282 l 95 282 l 92 284 l 128 452 l 432 648 l 391 458 l 253 368 l 349 282 l 381 282 l 387 278 l 346 87 z "},"":{ha:362,x_min:87,x_max:394,o:"m 87 87 l 127 278 l 134 282 l 102 282 l 233 368 l 133 458 l 174 648 l 394 452 l 358 284 l 355 282 l 388 282 l 87 87 z "},"":{ha:845,x_min:61,x_max:1112,o:"m 444 -11 l 266 -11 l 290 104 l 378 104 l 393 178 l 104 178 l 127 282 l 61 282 l 71 327 l 359 327 l 377 410 l 88 410 l 120 559 l 330 559 l 279 654 l 257 654 l 149 855 l 214 855 l 149 977 l 372 977 l 437 855 l 372 855 l 479 654 l 501 654 l 513 631 l 535 654 l 513 654 l 705 855 l 771 855 l 889 977 l 1112 977 l 994 855 l 928 855 l 736 654 l 758 654 l 666 559 l 874 559 l 842 410 l 555 410 l 537 327 l 825 327 l 815 282 l 881 282 l 859 178 l 571 178 l 555 104 l 468 104 l 444 -11 z "},"":{ha:1086,x_min:117,x_max:1151,o:"m 849 282 q 962 484 937 370 q 969 553 969 519 q 949 654 969 610 l 928 654 q 837 767 899 725 q 682 811 772 811 q 495 760 585 811 l 722 760 q 846 705 801 760 q 871 654 863 682 l 893 654 q 899 611 899 634 q 895 570 899 591 q 829 453 880 504 q 758 402 797 420 l 822 282 l 849 282 m 897 265 l 914 282 l 887 282 l 897 265 m 702 558 q 712 563 707 558 q 717 574 717 567 q 707 583 717 583 l 608 583 l 603 558 l 702 558 m 600 282 l 560 356 l 544 282 l 600 282 m 630 156 q 817 207 727 156 l 706 207 l 665 282 l 610 282 l 594 207 l 465 207 q 630 156 533 156 m 425 245 l 432 282 l 398 282 q 425 245 410 262 m 366 282 l 446 654 l 424 654 l 438 722 q 370 654 401 692 l 391 654 q 307 484 328 583 q 299 412 299 446 q 333 282 299 341 l 366 282 m 505 -22 q 198 104 314 -22 l 286 104 q 193 282 215 180 l 127 282 q 117 375 117 327 q 129 484 117 427 q 194 654 148 574 l 172 654 q 349 855 237 770 l 414 855 q 785 989 587 989 q 1099 855 983 989 l 1034 855 q 1124 654 1108 769 l 1146 654 q 1151 590 1151 623 q 1139 484 1151 538 q 1055 282 1116 376 l 1120 282 q 952 104 1055 180 l 865 104 q 505 -22 695 -22 z "},"":{ha:1086,x_min:117,x_max:1151,o:"m 727 558 q 738 562 732 558 q 743 574 743 566 q 732 583 743 583 l 633 583 l 628 558 l 727 558 m 392 282 l 471 654 l 449 654 l 468 744 q 369 654 412 707 l 391 654 q 307 484 328 583 q 298 412 298 446 q 332 282 298 341 l 392 282 m 445 223 l 457 282 l 398 282 q 445 223 417 249 m 629 156 q 804 200 720 156 q 914 282 865 233 l 849 282 q 962 484 937 370 q 969 553 969 519 q 952 648 969 604 l 949 654 l 927 654 q 836 767 899 725 q 681 811 771 811 q 495 760 585 811 l 748 760 q 871 705 827 760 q 897 654 889 682 l 918 654 q 924 610 924 633 q 920 570 924 591 q 836 436 903 492 q 689 380 768 380 l 590 380 l 569 282 l 635 282 l 619 207 l 465 207 q 629 156 532 156 m 504 -22 q 198 104 314 -22 l 286 104 q 192 282 215 180 l 126 282 q 117 373 117 326 q 129 484 117 427 q 193 654 148 574 l 172 654 q 348 855 237 770 l 414 855 q 785 989 587 989 q 1099 855 983 989 l 1033 855 q 1124 654 1107 769 l 1146 654 q 1151 590 1151 623 q 1139 484 1151 538 q 1055 282 1116 376 l 1120 282 q 952 104 1054 180 l 865 104 q 504 -22 694 -22 z "},"":{ha:241,x_min:-64,x_max:475,o:"m 258 332 l 248 282 l 313 282 l 276 104 l 189 104 l 115 -243 l -64 -243 l 10 104 l 98 104 l 135 282 l 69 282 l 80 332 l 258 332 m 132 575 l 149 654 l 127 654 l 170 855 l 235 855 l 297 1150 l 475 1150 l 413 855 l 348 855 l 305 654 l 327 654 l 310 575 l 132 575 z "},"":{ha:845,x_min:157,x_max:1066,o:"m 585 104 l 622 282 l 569 282 l 532 104 l 585 104 m 556 282 l 635 654 l 614 654 l 656 855 l 604 855 l 561 654 l 583 654 l 504 282 l 556 282 m 722 855 l 735 915 l 682 915 l 669 855 l 722 855 m 626 -126 l 448 -126 l 497 104 l 444 104 l 395 -126 l 216 -126 l 266 104 l 353 104 l 391 282 l 326 282 l 344 366 q 210 495 255 408 q 178 635 178 559 l 178 654 l 157 654 q 221 855 161 759 l 287 855 q 322 905 302 881 q 489 1042 392 991 q 689 1093 585 1093 l 1066 1093 l 1028 915 l 913 915 l 900 855 l 835 855 l 792 654 l 814 654 l 734 282 l 800 282 l 763 104 l 675 104 l 626 -126 z "},"":{ha:845,x_min:35,x_max:909,o:"m 72 -33 l 35 104 l 123 104 l 117 127 q 206 170 197 163 l 212 170 q 314 282 273 204 l 248 282 q 279 353 265 314 l 109 353 l 140 502 l 309 502 l 309 505 q 298 601 309 529 q 290 651 291 643 l 290 654 l 268 654 q 267 684 267 669 q 326 855 267 774 l 391 855 q 526 961 442 923 q 667 992 594 992 q 873 916 805 992 q 909 855 896 889 l 843 855 q 860 755 860 811 q 848 654 860 709 l 870 654 l 852 564 l 673 564 l 692 654 l 670 654 q 678 720 678 692 q 659 786 678 758 q 563 814 639 814 q 467 774 506 814 q 447 724 447 752 q 449 705 447 715 q 458 654 458 659 l 481 654 q 491 557 491 606 q 488 502 491 530 l 665 502 l 633 353 l 457 353 q 432 282 439 298 l 498 282 q 465 212 483 244 q 585 181 509 208 q 707 156 654 156 q 764 158 755 156 l 848 184 l 857 104 l 770 104 l 777 14 l 689 -14 q 564 -22 659 -22 q 482 -12 520 -22 q 412 9 448 -3 q 301 37 326 37 q 163 7 224 33 l 72 -33 z "},"":{ha:845,x_min:128,x_max:922,o:"m 473 340 q 583 382 532 340 q 645 483 633 423 q 648 515 648 500 q 621 590 648 554 q 534 625 593 625 q 425 584 475 625 q 361 483 374 543 q 358 452 358 467 q 386 376 358 412 q 473 340 414 340 m 899 855 l 872 855 l 888 869 l 899 855 m 746 96 l 663 201 q 500 163 585 163 q 355 202 417 163 l 227 96 l 128 222 l 200 282 l 134 282 l 191 328 q 176 416 176 370 q 256 637 176 534 l 242 654 l 220 654 l 151 743 l 287 855 l 315 855 l 387 764 q 549 804 467 804 q 696 764 634 804 l 806 855 l 833 855 l 922 743 l 814 654 l 836 654 l 817 638 q 831 551 831 597 q 823 483 831 518 q 751 328 806 399 l 787 282 l 852 282 l 899 223 l 746 96 m 381 855 l 353 855 l 370 869 l 381 855 z "},"":{ha:845,x_min:91,x_max:939,o:"m 595 389 q 640 394 611 389 q 675 422 656 397 q 681 442 681 432 q 671 469 681 454 q 550 545 649 502 q 414 578 467 578 q 367 573 397 578 q 334 545 351 570 q 326 525 326 534 q 456 422 326 479 q 595 389 541 389 m 351 -126 q 144 -53 212 -126 q 91 101 91 5 l 91 104 l 178 104 l 178 109 q 189 199 178 150 l 195 230 l 373 230 q 359 142 359 168 q 365 104 359 120 l 277 104 q 389 52 294 52 q 597 104 568 52 l 684 104 q 694 136 689 110 q 698 161 698 151 l 698 168 q 692 178 698 173 q 592 208 677 191 q 366 282 454 236 l 301 282 q 143 488 143 366 q 214 654 143 576 l 193 654 l 202 665 q 170 768 170 706 q 184 855 170 813 l 250 855 q 394 1038 284 977 q 676 1093 488 1093 q 883 1021 814 1093 q 939 862 939 960 l 939 855 l 873 855 q 856 741 871 817 l 678 741 q 691 826 691 802 q 688 855 691 842 l 754 855 q 738 886 749 874 q 638 915 711 915 q 522 907 563 915 q 436 871 450 893 q 429 855 434 869 l 363 855 q 353 806 353 829 l 353 800 q 359 789 353 794 q 457 759 372 777 q 626 712 563 738 q 734 654 690 686 l 757 654 q 863 479 863 580 q 782 301 863 384 q 794 282 789 292 l 860 282 q 880 199 880 247 q 864 104 880 149 l 777 104 q 635 -69 741 -9 q 351 -126 539 -126 z "},"":{ha:845,x_min:-1,x_max:903,o:"m 460 -24 q 359 18 414 -24 q 294 104 320 47 l 382 104 q 363 152 371 125 l 332 218 l 473 282 l 517 282 l 535 220 q 573 159 549 175 l 591 154 q 687 166 677 154 q 720 252 706 186 q 722 269 722 261 q 720 282 722 276 l 654 282 l 654 288 q 584 355 642 315 q 533 395 558 373 q 481 505 481 442 q 511 599 481 557 q 567 654 530 625 l 545 654 l 570 674 q 629 727 627 716 l 629 730 q 581 785 615 774 q 476 799 540 799 q 374 764 415 799 q 325 686 335 732 l 319 654 l 341 654 l 262 282 l 327 282 l 289 104 l 201 104 l 177 -11 l -1 -11 l 23 104 l 111 104 l 149 282 l 83 282 l 163 654 l 140 654 l 146 686 q 239 855 167 780 l 304 855 q 410 937 351 905 q 567 977 486 977 q 651 973 610 977 q 853 855 800 961 l 787 855 q 811 764 811 810 q 777 654 811 707 l 799 654 q 683 541 764 599 l 674 534 q 709 507 684 525 q 801 425 759 476 q 838 307 838 371 q 837 282 838 294 l 903 282 q 844 109 890 186 l 840 104 l 753 104 q 555 -20 682 -8 q 460 -24 509 -24 m 452 282 l 407 282 l 447 300 l 452 282 z "},:{ha:845,x_min:-1,x_max:903,o:"m 460 -24 q 359 18 414 -24 q 294 104 320 47 l 382 104 q 363 152 371 125 l 332 218 l 473 282 l 517 282 l 535 220 q 573 159 549 175 l 591 154 q 687 166 677 154 q 720 252 706 186 q 722 269 722 261 q 720 282 722 276 l 654 282 l 654 288 q 584 355 642 315 q 533 395 558 373 q 481 505 481 442 q 511 599 481 557 q 567 654 530 625 l 545 654 l 570 674 q 629 727 627 716 l 629 730 q 581 785 615 774 q 476 799 540 799 q 374 764 415 799 q 325 686 335 732 l 319 654 l 341 654 l 262 282 l 327 282 l 289 104 l 201 104 l 177 -11 l -1 -11 l 23 104 l 111 104 l 149 282 l 83 282 l 163 654 l 140 654 l 146 686 q 239 855 167 780 l 304 855 q 410 937 351 905 q 567 977 486 977 q 651 973 610 977 q 853 855 800 961 l 787 855 q 811 764 811 810 q 777 654 811 707 l 799 654 q 683 541 764 599 l 674 534 q 709 507 684 525 q 801 425 759 476 q 838 307 838 371 q 837 282 838 294 l 903 282 q 844 109 890 186 l 840 104 l 753 104 q 555 -20 682 -8 q 460 -24 509 -24 m 452 282 l 407 282 l 447 300 l 452 282 z "},"":{ha:484,x_min:-69,x_max:758,o:"m 121 -11 l -69 -11 l -3 104 l 85 104 l 189 282 l 123 282 l 338 654 l 317 654 l 433 855 l 498 855 l 568 977 l 758 977 l 688 855 l 622 855 l 506 654 l 528 654 l 313 282 l 378 282 l 275 104 l 187 104 l 121 -11 z "},"":{ha:724,x_min:69,x_max:824,o:"m 400 60 l 410 104 l 497 104 l 516 196 l 380 196 l 361 104 l 274 104 l 264 60 l 400 60 m 515 245 l 522 282 l 456 282 l 459 292 l 460 291 q 528 345 463 303 q 629 427 599 389 q 675 551 675 490 q 634 654 675 615 l 612 654 q 507 696 571 696 q 371 654 435 696 l 393 654 q 310 593 376 644 q 369 511 339 552 q 433 560 420 552 q 505 585 467 585 q 537 575 523 585 q 562 526 562 559 q 543 481 562 508 q 481 435 537 471 q 412 386 445 412 q 346 282 361 345 l 412 282 q 404 245 410 275 l 515 245 m 303 -184 l 299 -184 l 175 104 l 262 104 l 184 282 l 119 282 l 69 396 l 291 654 l 269 654 l 441 855 l 507 855 l 612 977 l 616 977 l 669 855 l 604 855 l 690 654 l 712 654 l 824 396 l 726 282 l 791 282 l 638 104 l 551 104 l 303 -184 z "},"":{ha:724,x_min:69,x_max:824,o:"m 303 -184 l 299 -184 l 175 104 l 262 104 l 184 282 l 119 282 l 69 396 l 291 654 l 269 654 l 441 855 l 507 855 l 612 977 l 616 977 l 669 855 l 604 855 l 690 654 l 712 654 l 824 396 l 726 282 l 791 282 l 638 104 l 551 104 l 303 -184 z "},"":{ha:724,x_min:-98,x_max:969,o:"m 515 -7 l 539 104 l 627 104 l 665 282 l 599 282 l 678 654 l 656 654 l 687 800 l 289 800 l 258 654 l 281 654 l 201 282 l 267 282 l 229 104 l 141 104 l 117 -7 l 515 -7 m 656 -184 l -98 -184 l -37 104 l 50 104 l 88 282 l 23 282 l 102 654 l 81 654 l 123 855 l 188 855 l 214 977 l 969 977 l 943 855 l 877 855 l 835 654 l 857 654 l 777 282 l 843 282 l 805 104 l 718 104 l 656 -184 z "},"":{ha:724,x_min:-98,x_max:969,o:"m 656 -184 l -98 -184 l -37 104 l 50 104 l 88 282 l 23 282 l 102 654 l 81 654 l 123 855 l 188 855 l 214 977 l 969 977 l 943 855 l 877 855 l 835 654 l 857 654 l 777 282 l 843 282 l 805 104 l 718 104 l 656 -184 z "},"":{ha:604,x_min:98,x_max:661,o:"m 623 279 l 98 279 l 136 457 l 661 457 l 623 279 z "},"":{ha:484,x_min:-69,x_max:758,o:"m 121 -11 l -69 -11 l -3 104 l 85 104 l 189 282 l 123 282 l 338 654 l 317 654 l 433 855 l 498 855 l 568 977 l 758 977 l 688 855 l 622 855 l 506 654 l 528 654 l 313 282 l 378 282 l 275 104 l 187 104 l 121 -11 z "},"":{ha:282,x_min:181,x_max:504,o:"m 304 668 l 196 668 l 181 855 l 246 855 l 286 1042 l 504 1042 l 464 855 l 399 855 l 304 668 z "},"":{ha:526,x_min:187,x_max:743,o:"m 543 668 l 434 668 l 420 855 l 405 855 l 311 668 l 201 668 l 187 855 l 253 855 l 292 1042 l 510 1042 l 471 855 l 486 855 l 525 1042 l 743 1042 l 703 855 l 637 855 l 543 668 z "},"":{ha:362,x_min:0,x_max:0,o:""},"":{ha:967,x_min:231,x_max:1126,o:"m 972 452 l 851 452 l 885 614 l 791 452 l 686 452 l 659 614 l 625 452 l 505 452 l 548 655 l 526 655 l 568 856 l 634 856 l 635 857 l 496 857 l 495 856 l 429 856 l 387 655 l 408 655 l 366 452 l 245 452 l 288 655 l 266 655 l 309 856 l 374 856 l 375 857 l 231 857 l 256 978 l 772 978 l 792 856 l 727 856 l 760 655 l 877 856 l 943 856 l 1014 978 l 1126 978 l 1101 856 l 1035 856 l 992 655 l 1015 655 l 972 452 z "},"":{ha:604,x_min:98,x_max:661,o:"m 623 279 l 98 279 l 136 457 l 661 457 l 623 279 m 397 48 l 181 48 l 193 104 l 281 104 l 315 264 l 530 264 l 496 104 l 409 104 l 397 48 m 509 472 l 293 472 l 332 654 l 311 654 l 317 688 l 533 688 l 526 654 l 548 654 l 509 472 z "},"":{ha:1398,x_min:160,x_max:1442,o:"m 1213 159 q 1238 190 1225 168 q 1257 241 1251 212 q 1261 275 1261 260 l 1261 283 l 1218 283 q 1200 204 1200 244 l 1201 191 q 1213 159 1206 167 m 376 637 q 393 655 385 643 l 372 655 q 399 720 391 681 q 403 754 403 739 q 390 802 403 788 q 346 720 358 779 q 342 684 342 701 q 346 655 342 668 l 368 655 q 376 637 372 642 m 568 629 l 583 655 l 579 655 q 568 629 574 642 m 792 283 q 779 324 791 311 q 749 283 762 311 l 792 283 m 810 159 q 835 191 821 167 q 854 241 848 212 q 858 275 858 260 l 858 283 l 814 283 q 797 206 797 245 q 810 159 797 173 m 1026 104 q 1018 172 1018 136 l 1019 195 q 973 104 1002 146 l 1026 104 m 1196 283 q 1183 324 1194 311 q 1152 283 1166 311 l 1196 283 m 1088 -21 q 956 58 1000 -21 q 939 104 945 80 l 886 104 q 849 58 869 80 q 684 -21 772 -21 q 553 58 596 -21 q 535 104 541 80 l 623 104 q 614 169 614 135 q 634 283 614 224 l 623 283 l 520 104 l 433 104 l 366 -10 l 176 -10 l 242 104 l 330 104 l 433 283 l 368 283 l 541 583 q 504 536 524 558 q 338 456 426 456 q 208 536 250 456 q 182 646 182 585 l 182 655 l 160 655 q 168 720 160 686 q 226 856 184 795 l 291 856 q 328 902 307 880 q 494 982 405 982 q 625 902 582 982 q 643 856 636 880 l 577 856 q 585 791 585 826 q 557 655 585 725 l 562 655 l 677 856 l 743 856 l 814 978 l 1003 978 l 932 856 l 867 856 l 751 655 l 773 655 l 557 283 l 568 283 q 652 425 595 364 q 817 504 729 504 q 949 425 905 504 q 975 313 975 375 l 974 288 q 1056 425 1000 366 q 1221 504 1133 504 q 1352 425 1309 504 q 1378 316 1378 377 q 1376 283 1378 300 l 1442 283 q 1377 104 1432 184 l 1290 104 q 1253 58 1273 80 q 1088 -21 1176 -21 z "},:{ha:845,x_min:-55,x_max:920,o:"m 616 399 l 575 654 l 553 654 l 547 692 l 526 654 l 547 654 l 397 399 l 616 399 m 883 1001 l 474 1001 l 505 1150 l 914 1150 l 883 1001 m 851 -11 l 661 -11 l 643 104 l 730 104 l 711 220 l 358 220 l 290 104 l 203 104 l 136 -11 l -55 -11 l 12 104 l 100 104 l 204 282 l 138 282 l 357 654 l 335 654 l 453 855 l 519 855 l 590 977 l 757 977 l 777 855 l 711 855 l 743 654 l 766 654 l 825 282 l 890 282 l 920 104 l 833 104 l 851 -11 z "},:{ha:845,x_min:-55,x_max:920,o:"m 616 399 l 575 654 l 553 654 l 547 692 l 526 654 l 547 654 l 397 399 l 616 399 m 883 1001 l 474 1001 l 505 1150 l 914 1150 l 883 1001 m 851 -11 l 661 -11 l 643 104 l 730 104 l 711 220 l 358 220 l 290 104 l 203 104 l 136 -11 l -55 -11 l 12 104 l 100 104 l 204 282 l 138 282 l 357 654 l 335 654 l 453 855 l 519 855 l 590 977 l 757 977 l 777 855 l 711 855 l 743 654 l 766 654 l 825 282 l 890 282 l 920 104 l 833 104 l 851 -11 z "},:{ha:845,x_min:89,x_max:971,o:"m 418 -24 q 149 104 246 -21 l 237 104 q 161 283 177 180 l 95 283 q 89 362 89 321 q 164 655 89 511 l 142 655 q 303 856 203 770 l 368 856 q 652 987 501 969 l 629 987 l 501 1151 l 705 1151 l 728 1120 l 766 1151 l 970 1151 l 771 987 l 745 987 q 971 856 886 969 l 905 856 l 930 823 l 772 704 l 756 726 q 595 812 697 811 q 455 768 523 810 q 334 655 387 726 l 356 655 l 353 650 q 279 483 299 574 q 270 399 270 439 q 293 283 270 336 l 359 283 q 420 197 380 231 q 544 154 471 155 q 741 240 646 155 l 766 263 l 875 145 l 828 104 l 741 104 q 418 -24 589 -21 z "},:{ha:845,x_min:89,x_max:971,o:"m 418 -24 q 149 104 246 -21 l 237 104 q 161 283 177 180 l 95 283 q 89 362 89 321 q 164 655 89 511 l 142 655 q 303 856 203 770 l 368 856 q 652 987 501 969 l 629 987 l 501 1151 l 705 1151 l 728 1120 l 766 1151 l 970 1151 l 771 987 l 745 987 q 971 856 886 969 l 905 856 l 930 823 l 772 704 l 756 726 q 595 812 697 811 q 455 768 523 810 q 334 655 387 726 l 356 655 l 353 650 q 279 483 299 574 q 270 399 270 439 q 293 283 270 336 l 359 283 q 420 197 380 231 q 544 154 471 155 q 741 240 646 155 l 766 263 l 875 145 l 828 104 l 741 104 q 418 -24 589 -21 z "},:{ha:845,x_min:-1,x_max:1028,o:"m 861 1001 l 452 1001 l 484 1150 l 892 1150 l 861 1001 m 753 -11 l -1 -11 l 23 104 l 111 104 l 148 282 l 82 282 l 161 654 l 140 654 l 182 855 l 248 855 l 274 977 l 1028 977 l 1002 855 l 937 855 l 925 798 l 348 798 l 317 654 l 339 654 l 321 572 l 783 572 l 745 394 l 283 394 l 260 282 l 326 282 l 301 167 l 878 167 l 865 104 l 778 104 l 753 -11 z "},:{ha:845,x_min:-1,x_max:1028,o:"m 861 1001 l 452 1001 l 484 1150 l 892 1150 l 861 1001 m 753 -11 l -1 -11 l 23 104 l 111 104 l 148 282 l 82 282 l 161 654 l 140 654 l 182 855 l 248 855 l 274 977 l 1028 977 l 1002 855 l 937 855 l 925 798 l 348 798 l 317 654 l 339 654 l 321 572 l 783 572 l 745 394 l 283 394 l 260 282 l 326 282 l 301 167 l 878 167 l 865 104 l 778 104 l 753 -11 z "},:{ha:905,x_min:91,x_max:998,o:"m 262 -243 l 113 -242 l 194 -94 l 251 -94 l 296 -12 q 136 104 197 16 l 224 104 q 159 282 171 178 l 94 282 q 91 340 91 310 q 107 482 91 407 q 165 654 127 574 l 143 654 q 291 855 199 771 l 357 855 q 675 989 501 989 q 848 966 778 989 q 962 895 918 944 l 998 855 l 932 855 l 949 835 l 802 703 l 749 763 q 721 785 739 774 q 668 803 703 795 q 572 811 633 811 q 442 770 504 811 q 332 655 380 729 l 332 654 l 354 654 q 286 482 306 579 q 273 378 273 427 q 288 282 273 326 l 353 282 q 408 194 371 227 q 519 153 452 153 q 706 212 631 153 q 769 282 745 241 l 703 282 q 731 349 721 313 l 741 395 l 477 395 l 515 572 l 957 572 l 895 282 l 961 282 l 923 104 l 836 104 l 811 -10 l 633 -10 l 643 37 q 526 -9 587 7 q 544 -68 544 -35 q 541 -95 544 -81 q 262 -243 509 -243 z "},:{ha:905,x_min:91,x_max:998,o:"m 262 -243 l 113 -242 l 194 -94 l 251 -94 l 296 -12 q 136 104 197 16 l 224 104 q 159 282 171 178 l 94 282 q 91 340 91 310 q 107 482 91 407 q 165 654 127 574 l 143 654 q 291 855 199 771 l 357 855 q 675 989 501 989 q 848 966 778 989 q 962 895 918 944 l 998 855 l 932 855 l 949 835 l 802 703 l 749 763 q 721 785 739 774 q 668 803 703 795 q 572 811 633 811 q 442 770 504 811 q 332 655 380 729 l 332 654 l 354 654 q 286 482 306 579 q 273 378 273 427 q 288 282 273 326 l 353 282 q 408 194 371 227 q 519 153 452 153 q 706 212 631 153 q 769 282 745 241 l 703 282 q 731 349 721 313 l 741 395 l 477 395 l 515 572 l 957 572 l 895 282 l 961 282 l 923 104 l 836 104 l 811 -10 l 633 -10 l 643 37 q 526 -9 587 7 q 544 -68 544 -35 q 541 -95 544 -81 q 262 -243 509 -243 z "},:{ha:362,x_min:24,x_max:630,o:"m 202 -11 l 24 -11 l 49 104 l 136 104 l 174 282 l 109 282 l 189 654 l 166 654 l 209 855 l 275 855 l 300 977 l 478 977 l 452 855 l 387 855 l 344 654 l 366 654 l 286 282 l 352 282 l 314 104 l 227 104 l 202 -11 m 598 1001 l 189 1001 l 221 1150 l 630 1150 l 598 1001 z "},:{ha:362,x_min:24,x_max:630,o:"m 202 -11 l 24 -11 l 49 104 l 136 104 l 174 282 l 109 282 l 189 654 l 166 654 l 209 855 l 275 855 l 300 977 l 478 977 l 452 855 l 387 855 l 344 654 l 366 654 l 286 282 l 352 282 l 314 104 l 227 104 l 202 -11 m 598 1001 l 189 1001 l 221 1150 l 630 1150 l 598 1001 z "},:{ha:845,x_min:-12,x_max:1087,o:"m 195 -243 l 46 -242 l 127 -94 l 184 -94 l 265 53 q 357 48 335 53 q 477 -67 477 22 q 475 -95 477 -81 q 195 -243 443 -243 m 791 -11 l 566 -11 l 501 104 l 589 104 l 488 282 l 422 282 l 353 406 l 260 330 l 250 282 l 316 282 l 278 104 l 191 104 l 166 -11 l -12 -11 l 12 104 l 100 104 l 138 282 l 72 282 l 151 654 l 130 654 l 172 855 l 238 855 l 264 977 l 442 977 l 416 855 l 351 855 l 308 654 l 330 654 l 314 583 l 401 654 l 380 654 l 623 855 l 688 855 l 835 977 l 1087 977 l 940 855 l 874 855 l 631 654 l 653 654 l 506 533 l 648 282 l 713 282 l 814 104 l 727 104 l 791 -11 z "},:{ha:845,x_min:-12,x_max:1087,o:"m 195 -243 l 46 -242 l 127 -94 l 184 -94 l 265 53 q 357 48 335 53 q 477 -67 477 22 q 475 -95 477 -81 q 195 -243 443 -243 m 791 -11 l 566 -11 l 501 104 l 589 104 l 488 282 l 422 282 l 353 406 l 260 330 l 250 282 l 316 282 l 278 104 l 191 104 l 166 -11 l -12 -11 l 12 104 l 100 104 l 138 282 l 72 282 l 151 654 l 130 654 l 172 855 l 238 855 l 264 977 l 442 977 l 416 855 l 351 855 l 308 654 l 330 654 l 314 583 l 401 654 l 380 654 l 623 855 l 688 855 l 835 977 l 1087 977 l 940 855 l 874 855 l 631 654 l 653 654 l 506 533 l 648 282 l 713 282 l 814 104 l 727 104 l 791 -11 z "},:{ha:724,x_min:-3,x_max:761,o:"m 205 -243 l 55 -242 l 137 -94 l 194 -94 l 239 -11 l -3 -11 l 21 104 l 109 104 l 146 282 l 80 282 l 159 654 l 138 654 l 180 855 l 246 855 l 272 977 l 450 977 l 424 855 l 359 855 l 316 654 l 338 654 l 258 282 l 324 282 l 300 167 l 761 167 l 748 104 l 661 104 l 636 -11 l 471 -11 q 487 -67 487 -36 q 484 -95 487 -81 q 205 -243 452 -243 z "},:{ha:724,x_min:-3,x_max:761,o:"m 205 -243 l 55 -242 l 137 -94 l 194 -94 l 239 -11 l -3 -11 l 21 104 l 109 104 l 146 282 l 80 282 l 159 654 l 138 654 l 180 855 l 246 855 l 272 977 l 450 977 l 424 855 l 359 855 l 316 654 l 338 654 l 258 282 l 324 282 l 300 167 l 761 167 l 748 104 l 661 104 l 636 -11 l 471 -11 q 487 -67 487 -36 q 484 -95 487 -81 q 205 -243 452 -243 z "},:{ha:845,x_min:0,x_max:1030,o:"m 228 -243 l 78 -242 l 160 -94 l 217 -94 l 297 53 q 389 48 368 53 q 509 -67 509 22 q 507 -95 509 -81 q 228 -243 475 -243 m 755 -11 l 581 -11 l 534 104 l 621 104 l 547 282 l 481 282 l 336 635 l 261 282 l 327 282 l 290 104 l 202 104 l 178 -11 l 0 -11 l 24 104 l 112 104 l 149 282 l 84 282 l 163 654 l 141 654 l 184 855 l 250 855 l 275 977 l 449 977 l 499 855 l 434 855 l 517 654 l 538 654 l 672 331 l 741 654 l 718 654 l 761 855 l 827 855 l 852 977 l 1030 977 l 1004 855 l 939 855 l 896 654 l 918 654 l 838 282 l 904 282 l 867 104 l 779 104 l 755 -11 z "},:{ha:845,x_min:0,x_max:1030,o:"m 228 -243 l 78 -242 l 160 -94 l 217 -94 l 297 53 q 389 48 368 53 q 509 -67 509 22 q 507 -95 509 -81 q 228 -243 475 -243 m 755 -11 l 581 -11 l 534 104 l 621 104 l 547 282 l 481 282 l 336 635 l 261 282 l 327 282 l 290 104 l 202 104 l 178 -11 l 0 -11 l 24 104 l 112 104 l 149 282 l 84 282 l 163 654 l 141 654 l 184 855 l 250 855 l 275 977 l 449 977 l 499 855 l 434 855 l 517 654 l 538 654 l 672 331 l 741 654 l 718 654 l 761 855 l 827 855 l 852 977 l 1030 977 l 1004 855 l 939 855 l 896 654 l 918 654 l 838 282 l 904 282 l 867 104 l 779 104 l 755 -11 z "},:{ha:845,x_min:85,x_max:951,o:"m 375 -22 q 171 27 257 -22 q 85 104 117 58 l 172 104 q 144 162 154 131 l 119 241 l 207 283 l 141 283 l 228 324 l 242 283 l 307 283 l 319 245 q 380 182 332 207 q 500 156 431 156 q 612 175 559 156 q 698 222 664 193 q 734 283 732 250 l 669 283 l 669 288 q 655 329 669 310 q 589 376 634 358 q 486 395 545 395 q 301 433 380 395 q 183 538 222 471 q 156 640 156 585 l 157 655 l 135 655 q 227 847 143 762 l 237 856 l 302 856 q 455 952 366 916 q 597 987 523 979 l 584 987 l 456 1151 l 659 1151 l 683 1120 l 720 1151 l 924 1151 l 726 987 l 713 987 q 859 941 795 978 q 951 856 918 907 l 885 856 q 909 806 900 832 l 933 726 l 783 655 l 804 655 l 779 643 l 776 655 l 754 655 l 734 723 q 673 785 721 760 q 552 812 621 812 q 441 793 493 812 q 354 746 389 774 q 317 679 317 714 q 322 655 317 667 l 344 655 q 418 592 359 616 q 524 573 465 573 q 707 534 629 573 q 825 430 786 496 q 852 328 852 382 q 848 283 852 306 l 913 283 l 911 275 q 825 121 893 190 l 806 104 l 719 104 q 575 16 657 50 q 375 -22 480 -22 z "},:{ha:845,x_min:85,x_max:951,o:"m 375 -22 q 171 27 257 -22 q 85 104 117 58 l 172 104 q 144 162 154 131 l 119 241 l 207 283 l 141 283 l 228 324 l 242 283 l 307 283 l 319 245 q 380 182 332 207 q 500 156 431 156 q 612 175 559 156 q 698 222 664 193 q 734 283 732 250 l 669 283 l 669 288 q 655 329 669 310 q 589 376 634 358 q 486 395 545 395 q 301 433 380 395 q 183 538 222 471 q 156 640 156 585 l 157 655 l 135 655 q 227 847 143 762 l 237 856 l 302 856 q 455 952 366 916 q 597 987 523 979 l 584 987 l 456 1151 l 659 1151 l 683 1120 l 720 1151 l 924 1151 l 726 987 l 713 987 q 859 941 795 978 q 951 856 918 907 l 885 856 q 909 806 900 832 l 933 726 l 783 655 l 804 655 l 779 643 l 776 655 l 754 655 l 734 723 q 673 785 721 760 q 552 812 621 812 q 441 793 493 812 q 354 746 389 774 q 317 679 317 714 q 322 655 317 667 l 344 655 q 418 592 359 616 q 524 573 465 573 q 707 534 629 573 q 825 430 786 496 q 852 328 852 382 q 848 283 852 306 l 913 283 l 911 275 q 825 121 893 190 l 806 104 l 719 104 q 575 16 657 50 q 375 -22 480 -22 z "},:{ha:845,x_min:94,x_max:1031,o:"m 376 -22 q 190 26 265 -22 q 114 104 142 58 l 201 104 q 158 264 158 172 l 159 283 l 94 283 q 104 365 95 322 l 165 655 l 144 655 l 186 856 l 252 856 l 277 978 l 455 978 l 429 856 l 363 856 l 321 655 l 343 655 l 281 365 q 275 302 275 331 q 275 283 275 292 l 341 283 q 367 210 344 240 q 502 156 406 156 q 660 210 597 156 q 717 283 694 240 l 651 283 q 679 365 669 319 l 741 655 l 719 655 l 762 856 l 827 856 l 853 978 l 1031 978 l 1006 856 l 940 856 l 897 655 l 919 655 l 857 365 q 833 283 848 322 l 899 283 q 781 104 859 179 l 693 104 q 583 26 644 58 q 376 -22 488 -22 m 866 1001 l 457 1001 l 489 1150 l 898 1150 l 866 1001 z "},:{ha:845,x_min:94,x_max:1031,o:"m 376 -22 q 190 26 265 -22 q 114 104 142 58 l 201 104 q 158 264 158 172 l 159 283 l 94 283 q 104 365 95 322 l 165 655 l 144 655 l 186 856 l 252 856 l 277 978 l 455 978 l 429 856 l 363 856 l 321 655 l 343 655 l 281 365 q 275 302 275 331 q 275 283 275 292 l 341 283 q 367 210 344 240 q 502 156 406 156 q 660 210 597 156 q 717 283 694 240 l 651 283 q 679 365 669 319 l 741 655 l 719 655 l 762 856 l 827 856 l 853 978 l 1031 978 l 1006 856 l 940 856 l 897 655 l 919 655 l 857 365 q 833 283 848 322 l 899 283 q 781 104 859 179 l 693 104 q 583 26 644 58 q 376 -22 488 -22 m 866 1001 l 457 1001 l 489 1150 l 898 1150 l 866 1001 z "},:{ha:845,x_min:-1,x_max:1029,o:"m 753 -11 l -1 -11 l 23 104 l 111 104 l 126 178 l 237 282 l 171 282 l 568 654 l 547 654 l 701 799 l 170 799 l 182 855 l 248 855 l 274 977 l 1029 977 l 1003 855 l 937 855 l 923 787 l 781 654 l 803 654 l 405 282 l 471 282 l 349 168 l 879 168 l 865 104 l 778 104 l 753 -11 m 724 987 l 583 987 l 454 1150 l 657 1150 l 682 1120 l 718 1150 l 922 1150 l 724 987 z "},:{ha:845,x_min:-1,x_max:1029,o:"m 753 -11 l -1 -11 l 23 104 l 111 104 l 126 178 l 237 282 l 171 282 l 568 654 l 547 654 l 701 799 l 170 799 l 182 855 l 248 855 l 274 977 l 1029 977 l 1003 855 l 937 855 l 923 787 l 781 654 l 803 654 l 405 282 l 471 282 l 349 168 l 879 168 l 865 104 l 778 104 l 753 -11 m 724 987 l 583 987 l 454 1150 l 657 1150 l 682 1120 l 718 1150 l 922 1150 l 724 987 z "},:{ha:966,x_min:-21,x_max:1192,o:"m 570 155 q 711 198 643 155 q 808 282 765 231 l 743 282 q 842 484 819 370 q 852 567 852 527 q 847 621 852 594 l 438 282 l 504 282 l 427 218 q 570 155 482 155 m 302 344 l 678 654 l 656 654 l 768 747 q 623 811 710 811 q 481 768 549 811 q 361 654 412 726 l 383 654 l 379 650 q 307 484 326 575 q 297 399 297 439 q 302 344 297 370 m 445 -22 q 187 93 286 -22 l 61 -11 l -21 95 l -11 104 l 77 104 l 207 211 q 189 282 195 246 l 123 282 q 115 364 115 321 q 129 484 115 421 q 191 654 148 574 l 170 654 q 330 855 230 770 l 395 855 q 726 989 551 989 q 986 873 888 989 l 1109 975 l 1192 869 l 1175 855 l 1110 855 l 987 754 q 1010 654 1004 709 l 1031 654 q 1034 605 1034 630 q 1021 484 1034 546 q 941 282 998 376 l 1007 282 q 854 104 946 180 l 766 104 q 445 -22 613 -22 z "},:{ha:966,x_min:-21,x_max:1192,o:"m 570 155 q 711 198 643 155 q 808 282 765 231 l 743 282 q 842 484 819 370 q 852 567 852 527 q 847 621 852 594 l 438 282 l 504 282 l 427 218 q 570 155 482 155 m 302 344 l 678 654 l 656 654 l 768 747 q 623 811 710 811 q 481 768 549 811 q 361 654 412 726 l 383 654 l 379 650 q 307 484 326 575 q 297 399 297 439 q 302 344 297 370 m 445 -22 q 187 93 286 -22 l 61 -11 l -21 95 l -11 104 l 77 104 l 207 211 q 189 282 195 246 l 123 282 q 115 364 115 321 q 129 484 115 421 q 191 654 148 574 l 170 654 q 330 855 230 770 l 395 855 q 726 989 551 989 q 986 873 888 989 l 1109 975 l 1192 869 l 1175 855 l 1110 855 l 987 754 q 1010 654 1004 709 l 1031 654 q 1034 605 1034 630 q 1021 484 1034 546 q 941 282 998 376 l 1007 282 q 854 104 946 180 l 766 104 q 445 -22 613 -22 z "},:{ha:1147,x_min:-68,x_max:1329,o:"m 578 399 l 633 654 l 610 654 l 641 798 l 597 798 l 513 654 l 534 654 l 385 399 l 578 399 m 1055 -11 l 469 -11 l 494 104 l 581 104 l 606 220 l 345 220 l 277 104 l 190 104 l 122 -11 l -68 -11 l -1 104 l 87 104 l 191 282 l 125 282 l 345 654 l 322 654 l 440 855 l 506 855 l 577 977 l 1329 977 l 1303 855 l 1238 855 l 1226 798 l 819 798 l 788 654 l 810 654 l 792 572 l 1084 572 l 1046 394 l 754 394 l 730 282 l 796 282 l 772 167 l 1179 167 l 1166 104 l 1079 104 l 1055 -11 z "},:{ha:1147,x_min:-68,x_max:1329,o:"m 578 399 l 633 654 l 610 654 l 641 798 l 597 798 l 513 654 l 534 654 l 385 399 l 578 399 m 1055 -11 l 469 -11 l 494 104 l 581 104 l 606 220 l 345 220 l 277 104 l 190 104 l 122 -11 l -68 -11 l -1 104 l 87 104 l 191 282 l 125 282 l 345 654 l 322 654 l 440 855 l 506 855 l 577 977 l 1329 977 l 1303 855 l 1238 855 l 1226 798 l 819 798 l 788 654 l 810 654 l 792 572 l 1084 572 l 1046 394 l 754 394 l 730 282 l 796 282 l 772 167 l 1179 167 l 1166 104 l 1079 104 l 1055 -11 z "},:{ha:1208,x_min:101,x_max:1372,o:"m 556 155 q 636 169 597 155 l 661 282 l 595 282 l 674 654 l 652 654 l 682 797 q 608 811 649 811 q 466 768 534 811 q 347 654 398 726 l 368 654 l 364 650 q 292 484 312 575 q 283 399 283 439 q 306 282 283 336 l 372 282 q 433 198 393 231 q 556 155 482 155 m 431 -22 q 163 104 262 -22 l 251 104 q 174 282 191 180 l 108 282 q 101 362 101 321 q 115 484 101 420 q 177 654 134 574 l 155 654 q 315 855 216 769 l 381 855 q 711 989 537 989 q 808 977 763 989 l 1372 977 l 1346 855 l 1280 855 l 1268 799 l 861 799 l 830 654 l 852 654 l 834 572 l 1127 572 l 1089 395 l 796 395 l 772 282 l 838 282 l 813 168 l 1221 168 l 1208 104 l 1120 104 l 1096 -11 l 530 -11 q 431 -22 480 -22 z "},:{ha:1208,x_min:101,x_max:1372,o:"m 556 155 q 636 169 597 155 l 661 282 l 595 282 l 674 654 l 652 654 l 682 797 q 608 811 649 811 q 466 768 534 811 q 347 654 398 726 l 368 654 l 364 650 q 292 484 312 575 q 283 399 283 439 q 306 282 283 336 l 372 282 q 433 198 393 231 q 556 155 482 155 m 431 -22 q 163 104 262 -22 l 251 104 q 174 282 191 180 l 108 282 q 101 362 101 321 q 115 484 101 420 q 177 654 134 574 l 155 654 q 315 855 216 769 l 381 855 q 711 989 537 989 q 808 977 763 989 l 1372 977 l 1346 855 l 1280 855 l 1268 799 l 861 799 l 830 654 l 852 654 l 834 572 l 1127 572 l 1089 395 l 796 395 l 772 282 l 838 282 l 813 168 l 1221 168 l 1208 104 l 1120 104 l 1096 -11 l 530 -11 q 431 -22 480 -22 z "},:{ha:724,x_min:-17,x_max:748,o:"m 623 -11 l -17 -11 l 7 104 l 95 104 l 133 282 l 67 282 l 77 330 l 16 307 l 50 469 l 112 492 l 146 654 l 125 654 l 168 855 l 233 855 l 258 977 l 437 977 l 411 855 l 346 855 l 303 654 l 325 654 l 306 566 l 494 638 l 460 476 l 271 404 l 245 282 l 311 282 l 286 167 l 748 167 l 734 104 l 647 104 l 623 -11 z "},:{ha:724,x_min:-17,x_max:748,o:"m 623 -11 l -17 -11 l 7 104 l 95 104 l 133 282 l 67 282 l 77 330 l 16 307 l 50 469 l 112 492 l 146 654 l 125 654 l 168 855 l 233 855 l 258 977 l 437 977 l 411 855 l 346 855 l 303 654 l 325 654 l 306 566 l 494 638 l 460 476 l 271 404 l 245 282 l 311 282 l 286 167 l 748 167 l 734 104 l 647 104 l 623 -11 z "},:{ha:845,x_min:31,x_max:921,o:"m 599 370 q 686 403 646 370 q 739 508 739 447 q 716 568 739 539 q 647 596 694 596 l 361 596 l 313 370 l 599 370 m 210 -11 l 31 -11 l 56 104 l 143 104 l 181 282 l 115 282 l 195 654 l 173 654 l 216 855 l 281 855 l 307 977 l 485 977 l 459 855 l 394 855 l 376 774 l 663 774 q 802 734 743 774 q 873 654 847 703 l 895 654 q 921 546 921 605 q 914 483 921 515 q 791 282 889 366 l 857 282 q 626 191 751 191 l 339 191 l 321 104 l 234 104 l 210 -11 z "},:{ha:845,x_min:31,x_max:921,o:"m 599 370 q 686 403 646 370 q 739 508 739 447 q 716 568 739 539 q 647 596 694 596 l 361 596 l 313 370 l 599 370 m 210 -11 l 31 -11 l 56 104 l 143 104 l 181 282 l 115 282 l 195 654 l 173 654 l 216 855 l 281 855 l 307 977 l 485 977 l 459 855 l 394 855 l 376 774 l 663 774 q 802 734 743 774 q 873 654 847 703 l 895 654 q 921 546 921 605 q 914 483 921 515 q 791 282 889 366 l 857 282 q 626 191 751 191 l 339 191 l 321 104 l 234 104 l 210 -11 z "},"":{ha:604,x_min:119,x_max:634,o:"m 238 119 l 138 245 l 184 283 l 119 283 l 222 368 l 125 491 l 277 616 l 374 494 l 523 616 l 621 491 l 473 368 l 539 283 l 605 283 l 634 245 l 483 120 l 387 242 l 238 119 z "},"":{ha:845,x_min:20,x_max:970,o:"m 630 572 q 717 606 677 572 q 756 654 743 627 l 734 654 q 747 711 747 682 q 725 770 747 742 q 656 799 703 799 l 370 799 l 340 654 l 361 654 l 344 572 l 630 572 m 198 -11 l 20 -11 l 44 104 l 132 104 l 150 191 l 93 191 l 113 282 l 47 282 l 60 340 l 117 340 l 128 394 l 71 394 l 109 572 l 166 572 l 184 654 l 161 654 l 203 855 l 269 855 l 296 977 l 760 977 q 898 937 840 977 q 970 855 945 905 l 904 855 l 905 854 q 930 749 930 806 q 916 654 930 708 l 937 654 q 874 538 918 592 q 747 433 821 473 q 592 394 672 394 l 306 394 l 294 340 l 750 340 l 738 282 l 804 282 l 784 191 l 328 191 l 310 104 l 222 104 l 198 -11 z "},:{ha:845,x_min:4,x_max:899,o:"m 449 165 q 673 282 570 165 l 607 282 q 708 482 684 368 q 717 562 717 524 q 705 649 717 615 l 703 654 l 681 654 q 614 758 661 718 q 496 799 566 799 l 354 799 l 323 654 l 345 654 l 325 558 l 580 558 l 548 409 l 293 409 l 266 282 l 332 282 l 307 165 l 449 165 m 324 -11 l 4 -11 l 28 104 l 116 104 l 154 282 l 88 282 l 115 409 l 60 409 l 92 558 l 147 558 l 168 654 l 146 654 l 189 855 l 254 855 l 280 977 l 600 977 q 860 855 763 977 l 794 855 q 874 654 861 771 l 896 654 q 899 598 899 627 q 886 482 899 542 q 806 282 863 375 l 872 282 q 714 104 810 178 l 627 104 q 324 -11 482 -11 z "},:{ha:845,x_min:4,x_max:899,o:"m 449 165 q 673 282 570 165 l 607 282 q 708 482 684 368 q 717 562 717 524 q 705 649 717 615 l 703 654 l 681 654 q 614 758 661 718 q 496 799 566 799 l 354 799 l 323 654 l 345 654 l 325 558 l 580 558 l 548 409 l 293 409 l 266 282 l 332 282 l 307 165 l 449 165 m 324 -11 l 4 -11 l 28 104 l 116 104 l 154 282 l 88 282 l 115 409 l 60 409 l 92 558 l 147 558 l 168 654 l 146 654 l 189 855 l 254 855 l 280 977 l 600 977 q 860 855 763 977 l 794 855 q 874 654 861 771 l 896 654 q 899 598 899 627 q 886 482 899 542 q 806 282 863 375 l 872 282 q 714 104 810 178 l 627 104 q 324 -11 482 -11 z "},:{ha:845,x_min:4,x_max:899,o:"m 449 165 q 673 282 570 165 l 607 282 q 708 482 684 368 q 717 562 717 524 q 705 649 717 615 l 703 654 l 681 654 q 614 758 661 718 q 496 799 566 799 l 354 799 l 323 654 l 345 654 l 325 558 l 580 558 l 548 409 l 293 409 l 266 282 l 332 282 l 307 165 l 449 165 m 324 -11 l 4 -11 l 28 104 l 116 104 l 154 282 l 88 282 l 115 409 l 60 409 l 92 558 l 147 558 l 168 654 l 146 654 l 189 855 l 254 855 l 280 977 l 600 977 q 860 855 763 977 l 794 855 q 874 654 861 771 l 896 654 q 899 598 899 627 q 886 482 899 542 q 806 282 863 375 l 872 282 q 714 104 810 178 l 627 104 q 324 -11 482 -11 z "},:{ha:845,x_min:4,x_max:899,o:"m 449 165 q 673 282 570 165 l 607 282 q 708 482 684 368 q 717 562 717 524 q 705 649 717 615 l 703 654 l 681 654 q 614 758 661 718 q 496 799 566 799 l 354 799 l 323 654 l 345 654 l 325 558 l 580 558 l 548 409 l 293 409 l 266 282 l 332 282 l 307 165 l 449 165 m 324 -11 l 4 -11 l 28 104 l 116 104 l 154 282 l 88 282 l 115 409 l 60 409 l 92 558 l 147 558 l 168 654 l 146 654 l 189 855 l 254 855 l 280 977 l 600 977 q 860 855 763 977 l 794 855 q 874 654 861 771 l 896 654 q 899 598 899 627 q 886 482 899 542 q 806 282 863 375 l 872 282 q 714 104 810 178 l 627 104 q 324 -11 482 -11 z "},:{ha:845,x_min:4,x_max:899,o:"m 449 165 q 673 282 570 165 l 607 282 q 708 482 684 368 q 717 562 717 524 q 705 649 717 615 l 703 654 l 681 654 q 614 758 661 718 q 496 799 566 799 l 354 799 l 323 654 l 345 654 l 325 558 l 580 558 l 548 409 l 293 409 l 266 282 l 332 282 l 307 165 l 449 165 m 324 -11 l 4 -11 l 28 104 l 116 104 l 154 282 l 88 282 l 115 409 l 60 409 l 92 558 l 147 558 l 168 654 l 146 654 l 189 855 l 254 855 l 280 977 l 600 977 q 860 855 763 977 l 794 855 q 874 654 861 771 l 896 654 q 899 598 899 627 q 886 482 899 542 q 806 282 863 375 l 872 282 q 714 104 810 178 l 627 104 q 324 -11 482 -11 z "},:{ha:845,x_min:4,x_max:899,o:"m 449 165 q 673 282 570 165 l 607 282 q 708 482 684 368 q 717 562 717 524 q 705 649 717 615 l 703 654 l 681 654 q 614 758 661 718 q 496 799 566 799 l 354 799 l 323 654 l 345 654 l 325 558 l 580 558 l 548 409 l 293 409 l 266 282 l 332 282 l 307 165 l 449 165 m 324 -11 l 4 -11 l 28 104 l 116 104 l 154 282 l 88 282 l 115 409 l 60 409 l 92 558 l 147 558 l 168 654 l 146 654 l 189 855 l 254 855 l 280 977 l 600 977 q 860 855 763 977 l 794 855 q 874 654 861 771 l 896 654 q 899 598 899 627 q 886 482 899 542 q 806 282 863 375 l 872 282 q 714 104 810 178 l 627 104 q 324 -11 482 -11 z "},:{ha:845,x_min:87,x_max:970,o:"m 253 -243 l 104 -242 l 185 -94 l 242 -94 l 292 -3 q 149 104 206 29 l 236 104 q 160 282 177 179 l 94 282 q 87 361 87 321 q 101 482 87 420 q 164 654 120 573 l 142 654 q 302 855 203 770 l 368 855 q 699 989 521 986 q 970 855 871 986 l 905 855 l 929 822 l 772 703 l 755 726 q 595 811 696 810 q 454 768 522 810 q 334 654 386 726 l 356 654 q 279 482 300 579 q 270 397 270 437 q 292 282 270 335 l 358 282 q 419 197 379 230 q 543 153 470 155 q 740 239 646 154 l 766 262 l 875 144 q 827 104 840 114 l 741 104 q 520 -12 635 16 q 535 -67 535 -37 q 532 -95 535 -81 q 253 -243 500 -243 z "},:{ha:845,x_min:87,x_max:970,o:"m 253 -243 l 104 -242 l 185 -94 l 242 -94 l 292 -3 q 149 104 206 29 l 236 104 q 160 282 177 179 l 94 282 q 87 361 87 321 q 101 482 87 420 q 164 654 120 573 l 142 654 q 302 855 203 770 l 368 855 q 699 989 521 986 q 970 855 871 986 l 905 855 l 929 822 l 772 703 l 755 726 q 595 811 696 810 q 454 768 522 810 q 334 654 386 726 l 356 654 q 279 482 300 579 q 270 397 270 437 q 292 282 270 335 l 358 282 q 419 197 379 230 q 543 153 470 155 q 740 239 646 154 l 766 262 l 875 144 q 827 104 840 114 l 741 104 q 520 -12 635 16 q 535 -67 535 -37 q 532 -95 535 -81 q 253 -243 500 -243 z "},:{ha:845,x_min:-56,x_max:920,o:"m 616 399 l 575 654 l 553 654 l 547 692 l 526 654 l 547 654 l 397 399 l 616 399 m 668 -206 q 523 -172 551 -206 q 505 -122 505 -150 q 536 -33 505 -85 q 646 78 572 27 l 642 104 l 730 104 l 711 220 l 358 220 l 290 104 l 202 104 l 135 -11 l -56 -11 l 12 104 l 99 104 l 204 282 l 138 282 l 357 654 l 335 654 l 453 855 l 519 855 l 590 977 l 757 977 l 777 855 l 711 855 l 743 654 l 766 654 l 825 282 l 890 282 l 920 104 l 832 104 l 850 -11 l 703 -11 q 690 -20 695 -14 q 659 -64 665 -44 q 697 -75 675 -75 l 762 -69 l 734 -205 l 668 -206 z "},:{ha:845,x_min:-56,x_max:920,o:"m 616 399 l 575 654 l 553 654 l 547 692 l 526 654 l 547 654 l 397 399 l 616 399 m 668 -206 q 523 -172 551 -206 q 505 -122 505 -150 q 536 -33 505 -85 q 646 78 572 27 l 642 104 l 730 104 l 711 220 l 358 220 l 290 104 l 202 104 l 135 -11 l -56 -11 l 12 104 l 99 104 l 204 282 l 138 282 l 357 654 l 335 654 l 453 855 l 519 855 l 590 977 l 757 977 l 777 855 l 711 855 l 743 654 l 766 654 l 825 282 l 890 282 l 920 104 l 832 104 l 850 -11 l 703 -11 q 690 -20 695 -14 q 659 -64 665 -44 q 697 -75 675 -75 l 762 -69 l 734 -205 l 668 -206 z "},:{ha:845,x_min:-1,x_max:1029,o:"m 646 -206 q 502 -172 530 -206 q 484 -121 484 -150 q 530 -11 484 -73 l -1 -11 l 23 104 l 111 104 l 148 282 l 83 282 l 162 654 l 140 654 l 182 855 l 248 855 l 274 977 l 1029 977 l 1003 855 l 938 855 l 926 798 l 348 798 l 317 654 l 340 654 l 322 572 l 784 572 l 746 394 l 284 394 l 260 282 l 326 282 l 301 167 l 878 167 l 865 104 l 779 104 l 754 -11 l 682 -11 q 668 -20 674 -14 q 637 -64 643 -44 q 675 -75 654 -75 l 741 -69 l 713 -205 l 646 -206 z "},:{ha:845,x_min:-1,x_max:1029,o:"m 646 -206 q 502 -172 530 -206 q 484 -121 484 -150 q 530 -11 484 -73 l -1 -11 l 23 104 l 111 104 l 148 282 l 83 282 l 162 654 l 140 654 l 182 855 l 248 855 l 274 977 l 1029 977 l 1003 855 l 938 855 l 926 798 l 348 798 l 317 654 l 340 654 l 322 572 l 784 572 l 746 394 l 284 394 l 260 282 l 326 282 l 301 167 l 878 167 l 865 104 l 779 104 l 754 -11 l 682 -11 q 668 -20 674 -14 q 637 -64 643 -44 q 675 -75 654 -75 l 741 -69 l 713 -205 l 646 -206 z "},:{ha:362,x_min:-48,x_max:497,o:"m 115 -206 q -31 -172 -2 -206 q -48 -121 -48 -150 q -18 -33 -48 -85 q 56 51 9 12 l 68 104 l 155 104 l 193 282 l 128 282 l 208 654 l 185 654 l 228 855 l 294 855 l 319 977 l 497 977 l 471 855 l 406 855 l 363 654 l 385 654 l 306 282 l 371 282 l 333 104 l 245 104 l 221 -11 l 149 -11 q 136 -20 142 -14 q 104 -64 111 -44 q 143 -75 121 -75 l 209 -69 l 180 -205 l 115 -206 z "},:{ha:362,x_min:-48,x_max:497,o:"m 115 -206 q -31 -172 -2 -206 q -48 -121 -48 -150 q -18 -33 -48 -85 q 56 51 9 12 l 68 104 l 155 104 l 193 282 l 128 282 l 208 654 l 185 654 l 228 855 l 294 855 l 319 977 l 497 977 l 471 855 l 406 855 l 363 654 l 385 654 l 306 282 l 371 282 l 333 104 l 245 104 l 221 -11 l 149 -11 q 136 -20 142 -14 q 104 -64 111 -44 q 143 -75 121 -75 l 209 -69 l 180 -205 l 115 -206 z "},:{ha:845,x_min:93,x_max:1031,o:"m 452 -206 q 307 -172 335 -206 q 289 -122 289 -150 q 328 -21 289 -80 q 113 104 181 -5 l 201 104 q 159 265 159 172 l 159 282 l 93 282 q 104 364 95 321 l 165 654 l 144 654 l 186 855 l 252 855 l 278 977 l 456 977 l 430 855 l 364 855 l 321 654 l 343 654 l 281 364 q 275 302 275 330 q 275 282 275 292 l 340 282 q 367 210 345 239 q 502 155 406 155 q 660 210 597 155 q 716 282 694 239 l 650 282 q 680 364 670 318 l 741 654 l 719 654 l 762 855 l 827 855 l 853 977 l 1031 977 l 1006 855 l 940 855 l 897 654 l 920 654 l 858 364 q 833 282 849 321 l 899 282 q 781 104 860 178 l 693 104 q 492 -9 606 20 q 472 -21 481 -12 q 442 -64 448 -44 q 481 -75 459 -75 l 547 -69 l 518 -205 l 452 -206 z "},:{ha:845,x_min:93,x_max:1031,o:"m 452 -206 q 307 -172 335 -206 q 289 -122 289 -150 q 328 -21 289 -80 q 113 104 181 -5 l 201 104 q 159 265 159 172 l 159 282 l 93 282 q 104 364 95 321 l 165 654 l 144 654 l 186 855 l 252 855 l 278 977 l 456 977 l 430 855 l 364 855 l 321 654 l 343 654 l 281 364 q 275 302 275 330 q 275 282 275 292 l 340 282 q 367 210 345 239 q 502 155 406 155 q 660 210 597 155 q 716 282 694 239 l 650 282 q 680 364 670 318 l 741 654 l 719 654 l 762 855 l 827 855 l 853 977 l 1031 977 l 1006 855 l 940 855 l 897 654 l 920 654 l 858 364 q 833 282 849 321 l 899 282 q 781 104 860 178 l 693 104 q 492 -9 606 20 q 472 -21 481 -12 q 442 -64 448 -44 q 481 -75 459 -75 l 547 -69 l 518 -205 l 452 -206 z "},:{ha:845,x_min:-1,x_max:1029,o:"m 753 -11 l -1 -11 l 23 104 l 111 104 l 148 282 l 82 282 l 161 654 l 140 654 l 182 855 l 248 855 l 273 977 l 1029 977 l 1003 855 l 937 855 l 925 798 l 348 798 l 317 654 l 339 654 l 321 572 l 784 572 l 746 394 l 283 394 l 260 282 l 326 282 l 301 167 l 878 167 l 865 104 l 778 104 l 753 -11 m 760 987 l 582 987 l 454 1150 l 713 1150 l 760 987 z "},:{ha:845,x_min:-1,x_max:1029,o:"m 753 -11 l -1 -11 l 23 104 l 111 104 l 148 282 l 82 282 l 161 654 l 140 654 l 182 855 l 248 855 l 273 977 l 1029 977 l 1003 855 l 937 855 l 925 798 l 348 798 l 317 654 l 339 654 l 321 572 l 784 572 l 746 394 l 283 394 l 260 282 l 326 282 l 301 167 l 878 167 l 865 104 l 778 104 l 753 -11 m 760 987 l 582 987 l 454 1150 l 713 1150 l 760 987 z "},:{ha:845,x_min:-1,x_max:1028,o:"m 753 -11 l -1 -11 l 23 104 l 110 104 l 147 282 l 82 282 l 161 654 l 140 654 l 182 855 l 248 855 l 273 977 l 1028 977 l 1002 855 l 937 855 l 925 798 l 347 798 l 317 654 l 339 654 l 321 572 l 783 572 l 745 394 l 283 394 l 260 282 l 325 282 l 300 167 l 878 167 l 865 104 l 778 104 l 753 -11 m 724 987 l 547 987 l 663 1150 l 922 1150 l 724 987 z "},:{ha:845,x_min:-1,x_max:1028,o:"m 753 -11 l -1 -11 l 23 104 l 110 104 l 147 282 l 82 282 l 161 654 l 140 654 l 182 855 l 248 855 l 273 977 l 1028 977 l 1002 855 l 937 855 l 925 798 l 347 798 l 317 654 l 339 654 l 321 572 l 783 572 l 745 394 l 283 394 l 260 282 l 325 282 l 300 167 l 878 167 l 865 104 l 778 104 l 753 -11 m 724 987 l 547 987 l 663 1150 l 922 1150 l 724 987 z "},:{ha:845,x_min:-1,x_max:1029,o:"m 753 -11 l -1 -11 l 23 104 l 111 104 l 148 282 l 82 282 l 161 654 l 140 654 l 182 855 l 248 855 l 274 977 l 1029 977 l 1003 855 l 937 855 l 925 798 l 348 798 l 317 654 l 339 654 l 321 572 l 784 572 l 746 394 l 283 394 l 260 282 l 326 282 l 301 167 l 878 167 l 865 104 l 778 104 l 753 -11 m 902 987 l 699 987 l 663 1031 l 608 987 l 405 987 l 603 1150 l 773 1150 l 902 987 z "},:{ha:845,x_min:-1,x_max:1029,o:"m 753 -11 l -1 -11 l 23 104 l 111 104 l 148 282 l 82 282 l 161 654 l 140 654 l 182 855 l 248 855 l 274 977 l 1029 977 l 1003 855 l 937 855 l 925 798 l 348 798 l 317 654 l 339 654 l 321 572 l 784 572 l 746 394 l 283 394 l 260 282 l 326 282 l 301 167 l 878 167 l 865 104 l 778 104 l 753 -11 m 902 987 l 699 987 l 663 1031 l 608 987 l 405 987 l 603 1150 l 773 1150 l 902 987 z "},:{ha:845,x_min:-3,x_max:1028,o:"m 753 -11 l -3 -11 l 22 104 l 109 104 l 147 282 l 82 282 l 161 654 l 139 654 l 182 855 l 248 855 l 273 977 l 1028 977 l 1002 855 l 937 855 l 925 798 l 347 798 l 317 654 l 339 654 l 321 572 l 783 572 l 745 394 l 283 394 l 260 282 l 325 282 l 300 167 l 878 167 l 865 104 l 777 104 l 753 -11 m 653 987 q 522 1025 572 987 q 477 1109 477 1061 q 484 1150 477 1120 l 604 1150 l 600 1133 q 612 1124 601 1130 q 680 1114 639 1114 q 762 1129 734 1114 l 769 1133 l 772 1150 l 892 1150 l 889 1133 q 801 1025 876 1070 q 653 987 734 987 z "},:{ha:845,x_min:-3,x_max:1028,o:"m 753 -11 l -3 -11 l 22 104 l 109 104 l 147 282 l 82 282 l 161 654 l 139 654 l 182 855 l 248 855 l 273 977 l 1028 977 l 1002 855 l 937 855 l 925 798 l 347 798 l 317 654 l 339 654 l 321 572 l 783 572 l 745 394 l 283 394 l 260 282 l 325 282 l 300 167 l 878 167 l 865 104 l 777 104 l 753 -11 m 653 987 q 522 1025 572 987 q 477 1109 477 1061 q 484 1150 477 1120 l 604 1150 l 600 1133 q 612 1124 601 1130 q 680 1114 639 1114 q 762 1129 734 1114 l 769 1133 l 772 1150 l 892 1150 l 889 1133 q 801 1025 876 1070 q 653 987 734 987 z "},:{ha:845,x_min:-56,x_max:920,o:"m 616 399 l 575 654 l 553 654 l 547 692 l 526 654 l 547 654 l 397 399 l 616 399 m 674 979 q 713 1012 707 979 q 715 1022 715 1017 q 688 1044 715 1044 q 648 1012 655 1044 q 647 1002 647 1006 q 674 979 647 979 m 850 -11 l 661 -11 l 642 104 l 730 104 l 711 220 l 358 220 l 290 104 l 202 104 l 135 -11 l -56 -11 l 12 104 l 99 104 l 204 282 l 138 282 l 357 654 l 335 654 l 453 855 l 519 855 l 538 888 q 513 965 513 922 q 519 1012 513 984 q 591 1125 534 1078 q 715 1173 648 1173 q 819 1125 781 1173 q 846 1047 846 1091 q 839 1000 846 1029 q 772 889 825 936 l 777 855 l 711 855 l 744 654 l 766 654 l 825 282 l 890 282 l 920 104 l 832 104 l 850 -11 z "},:{ha:845,x_min:-56,x_max:920,o:"m 616 399 l 575 654 l 553 654 l 547 692 l 526 654 l 547 654 l 397 399 l 616 399 m 674 979 q 713 1012 707 979 q 715 1022 715 1017 q 688 1044 715 1044 q 648 1012 655 1044 q 647 1002 647 1006 q 674 979 647 979 m 850 -11 l 661 -11 l 642 104 l 730 104 l 711 220 l 358 220 l 290 104 l 202 104 l 135 -11 l -56 -11 l 12 104 l 99 104 l 204 282 l 138 282 l 357 654 l 335 654 l 453 855 l 519 855 l 538 888 q 513 965 513 922 q 519 1012 513 984 q 591 1125 534 1078 q 715 1173 648 1173 q 819 1125 781 1173 q 846 1047 846 1091 q 839 1000 846 1029 q 772 889 825 936 l 777 855 l 711 855 l 744 654 l 766 654 l 825 282 l 890 282 l 920 104 l 832 104 l 850 -11 z "},:{ha:845,x_min:-2,x_max:1029,o:"m 753 -11 l -2 -11 l 22 104 l 110 104 l 148 282 l 82 282 l 161 654 l 140 654 l 182 855 l 248 855 l 274 977 l 1029 977 l 1003 855 l 937 855 l 925 798 l 348 798 l 317 654 l 339 654 l 321 572 l 784 572 l 746 394 l 283 394 l 260 282 l 326 282 l 301 167 l 878 167 l 865 104 l 777 104 l 753 -11 m 665 979 l 640 979 q 586 1004 605 979 q 572 1045 572 1022 q 579 1088 572 1054 q 616 1148 587 1123 q 680 1173 646 1173 l 706 1173 q 760 1147 740 1173 q 773 1107 773 1130 q 771 1088 773 1098 l 766 1063 q 729 1004 758 1029 q 665 979 699 979 z "},:{ha:845,x_min:-2,x_max:1029,o:"m 753 -11 l -2 -11 l 22 104 l 110 104 l 148 282 l 82 282 l 161 654 l 140 654 l 182 855 l 248 855 l 274 977 l 1029 977 l 1003 855 l 937 855 l 925 798 l 348 798 l 317 654 l 339 654 l 321 572 l 784 572 l 746 394 l 283 394 l 260 282 l 326 282 l 301 167 l 878 167 l 865 104 l 777 104 l 753 -11 m 665 979 l 640 979 q 586 1004 605 979 q 572 1045 572 1022 q 579 1088 572 1054 q 616 1148 587 1123 q 680 1173 646 1173 l 706 1173 q 760 1147 740 1173 q 773 1107 773 1130 q 771 1088 773 1098 l 766 1063 q 729 1004 758 1029 q 665 979 699 979 z "},:{ha:845,x_min:-55,x_max:920,o:"m 616 399 l 575 654 l 553 654 l 547 692 l 525 654 l 547 654 l 397 399 l 616 399 m 851 -11 l 661 -11 l 643 104 l 730 104 l 711 220 l 358 220 l 290 104 l 202 104 l 135 -11 l -55 -11 l 12 104 l 100 104 l 203 282 l 138 282 l 357 654 l 335 654 l 453 855 l 518 855 l 590 977 l 757 977 l 777 855 l 711 855 l 743 654 l 765 654 l 825 282 l 890 282 l 920 104 l 833 104 l 851 -11 m 578 979 l 551 979 q 498 1004 517 979 q 485 1044 485 1022 q 492 1088 485 1054 q 529 1148 499 1123 q 593 1173 559 1173 l 618 1173 q 672 1147 653 1173 q 686 1106 686 1129 q 684 1088 686 1097 l 679 1063 q 641 1004 671 1029 q 578 979 611 979 m 795 979 l 769 979 q 715 1004 734 979 q 702 1044 702 1022 q 709 1088 702 1054 q 746 1148 716 1123 q 810 1173 777 1173 l 836 1173 q 889 1147 870 1173 q 903 1106 903 1129 q 901 1088 903 1097 l 896 1063 q 859 1004 888 1029 q 795 979 829 979 z "},:{ha:845,x_min:-55,x_max:920,o:"m 616 399 l 575 654 l 553 654 l 547 692 l 525 654 l 547 654 l 397 399 l 616 399 m 851 -11 l 661 -11 l 643 104 l 730 104 l 711 220 l 358 220 l 290 104 l 202 104 l 135 -11 l -55 -11 l 12 104 l 100 104 l 203 282 l 138 282 l 357 654 l 335 654 l 453 855 l 518 855 l 590 977 l 757 977 l 777 855 l 711 855 l 743 654 l 765 654 l 825 282 l 890 282 l 920 104 l 833 104 l 851 -11 m 578 979 l 551 979 q 498 1004 517 979 q 485 1044 485 1022 q 492 1088 485 1054 q 529 1148 499 1123 q 593 1173 559 1173 l 618 1173 q 672 1147 653 1173 q 686 1106 686 1129 q 684 1088 686 1097 l 679 1063 q 641 1004 671 1029 q 578 979 611 979 m 795 979 l 769 979 q 715 1004 734 979 q 702 1044 702 1022 q 709 1088 702 1054 q 746 1148 716 1123 q 810 1173 777 1173 l 836 1173 q 889 1147 870 1173 q 903 1106 903 1129 q 901 1088 903 1097 l 896 1063 q 859 1004 888 1029 q 795 979 829 979 z "},:{ha:845,x_min:-2,x_max:1029,o:"m 753 -11 l -2 -11 l 22 104 l 110 104 l 148 282 l 82 282 l 161 654 l 140 654 l 182 855 l 248 855 l 274 977 l 1029 977 l 1003 855 l 937 855 l 925 798 l 348 798 l 317 654 l 339 654 l 321 572 l 784 572 l 746 394 l 283 394 l 260 282 l 326 282 l 301 167 l 878 167 l 865 104 l 777 104 l 753 -11 m 557 979 l 530 979 q 477 1004 496 979 q 463 1045 463 1022 q 471 1088 463 1054 q 508 1148 478 1123 q 571 1173 537 1173 l 597 1173 q 651 1147 631 1173 q 665 1107 665 1130 q 663 1088 665 1098 l 657 1063 q 620 1004 650 1029 q 557 979 590 979 m 774 979 l 748 979 q 694 1004 713 979 q 680 1045 680 1022 q 688 1088 680 1054 q 725 1148 695 1123 q 788 1173 755 1173 l 814 1173 q 868 1147 848 1173 q 882 1107 882 1130 q 880 1088 882 1098 l 874 1063 q 837 1004 867 1029 q 774 979 808 979 z "},:{ha:845,x_min:-2,x_max:1029,o:"m 753 -11 l -2 -11 l 22 104 l 110 104 l 148 282 l 82 282 l 161 654 l 140 654 l 182 855 l 248 855 l 274 977 l 1029 977 l 1003 855 l 937 855 l 925 798 l 348 798 l 317 654 l 339 654 l 321 572 l 784 572 l 746 394 l 283 394 l 260 282 l 326 282 l 301 167 l 878 167 l 865 104 l 777 104 l 753 -11 m 557 979 l 530 979 q 477 1004 496 979 q 463 1045 463 1022 q 471 1088 463 1054 q 508 1148 478 1123 q 571 1173 537 1173 l 597 1173 q 651 1147 631 1173 q 665 1107 665 1130 q 663 1088 665 1098 l 657 1063 q 620 1004 650 1029 q 557 979 590 979 m 774 979 l 748 979 q 694 1004 713 979 q 680 1045 680 1022 q 688 1088 680 1054 q 725 1148 695 1123 q 788 1173 755 1173 l 814 1173 q 868 1147 848 1173 q 882 1107 882 1130 q 880 1088 882 1098 l 874 1063 q 837 1004 867 1029 q 774 979 808 979 z "},:{ha:966,x_min:113,x_max:1030,o:"m 568 155 q 708 198 640 155 q 804 282 761 231 l 739 282 q 839 484 814 370 q 848 568 848 528 q 836 654 848 625 l 814 654 q 742 768 792 726 q 619 811 692 811 q 477 768 546 811 q 357 654 409 726 l 379 654 q 304 484 323 576 q 294 398 294 439 q 317 282 294 336 l 382 282 q 444 198 404 231 q 568 155 494 155 m 442 -22 q 175 104 273 -22 l 262 104 q 184 282 202 180 l 119 282 q 113 360 113 320 q 126 484 113 420 q 188 654 145 574 l 165 654 q 326 855 227 770 l 392 855 q 628 979 505 953 l 599 979 q 546 1004 565 979 q 532 1045 532 1022 q 539 1088 532 1054 q 576 1148 547 1123 q 640 1173 606 1173 l 666 1173 q 720 1148 701 1173 q 733 1107 733 1130 q 726 1063 733 1098 q 688 1004 718 1029 q 654 984 672 990 q 722 989 688 989 q 789 984 757 989 q 763 1004 773 990 q 749 1045 749 1022 q 756 1088 749 1054 q 794 1148 764 1123 q 857 1173 824 1173 l 884 1173 q 937 1148 918 1173 q 950 1107 950 1130 q 943 1063 950 1098 q 906 1004 935 1029 q 842 979 876 979 l 812 979 q 996 855 924 953 l 931 855 q 1006 654 994 770 l 1027 654 q 1030 602 1030 629 q 1017 484 1030 545 q 938 282 994 376 l 1003 282 q 851 104 943 180 l 764 104 q 442 -22 610 -22 z "},:{ha:966,x_min:113,x_max:1030,o:"m 568 155 q 708 198 640 155 q 804 282 761 231 l 739 282 q 839 484 814 370 q 848 568 848 528 q 836 654 848 625 l 814 654 q 742 768 792 726 q 619 811 692 811 q 477 768 546 811 q 357 654 409 726 l 379 654 q 304 484 323 576 q 294 398 294 439 q 317 282 294 336 l 382 282 q 444 198 404 231 q 568 155 494 155 m 442 -22 q 175 104 273 -22 l 262 104 q 184 282 202 180 l 119 282 q 113 360 113 320 q 126 484 113 420 q 188 654 145 574 l 165 654 q 326 855 227 770 l 392 855 q 628 979 505 953 l 599 979 q 546 1004 565 979 q 532 1045 532 1022 q 539 1088 532 1054 q 576 1148 547 1123 q 640 1173 606 1173 l 666 1173 q 720 1148 701 1173 q 733 1107 733 1130 q 726 1063 733 1098 q 688 1004 718 1029 q 654 984 672 990 q 722 989 688 989 q 789 984 757 989 q 763 1004 773 990 q 749 1045 749 1022 q 756 1088 749 1054 q 794 1148 764 1123 q 857 1173 824 1173 l 884 1173 q 937 1148 918 1173 q 950 1107 950 1130 q 943 1063 950 1098 q 906 1004 935 1029 q 842 979 876 979 l 812 979 q 996 855 924 953 l 931 855 q 1006 654 994 770 l 1027 654 q 1030 602 1030 629 q 1017 484 1030 545 q 938 282 994 376 l 1003 282 q 851 104 943 180 l 764 104 q 442 -22 610 -22 z "},:{ha:845,x_min:94,x_max:1031,o:"m 779 979 l 753 979 q 699 1004 718 979 q 685 1045 685 1022 q 692 1088 685 1054 q 730 1148 700 1123 q 793 1173 760 1173 l 820 1173 q 873 1148 854 1173 q 886 1107 886 1130 q 884 1088 886 1098 l 879 1063 q 842 1004 871 1029 q 779 979 812 979 m 376 -22 q 190 26 265 -22 q 114 104 142 58 l 201 104 q 158 264 158 172 l 159 283 l 94 283 q 104 365 95 322 l 165 655 l 144 655 l 186 856 l 252 856 l 277 978 l 455 978 l 429 856 l 363 856 l 321 655 l 343 655 l 281 365 q 275 302 275 331 q 275 283 275 292 l 341 283 q 367 210 344 240 q 502 156 406 156 q 660 210 597 156 q 717 283 694 240 l 651 283 q 679 365 669 319 l 741 655 l 719 655 l 762 856 l 827 856 l 853 978 l 1031 978 l 1006 856 l 940 856 l 897 655 l 919 655 l 857 365 q 833 283 848 322 l 899 283 q 781 104 859 179 l 693 104 q 583 26 644 58 q 376 -22 488 -22 m 562 979 l 535 979 q 482 1004 501 979 q 468 1045 468 1022 q 475 1088 468 1054 q 513 1148 483 1123 q 576 1173 543 1173 l 602 1173 q 656 1148 637 1173 q 669 1107 669 1130 q 667 1088 669 1098 l 662 1063 q 625 1004 654 1029 q 562 979 595 979 z "},:{ha:845,x_min:94,x_max:1031,o:"m 779 979 l 753 979 q 699 1004 718 979 q 685 1045 685 1022 q 692 1088 685 1054 q 730 1148 700 1123 q 793 1173 760 1173 l 820 1173 q 873 1148 854 1173 q 886 1107 886 1130 q 884 1088 886 1098 l 879 1063 q 842 1004 871 1029 q 779 979 812 979 m 376 -22 q 190 26 265 -22 q 114 104 142 58 l 201 104 q 158 264 158 172 l 159 283 l 94 283 q 104 365 95 322 l 165 655 l 144 655 l 186 856 l 252 856 l 277 978 l 455 978 l 429 856 l 363 856 l 321 655 l 343 655 l 281 365 q 275 302 275 331 q 275 283 275 292 l 341 283 q 367 210 344 240 q 502 156 406 156 q 660 210 597 156 q 717 283 694 240 l 651 283 q 679 365 669 319 l 741 655 l 719 655 l 762 856 l 827 856 l 853 978 l 1031 978 l 1006 856 l 940 856 l 897 655 l 919 655 l 857 365 q 833 283 848 322 l 899 283 q 781 104 859 179 l 693 104 q 583 26 644 58 q 376 -22 488 -22 m 562 979 l 535 979 q 482 1004 501 979 q 468 1045 468 1022 q 475 1088 468 1054 q 513 1148 483 1123 q 576 1173 543 1173 l 602 1173 q 656 1148 637 1173 q 669 1107 669 1130 q 667 1088 669 1098 l 662 1063 q 625 1004 654 1029 q 562 979 595 979 z "},:{ha:966,x_min:113,x_max:1030,o:"m 568 155 q 708 198 640 155 q 804 282 761 231 l 739 282 q 839 484 814 370 q 848 568 848 528 q 836 654 848 625 l 814 654 q 742 768 792 726 q 619 811 692 811 q 477 768 546 811 q 357 654 409 726 l 379 654 q 304 484 323 576 q 294 398 294 439 q 317 282 294 336 l 382 282 q 444 198 404 231 q 568 155 494 155 m 669 986 q 722 989 695 989 q 742 989 732 989 l 675 1018 l 669 986 m 442 -22 q 175 104 273 -22 l 262 104 q 184 282 202 180 l 119 282 q 113 360 113 320 q 126 484 113 420 q 188 654 145 574 l 165 654 q 326 855 227 770 l 392 855 q 634 981 508 955 l 519 981 l 526 1012 q 552 1089 536 1059 q 684 1170 604 1170 q 788 1141 728 1170 q 810 1131 802 1134 l 819 1168 l 968 1168 l 961 1136 q 934 1059 951 1089 q 814 979 886 984 q 996 855 925 952 l 931 855 q 1006 654 994 770 l 1027 654 q 1030 602 1030 629 q 1017 484 1030 545 q 938 282 994 376 l 1003 282 q 851 104 943 180 l 764 104 q 442 -22 610 -22 z "},:{ha:966,x_min:113,x_max:1030,o:"m 568 155 q 708 198 640 155 q 804 282 761 231 l 739 282 q 839 484 814 370 q 848 568 848 528 q 836 654 848 625 l 814 654 q 742 768 792 726 q 619 811 692 811 q 477 768 546 811 q 357 654 409 726 l 379 654 q 304 484 323 576 q 294 398 294 439 q 317 282 294 336 l 382 282 q 444 198 404 231 q 568 155 494 155 m 669 986 q 722 989 695 989 q 742 989 732 989 l 675 1018 l 669 986 m 442 -22 q 175 104 273 -22 l 262 104 q 184 282 202 180 l 119 282 q 113 360 113 320 q 126 484 113 420 q 188 654 145 574 l 165 654 q 326 855 227 770 l 392 855 q 634 981 508 955 l 519 981 l 526 1012 q 552 1089 536 1059 q 684 1170 604 1170 q 788 1141 728 1170 q 810 1131 802 1134 l 819 1168 l 968 1168 l 961 1136 q 934 1059 951 1089 q 814 979 886 984 q 996 855 925 952 l 931 855 q 1006 654 994 770 l 1027 654 q 1030 602 1030 629 q 1017 484 1030 545 q 938 282 994 376 l 1003 282 q 851 104 943 180 l 764 104 q 442 -22 610 -22 z "},:{ha:845,x_min:0,x_max:1030,o:"m 755 -11 l 581 -11 l 533 104 l 621 104 l 547 282 l 481 282 l 336 635 l 261 282 l 327 282 l 289 104 l 201 104 l 178 -11 l 0 -11 l 24 104 l 111 104 l 149 282 l 83 282 l 163 654 l 141 654 l 184 855 l 249 855 l 275 977 l 449 977 l 499 855 l 433 855 l 516 654 l 538 654 l 671 331 l 740 654 l 718 654 l 761 855 l 827 855 l 852 977 l 1030 977 l 1004 855 l 939 855 l 896 654 l 918 654 l 838 282 l 904 282 l 866 104 l 779 104 l 755 -11 m 733 979 q 675 989 703 979 q 629 1008 652 997 l 606 1019 l 598 981 l 450 981 l 456 1013 q 483 1090 467 1059 q 614 1171 534 1171 q 718 1141 659 1171 q 741 1131 732 1135 l 749 1168 l 899 1168 l 892 1137 q 865 1059 882 1090 q 733 979 814 979 z "},:{ha:845,x_min:0,x_max:1030,o:"m 755 -11 l 581 -11 l 533 104 l 621 104 l 547 282 l 481 282 l 336 635 l 261 282 l 327 282 l 289 104 l 201 104 l 178 -11 l 0 -11 l 24 104 l 111 104 l 149 282 l 83 282 l 163 654 l 141 654 l 184 855 l 249 855 l 275 977 l 449 977 l 499 855 l 433 855 l 516 654 l 538 654 l 671 331 l 740 654 l 718 654 l 761 855 l 827 855 l 852 977 l 1030 977 l 1004 855 l 939 855 l 896 654 l 918 654 l 838 282 l 904 282 l 866 104 l 779 104 l 755 -11 m 733 979 q 675 989 703 979 q 629 1008 652 997 l 606 1019 l 598 981 l 450 981 l 456 1013 q 483 1090 467 1059 q 614 1171 534 1171 q 718 1141 659 1171 q 741 1131 732 1135 l 749 1168 l 899 1168 l 892 1137 q 865 1059 882 1090 q 733 979 814 979 z "},:{ha:845,x_min:89,x_max:972,o:"m 418 -25 q 149 104 246 -22 l 237 104 q 160 282 178 179 l 95 282 q 89 361 89 321 q 165 654 89 511 l 142 654 q 303 855 203 770 l 369 855 q 663 987 506 972 l 585 987 l 701 1151 l 960 1151 l 762 987 l 736 987 q 972 855 884 972 l 906 855 l 930 822 l 772 703 l 756 726 q 596 811 697 810 q 454 768 523 810 q 335 654 386 726 l 357 654 q 280 482 300 574 q 271 397 271 438 q 293 282 271 335 l 359 282 q 420 197 380 230 q 545 153 471 155 q 741 239 646 154 l 767 262 l 876 144 l 829 104 l 741 104 q 418 -25 589 -22 z "},:{ha:845,x_min:89,x_max:972,o:"m 418 -25 q 149 104 246 -22 l 237 104 q 160 282 178 179 l 95 282 q 89 361 89 321 q 165 654 89 511 l 142 654 q 303 855 203 770 l 369 855 q 663 987 506 972 l 585 987 l 701 1151 l 960 1151 l 762 987 l 736 987 q 972 855 884 972 l 906 855 l 930 822 l 772 703 l 756 726 q 596 811 697 810 q 454 768 523 810 q 335 654 386 726 l 357 654 q 280 482 300 574 q 271 397 271 438 q 293 282 271 335 l 359 282 q 420 197 380 230 q 545 153 471 155 q 741 239 646 154 l 767 262 l 876 144 l 829 104 l 741 104 q 418 -25 589 -22 z "}},familyName:"Glitch Goblin",ascender:1297,descender:-284,underlinePosition:-147,underlineThickness:102,boundingBox:{yMin:-243,xMin:-98,yMax:1173,xMax:1442},resolution:1e3,original_font_information:{format:0,copyright:" 2023 GGBotNet",fontFamily:"Glitch Goblin",fontSubfamily:"Regular",uniqueID:"1.10;GGBotNet;GlitchGoblin",fullName:"Glitch Goblin",version:"1.10",postScriptName:"GlitchGoblin",manufacturer:"GGBotNet",designer:"GGBotNet",manufacturerURL:"https://ggbot.net",designerURL:"https://ggbot.net",licence:"This Font Software is licensed under the SIL Open Font License, Version 1.1. This license is available with a FAQ at: https://scripts.sil.org/OFL",licenceURL:"https://scripts.sil.org/OFL",sampleText:"Glitch Goblin"},cssFontWeight:"normal",cssFontStyle:"normal"};var Lu,Po,jt,V1,G1,Qi,Oa,no,Gl,Qn,hr,n5,Xo,ut,ec,i5=document.querySelector("canvas.webgl"),gn=new Gv(i5);const ur=new Gm,Pi=new G,Vc=new Ja,Ji=1;var Xv=!1,io=!1,W1=!1,X1=new R,Yv=new wt;new R(1.5,10.5,1.1);new R(0,10.5,1.1);var Io=0,$i,Ri,tc,qs,Wl,Xl,Ws,mf,Pt;const Ha=[],Yl=200,Kv=.3,Zv=.1,$v=-1,Jv=.08,jv=.025,Qv=.02;let Y1=null,gf=null;const e9=["#ee3227","#134a7c","#ffffff"].map(r=>new ae(r)),t9={transformLineMethod:r=>r*1.5},kr={x:0,y:0,z:0};class n9 extends vy{addLine(){if(this.lines.length>400)return;let e=$v,t=Math.random()>.8?Zv:Kv,n=Vs(0,Math.PI*2);const i=[];for(;e<ut.position.z;)kr.x=Math.cos(n)*t,kr.y=Math.sin(n)*t,kr.z=e,e+=Jv,n+=jv,t+=Qv,i.push(new R(kr.x,kr.y,kr.z));super.addLine({visibleLength:Vs(.1,.4),points:i,speed:Vs(.002,.01),color:Vv(e9),width:Vs(.01,.06)})}}var so;function i9(r){const e=r.clone();return e.traverse(t=>{t.isMesh&&(t.geometry=t.geometry.clone(),t.material=t.material.clone())}),e}function s9(){Lu=new E7(Po),Lu.loadAsync("assets/models/gltf/cyberpunk_micro-apartments/scene.gltf").then(function(r){r.scene,r.scene.children.forEach(e=>{e.name=="RootBot"&&e.scale.set(.5,.5,.5)}),Qn.add(r.scene)}),Lu.loadAsync("assets/models/gltf/VBot.glb").then(function(r){const e=r.scene.getObjectByName("Bot");e.scale.set(2,2,2),e.rotation.y=Math.PI*.5,$i=e.getObjectByName("Head"),r.scene.position.z=4.5,Qn.add(r.scene);var t=i9(r.scene);t.position.z=-4,Ri=t.getObjectByName("Bot").getObjectByName("Head"),tc=Ri.getObjectByName("Eye"),Qn.add(t)})}const K1=50,r9=0,Z1=65;function Kl(r,e,t){return r+t*(e-r)}class a9{constructor(){this.position=new R((Math.random()-.5)*50,Math.random()*20,(Math.random()-.5)*50),this.lifespan=Math.random(),this.decay=Math.random()*.005,this.gFirefliesElevationSpeed=.125*(Math.random()-.5),this.gFirefliesWhirlSpeed=.0625*(Math.random()-.5),this.gFirefliesWhirlAngle=5*(Math.random()-.5),this.gFirefliesElevationT=5*(Math.random()-.5),this.elevationDirection=1,this.cr=0,this.cg=1,this.cb=1}update(){const e=Math.cos(this.gFirefliesWhirlAngle)*K1,t=6+Math.sin(this.gFirefliesWhirlAngle)*K1,n=Kl(r9,Z1,(Math.sin(this.gFirefliesElevationT)+1)*.5);this.gFirefliesWhirlAngle+=Io*this.gFirefliesWhirlSpeed,this.gFirefliesElevationT+=Io*this.gFirefliesElevationSpeed*this.elevationDirection,(this.gFirefliesElevationT>=1&&this.elevationDirection==1||this.gFirefliesElevationT<=0&&this.elevationDirection==-1)&&(this.elevationDirection*=-1);const i=n/Z1;this.cr=Kl(0,1,i),this.cg=Kl(1,165/255,i),this.cb=Kl(1,0,i),this.position.set(e,n,t)}}var s5=!1;function o9(){setTimeout(()=>{s5=!0,Pt.style.opacity="0",setTimeout(()=>{Pt.style.display="none",o5()},500)},1500)}function l9(){Pt=document.createElement("div"),Pt.style.position="fixed",Pt.style.width="100%",Pt.style.height="100%",Pt.style.backgroundColor="rgba(0,0,0,1)",Pt.style.display="flex",Pt.style.justifyContent="center",Pt.style.alignItems="center",Pt.style.color="#ffffff",Pt.style.fontSize="24px",Pt.style.opacity="0",Pt.style.transition="opacity 0.5s ease",Pt.innerHTML="Loading...",document.body.appendChild(Pt);const r=Pt.offsetWidth,e=Pt.offsetHeight,t=Math.min(r,e)*.075;Pt.style.fontSize=`${t}px`,Po=new bh,Po.onLoad=()=>{o9()},n5=new oa,ec=new Lt(75,window.innerWidth/window.innerHeight,.1,500),ec.position.x=.75,ec.lookAt(0,0,0),so=new n9({frequency:.5},t9),so.rotation.y=Math.PI*.5,so.start(),setTimeout(()=>{Pt.style.opacity="1"},100)}function $1(){if(!io){io=!0;const r=document.querySelector("div#wrapper");r&&(r.style.display="none")}}const Du=document.querySelector(".returnToScene");Du?(Du.onclick=function(){$1()},Du.addEventListener("touchstart",function(){$1()})):console.error("Element with class 'returnToScene' not found.");function c9(){Qi=new Qm(gn.Renderer),G1=new e2(hr,ut);const r=new ca(new G(window.innerWidth,window.innerHeight),.15,.4,.05),e=new t2;Qi.addPass(G1),Qi.addPass(r),Qi.addPass(e),Qi.renderToScreen=!0}function h9(){Oa=new Qm(gn.Renderer),V1=new e2(Qn,ut),no=new jm(py);const r=new t2;no.material.uniforms.resolution.value.set(window.innerWidth,window.innerHeight),Oa.addPass(V1),Oa.addPass(no),Oa.addPass(r),Oa.renderToScreen=!0}function u9(){Qn=new oa,Qn.scale.set(Ji,Ji,Ji),hr=new oa,hr.scale.set(Ji,Ji,Ji),Xo=new wh,M9(),S9()}function f9(){ut=new Lt(75,window.innerWidth/window.innerHeight,.1,500),ut.position.x=8,ut.position.y=5,ut.position.z=0,ut.lookAt(0,0,0)}function d9(){const r=new Dc(16777215),e=new So(16777215,1),t=new Th(16711680,25e4*Ji,1e6*Ji);t.position.y=-5,Qn.add(r,e);const n=new Dc(16777215),i=new So(16777215,1);hr.add(n,i,t)}function p9(){jt=new p7(ut,i5),jt.enableDamping=!0,jt.maxDistance=40,jt.minPolarAngle=Math.PI*.25,jt.maxPolarAngle=Math.PI*.49,jt.enablePan=!1,jt.rotateSpeed=.5,jt.zoomSpeed=.5}function m9(){window.addEventListener("resize",()=>g9())}function g9(){ut.aspect=window.innerWidth/window.innerHeight,ut.updateProjectionMatrix(),gn.OnResize(),Qi.setSize(window.innerWidth,window.innerHeight),Qi.setPixelRatio(Math.min(window.devicePixelRatio,2)),no&&no.material.uniforms.resolution.value.set(window.innerWidth,window.innerHeight)}var qt,Yo,as;function _9(r,e){const t=new R().subVectors(e,r);let n=[];const i=20;for(let s=0;s<=i;s++)n.push(r.clone().addScaledVector(t,s/i)),s>0&&s<i&&(n[s].y+=Math.sin(s+Xo.getElapsedTime()*(Yo?10:5))*.0105);return n}function x9(){if(qs&&(qs.visible=!1),!as||!tc)return;const r=new R,e=new R;tc.getWorldPosition(r);const t=new Jn(new R(0,1,0),0);ur.ray.intersectPlane(t,e),e.x+=.05,Wl||(Wl=new Nc.MeshLine);const i=_9(r,e).flatMap(s=>[s.x,s.y,s.z]);Wl.setPoints(i),Xl=new Nc.MeshLineMaterial({color:Yo?65280:16711680,lineWidth:.1,resolution:new G(window.innerWidth,window.innerHeight),sizeAttenuation:!0}),qs?qs.visible=!0:(qs=new ct(Wl,Xl),Qn.add(qs)),qs.material=Xl,tc.material.emissive=Xl.color}function y9(r){r.OnHoverStart&&r.OnHoverStart(r)}function J1(r){r.OnHoverEnd&&r.OnHoverEnd(r)}function r5(){if(Yo=!0,qt!=null&&qt.OnMouseDown&&(jt.rotateSpeed=0,qt.OnMouseDown(qt),mn)){const r=new R;ut.getWorldDirection(r),mn.position.copy(ut.position),mn.position.addScaledVector(r,2),r.set(0,1,0),r.applyQuaternion(ut.quaternion),mn.position.addScaledVector(r,Math.random(-.75,.75)),r.set(1,0,0),r.applyQuaternion(ut.quaternion),mn.position.addScaledVector(r,Math.random(-.75,.75)),mn.lookAt(ut.position),setTimeout(()=>{mn.hide()},350),mn.show()}}function _f(){Yo=!1,qt!=null&&qt.OnMouseUp&&qt.OnMouseUp(qt),jt.rotateSpeed=.25}function v9(){const e=ur.intersectObject(hr).filter(t=>t.object instanceof to);e.length>0?Yo||(qt!=e[0].object&&qt!=null&&J1(qt),as||(qt=e[0].object,y9(qt),as=!0)):qt!=null&&(J1(qt),qt=null,as=!1)}function j1(){const e=ur.intersectObject(hr).filter(t=>t.object instanceof to);e.length>0?(qt=e[0].object,as=!0):(qt=null,as=!1)}window.addEventListener("mousemove",r=>{Pi.x=r.clientX/window.innerWidth*2-1,Pi.y=-(r.clientY/window.innerHeight)*2+1,ur.setFromCamera(Pi,ut),v9()});window.addEventListener("mousedown",r=>{r5()});window.addEventListener("mouseup",r=>{_f()});function M9(){const r=new ko(5,16),e=new kt({uniforms:{uRadius:{value:1},uEdgeFade:{value:1.5},uColor:{value:new ae(16777215)}},vertexShader:`
          varying vec2 vUv;
          void main() {
              vUv = uv;
              gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
          }
      `,fragmentShader:`
          uniform float uRadius;
          uniform float uEdgeFade;
          uniform vec3 uColor;
          varying vec2 vUv;
          void main() {
              // Calculate distance from the center of the plane
              float dist = length(vUv - vec2(0.5, 0.5)) * 2.0;

              // Calculate the alpha based on distance from the center
              float alpha = 1.0 - smoothstep(uRadius- uEdgeFade, uRadius , dist);

              // Apply the color and fade out the edges
              gl_FragColor = vec4(uColor, alpha * 0.25f);
          }
      `,transparent:!0});Gl=new ct(r,e),Gl.position.y=.05,Gl.rotateX(-Math.PI/2),Qn.add(Gl)}async function S9(){const r=new li;r.position.x=2.5,r.position.y=.075,r.rotation.x=-Math.PI*.5,r.rotation.z=Math.PI*.5,hr.add(r);const e=new rd(Po);e.loadAsync("assets/textures/ProjectsText.png").then(function(t){const n=new to(t);r.add(n)}),e.loadAsync("assets/textures/AboutMeText.png").then(function(t){const n=new to(t);r.add(n),n.position.y=-1}),e.loadAsync("assets/textures/ResumeText.png").then(function(t){const n=new to(t);r.add(n),n.position.y=-2})}function b9(){mf=new oa;for(let i=0;i<Yl;i++)Ha.push(new a9);const r=new Oe,e=new Float32Array(Yl*3),t=new Float32Array(Yl*3);for(let i=0;i<Yl;i++)e[i*3]=Ha[i].position.x,e[i*3+1]=Ha[i].position.y,e[i*3+2]=Ha[i].position.z,t[i*3]=0,t[i*3+1]=1,t[i*3+2]=1;r.setAttribute("position",new Qe(e,3)),r.setAttribute("color",new Qe(t,3));const n=new Bo({color:16777215,size:.125,blending:ro,depthWrite:!1,vertexColors:!0});Ws=new lh(r,n),mf.add(Ws)}function T9(){const r=Ws.geometry.attributes.position.array,e=Ws.geometry.attributes.color.array;Ha.forEach((t,n)=>{t.update(),r[n*3]=t.position.x,r[n*3+1]=t.position.y,r[n*3+2]=t.position.z,e[n*3]=t.cr,e[n*3+1]=t.cg,e[n*3+2]=t.cb}),Ws.geometry.attributes.position.needsUpdate=!0,Ws.geometry.attributes.color.needsUpdate=!0}let mn=null;function A9(){!mn&&gf&&(mn=new kv("POW!",gf,{color:"0xFFFFFF",size:.125*.5,wireframe:!0,opacity:1,duration:.125*.5}),mn.rotation.y=Math.PI*.5,mn.position.z=-2.5,mn.position.y=2,Qn.add(mn)),x9();const r=.05,e=new wt,t=new wt;if($i){let n=new R;$i.getWorldPosition(n);const i=ut.position.clone();i.y=n.y,t.copy($i.quaternion),$i.lookAt(i),e.copy($i.quaternion),$i.quaternion.copy(t),$i.quaternion.slerp(e,r)}if(Ri){const n=new Jn(new R(0,1,0),0),i=new R;let s=new R;ur.ray.intersectPlane(n,i),Ri.getWorldPosition(s),i.y=s.y,t.copy(Ri.quaternion),Ri.lookAt(i),e.copy(Ri.quaternion),Ri.quaternion.copy(t),Ri.quaternion.slerp(e,r)}io&&(ut.position.lerp(X1,.05),ut.quaternion.slerp(Yv,.05),Math.abs(new R().subVectors(X1,ut.position).length())<.01&&(io=!1,W1=!1,jt.target.set(0,0,0),jt.saveState(),jt.reset())),jt.enabled=!W1&&!Xv&&!io,jt.enabled&&(jt.update(),ut.position.y+=Math.sin(Xo.getElapsedTime())*Io*.125),Ws&&T9(),Vc.update()}function w9(){Vc.begin(),gn.Renderer.clear(),Qi.render(),gn.Renderer.clearDepth(),gn.Renderer.render(Qn,ut),gn.Renderer.render(mf,ut),Vc.end()}async function a5(){Io=Xo.getDelta(),s5==!1&&(so&&so.update(),gn.Renderer.clear(),gn.Renderer.render(n5,ec),window.requestAnimationFrame(()=>a5()))}function o5(){Io=Xo.getDelta(),A9(),w9(),window.requestAnimationFrame(()=>o5())}class E9{constructor(){this.OnAppStart()}async OnAppStart(){s9(),l9(),u9(),f9(),d9(),p9(),m9(),c9(),h9(),await b9(),document.body.appendChild(Vc.domElement),Y1=new My(Po),gf=Y1.parse(Wv),gn.Renderer&&(gn.Renderer.domElement.addEventListener("touchmove",function(e){e.preventDefault(),Pi.x=e.touches[0].clientX/window.innerWidth*2-1,Pi.y=-(e.touches[0].clientY/window.innerHeight)*2+1,ur.setFromCamera(Pi,ut),j1()}),gn.Renderer.domElement.addEventListener("touchstart",function(e){e.preventDefault(),Pi.x=e.touches[0].clientX/window.innerWidth*2-1,Pi.y=-(e.touches[0].clientY/window.innerHeight)*2+1,ur.setFromCamera(Pi,ut),j1(),r5()}),gn.Renderer.domElement.addEventListener("touchend",function(e){e.preventDefault(),_f(),qt=null,as=!1}),gn.Renderer.domElement.addEventListener("touchcancel",function(e){e.preventDefault(),_f(),qt=null,as=!1})),a5()}}new E9;
