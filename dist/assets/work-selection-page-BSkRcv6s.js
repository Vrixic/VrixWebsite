import{r as Te,g as Zn,j as Ye}from"./index-DBYn696Y.js";import{V as Pe,M as br,a as Ne,Q as Cn,u as Dr,_ as Fr,b as Kn,c as Jn,R as Qn,U as $n,S as eo,d as Mr,e as to,C as Tt,f as ro,I as no,g as oo,B as An,h as ao,T as io,L as nn,i as so,j as on,D as lo,P as Or,k as Dn,l as uo,m as co,G as fo}from"./global-properties-D6YzSiAV.js";var ho=Object.defineProperty,po=(h,n,d)=>n in h?ho(h,n,{enumerable:!0,configurable:!0,writable:!0,value:d}):h[n]=d,vo=(h,n,d)=>(po(h,n+"",d),d);class go{constructor(){vo(this,"_listeners")}addEventListener(n,d){this._listeners===void 0&&(this._listeners={});const u=this._listeners;u[n]===void 0&&(u[n]=[]),u[n].indexOf(d)===-1&&u[n].push(d)}hasEventListener(n,d){if(this._listeners===void 0)return!1;const u=this._listeners;return u[n]!==void 0&&u[n].indexOf(d)!==-1}removeEventListener(n,d){if(this._listeners===void 0)return;const t=this._listeners[n];if(t!==void 0){const e=t.indexOf(d);e!==-1&&t.splice(e,1)}}dispatchEvent(n){if(this._listeners===void 0)return;const u=this._listeners[n.type];if(u!==void 0){n.target=this;const t=u.slice(0);for(let e=0,a=t.length;e<a;e++)t[e].call(this,n);n.target=null}}}var mo=Object.defineProperty,yo=(h,n,d)=>n in h?mo(h,n,{enumerable:!0,configurable:!0,writable:!0,value:d}):h[n]=d,X=(h,n,d)=>(yo(h,typeof n!="symbol"?n+"":n,d),d);let bo=class extends go{constructor(n,d){super(),X(this,"enabled",!0),X(this,"screen",{left:0,top:0,width:0,height:0}),X(this,"rotateSpeed",1),X(this,"zoomSpeed",1.2),X(this,"panSpeed",.3),X(this,"noRotate",!1),X(this,"noZoom",!1),X(this,"noPan",!1),X(this,"staticMoving",!1),X(this,"dynamicDampingFactor",.2),X(this,"minDistance",0),X(this,"maxDistance",1/0),X(this,"keys",["KeyA","KeyS","KeyD"]),X(this,"mouseButtons",{LEFT:br.ROTATE,MIDDLE:br.DOLLY,RIGHT:br.PAN}),X(this,"object"),X(this,"domElement"),X(this,"cursorZoom",!1),X(this,"target",new Pe),X(this,"mousePosition",new Ne),X(this,"STATE",{NONE:-1,ROTATE:0,ZOOM:1,PAN:2,TOUCH_ROTATE:3,TOUCH_ZOOM_PAN:4}),X(this,"EPS",1e-6),X(this,"lastZoom",1),X(this,"lastPosition",new Pe),X(this,"cursorVector",new Pe),X(this,"targetVector",new Pe),X(this,"_state",this.STATE.NONE),X(this,"_keyState",this.STATE.NONE),X(this,"_eye",new Pe),X(this,"_movePrev",new Ne),X(this,"_moveCurr",new Ne),X(this,"_lastAxis",new Pe),X(this,"_lastAngle",0),X(this,"_zoomStart",new Ne),X(this,"_zoomEnd",new Ne),X(this,"_touchZoomDistanceStart",0),X(this,"_touchZoomDistanceEnd",0),X(this,"_panStart",new Ne),X(this,"_panEnd",new Ne),X(this,"target0"),X(this,"position0"),X(this,"up0"),X(this,"zoom0"),X(this,"changeEvent",{type:"change"}),X(this,"startEvent",{type:"start"}),X(this,"endEvent",{type:"end"}),X(this,"onScreenVector",new Ne),X(this,"getMouseOnScreen",(u,t)=>(this.onScreenVector.set((u-this.screen.left)/this.screen.width,(t-this.screen.top)/this.screen.height),this.onScreenVector)),X(this,"onCircleVector",new Ne),X(this,"getMouseOnCircle",(u,t)=>(this.onCircleVector.set((u-this.screen.width*.5-this.screen.left)/(this.screen.width*.5),(this.screen.height+2*(this.screen.top-t))/this.screen.width),this.onCircleVector)),X(this,"axis",new Pe),X(this,"quaternion",new Cn),X(this,"eyeDirection",new Pe),X(this,"objectUpDirection",new Pe),X(this,"objectSidewaysDirection",new Pe),X(this,"moveDirection",new Pe),X(this,"angle",0),X(this,"rotateCamera",()=>{this.moveDirection.set(this._moveCurr.x-this._movePrev.x,this._moveCurr.y-this._movePrev.y,0),this.angle=this.moveDirection.length(),this.angle?(this._eye.copy(this.object.position).sub(this.target),this.eyeDirection.copy(this._eye).normalize(),this.objectUpDirection.copy(this.object.up).normalize(),this.objectSidewaysDirection.crossVectors(this.objectUpDirection,this.eyeDirection).normalize(),this.objectUpDirection.setLength(this._moveCurr.y-this._movePrev.y),this.objectSidewaysDirection.setLength(this._moveCurr.x-this._movePrev.x),this.moveDirection.copy(this.objectUpDirection.add(this.objectSidewaysDirection)),this.axis.crossVectors(this.moveDirection,this._eye).normalize(),this.angle*=this.rotateSpeed,this.quaternion.setFromAxisAngle(this.axis,this.angle),this._eye.applyQuaternion(this.quaternion),this.object.up.applyQuaternion(this.quaternion),this._lastAxis.copy(this.axis),this._lastAngle=this.angle):!this.staticMoving&&this._lastAngle&&(this._lastAngle*=Math.sqrt(1-this.dynamicDampingFactor),this._eye.copy(this.object.position).sub(this.target),this.quaternion.setFromAxisAngle(this._lastAxis,this._lastAngle),this._eye.applyQuaternion(this.quaternion),this.object.up.applyQuaternion(this.quaternion)),this._movePrev.copy(this._moveCurr)}),X(this,"zoomCamera",()=>{let u;if(this._state===this.STATE.TOUCH_ZOOM_PAN)u=this._touchZoomDistanceStart/this._touchZoomDistanceEnd,this._touchZoomDistanceStart=this._touchZoomDistanceEnd,this.object.isPerspectiveCamera?this._eye.multiplyScalar(u):this.object.isOrthographicCamera?(this.object.zoom/=u,this.object.updateProjectionMatrix()):console.warn("THREE.TrackballControls: Unsupported camera type");else{if(u=1+(this._zoomEnd.y-this._zoomStart.y)*this.zoomSpeed,Math.abs(u-1)>this.EPS&&u>0&&(this.object.isPerspectiveCamera?(u>1&&this._eye.length()>=this.maxDistance-this.EPS&&(u=1),this._eye.multiplyScalar(u)):this.object.isOrthographicCamera?(u>1&&this.object.zoom<this.maxDistance*this.maxDistance&&(u=1),this.object.zoom/=u):console.warn("THREE.TrackballControls: Unsupported camera type")),this.staticMoving?this._zoomStart.copy(this._zoomEnd):this._zoomStart.y+=(this._zoomEnd.y-this._zoomStart.y)*this.dynamicDampingFactor,this.cursorZoom){this.targetVector.copy(this.target).project(this.object);let t=this.cursorVector.set(this.mousePosition.x,this.mousePosition.y,this.targetVector.z).unproject(this.object);this.target.lerpVectors(t,this.target,u)}this.object.isOrthographicCamera&&this.object.updateProjectionMatrix()}}),X(this,"mouseChange",new Ne),X(this,"objectUp",new Pe),X(this,"pan",new Pe),X(this,"panCamera",()=>{if(this.domElement&&(this.mouseChange.copy(this._panEnd).sub(this._panStart),this.mouseChange.lengthSq()>this.EPS)){if(this.object.isOrthographicCamera){const u=this.object,t=(u.right-u.left)/this.object.zoom,e=(u.top-u.bottom)/this.object.zoom;this.mouseChange.x*=t,this.mouseChange.y*=e}else this.mouseChange.multiplyScalar(this._eye.length()*this.panSpeed);this.pan.copy(this._eye).cross(this.object.up).setLength(this.mouseChange.x),this.pan.add(this.objectUp.copy(this.object.up).setLength(this.mouseChange.y)),this.object.position.add(this.pan),this.target.add(this.pan),this.staticMoving?this._panStart.copy(this._panEnd):this._panStart.add(this.mouseChange.subVectors(this._panEnd,this._panStart).multiplyScalar(this.dynamicDampingFactor))}}),X(this,"checkDistances",()=>{(!this.noZoom||!this.noPan)&&(this._eye.lengthSq()>this.maxDistance*this.maxDistance&&(this.object.position.addVectors(this.target,this._eye.setLength(this.maxDistance)),this._zoomStart.copy(this._zoomEnd)),this._eye.lengthSq()<this.minDistance*this.minDistance&&(this.object.position.addVectors(this.target,this._eye.setLength(this.minDistance)),this._zoomStart.copy(this._zoomEnd)))}),X(this,"handleResize",()=>{if(!this.domElement)return;const u=this.domElement.getBoundingClientRect(),t=this.domElement.ownerDocument.documentElement;this.screen.left=u.left+window.pageXOffset-t.clientLeft,this.screen.top=u.top+window.pageYOffset-t.clientTop,this.screen.width=u.width,this.screen.height=u.height}),X(this,"update",()=>{this._eye.subVectors(this.object.position,this.target),this.noRotate||this.rotateCamera(),this.noZoom||this.zoomCamera(),this.noPan||this.panCamera(),this.object.position.addVectors(this.target,this._eye),this.object.isPerspectiveCamera?(this.checkDistances(),this.object.lookAt(this.target),this.lastPosition.distanceToSquared(this.object.position)>this.EPS&&(this.dispatchEvent(this.changeEvent),this.lastPosition.copy(this.object.position))):this.object.isOrthographicCamera?(this.object.lookAt(this.target),(this.lastPosition.distanceToSquared(this.object.position)>this.EPS||this.lastZoom!==this.object.zoom)&&(this.dispatchEvent(this.changeEvent),this.lastPosition.copy(this.object.position),this.lastZoom=this.object.zoom)):console.warn("THREE.TrackballControls: Unsupported camera type")}),X(this,"reset",()=>{this._state=this.STATE.NONE,this._keyState=this.STATE.NONE,this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.up.copy(this.up0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this._eye.subVectors(this.object.position,this.target),this.object.lookAt(this.target),this.dispatchEvent(this.changeEvent),this.lastPosition.copy(this.object.position),this.lastZoom=this.object.zoom}),X(this,"keydown",u=>{this.enabled!==!1&&(window.removeEventListener("keydown",this.keydown),this._keyState===this.STATE.NONE&&(u.code===this.keys[this.STATE.ROTATE]&&!this.noRotate?this._keyState=this.STATE.ROTATE:u.code===this.keys[this.STATE.ZOOM]&&!this.noZoom?this._keyState=this.STATE.ZOOM:u.code===this.keys[this.STATE.PAN]&&!this.noPan&&(this._keyState=this.STATE.PAN)))}),X(this,"onPointerDown",u=>{if(this.enabled!==!1)switch(u.pointerType){case"mouse":case"pen":this.onMouseDown(u);break}}),X(this,"onPointerMove",u=>{if(this.enabled!==!1)switch(u.pointerType){case"mouse":case"pen":this.onMouseMove(u);break}}),X(this,"onPointerUp",u=>{if(this.enabled!==!1)switch(u.pointerType){case"mouse":case"pen":this.onMouseUp();break}}),X(this,"keyup",()=>{this.enabled!==!1&&(this._keyState=this.STATE.NONE,window.addEventListener("keydown",this.keydown))}),X(this,"onMouseDown",u=>{if(!this.domElement)return;if(this._state===this.STATE.NONE)switch(u.button){case this.mouseButtons.LEFT:this._state=this.STATE.ROTATE;break;case this.mouseButtons.MIDDLE:this._state=this.STATE.ZOOM;break;case this.mouseButtons.RIGHT:this._state=this.STATE.PAN;break}const t=this._keyState!==this.STATE.NONE?this._keyState:this._state;t===this.STATE.ROTATE&&!this.noRotate?(this._moveCurr.copy(this.getMouseOnCircle(u.pageX,u.pageY)),this._movePrev.copy(this._moveCurr)):t===this.STATE.ZOOM&&!this.noZoom?(this._zoomStart.copy(this.getMouseOnScreen(u.pageX,u.pageY)),this._zoomEnd.copy(this._zoomStart)):t===this.STATE.PAN&&!this.noPan&&(this._panStart.copy(this.getMouseOnScreen(u.pageX,u.pageY)),this._panEnd.copy(this._panStart)),this.domElement.ownerDocument.addEventListener("pointermove",this.onPointerMove),this.domElement.ownerDocument.addEventListener("pointerup",this.onPointerUp),this.dispatchEvent(this.startEvent)}),X(this,"onMouseMove",u=>{if(this.enabled===!1)return;const t=this._keyState!==this.STATE.NONE?this._keyState:this._state;t===this.STATE.ROTATE&&!this.noRotate?(this._movePrev.copy(this._moveCurr),this._moveCurr.copy(this.getMouseOnCircle(u.pageX,u.pageY))):t===this.STATE.ZOOM&&!this.noZoom?this._zoomEnd.copy(this.getMouseOnScreen(u.pageX,u.pageY)):t===this.STATE.PAN&&!this.noPan&&this._panEnd.copy(this.getMouseOnScreen(u.pageX,u.pageY))}),X(this,"onMouseUp",()=>{this.domElement&&this.enabled!==!1&&(this._state=this.STATE.NONE,this.domElement.ownerDocument.removeEventListener("pointermove",this.onPointerMove),this.domElement.ownerDocument.removeEventListener("pointerup",this.onPointerUp),this.dispatchEvent(this.endEvent))}),X(this,"mousewheel",u=>{if(this.enabled!==!1&&this.noZoom!==!0){switch(u.preventDefault(),u.deltaMode){case 2:this._zoomStart.y-=u.deltaY*.025;break;case 1:this._zoomStart.y-=u.deltaY*.01;break;default:this._zoomStart.y-=u.deltaY*25e-5;break}this.mousePosition.x=u.offsetX/this.screen.width*2-1,this.mousePosition.y=-(u.offsetY/this.screen.height)*2+1,this.dispatchEvent(this.startEvent),this.dispatchEvent(this.endEvent)}}),X(this,"touchstart",u=>{if(this.enabled!==!1){switch(u.preventDefault(),u.touches.length){case 1:this._state=this.STATE.TOUCH_ROTATE,this._moveCurr.copy(this.getMouseOnCircle(u.touches[0].pageX,u.touches[0].pageY)),this._movePrev.copy(this._moveCurr);break;default:this._state=this.STATE.TOUCH_ZOOM_PAN;const t=u.touches[0].pageX-u.touches[1].pageX,e=u.touches[0].pageY-u.touches[1].pageY;this._touchZoomDistanceEnd=this._touchZoomDistanceStart=Math.sqrt(t*t+e*e);const a=(u.touches[0].pageX+u.touches[1].pageX)/2,i=(u.touches[0].pageY+u.touches[1].pageY)/2;this._panStart.copy(this.getMouseOnScreen(a,i)),this._panEnd.copy(this._panStart);break}this.dispatchEvent(this.startEvent)}}),X(this,"touchmove",u=>{if(this.enabled!==!1)switch(u.preventDefault(),u.touches.length){case 1:this._movePrev.copy(this._moveCurr),this._moveCurr.copy(this.getMouseOnCircle(u.touches[0].pageX,u.touches[0].pageY));break;default:const t=u.touches[0].pageX-u.touches[1].pageX,e=u.touches[0].pageY-u.touches[1].pageY;this._touchZoomDistanceEnd=Math.sqrt(t*t+e*e);const a=(u.touches[0].pageX+u.touches[1].pageX)/2,i=(u.touches[0].pageY+u.touches[1].pageY)/2;this._panEnd.copy(this.getMouseOnScreen(a,i));break}}),X(this,"touchend",u=>{if(this.enabled!==!1){switch(u.touches.length){case 0:this._state=this.STATE.NONE;break;case 1:this._state=this.STATE.TOUCH_ROTATE,this._moveCurr.copy(this.getMouseOnCircle(u.touches[0].pageX,u.touches[0].pageY)),this._movePrev.copy(this._moveCurr);break}this.dispatchEvent(this.endEvent)}}),X(this,"contextmenu",u=>{this.enabled!==!1&&u.preventDefault()}),X(this,"connect",u=>{u===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.domElement=u,this.domElement.addEventListener("contextmenu",this.contextmenu),this.domElement.addEventListener("pointerdown",this.onPointerDown),this.domElement.addEventListener("wheel",this.mousewheel),this.domElement.addEventListener("touchstart",this.touchstart),this.domElement.addEventListener("touchend",this.touchend),this.domElement.addEventListener("touchmove",this.touchmove),this.domElement.ownerDocument.addEventListener("pointermove",this.onPointerMove),this.domElement.ownerDocument.addEventListener("pointerup",this.onPointerUp),window.addEventListener("keydown",this.keydown),window.addEventListener("keyup",this.keyup),this.handleResize()}),X(this,"dispose",()=>{this.domElement&&(this.domElement.removeEventListener("contextmenu",this.contextmenu),this.domElement.removeEventListener("pointerdown",this.onPointerDown),this.domElement.removeEventListener("wheel",this.mousewheel),this.domElement.removeEventListener("touchstart",this.touchstart),this.domElement.removeEventListener("touchend",this.touchend),this.domElement.removeEventListener("touchmove",this.touchmove),this.domElement.ownerDocument.removeEventListener("pointermove",this.onPointerMove),this.domElement.ownerDocument.removeEventListener("pointerup",this.onPointerUp),window.removeEventListener("keydown",this.keydown),window.removeEventListener("keyup",this.keyup))}),this.object=n,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.up0=this.object.up.clone(),this.zoom0=this.object.zoom,d!==void 0&&this.connect(d),this.update()}};const wo=Te.forwardRef(function({children:n,follow:d=!0,lockX:u=!1,lockY:t=!1,lockZ:e=!1,...a},i){const r=Te.useRef(null),o=Te.useRef(null),s=new Cn;return Dr(({camera:l})=>{if(!d||!o.current)return;const c=r.current.rotation.clone();o.current.updateMatrix(),o.current.updateWorldMatrix(!1,!1),o.current.getWorldQuaternion(s),l.getWorldQuaternion(r.current.quaternion).premultiply(s.invert()),u&&(r.current.rotation.x=c.x),t&&(r.current.rotation.y=c.y),e&&(r.current.rotation.z=c.z)}),Te.useImperativeHandle(i,()=>o.current,[]),Te.createElement("group",Fr({ref:o},a),Te.createElement("group",{ref:r},n))});function xo(){var h=Object.create(null);function n(t,e){var a=t.id,i=t.name,r=t.dependencies;r===void 0&&(r=[]);var o=t.init;o===void 0&&(o=function(){});var s=t.getTransferables;if(s===void 0&&(s=null),!h[a])try{r=r.map(function(c){return c&&c.isWorkerModule&&(n(c,function(f){if(f instanceof Error)throw f}),c=h[c.id].value),c}),o=u("<"+i+">.init",o),s&&(s=u("<"+i+">.getTransferables",s));var l=null;typeof o=="function"?l=o.apply(void 0,r):console.error("worker module init function failed to rehydrate"),h[a]={id:a,value:l,getTransferables:s},e(l)}catch(c){c&&c.noLog||console.error(c),e(c)}}function d(t,e){var a,i=t.id,r=t.args;(!h[i]||typeof h[i].value!="function")&&e(new Error("Worker module "+i+": not found or its 'init' did not return a function"));try{var o=(a=h[i]).value.apply(a,r);o&&typeof o.then=="function"?o.then(s,function(l){return e(l instanceof Error?l:new Error(""+l))}):s(o)}catch(l){e(l)}function s(l){try{var c=h[i].getTransferables&&h[i].getTransferables(l);(!c||!Array.isArray(c)||!c.length)&&(c=void 0),e(l,c)}catch(f){console.error(f),e(f)}}}function u(t,e){var a=void 0;self.troikaDefine=function(r){return a=r};var i=URL.createObjectURL(new Blob(["/** "+t.replace(/\*/g,"")+` **/

troikaDefine(
`+e+`
)`],{type:"application/javascript"}));try{importScripts(i)}catch(r){console.error(r)}return URL.revokeObjectURL(i),delete self.troikaDefine,a}self.addEventListener("message",function(t){var e=t.data,a=e.messageId,i=e.action,r=e.data;try{i==="registerModule"&&n(r,function(o){o instanceof Error?postMessage({messageId:a,success:!1,error:o.message}):postMessage({messageId:a,success:!0,result:{isCallable:typeof o=="function"}})}),i==="callModule"&&d(r,function(o,s){o instanceof Error?postMessage({messageId:a,success:!1,error:o.message}):postMessage({messageId:a,success:!0,result:o},s||void 0)})}catch(o){postMessage({messageId:a,success:!1,error:o.stack})}})}function _o(h){var n=function(){for(var d=[],u=arguments.length;u--;)d[u]=arguments[u];return n._getInitResult().then(function(t){if(typeof t=="function")return t.apply(void 0,d);throw new Error("Worker module function was called but `init` did not return a callable function")})};return n._getInitResult=function(){var d=h.dependencies,u=h.init;d=Array.isArray(d)?d.map(function(e){return e&&(e=e.onMainThread||e,e._getInitResult&&(e=e._getInitResult())),e}):[];var t=Promise.all(d).then(function(e){return u.apply(null,e)});return n._getInitResult=function(){return t},t},n}var Fn=function(){var h=!1;if(typeof window<"u"&&typeof window.document<"u")try{var n=new Worker(URL.createObjectURL(new Blob([""],{type:"application/javascript"})));n.terminate(),h=!0}catch(d){console.log("Troika createWorkerModule: web workers not allowed; falling back to main thread execution. Cause: ["+d.message+"]")}return Fn=function(){return h},h},ko=0,So=0,wr=!1,kt=Object.create(null),St=Object.create(null),Ur=Object.create(null);function ct(h){if((!h||typeof h.init!="function")&&!wr)throw new Error("requires `options.init` function");var n=h.dependencies,d=h.init,u=h.getTransferables,t=h.workerId,e=_o(h);t==null&&(t="#default");var a="workerModule"+ ++ko,i=h.name||a,r=null;n=n&&n.map(function(s){return typeof s=="function"&&!s.workerModuleData&&(wr=!0,s=ct({workerId:t,name:"<"+i+"> function dependency: "+s.name,init:`function(){return (
`+zt(s)+`
)}`}),wr=!1),s&&s.workerModuleData&&(s=s.workerModuleData),s});function o(){for(var s=[],l=arguments.length;l--;)s[l]=arguments[l];if(!Fn())return e.apply(void 0,s);if(!r){r=an(t,"registerModule",o.workerModuleData);var c=function(){r=null,St[t].delete(c)};(St[t]||(St[t]=new Set)).add(c)}return r.then(function(f){var p=f.isCallable;if(p)return an(t,"callModule",{id:a,args:s});throw new Error("Worker module function was called but `init` did not return a callable function")})}return o.workerModuleData={isWorkerModule:!0,id:a,name:i,dependencies:n,init:zt(d),getTransferables:u&&zt(u)},o.onMainThread=e,o}function To(h){St[h]&&St[h].forEach(function(n){n()}),kt[h]&&(kt[h].terminate(),delete kt[h])}function zt(h){var n=h.toString();return!/^function/.test(n)&&/^\w+\s*\(/.test(n)&&(n="function "+n),n}function Uo(h){var n=kt[h];if(!n){var d=zt(xo);n=kt[h]=new Worker(URL.createObjectURL(new Blob(["/** Worker Module Bootstrap: "+h.replace(/\*/g,"")+` **/

;(`+d+")()"],{type:"application/javascript"}))),n.onmessage=function(u){var t=u.data,e=t.messageId,a=Ur[e];if(!a)throw new Error("WorkerModule response with empty or unknown messageId");delete Ur[e],a(t)}}return n}function an(h,n,d){return new Promise(function(u,t){var e=++So;Ur[e]=function(a){a.success?u(a.result):t(new Error("Error in worker "+n+" call: "+a.error))},Uo(h).postMessage({messageId:e,action:n,data:d})})}function Mn(){var h=function(n){function d(B,R,v,k,C,D,E,N){var P=1-E;N.x=P*P*B+2*P*E*v+E*E*C,N.y=P*P*R+2*P*E*k+E*E*D}function u(B,R,v,k,C,D,E,N,P,I){var q=1-P;I.x=q*q*q*B+3*q*q*P*v+3*q*P*P*C+P*P*P*E,I.y=q*q*q*R+3*q*q*P*k+3*q*P*P*D+P*P*P*N}function t(B,R){for(var v=/([MLQCZ])([^MLQCZ]*)/g,k,C,D,E,N;k=v.exec(B);){var P=k[2].replace(/^\s*|\s*$/g,"").split(/[,\s]+/).map(function(I){return parseFloat(I)});switch(k[1]){case"M":E=C=P[0],N=D=P[1];break;case"L":(P[0]!==E||P[1]!==N)&&R("L",E,N,E=P[0],N=P[1]);break;case"Q":{R("Q",E,N,E=P[2],N=P[3],P[0],P[1]);break}case"C":{R("C",E,N,E=P[4],N=P[5],P[0],P[1],P[2],P[3]);break}case"Z":(E!==C||N!==D)&&R("L",E,N,C,D);break}}}function e(B,R,v){v===void 0&&(v=16);var k={x:0,y:0};t(B,function(C,D,E,N,P,I,q,ee,H){switch(C){case"L":R(D,E,N,P);break;case"Q":{for(var z=D,ge=E,fe=1;fe<v;fe++)d(D,E,I,q,N,P,fe/(v-1),k),R(z,ge,k.x,k.y),z=k.x,ge=k.y;break}case"C":{for(var J=D,te=E,le=1;le<v;le++)u(D,E,I,q,ee,H,N,P,le/(v-1),k),R(J,te,k.x,k.y),J=k.x,te=k.y;break}}})}var a="precision highp float;attribute vec2 aUV;varying vec2 vUV;void main(){vUV=aUV;gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",i="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){gl_FragColor=texture2D(tex,vUV);}",r=new WeakMap,o={premultipliedAlpha:!1,preserveDrawingBuffer:!0,antialias:!1,depth:!1};function s(B,R){var v=B.getContext?B.getContext("webgl",o):B,k=r.get(v);if(!k){let q=function(J){var te=D[J];if(!te&&(te=D[J]=v.getExtension(J),!te))throw new Error(J+" not supported");return te},ee=function(J,te){var le=v.createShader(te);return v.shaderSource(le,J),v.compileShader(le),le},H=function(J,te,le,V){if(!E[J]){var re={},$={},G=v.createProgram();v.attachShader(G,ee(te,v.VERTEX_SHADER)),v.attachShader(G,ee(le,v.FRAGMENT_SHADER)),v.linkProgram(G),E[J]={program:G,transaction:function(K){v.useProgram(G),K({setUniform:function(Z,we){for(var oe=[],ie=arguments.length-2;ie-- >0;)oe[ie]=arguments[ie+2];var ce=$[we]||($[we]=v.getUniformLocation(G,we));v["uniform"+Z].apply(v,[ce].concat(oe))},setAttribute:function(Z,we,oe,ie,ce){var pe=re[Z];pe||(pe=re[Z]={buf:v.createBuffer(),loc:v.getAttribLocation(G,Z),data:null}),v.bindBuffer(v.ARRAY_BUFFER,pe.buf),v.vertexAttribPointer(pe.loc,we,v.FLOAT,!1,0,0),v.enableVertexAttribArray(pe.loc),C?v.vertexAttribDivisor(pe.loc,ie):q("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(pe.loc,ie),ce!==pe.data&&(v.bufferData(v.ARRAY_BUFFER,ce,oe),pe.data=ce)}})}}}E[J].transaction(V)},z=function(J,te){P++;try{v.activeTexture(v.TEXTURE0+P);var le=N[J];le||(le=N[J]=v.createTexture(),v.bindTexture(v.TEXTURE_2D,le),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MIN_FILTER,v.NEAREST),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MAG_FILTER,v.NEAREST)),v.bindTexture(v.TEXTURE_2D,le),te(le,P)}finally{P--}},ge=function(J,te,le){var V=v.createFramebuffer();I.push(V),v.bindFramebuffer(v.FRAMEBUFFER,V),v.activeTexture(v.TEXTURE0+te),v.bindTexture(v.TEXTURE_2D,J),v.framebufferTexture2D(v.FRAMEBUFFER,v.COLOR_ATTACHMENT0,v.TEXTURE_2D,J,0);try{le(V)}finally{v.deleteFramebuffer(V),v.bindFramebuffer(v.FRAMEBUFFER,I[--I.length-1]||null)}},fe=function(){D={},E={},N={},P=-1,I.length=0};var C=typeof WebGL2RenderingContext<"u"&&v instanceof WebGL2RenderingContext,D={},E={},N={},P=-1,I=[];v.canvas.addEventListener("webglcontextlost",function(J){fe(),J.preventDefault()},!1),r.set(v,k={gl:v,isWebGL2:C,getExtension:q,withProgram:H,withTexture:z,withTextureFramebuffer:ge,handleContextLoss:fe})}R(k)}function l(B,R,v,k,C,D,E,N){E===void 0&&(E=15),N===void 0&&(N=null),s(B,function(P){var I=P.gl,q=P.withProgram,ee=P.withTexture;ee("copy",function(H,z){I.texImage2D(I.TEXTURE_2D,0,I.RGBA,C,D,0,I.RGBA,I.UNSIGNED_BYTE,R),q("copy",a,i,function(ge){var fe=ge.setUniform,J=ge.setAttribute;J("aUV",2,I.STATIC_DRAW,0,new Float32Array([0,0,2,0,0,2])),fe("1i","image",z),I.bindFramebuffer(I.FRAMEBUFFER,N||null),I.disable(I.BLEND),I.colorMask(E&8,E&4,E&2,E&1),I.viewport(v,k,C,D),I.scissor(v,k,C,D),I.drawArrays(I.TRIANGLES,0,3)})})})}function c(B,R,v){var k=B.width,C=B.height;s(B,function(D){var E=D.gl,N=new Uint8Array(k*C*4);E.readPixels(0,0,k,C,E.RGBA,E.UNSIGNED_BYTE,N),B.width=R,B.height=v,l(E,N,0,0,k,C)})}var f=Object.freeze({__proto__:null,withWebGLContext:s,renderImageData:l,resizeWebGLCanvasWithoutClearing:c});function p(B,R,v,k,C,D){D===void 0&&(D=1);var E=new Uint8Array(B*R),N=k[2]-k[0],P=k[3]-k[1],I=[];e(v,function(J,te,le,V){I.push({x1:J,y1:te,x2:le,y2:V,minX:Math.min(J,le),minY:Math.min(te,V),maxX:Math.max(J,le),maxY:Math.max(te,V)})}),I.sort(function(J,te){return J.maxX-te.maxX});for(var q=0;q<B;q++)for(var ee=0;ee<R;ee++){var H=ge(k[0]+N*(q+.5)/B,k[1]+P*(ee+.5)/R),z=Math.pow(1-Math.abs(H)/C,D)/2;H<0&&(z=1-z),z=Math.max(0,Math.min(255,Math.round(z*255))),E[ee*B+q]=z}return E;function ge(J,te){for(var le=1/0,V=1/0,re=I.length;re--;){var $=I[re];if($.maxX+V<=J)break;if(J+V>$.minX&&te-V<$.maxY&&te+V>$.minY){var G=O(J,te,$.x1,$.y1,$.x2,$.y2);G<le&&(le=G,V=Math.sqrt(le))}}return fe(J,te)&&(V=-V),V}function fe(J,te){for(var le=0,V=I.length;V--;){var re=I[V];if(re.maxX<=J)break;var $=re.y1>te!=re.y2>te&&J<(re.x2-re.x1)*(te-re.y1)/(re.y2-re.y1)+re.x1;$&&(le+=re.y1<re.y2?1:-1)}return le!==0}}function g(B,R,v,k,C,D,E,N,P,I){D===void 0&&(D=1),N===void 0&&(N=0),P===void 0&&(P=0),I===void 0&&(I=0),y(B,R,v,k,C,D,E,null,N,P,I)}function y(B,R,v,k,C,D,E,N,P,I,q){D===void 0&&(D=1),P===void 0&&(P=0),I===void 0&&(I=0),q===void 0&&(q=0);for(var ee=p(B,R,v,k,C,D),H=new Uint8Array(ee.length*4),z=0;z<ee.length;z++)H[z*4+q]=ee[z];l(E,H,P,I,B,R,1<<3-q,N)}function O(B,R,v,k,C,D){var E=C-v,N=D-k,P=E*E+N*N,I=P?Math.max(0,Math.min(1,((B-v)*E+(R-k)*N)/P)):0,q=B-(v+I*E),ee=R-(k+I*N);return q*q+ee*ee}var T=Object.freeze({__proto__:null,generate:p,generateIntoCanvas:g,generateIntoFramebuffer:y}),_="precision highp float;uniform vec4 uGlyphBounds;attribute vec2 aUV;attribute vec4 aLineSegment;varying vec4 vLineSegment;varying vec2 vGlyphXY;void main(){vLineSegment=aLineSegment;vGlyphXY=mix(uGlyphBounds.xy,uGlyphBounds.zw,aUV);gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",m="precision highp float;uniform vec4 uGlyphBounds;uniform float uMaxDistance;uniform float uExponent;varying vec4 vLineSegment;varying vec2 vGlyphXY;float absDistToSegment(vec2 point,vec2 lineA,vec2 lineB){vec2 lineDir=lineB-lineA;float lenSq=dot(lineDir,lineDir);float t=lenSq==0.0 ? 0.0 : clamp(dot(point-lineA,lineDir)/lenSq,0.0,1.0);vec2 linePt=lineA+t*lineDir;return distance(point,linePt);}void main(){vec4 seg=vLineSegment;vec2 p=vGlyphXY;float dist=absDistToSegment(p,seg.xy,seg.zw);float val=pow(1.0-clamp(dist/uMaxDistance,0.0,1.0),uExponent)*0.5;bool crossing=(seg.y>p.y!=seg.w>p.y)&&(p.x<(seg.z-seg.x)*(p.y-seg.y)/(seg.w-seg.y)+seg.x);bool crossingUp=crossing&&vLineSegment.y<vLineSegment.w;gl_FragColor=vec4(crossingUp ? 1.0/255.0 : 0.0,crossing&&!crossingUp ? 1.0/255.0 : 0.0,0.0,val);}",w="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){vec4 color=texture2D(tex,vUV);bool inside=color.r!=color.g;float val=inside ? 1.0-color.a : color.a;gl_FragColor=vec4(val);}",M=new Float32Array([0,0,2,0,0,2]),x=null,S=!1,L={},F=new WeakMap;function Y(B){if(!S&&!W(B))throw new Error("WebGL generation not supported")}function b(B,R,v,k,C,D,E){if(D===void 0&&(D=1),E===void 0&&(E=null),!E&&(E=x,!E)){var N=typeof OffscreenCanvas=="function"?new OffscreenCanvas(1,1):typeof document<"u"?document.createElement("canvas"):null;if(!N)throw new Error("OffscreenCanvas or DOM canvas not supported");E=x=N.getContext("webgl",{depth:!1})}Y(E);var P=new Uint8Array(B*R*4);s(E,function(H){var z=H.gl,ge=H.withTexture,fe=H.withTextureFramebuffer;ge("readable",function(J,te){z.texImage2D(z.TEXTURE_2D,0,z.RGBA,B,R,0,z.RGBA,z.UNSIGNED_BYTE,null),fe(J,te,function(le){U(B,R,v,k,C,D,z,le,0,0,0),z.readPixels(0,0,B,R,z.RGBA,z.UNSIGNED_BYTE,P)})})});for(var I=new Uint8Array(B*R),q=0,ee=0;q<P.length;q+=4)I[ee++]=P[q];return I}function A(B,R,v,k,C,D,E,N,P,I){D===void 0&&(D=1),N===void 0&&(N=0),P===void 0&&(P=0),I===void 0&&(I=0),U(B,R,v,k,C,D,E,null,N,P,I)}function U(B,R,v,k,C,D,E,N,P,I,q){D===void 0&&(D=1),P===void 0&&(P=0),I===void 0&&(I=0),q===void 0&&(q=0),Y(E);var ee=[];e(v,function(H,z,ge,fe){ee.push(H,z,ge,fe)}),ee=new Float32Array(ee),s(E,function(H){var z=H.gl,ge=H.isWebGL2,fe=H.getExtension,J=H.withProgram,te=H.withTexture,le=H.withTextureFramebuffer,V=H.handleContextLoss;if(te("rawDistances",function(re,$){(B!==re._lastWidth||R!==re._lastHeight)&&z.texImage2D(z.TEXTURE_2D,0,z.RGBA,re._lastWidth=B,re._lastHeight=R,0,z.RGBA,z.UNSIGNED_BYTE,null),J("main",_,m,function(G){var de=G.setAttribute,K=G.setUniform,ae=!ge&&fe("ANGLE_instanced_arrays"),Z=!ge&&fe("EXT_blend_minmax");de("aUV",2,z.STATIC_DRAW,0,M),de("aLineSegment",4,z.DYNAMIC_DRAW,1,ee),K.apply(void 0,["4f","uGlyphBounds"].concat(k)),K("1f","uMaxDistance",C),K("1f","uExponent",D),le(re,$,function(we){z.enable(z.BLEND),z.colorMask(!0,!0,!0,!0),z.viewport(0,0,B,R),z.scissor(0,0,B,R),z.blendFunc(z.ONE,z.ONE),z.blendEquationSeparate(z.FUNC_ADD,ge?z.MAX:Z.MAX_EXT),z.clear(z.COLOR_BUFFER_BIT),ge?z.drawArraysInstanced(z.TRIANGLES,0,3,ee.length/4):ae.drawArraysInstancedANGLE(z.TRIANGLES,0,3,ee.length/4)})}),J("post",a,w,function(G){G.setAttribute("aUV",2,z.STATIC_DRAW,0,M),G.setUniform("1i","tex",$),z.bindFramebuffer(z.FRAMEBUFFER,N),z.disable(z.BLEND),z.colorMask(q===0,q===1,q===2,q===3),z.viewport(P,I,B,R),z.scissor(P,I,B,R),z.drawArrays(z.TRIANGLES,0,3)})}),z.isContextLost())throw V(),new Error("webgl context lost")})}function W(B){var R=!B||B===x?L:B.canvas||B,v=F.get(R);if(v===void 0){S=!0;var k=null;try{var C=[97,106,97,61,99,137,118,80,80,118,137,99,61,97,106,97],D=b(4,4,"M8,8L16,8L24,24L16,24Z",[0,0,32,32],24,1,B);v=D&&C.length===D.length&&D.every(function(E,N){return E===C[N]}),v||(k="bad trial run results",console.info(C,D))}catch(E){v=!1,k=E.message}k&&console.warn("WebGL SDF generation not supported:",k),S=!1,F.set(R,v)}return v}var j=Object.freeze({__proto__:null,generate:b,generateIntoCanvas:A,generateIntoFramebuffer:U,isSupported:W});function Q(B,R,v,k,C,D){C===void 0&&(C=Math.max(k[2]-k[0],k[3]-k[1])/2),D===void 0&&(D=1);try{return b.apply(j,arguments)}catch(E){return console.info("WebGL SDF generation failed, falling back to JS",E),p.apply(T,arguments)}}function ne(B,R,v,k,C,D,E,N,P,I){C===void 0&&(C=Math.max(k[2]-k[0],k[3]-k[1])/2),D===void 0&&(D=1),N===void 0&&(N=0),P===void 0&&(P=0),I===void 0&&(I=0);try{return A.apply(j,arguments)}catch(q){return console.info("WebGL SDF generation failed, falling back to JS",q),g.apply(T,arguments)}}return n.forEachPathCommand=t,n.generate=Q,n.generateIntoCanvas=ne,n.javascript=T,n.pathToLineSegments=e,n.webgl=j,n.webglUtils=f,Object.defineProperty(n,"__esModule",{value:!0}),n}({});return h}function Eo(){var h=function(n){var d={R:"13k,1a,2,3,3,2+1j,ch+16,a+1,5+2,2+n,5,a,4,6+16,4+3,h+1b,4mo,179q,2+9,2+11,2i9+7y,2+68,4,3+4,5+13,4+3,2+4k,3+29,8+cf,1t+7z,w+17,3+3m,1t+3z,16o1+5r,8+30,8+mc,29+1r,29+4v,75+73",EN:"1c+9,3d+1,6,187+9,513,4+5,7+9,sf+j,175h+9,qw+q,161f+1d,4xt+a,25i+9",ES:"17,2,6dp+1,f+1,av,16vr,mx+1,4o,2",ET:"z+2,3h+3,b+1,ym,3e+1,2o,p4+1,8,6u,7c,g6,1wc,1n9+4,30+1b,2n,6d,qhx+1,h0m,a+1,49+2,63+1,4+1,6bb+3,12jj",AN:"16o+5,2j+9,2+1,35,ed,1ff2+9,87+u",CS:"18,2+1,b,2u,12k,55v,l,17v0,2,3,53,2+1,b",B:"a,3,f+2,2v,690",S:"9,2,k",WS:"c,k,4f4,1vk+a,u,1j,335",ON:"x+1,4+4,h+5,r+5,r+3,z,5+3,2+1,2+1,5,2+2,3+4,o,w,ci+1,8+d,3+d,6+8,2+g,39+1,9,6+1,2,33,b8,3+1,3c+1,7+1,5r,b,7h+3,sa+5,2,3i+6,jg+3,ur+9,2v,ij+1,9g+9,7+a,8m,4+1,49+x,14u,2+2,c+2,e+2,e+2,e+1,i+n,e+e,2+p,u+2,e+2,36+1,2+3,2+1,b,2+2,6+5,2,2,2,h+1,5+4,6+3,3+f,16+2,5+3l,3+81,1y+p,2+40,q+a,m+13,2r+ch,2+9e,75+hf,3+v,2+2w,6e+5,f+6,75+2a,1a+p,2+2g,d+5x,r+b,6+3,4+o,g,6+1,6+2,2k+1,4,2j,5h+z,1m+1,1e+f,t+2,1f+e,d+3,4o+3,2s+1,w,535+1r,h3l+1i,93+2,2s,b+1,3l+x,2v,4g+3,21+3,kz+1,g5v+1,5a,j+9,n+v,2,3,2+8,2+1,3+2,2,3,46+1,4+4,h+5,r+5,r+a,3h+2,4+6,b+4,78,1r+24,4+c,4,1hb,ey+6,103+j,16j+c,1ux+7,5+g,fsh,jdq+1t,4,57+2e,p1,1m,1m,1m,1m,4kt+1,7j+17,5+2r,d+e,3+e,2+e,2+10,m+4,w,1n+5,1q,4z+5,4b+rb,9+c,4+c,4+37,d+2g,8+b,l+b,5+1j,9+9,7+13,9+t,3+1,27+3c,2+29,2+3q,d+d,3+4,4+2,6+6,a+o,8+6,a+2,e+6,16+42,2+1i",BN:"0+8,6+d,2s+5,2+p,e,4m9,1kt+2,2b+5,5+5,17q9+v,7k,6p+8,6+1,119d+3,440+7,96s+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+75,6p+2rz,1ben+1,1ekf+1,1ekf+1",NSM:"lc+33,7o+6,7c+18,2,2+1,2+1,2,21+a,1d+k,h,2u+6,3+5,3+1,2+3,10,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,g+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+g,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,k1+w,2db+2,3y,2p+v,ff+3,30+1,n9x+3,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,r2,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+5,3+1,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2d+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,f0c+4,1o+6,t5,1s+3,2a,f5l+1,43t+2,i+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,gzhy+6n",AL:"16w,3,2,e+1b,z+2,2+2s,g+1,8+1,b+m,2+t,s+2i,c+e,4h+f,1d+1e,1bwe+dp,3+3z,x+c,2+1,35+3y,2rm+z,5+7,b+5,dt+l,c+u,17nl+27,1t+27,4x+6n,3+d",LRO:"6ct",RLO:"6cu",LRE:"6cq",RLE:"6cr",PDF:"6cs",LRI:"6ee",RLI:"6ef",FSI:"6eg",PDI:"6eh"},u={},t={};u.L=1,t[1]="L",Object.keys(d).forEach(function(V,re){u[V]=1<<re+1,t[u[V]]=V}),Object.freeze(u);var e=u.LRI|u.RLI|u.FSI,a=u.L|u.R|u.AL,i=u.B|u.S|u.WS|u.ON|u.FSI|u.LRI|u.RLI|u.PDI,r=u.BN|u.RLE|u.LRE|u.RLO|u.LRO|u.PDF,o=u.S|u.WS|u.B|e|u.PDI|r,s=null;function l(){if(!s){s=new Map;var V=function($){if(d.hasOwnProperty($)){var G=0;d[$].split(",").forEach(function(de){var K=de.split("+"),ae=K[0],Z=K[1];ae=parseInt(ae,36),Z=Z?parseInt(Z,36):0,s.set(G+=ae,u[$]);for(var we=0;we<Z;we++)s.set(++G,u[$])})}};for(var re in d)V(re)}}function c(V){return l(),s.get(V.codePointAt(0))||u.L}function f(V){return t[c(V)]}var p={pairs:"14>1,1e>2,u>2,2wt>1,1>1,1ge>1,1wp>1,1j>1,f>1,hm>1,1>1,u>1,u6>1,1>1,+5,28>1,w>1,1>1,+3,b8>1,1>1,+3,1>3,-1>-1,3>1,1>1,+2,1s>1,1>1,x>1,th>1,1>1,+2,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,4q>1,1e>2,u>2,2>1,+1",canonical:"6f1>-6dx,6dy>-6dx,6ec>-6ed,6ee>-6ed,6ww>2jj,-2ji>2jj,14r4>-1e7l,1e7m>-1e7l,1e7m>-1e5c,1e5d>-1e5b,1e5c>-14qx,14qy>-14qx,14vn>-1ecg,1ech>-1ecg,1edu>-1ecg,1eci>-1ecg,1eda>-1ecg,1eci>-1ecg,1eci>-168q,168r>-168q,168s>-14ye,14yf>-14ye"};function g(V,re){var $=36,G=0,de=new Map,K=re&&new Map,ae;return V.split(",").forEach(function Z(we){if(we.indexOf("+")!==-1)for(var oe=+we;oe--;)Z(ae);else{ae=we;var ie=we.split(">"),ce=ie[0],pe=ie[1];ce=String.fromCodePoint(G+=parseInt(ce,$)),pe=String.fromCodePoint(G+=parseInt(pe,$)),de.set(ce,pe),re&&K.set(pe,ce)}}),{map:de,reverseMap:K}}var y,O,T;function _(){if(!y){var V=g(p.pairs,!0),re=V.map,$=V.reverseMap;y=re,O=$,T=g(p.canonical,!1).map}}function m(V){return _(),y.get(V)||null}function w(V){return _(),O.get(V)||null}function M(V){return _(),T.get(V)||null}var x=u.L,S=u.R,L=u.EN,F=u.ES,Y=u.ET,b=u.AN,A=u.CS,U=u.B,W=u.S,j=u.ON,Q=u.BN,ne=u.NSM,B=u.AL,R=u.LRO,v=u.RLO,k=u.LRE,C=u.RLE,D=u.PDF,E=u.LRI,N=u.RLI,P=u.FSI,I=u.PDI;function q(V,re){for(var $=125,G=new Uint32Array(V.length),de=0;de<V.length;de++)G[de]=c(V[de]);var K=new Map;function ae(Ie,Xe){var je=G[Ie];G[Ie]=Xe,K.set(je,K.get(je)-1),je&i&&K.set(i,K.get(i)-1),K.set(Xe,(K.get(Xe)||0)+1),Xe&i&&K.set(i,(K.get(i)||0)+1)}for(var Z=new Uint8Array(V.length),we=new Map,oe=[],ie=null,ce=0;ce<V.length;ce++)ie||oe.push(ie={start:ce,end:V.length-1,level:re==="rtl"?1:re==="ltr"?0:tn(ce,!1)}),G[ce]&U&&(ie.end=ce,ie=null);for(var pe=C|k|v|R|e|I|D|U,ke=function(Ie){return Ie+(Ie&1?1:2)},Ae=function(Ie){return Ie+(Ie&1?2:1)},me=0;me<oe.length;me++){ie=oe[me];var ye=[{_level:ie.level,_override:0,_isolate:0}],ue=void 0,De=0,Ue=0,Be=0;K.clear();for(var Se=ie.start;Se<=ie.end;Se++){var he=G[Se];if(ue=ye[ye.length-1],K.set(he,(K.get(he)||0)+1),he&i&&K.set(i,(K.get(i)||0)+1),he&pe)if(he&(C|k)){Z[Se]=ue._level;var xe=(he===C?Ae:ke)(ue._level);xe<=$&&!De&&!Ue?ye.push({_level:xe,_override:0,_isolate:0}):De||Ue++}else if(he&(v|R)){Z[Se]=ue._level;var Ke=(he===v?Ae:ke)(ue._level);Ke<=$&&!De&&!Ue?ye.push({_level:Ke,_override:he&v?S:x,_isolate:0}):De||Ue++}else if(he&e){he&P&&(he=tn(Se+1,!0)===1?N:E),Z[Se]=ue._level,ue._override&&ae(Se,ue._override);var _e=(he===N?Ae:ke)(ue._level);_e<=$&&De===0&&Ue===0?(Be++,ye.push({_level:_e,_override:0,_isolate:1,_isolInitIndex:Se})):De++}else if(he&I){if(De>0)De--;else if(Be>0){for(Ue=0;!ye[ye.length-1]._isolate;)ye.pop();var be=ye[ye.length-1]._isolInitIndex;be!=null&&(we.set(be,Se),we.set(Se,be)),ye.pop(),Be--}ue=ye[ye.length-1],Z[Se]=ue._level,ue._override&&ae(Se,ue._override)}else he&D?(De===0&&(Ue>0?Ue--:!ue._isolate&&ye.length>1&&(ye.pop(),ue=ye[ye.length-1])),Z[Se]=ue._level):he&U&&(Z[Se]=ie.level);else Z[Se]=ue._level,ue._override&&he!==Q&&ae(Se,ue._override)}for(var Fe=[],Ee=null,ve=ie.start;ve<=ie.end;ve++){var Ce=G[ve];if(!(Ce&r)){var Re=Z[ve],Le=Ce&e,Me=Ce===I;Ee&&Re===Ee._level?(Ee._end=ve,Ee._endsWithIsolInit=Le):Fe.push(Ee={_start:ve,_end:ve,_level:Re,_startsWithPDI:Me,_endsWithIsolInit:Le})}}for(var We=[],Je=0;Je<Fe.length;Je++){var qe=Fe[Je];if(!qe._startsWithPDI||qe._startsWithPDI&&!we.has(qe._start)){for(var Qe=[Ee=qe],tt=void 0;Ee&&Ee._endsWithIsolInit&&(tt=we.get(Ee._end))!=null;)for(var Ze=Je+1;Ze<Fe.length;Ze++)if(Fe[Ze]._start===tt){Qe.push(Ee=Fe[Ze]);break}for(var Ge=[],rt=0;rt<Qe.length;rt++)for(var Lr=Qe[rt],$t=Lr._start;$t<=Lr._end;$t++)Ge.push($t);for(var Wn=Z[Ge[0]],Rr=ie.level,Ut=Ge[0]-1;Ut>=0;Ut--)if(!(G[Ut]&r)){Rr=Z[Ut];break}var er=Ge[Ge.length-1],Vn=Z[er],Gr=ie.level;if(!(G[er]&e)){for(var Et=er+1;Et<=ie.end;Et++)if(!(G[Et]&r)){Gr=Z[Et];break}}We.push({_seqIndices:Ge,_sosType:Math.max(Rr,Wn)%2?S:x,_eosType:Math.max(Gr,Vn)%2?S:x})}}for(var tr=0;tr<We.length;tr++){var rr=We[tr],se=rr._seqIndices,ft=rr._sosType,Xn=rr._eosType,at=Z[se[0]]&1?S:x;if(K.get(ne))for(var Ct=0;Ct<se.length;Ct++){var Br=se[Ct];if(G[Br]&ne){for(var nr=ft,At=Ct-1;At>=0;At--)if(!(G[se[At]]&r)){nr=G[se[At]];break}ae(Br,nr&(e|I)?j:nr)}}if(K.get(L))for(var Dt=0;Dt<se.length;Dt++){var Ir=se[Dt];if(G[Ir]&L)for(var Ft=Dt-1;Ft>=-1;Ft--){var jr=Ft===-1?ft:G[se[Ft]];if(jr&a){jr===B&&ae(Ir,b);break}}}if(K.get(B))for(var or=0;or<se.length;or++){var Nr=se[or];G[Nr]&B&&ae(Nr,S)}if(K.get(F)||K.get(A))for(var ht=1;ht<se.length-1;ht++){var ar=se[ht];if(G[ar]&(F|A)){for(var it=0,ir=0,sr=ht-1;sr>=0&&(it=G[se[sr]],!!(it&r));sr--);for(var lr=ht+1;lr<se.length&&(ir=G[se[lr]],!!(ir&r));lr++);it===ir&&(G[ar]===F?it===L:it&(L|b))&&ae(ar,it)}}if(K.get(L))for(var He=0;He<se.length;He++){var Hn=se[He];if(G[Hn]&L){for(var Mt=He-1;Mt>=0&&G[se[Mt]]&(Y|r);Mt--)ae(se[Mt],L);for(He++;He<se.length&&G[se[He]]&(Y|r|L);He++)G[se[He]]!==L&&ae(se[He],L)}}if(K.get(Y)||K.get(F)||K.get(A))for(var dt=0;dt<se.length;dt++){var zr=se[dt];if(G[zr]&(Y|F|A)){ae(zr,j);for(var Ot=dt-1;Ot>=0&&G[se[Ot]]&r;Ot--)ae(se[Ot],j);for(var Pt=dt+1;Pt<se.length&&G[se[Pt]]&r;Pt++)ae(se[Pt],j)}}if(K.get(L))for(var ur=0,Wr=ft;ur<se.length;ur++){var Vr=se[ur],cr=G[Vr];cr&L?Wr===x&&ae(Vr,x):cr&a&&(Wr=cr)}if(K.get(i)){var pt=S|L|b,Xr=pt|x,Lt=[];{for(var st=[],lt=0;lt<se.length;lt++)if(G[se[lt]]&i){var vt=V[se[lt]],Hr=void 0;if(m(vt)!==null)if(st.length<63)st.push({char:vt,seqIndex:lt});else break;else if((Hr=w(vt))!==null)for(var gt=st.length-1;gt>=0;gt--){var fr=st[gt].char;if(fr===Hr||fr===w(M(vt))||m(M(fr))===vt){Lt.push([st[gt].seqIndex,lt]),st.length=gt;break}}}Lt.sort(function(Ie,Xe){return Ie[0]-Xe[0]})}for(var hr=0;hr<Lt.length;hr++){for(var Yr=Lt[hr],Rt=Yr[0],dr=Yr[1],qr=!1,Ve=0,pr=Rt+1;pr<dr;pr++){var Zr=se[pr];if(G[Zr]&Xr){qr=!0;var Kr=G[Zr]&pt?S:x;if(Kr===at){Ve=Kr;break}}}if(qr&&!Ve){Ve=ft;for(var vr=Rt-1;vr>=0;vr--){var Jr=se[vr];if(G[Jr]&Xr){var Qr=G[Jr]&pt?S:x;Qr!==at?Ve=Qr:Ve=at;break}}}if(Ve){if(G[se[Rt]]=G[se[dr]]=Ve,Ve!==at){for(var mt=Rt+1;mt<se.length;mt++)if(!(G[se[mt]]&r)){c(V[se[mt]])&ne&&(G[se[mt]]=Ve);break}}if(Ve!==at){for(var yt=dr+1;yt<se.length;yt++)if(!(G[se[yt]]&r)){c(V[se[yt]])&ne&&(G[se[yt]]=Ve);break}}}}for(var $e=0;$e<se.length;$e++)if(G[se[$e]]&i){for(var $r=$e,gr=$e,mr=ft,bt=$e-1;bt>=0;bt--)if(G[se[bt]]&r)$r=bt;else{mr=G[se[bt]]&pt?S:x;break}for(var en=Xn,wt=$e+1;wt<se.length;wt++)if(G[se[wt]]&(i|r))gr=wt;else{en=G[se[wt]]&pt?S:x;break}for(var yr=$r;yr<=gr;yr++)G[se[yr]]=mr===en?mr:at;$e=gr}}}for(var ze=ie.start;ze<=ie.end;ze++){var Yn=Z[ze],Gt=G[ze];if(Yn&1?Gt&(x|L|b)&&Z[ze]++:Gt&S?Z[ze]++:Gt&(b|L)&&(Z[ze]+=2),Gt&r&&(Z[ze]=ze===0?ie.level:Z[ze-1]),ze===ie.end||c(V[ze])&(W|U))for(var Bt=ze;Bt>=0&&c(V[Bt])&o;Bt--)Z[Bt]=ie.level}}return{levels:Z,paragraphs:oe};function tn(Ie,Xe){for(var je=Ie;je<V.length;je++){var et=G[je];if(et&(S|B))return 1;if(et&(U|x)||Xe&&et===I)return 0;if(et&e){var rn=qn(je);je=rn===-1?V.length:rn}}return 0}function qn(Ie){for(var Xe=1,je=Ie+1;je<V.length;je++){var et=G[je];if(et&U)break;if(et&I){if(--Xe===0)return je}else et&e&&Xe++}return-1}}var ee="14>1,j>2,t>2,u>2,1a>g,2v3>1,1>1,1ge>1,1wd>1,b>1,1j>1,f>1,ai>3,-2>3,+1,8>1k0,-1jq>1y7,-1y6>1hf,-1he>1h6,-1h5>1ha,-1h8>1qi,-1pu>1,6>3u,-3s>7,6>1,1>1,f>1,1>1,+2,3>1,1>1,+13,4>1,1>1,6>1eo,-1ee>1,3>1mg,-1me>1mk,-1mj>1mi,-1mg>1mi,-1md>1,1>1,+2,1>10k,-103>1,1>1,4>1,5>1,1>1,+10,3>1,1>8,-7>8,+1,-6>7,+1,a>1,1>1,u>1,u6>1,1>1,+5,26>1,1>1,2>1,2>2,8>1,7>1,4>1,1>1,+5,b8>1,1>1,+3,1>3,-2>1,2>1,1>1,+2,c>1,3>1,1>1,+2,h>1,3>1,a>1,1>1,2>1,3>1,1>1,d>1,f>1,3>1,1a>1,1>1,6>1,7>1,13>1,k>1,1>1,+19,4>1,1>1,+2,2>1,1>1,+18,m>1,a>1,1>1,lk>1,1>1,4>1,2>1,f>1,3>1,1>1,+3,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,6>1,4j>1,j>2,t>2,u>2,2>1,+1",H;function z(){if(!H){var V=g(ee,!0),re=V.map,$=V.reverseMap;$.forEach(function(G,de){re.set(de,G)}),H=re}}function ge(V){return z(),H.get(V)||null}function fe(V,re,$,G){var de=V.length;$=Math.max(0,$==null?0:+$),G=Math.min(de-1,G==null?de-1:+G);for(var K=new Map,ae=$;ae<=G;ae++)if(re[ae]&1){var Z=ge(V[ae]);Z!==null&&K.set(ae,Z)}return K}function J(V,re,$,G){var de=V.length;$=Math.max(0,$==null?0:+$),G=Math.min(de-1,G==null?de-1:+G);var K=[];return re.paragraphs.forEach(function(ae){var Z=Math.max($,ae.start),we=Math.min(G,ae.end);if(Z<we){for(var oe=re.levels.slice(Z,we+1),ie=we;ie>=Z&&c(V[ie])&o;ie--)oe[ie]=ae.level;for(var ce=ae.level,pe=1/0,ke=0;ke<oe.length;ke++){var Ae=oe[ke];Ae>ce&&(ce=Ae),Ae<pe&&(pe=Ae|1)}for(var me=ce;me>=pe;me--)for(var ye=0;ye<oe.length;ye++)if(oe[ye]>=me){for(var ue=ye;ye+1<oe.length&&oe[ye+1]>=me;)ye++;ye>ue&&K.push([ue+Z,ye+Z])}}}),K}function te(V,re,$,G){var de=le(V,re,$,G),K=[].concat(V);return de.forEach(function(ae,Z){K[Z]=(re.levels[ae]&1?ge(V[ae]):null)||V[ae]}),K.join("")}function le(V,re,$,G){for(var de=J(V,re,$,G),K=[],ae=0;ae<V.length;ae++)K[ae]=ae;return de.forEach(function(Z){for(var we=Z[0],oe=Z[1],ie=K.slice(we,oe+1),ce=ie.length;ce--;)K[oe-ce]=ie[ce]}),K}return n.closingToOpeningBracket=w,n.getBidiCharType=c,n.getBidiCharTypeName=f,n.getCanonicalBracket=M,n.getEmbeddingLevels=q,n.getMirroredCharacter=ge,n.getMirroredCharactersMap=fe,n.getReorderSegments=J,n.getReorderedIndices=le,n.getReorderedString=te,n.openingToClosingBracket=m,Object.defineProperty(n,"__esModule",{value:!0}),n}({});return h}const On=/\bvoid\s+main\s*\(\s*\)\s*{/g;function Er(h){const n=/^[ \t]*#include +<([\w\d./]+)>/gm;function d(u,t){let e=eo[t];return e?Er(e):u}return h.replace(n,d)}const Oe=[];for(let h=0;h<256;h++)Oe[h]=(h<16?"0":"")+h.toString(16);function Co(){const h=Math.random()*4294967295|0,n=Math.random()*4294967295|0,d=Math.random()*4294967295|0,u=Math.random()*4294967295|0;return(Oe[h&255]+Oe[h>>8&255]+Oe[h>>16&255]+Oe[h>>24&255]+"-"+Oe[n&255]+Oe[n>>8&255]+"-"+Oe[n>>16&15|64]+Oe[n>>24&255]+"-"+Oe[d&63|128]+Oe[d>>8&255]+"-"+Oe[d>>16&255]+Oe[d>>24&255]+Oe[u&255]+Oe[u>>8&255]+Oe[u>>16&255]+Oe[u>>24&255]).toUpperCase()}const nt=Object.assign||function(){let h=arguments[0];for(let n=1,d=arguments.length;n<d;n++){let u=arguments[n];if(u)for(let t in u)Object.prototype.hasOwnProperty.call(u,t)&&(h[t]=u[t])}return h},Ao=Date.now(),sn=new WeakMap,ln=new Map;let Do=1e10;function Cr(h,n){const d=Po(n);let u=sn.get(h);if(u||sn.set(h,u=Object.create(null)),u[d])return new u[d];const t=`_onBeforeCompile${d}`,e=function(o,s){h.onBeforeCompile.call(this,o,s);const l=this.customProgramCacheKey()+"|"+o.vertexShader+"|"+o.fragmentShader;let c=ln[l];if(!c){const f=Fo(this,o,n,d);c=ln[l]=f}o.vertexShader=c.vertexShader,o.fragmentShader=c.fragmentShader,nt(o.uniforms,this.uniforms),n.timeUniform&&(o.uniforms[n.timeUniform]={get value(){return Date.now()-Ao}}),this[t]&&this[t](o)},a=function(){return i(n.chained?h:h.clone())},i=function(o){const s=Object.create(o,r);return Object.defineProperty(s,"baseMaterial",{value:h}),Object.defineProperty(s,"id",{value:Do++}),s.uuid=Co(),s.uniforms=nt({},o.uniforms,n.uniforms),s.defines=nt({},o.defines,n.defines),s.defines[`TROIKA_DERIVED_MATERIAL_${d}`]="",s.extensions=nt({},o.extensions,n.extensions),s._listeners=void 0,s},r={constructor:{value:a},isDerivedMaterial:{value:!0},type:{get:()=>h.type,set:o=>{h.type=o}},isDerivedFrom:{writable:!0,configurable:!0,value:function(o){const s=this.baseMaterial;return o===s||s.isDerivedMaterial&&s.isDerivedFrom(o)||!1}},customProgramCacheKey:{writable:!0,configurable:!0,value:function(){return h.customProgramCacheKey()+"|"+d}},onBeforeCompile:{get(){return e},set(o){this[t]=o}},copy:{writable:!0,configurable:!0,value:function(o){return h.copy.call(this,o),!h.isShaderMaterial&&!h.isDerivedMaterial&&(nt(this.extensions,o.extensions),nt(this.defines,o.defines),nt(this.uniforms,$n.clone(o.uniforms))),this}},clone:{writable:!0,configurable:!0,value:function(){const o=new h.constructor;return i(o).copy(this)}},getDepthMaterial:{writable:!0,configurable:!0,value:function(){let o=this._depthMaterial;return o||(o=this._depthMaterial=Cr(h.isDerivedMaterial?h.getDepthMaterial():new Jn({depthPacking:Qn}),n),o.defines.IS_DEPTH_MATERIAL="",o.uniforms=this.uniforms),o}},getDistanceMaterial:{writable:!0,configurable:!0,value:function(){let o=this._distanceMaterial;return o||(o=this._distanceMaterial=Cr(h.isDerivedMaterial?h.getDistanceMaterial():new Kn,n),o.defines.IS_DISTANCE_MATERIAL="",o.uniforms=this.uniforms),o}},dispose:{writable:!0,configurable:!0,value(){const{_depthMaterial:o,_distanceMaterial:s}=this;o&&o.dispose(),s&&s.dispose(),h.dispose.call(this)}}};return u[d]=a,new a}function Fo(h,{vertexShader:n,fragmentShader:d},u,t){let{vertexDefs:e,vertexMainIntro:a,vertexMainOutro:i,vertexTransform:r,fragmentDefs:o,fragmentMainIntro:s,fragmentMainOutro:l,fragmentColorTransform:c,customRewriter:f,timeUniform:p}=u;if(e=e||"",a=a||"",i=i||"",o=o||"",s=s||"",l=l||"",(r||f)&&(n=Er(n)),(c||f)&&(d=d.replace(/^[ \t]*#include <((?:tonemapping|encodings|colorspace|fog|premultiplied_alpha|dithering)_fragment)>/gm,`
//!BEGIN_POST_CHUNK $1
$&
//!END_POST_CHUNK
`),d=Er(d)),f){let g=f({vertexShader:n,fragmentShader:d});n=g.vertexShader,d=g.fragmentShader}if(c){let g=[];d=d.replace(/^\/\/!BEGIN_POST_CHUNK[^]+?^\/\/!END_POST_CHUNK/gm,y=>(g.push(y),"")),l=`${c}
${g.join(`
`)}
${l}`}if(p){const g=`
uniform float ${p};
`;e=g+e,o=g+o}return r&&(n=`vec3 troika_position_${t};
vec3 troika_normal_${t};
vec2 troika_uv_${t};
${n}
`,e=`${e}
void troikaVertexTransform${t}(inout vec3 position, inout vec3 normal, inout vec2 uv) {
  ${r}
}
`,a=`
troika_position_${t} = vec3(position);
troika_normal_${t} = vec3(normal);
troika_uv_${t} = vec2(uv);
troikaVertexTransform${t}(troika_position_${t}, troika_normal_${t}, troika_uv_${t});
${a}
`,n=n.replace(/\b(position|normal|uv)\b/g,(g,y,O,T)=>/\battribute\s+vec[23]\s+$/.test(T.substr(0,O))?y:`troika_${y}_${t}`),h.map&&h.map.channel>0||(n=n.replace(/\bMAP_UV\b/g,`troika_uv_${t}`))),n=un(n,t,e,a,i),d=un(d,t,o,s,l),{vertexShader:n,fragmentShader:d}}function un(h,n,d,u,t){return(u||t||d)&&(h=h.replace(On,`
${d}
void troikaOrigMain${n}() {`),h+=`
void main() {
  ${u}
  troikaOrigMain${n}();
  ${t}
}`),h}function Mo(h,n){return h==="uniforms"?void 0:typeof n=="function"?n.toString():n}let Oo=0;const cn=new Map;function Po(h){const n=JSON.stringify(h,Mo);let d=cn.get(n);return d==null&&cn.set(n,d=++Oo),d}/*!
Custom build of Typr.ts (https://github.com/fredli74/Typr.ts) for use in Troika text rendering.
Original MIT license applies: https://github.com/fredli74/Typr.ts/blob/master/LICENSE
*/function Lo(){return typeof window>"u"&&(self.window=self),function(h){var n={parse:function(t){var e=n._bin,a=new Uint8Array(t);if(e.readASCII(a,0,4)=="ttcf"){var i=4;e.readUshort(a,i),i+=2,e.readUshort(a,i),i+=2;var r=e.readUint(a,i);i+=4;for(var o=[],s=0;s<r;s++){var l=e.readUint(a,i);i+=4,o.push(n._readFont(a,l))}return o}return[n._readFont(a,0)]},_readFont:function(t,e){var a=n._bin,i=e;a.readFixed(t,e),e+=4;var r=a.readUshort(t,e);e+=2,a.readUshort(t,e),e+=2,a.readUshort(t,e),e+=2,a.readUshort(t,e),e+=2;for(var o=["cmap","head","hhea","maxp","hmtx","name","OS/2","post","loca","glyf","kern","CFF ","GDEF","GPOS","GSUB","SVG "],s={_data:t,_offset:i},l={},c=0;c<r;c++){var f=a.readASCII(t,e,4);e+=4,a.readUint(t,e),e+=4;var p=a.readUint(t,e);e+=4;var g=a.readUint(t,e);e+=4,l[f]={offset:p,length:g}}for(c=0;c<o.length;c++){var y=o[c];l[y]&&(s[y.trim()]=n[y.trim()].parse(t,l[y].offset,l[y].length,s))}return s},_tabOffset:function(t,e,a){for(var i=n._bin,r=i.readUshort(t,a+4),o=a+12,s=0;s<r;s++){var l=i.readASCII(t,o,4);o+=4,i.readUint(t,o),o+=4;var c=i.readUint(t,o);if(o+=4,i.readUint(t,o),o+=4,l==e)return c}return 0}};n._bin={readFixed:function(t,e){return(t[e]<<8|t[e+1])+(t[e+2]<<8|t[e+3])/65540},readF2dot14:function(t,e){return n._bin.readShort(t,e)/16384},readInt:function(t,e){return n._bin._view(t).getInt32(e)},readInt8:function(t,e){return n._bin._view(t).getInt8(e)},readShort:function(t,e){return n._bin._view(t).getInt16(e)},readUshort:function(t,e){return n._bin._view(t).getUint16(e)},readUshorts:function(t,e,a){for(var i=[],r=0;r<a;r++)i.push(n._bin.readUshort(t,e+2*r));return i},readUint:function(t,e){return n._bin._view(t).getUint32(e)},readUint64:function(t,e){return 4294967296*n._bin.readUint(t,e)+n._bin.readUint(t,e+4)},readASCII:function(t,e,a){for(var i="",r=0;r<a;r++)i+=String.fromCharCode(t[e+r]);return i},readUnicode:function(t,e,a){for(var i="",r=0;r<a;r++){var o=t[e++]<<8|t[e++];i+=String.fromCharCode(o)}return i},_tdec:typeof window<"u"&&window.TextDecoder?new window.TextDecoder:null,readUTF8:function(t,e,a){var i=n._bin._tdec;return i&&e==0&&a==t.length?i.decode(t):n._bin.readASCII(t,e,a)},readBytes:function(t,e,a){for(var i=[],r=0;r<a;r++)i.push(t[e+r]);return i},readASCIIArray:function(t,e,a){for(var i=[],r=0;r<a;r++)i.push(String.fromCharCode(t[e+r]));return i},_view:function(t){return t._dataView||(t._dataView=t.buffer?new DataView(t.buffer,t.byteOffset,t.byteLength):new DataView(new Uint8Array(t).buffer))}},n._lctf={},n._lctf.parse=function(t,e,a,i,r){var o=n._bin,s={},l=e;o.readFixed(t,e),e+=4;var c=o.readUshort(t,e);e+=2;var f=o.readUshort(t,e);e+=2;var p=o.readUshort(t,e);return e+=2,s.scriptList=n._lctf.readScriptList(t,l+c),s.featureList=n._lctf.readFeatureList(t,l+f),s.lookupList=n._lctf.readLookupList(t,l+p,r),s},n._lctf.readLookupList=function(t,e,a){var i=n._bin,r=e,o=[],s=i.readUshort(t,e);e+=2;for(var l=0;l<s;l++){var c=i.readUshort(t,e);e+=2;var f=n._lctf.readLookupTable(t,r+c,a);o.push(f)}return o},n._lctf.readLookupTable=function(t,e,a){var i=n._bin,r=e,o={tabs:[]};o.ltype=i.readUshort(t,e),e+=2,o.flag=i.readUshort(t,e),e+=2;var s=i.readUshort(t,e);e+=2;for(var l=o.ltype,c=0;c<s;c++){var f=i.readUshort(t,e);e+=2;var p=a(t,l,r+f,o);o.tabs.push(p)}return o},n._lctf.numOfOnes=function(t){for(var e=0,a=0;a<32;a++)(t>>>a&1)!=0&&e++;return e},n._lctf.readClassDef=function(t,e){var a=n._bin,i=[],r=a.readUshort(t,e);if(e+=2,r==1){var o=a.readUshort(t,e);e+=2;var s=a.readUshort(t,e);e+=2;for(var l=0;l<s;l++)i.push(o+l),i.push(o+l),i.push(a.readUshort(t,e)),e+=2}if(r==2){var c=a.readUshort(t,e);for(e+=2,l=0;l<c;l++)i.push(a.readUshort(t,e)),e+=2,i.push(a.readUshort(t,e)),e+=2,i.push(a.readUshort(t,e)),e+=2}return i},n._lctf.getInterval=function(t,e){for(var a=0;a<t.length;a+=3){var i=t[a],r=t[a+1];if(t[a+2],i<=e&&e<=r)return a}return-1},n._lctf.readCoverage=function(t,e){var a=n._bin,i={};i.fmt=a.readUshort(t,e),e+=2;var r=a.readUshort(t,e);return e+=2,i.fmt==1&&(i.tab=a.readUshorts(t,e,r)),i.fmt==2&&(i.tab=a.readUshorts(t,e,3*r)),i},n._lctf.coverageIndex=function(t,e){var a=t.tab;if(t.fmt==1)return a.indexOf(e);if(t.fmt==2){var i=n._lctf.getInterval(a,e);if(i!=-1)return a[i+2]+(e-a[i])}return-1},n._lctf.readFeatureList=function(t,e){var a=n._bin,i=e,r=[],o=a.readUshort(t,e);e+=2;for(var s=0;s<o;s++){var l=a.readASCII(t,e,4);e+=4;var c=a.readUshort(t,e);e+=2;var f=n._lctf.readFeatureTable(t,i+c);f.tag=l.trim(),r.push(f)}return r},n._lctf.readFeatureTable=function(t,e){var a=n._bin,i=e,r={},o=a.readUshort(t,e);e+=2,o>0&&(r.featureParams=i+o);var s=a.readUshort(t,e);e+=2,r.tab=[];for(var l=0;l<s;l++)r.tab.push(a.readUshort(t,e+2*l));return r},n._lctf.readScriptList=function(t,e){var a=n._bin,i=e,r={},o=a.readUshort(t,e);e+=2;for(var s=0;s<o;s++){var l=a.readASCII(t,e,4);e+=4;var c=a.readUshort(t,e);e+=2,r[l.trim()]=n._lctf.readScriptTable(t,i+c)}return r},n._lctf.readScriptTable=function(t,e){var a=n._bin,i=e,r={},o=a.readUshort(t,e);e+=2,o>0&&(r.default=n._lctf.readLangSysTable(t,i+o));var s=a.readUshort(t,e);e+=2;for(var l=0;l<s;l++){var c=a.readASCII(t,e,4);e+=4;var f=a.readUshort(t,e);e+=2,r[c.trim()]=n._lctf.readLangSysTable(t,i+f)}return r},n._lctf.readLangSysTable=function(t,e){var a=n._bin,i={};a.readUshort(t,e),e+=2,i.reqFeature=a.readUshort(t,e),e+=2;var r=a.readUshort(t,e);return e+=2,i.features=a.readUshorts(t,e,r),i},n.CFF={},n.CFF.parse=function(t,e,a){var i=n._bin;(t=new Uint8Array(t.buffer,e,a))[e=0],t[++e],t[++e],t[++e],e++;var r=[];e=n.CFF.readIndex(t,e,r);for(var o=[],s=0;s<r.length-1;s++)o.push(i.readASCII(t,e+r[s],r[s+1]-r[s]));e+=r[r.length-1];var l=[];e=n.CFF.readIndex(t,e,l);var c=[];for(s=0;s<l.length-1;s++)c.push(n.CFF.readDict(t,e+l[s],e+l[s+1]));e+=l[l.length-1];var f=c[0],p=[];e=n.CFF.readIndex(t,e,p);var g=[];for(s=0;s<p.length-1;s++)g.push(i.readASCII(t,e+p[s],p[s+1]-p[s]));if(e+=p[p.length-1],n.CFF.readSubrs(t,e,f),f.CharStrings){e=f.CharStrings,p=[],e=n.CFF.readIndex(t,e,p);var y=[];for(s=0;s<p.length-1;s++)y.push(i.readBytes(t,e+p[s],p[s+1]-p[s]));f.CharStrings=y}if(f.ROS){e=f.FDArray;var O=[];for(e=n.CFF.readIndex(t,e,O),f.FDArray=[],s=0;s<O.length-1;s++){var T=n.CFF.readDict(t,e+O[s],e+O[s+1]);n.CFF._readFDict(t,T,g),f.FDArray.push(T)}e+=O[O.length-1],e=f.FDSelect,f.FDSelect=[];var _=t[e];if(e++,_!=3)throw _;var m=i.readUshort(t,e);for(e+=2,s=0;s<m+1;s++)f.FDSelect.push(i.readUshort(t,e),t[e+2]),e+=3}return f.Encoding&&(f.Encoding=n.CFF.readEncoding(t,f.Encoding,f.CharStrings.length)),f.charset&&(f.charset=n.CFF.readCharset(t,f.charset,f.CharStrings.length)),n.CFF._readFDict(t,f,g),f},n.CFF._readFDict=function(t,e,a){var i;for(var r in e.Private&&(i=e.Private[1],e.Private=n.CFF.readDict(t,i,i+e.Private[0]),e.Private.Subrs&&n.CFF.readSubrs(t,i+e.Private.Subrs,e.Private)),e)["FamilyName","FontName","FullName","Notice","version","Copyright"].indexOf(r)!=-1&&(e[r]=a[e[r]-426+35])},n.CFF.readSubrs=function(t,e,a){var i=n._bin,r=[];e=n.CFF.readIndex(t,e,r);var o,s=r.length;o=s<1240?107:s<33900?1131:32768,a.Bias=o,a.Subrs=[];for(var l=0;l<r.length-1;l++)a.Subrs.push(i.readBytes(t,e+r[l],r[l+1]-r[l]))},n.CFF.tableSE=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,0,111,112,113,114,0,115,116,117,118,119,120,121,122,0,123,0,124,125,126,127,128,129,130,131,0,132,133,0,134,135,136,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,0,139,0,0,0,0,140,141,142,143,0,0,0,0,0,144,0,0,0,145,0,0,146,147,148,149,0,0,0,0],n.CFF.glyphByUnicode=function(t,e){for(var a=0;a<t.charset.length;a++)if(t.charset[a]==e)return a;return-1},n.CFF.glyphBySE=function(t,e){return e<0||e>255?-1:n.CFF.glyphByUnicode(t,n.CFF.tableSE[e])},n.CFF.readEncoding=function(t,e,a){n._bin;var i=[".notdef"],r=t[e];if(e++,r!=0)throw"error: unknown encoding format: "+r;var o=t[e];e++;for(var s=0;s<o;s++)i.push(t[e+s]);return i},n.CFF.readCharset=function(t,e,a){var i=n._bin,r=[".notdef"],o=t[e];if(e++,o==0)for(var s=0;s<a;s++){var l=i.readUshort(t,e);e+=2,r.push(l)}else{if(o!=1&&o!=2)throw"error: format: "+o;for(;r.length<a;){l=i.readUshort(t,e),e+=2;var c=0;for(o==1?(c=t[e],e++):(c=i.readUshort(t,e),e+=2),s=0;s<=c;s++)r.push(l),l++}}return r},n.CFF.readIndex=function(t,e,a){var i=n._bin,r=i.readUshort(t,e)+1,o=t[e+=2];if(e++,o==1)for(var s=0;s<r;s++)a.push(t[e+s]);else if(o==2)for(s=0;s<r;s++)a.push(i.readUshort(t,e+2*s));else if(o==3)for(s=0;s<r;s++)a.push(16777215&i.readUint(t,e+3*s-1));else if(r!=1)throw"unsupported offset size: "+o+", count: "+r;return(e+=r*o)-1},n.CFF.getCharString=function(t,e,a){var i=n._bin,r=t[e],o=t[e+1];t[e+2],t[e+3],t[e+4];var s=1,l=null,c=null;r<=20&&(l=r,s=1),r==12&&(l=100*r+o,s=2),21<=r&&r<=27&&(l=r,s=1),r==28&&(c=i.readShort(t,e+1),s=3),29<=r&&r<=31&&(l=r,s=1),32<=r&&r<=246&&(c=r-139,s=1),247<=r&&r<=250&&(c=256*(r-247)+o+108,s=2),251<=r&&r<=254&&(c=256*-(r-251)-o-108,s=2),r==255&&(c=i.readInt(t,e+1)/65535,s=5),a.val=c??"o"+l,a.size=s},n.CFF.readCharString=function(t,e,a){for(var i=e+a,r=n._bin,o=[];e<i;){var s=t[e],l=t[e+1];t[e+2],t[e+3],t[e+4];var c=1,f=null,p=null;s<=20&&(f=s,c=1),s==12&&(f=100*s+l,c=2),s!=19&&s!=20||(f=s,c=2),21<=s&&s<=27&&(f=s,c=1),s==28&&(p=r.readShort(t,e+1),c=3),29<=s&&s<=31&&(f=s,c=1),32<=s&&s<=246&&(p=s-139,c=1),247<=s&&s<=250&&(p=256*(s-247)+l+108,c=2),251<=s&&s<=254&&(p=256*-(s-251)-l-108,c=2),s==255&&(p=r.readInt(t,e+1)/65535,c=5),o.push(p??"o"+f),e+=c}return o},n.CFF.readDict=function(t,e,a){for(var i=n._bin,r={},o=[];e<a;){var s=t[e],l=t[e+1];t[e+2],t[e+3],t[e+4];var c=1,f=null,p=null;if(s==28&&(p=i.readShort(t,e+1),c=3),s==29&&(p=i.readInt(t,e+1),c=5),32<=s&&s<=246&&(p=s-139,c=1),247<=s&&s<=250&&(p=256*(s-247)+l+108,c=2),251<=s&&s<=254&&(p=256*-(s-251)-l-108,c=2),s==255)throw p=i.readInt(t,e+1)/65535,c=5,"unknown number";if(s==30){var g=[];for(c=1;;){var y=t[e+c];c++;var O=y>>4,T=15&y;if(O!=15&&g.push(O),T!=15&&g.push(T),T==15)break}for(var _="",m=[0,1,2,3,4,5,6,7,8,9,".","e","e-","reserved","-","endOfNumber"],w=0;w<g.length;w++)_+=m[g[w]];p=parseFloat(_)}s<=21&&(f=["version","Notice","FullName","FamilyName","Weight","FontBBox","BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StdHW","StdVW","escape","UniqueID","XUID","charset","Encoding","CharStrings","Private","Subrs","defaultWidthX","nominalWidthX"][s],c=1,s==12&&(f=["Copyright","isFixedPitch","ItalicAngle","UnderlinePosition","UnderlineThickness","PaintType","CharstringType","FontMatrix","StrokeWidth","BlueScale","BlueShift","BlueFuzz","StemSnapH","StemSnapV","ForceBold",0,0,"LanguageGroup","ExpansionFactor","initialRandomSeed","SyntheticBase","PostScript","BaseFontName","BaseFontBlend",0,0,0,0,0,0,"ROS","CIDFontVersion","CIDFontRevision","CIDFontType","CIDCount","UIDBase","FDArray","FDSelect","FontName"][l],c=2)),f!=null?(r[f]=o.length==1?o[0]:o,o=[]):o.push(p),e+=c}return r},n.cmap={},n.cmap.parse=function(t,e,a){t=new Uint8Array(t.buffer,e,a),e=0;var i=n._bin,r={};i.readUshort(t,e),e+=2;var o=i.readUshort(t,e);e+=2;var s=[];r.tables=[];for(var l=0;l<o;l++){var c=i.readUshort(t,e);e+=2;var f=i.readUshort(t,e);e+=2;var p=i.readUint(t,e);e+=4;var g="p"+c+"e"+f,y=s.indexOf(p);if(y==-1){var O;y=r.tables.length,s.push(p);var T=i.readUshort(t,p);T==0?O=n.cmap.parse0(t,p):T==4?O=n.cmap.parse4(t,p):T==6?O=n.cmap.parse6(t,p):T==12?O=n.cmap.parse12(t,p):console.debug("unknown format: "+T,c,f,p),r.tables.push(O)}if(r[g]!=null)throw"multiple tables for one platform+encoding";r[g]=y}return r},n.cmap.parse0=function(t,e){var a=n._bin,i={};i.format=a.readUshort(t,e),e+=2;var r=a.readUshort(t,e);e+=2,a.readUshort(t,e),e+=2,i.map=[];for(var o=0;o<r-6;o++)i.map.push(t[e+o]);return i},n.cmap.parse4=function(t,e){var a=n._bin,i=e,r={};r.format=a.readUshort(t,e),e+=2;var o=a.readUshort(t,e);e+=2,a.readUshort(t,e),e+=2;var s=a.readUshort(t,e);e+=2;var l=s/2;r.searchRange=a.readUshort(t,e),e+=2,r.entrySelector=a.readUshort(t,e),e+=2,r.rangeShift=a.readUshort(t,e),e+=2,r.endCount=a.readUshorts(t,e,l),e+=2*l,e+=2,r.startCount=a.readUshorts(t,e,l),e+=2*l,r.idDelta=[];for(var c=0;c<l;c++)r.idDelta.push(a.readShort(t,e)),e+=2;for(r.idRangeOffset=a.readUshorts(t,e,l),e+=2*l,r.glyphIdArray=[];e<i+o;)r.glyphIdArray.push(a.readUshort(t,e)),e+=2;return r},n.cmap.parse6=function(t,e){var a=n._bin,i={};i.format=a.readUshort(t,e),e+=2,a.readUshort(t,e),e+=2,a.readUshort(t,e),e+=2,i.firstCode=a.readUshort(t,e),e+=2;var r=a.readUshort(t,e);e+=2,i.glyphIdArray=[];for(var o=0;o<r;o++)i.glyphIdArray.push(a.readUshort(t,e)),e+=2;return i},n.cmap.parse12=function(t,e){var a=n._bin,i={};i.format=a.readUshort(t,e),e+=2,e+=2,a.readUint(t,e),e+=4,a.readUint(t,e),e+=4;var r=a.readUint(t,e);e+=4,i.groups=[];for(var o=0;o<r;o++){var s=e+12*o,l=a.readUint(t,s+0),c=a.readUint(t,s+4),f=a.readUint(t,s+8);i.groups.push([l,c,f])}return i},n.glyf={},n.glyf.parse=function(t,e,a,i){for(var r=[],o=0;o<i.maxp.numGlyphs;o++)r.push(null);return r},n.glyf._parseGlyf=function(t,e){var a=n._bin,i=t._data,r=n._tabOffset(i,"glyf",t._offset)+t.loca[e];if(t.loca[e]==t.loca[e+1])return null;var o={};if(o.noc=a.readShort(i,r),r+=2,o.xMin=a.readShort(i,r),r+=2,o.yMin=a.readShort(i,r),r+=2,o.xMax=a.readShort(i,r),r+=2,o.yMax=a.readShort(i,r),r+=2,o.xMin>=o.xMax||o.yMin>=o.yMax)return null;if(o.noc>0){o.endPts=[];for(var s=0;s<o.noc;s++)o.endPts.push(a.readUshort(i,r)),r+=2;var l=a.readUshort(i,r);if(r+=2,i.length-r<l)return null;o.instructions=a.readBytes(i,r,l),r+=l;var c=o.endPts[o.noc-1]+1;for(o.flags=[],s=0;s<c;s++){var f=i[r];if(r++,o.flags.push(f),(8&f)!=0){var p=i[r];r++;for(var g=0;g<p;g++)o.flags.push(f),s++}}for(o.xs=[],s=0;s<c;s++){var y=(2&o.flags[s])!=0,O=(16&o.flags[s])!=0;y?(o.xs.push(O?i[r]:-i[r]),r++):O?o.xs.push(0):(o.xs.push(a.readShort(i,r)),r+=2)}for(o.ys=[],s=0;s<c;s++)y=(4&o.flags[s])!=0,O=(32&o.flags[s])!=0,y?(o.ys.push(O?i[r]:-i[r]),r++):O?o.ys.push(0):(o.ys.push(a.readShort(i,r)),r+=2);var T=0,_=0;for(s=0;s<c;s++)T+=o.xs[s],_+=o.ys[s],o.xs[s]=T,o.ys[s]=_}else{var m;o.parts=[];do{m=a.readUshort(i,r),r+=2;var w={m:{a:1,b:0,c:0,d:1,tx:0,ty:0},p1:-1,p2:-1};if(o.parts.push(w),w.glyphIndex=a.readUshort(i,r),r+=2,1&m){var M=a.readShort(i,r);r+=2;var x=a.readShort(i,r);r+=2}else M=a.readInt8(i,r),r++,x=a.readInt8(i,r),r++;2&m?(w.m.tx=M,w.m.ty=x):(w.p1=M,w.p2=x),8&m?(w.m.a=w.m.d=a.readF2dot14(i,r),r+=2):64&m?(w.m.a=a.readF2dot14(i,r),r+=2,w.m.d=a.readF2dot14(i,r),r+=2):128&m&&(w.m.a=a.readF2dot14(i,r),r+=2,w.m.b=a.readF2dot14(i,r),r+=2,w.m.c=a.readF2dot14(i,r),r+=2,w.m.d=a.readF2dot14(i,r),r+=2)}while(32&m);if(256&m){var S=a.readUshort(i,r);for(r+=2,o.instr=[],s=0;s<S;s++)o.instr.push(i[r]),r++}}return o},n.GDEF={},n.GDEF.parse=function(t,e,a,i){var r=e;e+=4;var o=n._bin.readUshort(t,e);return{glyphClassDef:o===0?null:n._lctf.readClassDef(t,r+o)}},n.GPOS={},n.GPOS.parse=function(t,e,a,i){return n._lctf.parse(t,e,a,i,n.GPOS.subt)},n.GPOS.subt=function(t,e,a,i){var r=n._bin,o=a,s={};if(s.fmt=r.readUshort(t,a),a+=2,e==1||e==2||e==3||e==7||e==8&&s.fmt<=2){var l=r.readUshort(t,a);a+=2,s.coverage=n._lctf.readCoverage(t,l+o)}if(e==1&&s.fmt==1){var c=r.readUshort(t,a);a+=2,c!=0&&(s.pos=n.GPOS.readValueRecord(t,a,c))}else if(e==2&&s.fmt>=1&&s.fmt<=2){c=r.readUshort(t,a),a+=2;var f=r.readUshort(t,a);a+=2;var p=n._lctf.numOfOnes(c),g=n._lctf.numOfOnes(f);if(s.fmt==1){s.pairsets=[];var y=r.readUshort(t,a);a+=2;for(var O=0;O<y;O++){var T=o+r.readUshort(t,a);a+=2;var _=r.readUshort(t,T);T+=2;for(var m=[],w=0;w<_;w++){var M=r.readUshort(t,T);T+=2,c!=0&&(b=n.GPOS.readValueRecord(t,T,c),T+=2*p),f!=0&&(A=n.GPOS.readValueRecord(t,T,f),T+=2*g),m.push({gid2:M,val1:b,val2:A})}s.pairsets.push(m)}}if(s.fmt==2){var x=r.readUshort(t,a);a+=2;var S=r.readUshort(t,a);a+=2;var L=r.readUshort(t,a);a+=2;var F=r.readUshort(t,a);for(a+=2,s.classDef1=n._lctf.readClassDef(t,o+x),s.classDef2=n._lctf.readClassDef(t,o+S),s.matrix=[],O=0;O<L;O++){var Y=[];for(w=0;w<F;w++){var b=null,A=null;c!=0&&(b=n.GPOS.readValueRecord(t,a,c),a+=2*p),f!=0&&(A=n.GPOS.readValueRecord(t,a,f),a+=2*g),Y.push({val1:b,val2:A})}s.matrix.push(Y)}}}else if(e==4&&s.fmt==1)s.markCoverage=n._lctf.readCoverage(t,r.readUshort(t,a)+o),s.baseCoverage=n._lctf.readCoverage(t,r.readUshort(t,a+2)+o),s.markClassCount=r.readUshort(t,a+4),s.markArray=n.GPOS.readMarkArray(t,r.readUshort(t,a+6)+o),s.baseArray=n.GPOS.readBaseArray(t,r.readUshort(t,a+8)+o,s.markClassCount);else if(e==6&&s.fmt==1)s.mark1Coverage=n._lctf.readCoverage(t,r.readUshort(t,a)+o),s.mark2Coverage=n._lctf.readCoverage(t,r.readUshort(t,a+2)+o),s.markClassCount=r.readUshort(t,a+4),s.mark1Array=n.GPOS.readMarkArray(t,r.readUshort(t,a+6)+o),s.mark2Array=n.GPOS.readBaseArray(t,r.readUshort(t,a+8)+o,s.markClassCount);else{if(e==9&&s.fmt==1){var U=r.readUshort(t,a);a+=2;var W=r.readUint(t,a);if(a+=4,i.ltype==9)i.ltype=U;else if(i.ltype!=U)throw"invalid extension substitution";return n.GPOS.subt(t,i.ltype,o+W)}console.debug("unsupported GPOS table LookupType",e,"format",s.fmt)}return s},n.GPOS.readValueRecord=function(t,e,a){var i=n._bin,r=[];return r.push(1&a?i.readShort(t,e):0),e+=1&a?2:0,r.push(2&a?i.readShort(t,e):0),e+=2&a?2:0,r.push(4&a?i.readShort(t,e):0),e+=4&a?2:0,r.push(8&a?i.readShort(t,e):0),e+=8&a?2:0,r},n.GPOS.readBaseArray=function(t,e,a){var i=n._bin,r=[],o=e,s=i.readUshort(t,e);e+=2;for(var l=0;l<s;l++){for(var c=[],f=0;f<a;f++)c.push(n.GPOS.readAnchorRecord(t,o+i.readUshort(t,e))),e+=2;r.push(c)}return r},n.GPOS.readMarkArray=function(t,e){var a=n._bin,i=[],r=e,o=a.readUshort(t,e);e+=2;for(var s=0;s<o;s++){var l=n.GPOS.readAnchorRecord(t,a.readUshort(t,e+2)+r);l.markClass=a.readUshort(t,e),i.push(l),e+=4}return i},n.GPOS.readAnchorRecord=function(t,e){var a=n._bin,i={};return i.fmt=a.readUshort(t,e),i.x=a.readShort(t,e+2),i.y=a.readShort(t,e+4),i},n.GSUB={},n.GSUB.parse=function(t,e,a,i){return n._lctf.parse(t,e,a,i,n.GSUB.subt)},n.GSUB.subt=function(t,e,a,i){var r=n._bin,o=a,s={};if(s.fmt=r.readUshort(t,a),a+=2,e!=1&&e!=2&&e!=4&&e!=5&&e!=6)return null;if(e==1||e==2||e==4||e==5&&s.fmt<=2||e==6&&s.fmt<=2){var l=r.readUshort(t,a);a+=2,s.coverage=n._lctf.readCoverage(t,o+l)}if(e==1&&s.fmt>=1&&s.fmt<=2){if(s.fmt==1)s.delta=r.readShort(t,a),a+=2;else if(s.fmt==2){var c=r.readUshort(t,a);a+=2,s.newg=r.readUshorts(t,a,c),a+=2*s.newg.length}}else if(e==2&&s.fmt==1){c=r.readUshort(t,a),a+=2,s.seqs=[];for(var f=0;f<c;f++){var p=r.readUshort(t,a)+o;a+=2;var g=r.readUshort(t,p);s.seqs.push(r.readUshorts(t,p+2,g))}}else if(e==4)for(s.vals=[],c=r.readUshort(t,a),a+=2,f=0;f<c;f++){var y=r.readUshort(t,a);a+=2,s.vals.push(n.GSUB.readLigatureSet(t,o+y))}else if(e==5&&s.fmt==2){if(s.fmt==2){var O=r.readUshort(t,a);a+=2,s.cDef=n._lctf.readClassDef(t,o+O),s.scset=[];var T=r.readUshort(t,a);for(a+=2,f=0;f<T;f++){var _=r.readUshort(t,a);a+=2,s.scset.push(_==0?null:n.GSUB.readSubClassSet(t,o+_))}}}else if(e==6&&s.fmt==3){if(s.fmt==3){for(f=0;f<3;f++){c=r.readUshort(t,a),a+=2;for(var m=[],w=0;w<c;w++)m.push(n._lctf.readCoverage(t,o+r.readUshort(t,a+2*w)));a+=2*c,f==0&&(s.backCvg=m),f==1&&(s.inptCvg=m),f==2&&(s.ahedCvg=m)}c=r.readUshort(t,a),a+=2,s.lookupRec=n.GSUB.readSubstLookupRecords(t,a,c)}}else{if(e==7&&s.fmt==1){var M=r.readUshort(t,a);a+=2;var x=r.readUint(t,a);if(a+=4,i.ltype==9)i.ltype=M;else if(i.ltype!=M)throw"invalid extension substitution";return n.GSUB.subt(t,i.ltype,o+x)}console.debug("unsupported GSUB table LookupType",e,"format",s.fmt)}return s},n.GSUB.readSubClassSet=function(t,e){var a=n._bin.readUshort,i=e,r=[],o=a(t,e);e+=2;for(var s=0;s<o;s++){var l=a(t,e);e+=2,r.push(n.GSUB.readSubClassRule(t,i+l))}return r},n.GSUB.readSubClassRule=function(t,e){var a=n._bin.readUshort,i={},r=a(t,e),o=a(t,e+=2);e+=2,i.input=[];for(var s=0;s<r-1;s++)i.input.push(a(t,e)),e+=2;return i.substLookupRecords=n.GSUB.readSubstLookupRecords(t,e,o),i},n.GSUB.readSubstLookupRecords=function(t,e,a){for(var i=n._bin.readUshort,r=[],o=0;o<a;o++)r.push(i(t,e),i(t,e+2)),e+=4;return r},n.GSUB.readChainSubClassSet=function(t,e){var a=n._bin,i=e,r=[],o=a.readUshort(t,e);e+=2;for(var s=0;s<o;s++){var l=a.readUshort(t,e);e+=2,r.push(n.GSUB.readChainSubClassRule(t,i+l))}return r},n.GSUB.readChainSubClassRule=function(t,e){for(var a=n._bin,i={},r=["backtrack","input","lookahead"],o=0;o<r.length;o++){var s=a.readUshort(t,e);e+=2,o==1&&s--,i[r[o]]=a.readUshorts(t,e,s),e+=2*i[r[o]].length}return s=a.readUshort(t,e),e+=2,i.subst=a.readUshorts(t,e,2*s),e+=2*i.subst.length,i},n.GSUB.readLigatureSet=function(t,e){var a=n._bin,i=e,r=[],o=a.readUshort(t,e);e+=2;for(var s=0;s<o;s++){var l=a.readUshort(t,e);e+=2,r.push(n.GSUB.readLigature(t,i+l))}return r},n.GSUB.readLigature=function(t,e){var a=n._bin,i={chain:[]};i.nglyph=a.readUshort(t,e),e+=2;var r=a.readUshort(t,e);e+=2;for(var o=0;o<r-1;o++)i.chain.push(a.readUshort(t,e)),e+=2;return i},n.head={},n.head.parse=function(t,e,a){var i=n._bin,r={};return i.readFixed(t,e),e+=4,r.fontRevision=i.readFixed(t,e),e+=4,i.readUint(t,e),e+=4,i.readUint(t,e),e+=4,r.flags=i.readUshort(t,e),e+=2,r.unitsPerEm=i.readUshort(t,e),e+=2,r.created=i.readUint64(t,e),e+=8,r.modified=i.readUint64(t,e),e+=8,r.xMin=i.readShort(t,e),e+=2,r.yMin=i.readShort(t,e),e+=2,r.xMax=i.readShort(t,e),e+=2,r.yMax=i.readShort(t,e),e+=2,r.macStyle=i.readUshort(t,e),e+=2,r.lowestRecPPEM=i.readUshort(t,e),e+=2,r.fontDirectionHint=i.readShort(t,e),e+=2,r.indexToLocFormat=i.readShort(t,e),e+=2,r.glyphDataFormat=i.readShort(t,e),e+=2,r},n.hhea={},n.hhea.parse=function(t,e,a){var i=n._bin,r={};return i.readFixed(t,e),e+=4,r.ascender=i.readShort(t,e),e+=2,r.descender=i.readShort(t,e),e+=2,r.lineGap=i.readShort(t,e),e+=2,r.advanceWidthMax=i.readUshort(t,e),e+=2,r.minLeftSideBearing=i.readShort(t,e),e+=2,r.minRightSideBearing=i.readShort(t,e),e+=2,r.xMaxExtent=i.readShort(t,e),e+=2,r.caretSlopeRise=i.readShort(t,e),e+=2,r.caretSlopeRun=i.readShort(t,e),e+=2,r.caretOffset=i.readShort(t,e),e+=2,e+=8,r.metricDataFormat=i.readShort(t,e),e+=2,r.numberOfHMetrics=i.readUshort(t,e),e+=2,r},n.hmtx={},n.hmtx.parse=function(t,e,a,i){for(var r=n._bin,o={aWidth:[],lsBearing:[]},s=0,l=0,c=0;c<i.maxp.numGlyphs;c++)c<i.hhea.numberOfHMetrics&&(s=r.readUshort(t,e),e+=2,l=r.readShort(t,e),e+=2),o.aWidth.push(s),o.lsBearing.push(l);return o},n.kern={},n.kern.parse=function(t,e,a,i){var r=n._bin,o=r.readUshort(t,e);if(e+=2,o==1)return n.kern.parseV1(t,e-2,a,i);var s=r.readUshort(t,e);e+=2;for(var l={glyph1:[],rval:[]},c=0;c<s;c++){e+=2,a=r.readUshort(t,e),e+=2;var f=r.readUshort(t,e);e+=2;var p=f>>>8;if((p&=15)!=0)throw"unknown kern table format: "+p;e=n.kern.readFormat0(t,e,l)}return l},n.kern.parseV1=function(t,e,a,i){var r=n._bin;r.readFixed(t,e),e+=4;var o=r.readUint(t,e);e+=4;for(var s={glyph1:[],rval:[]},l=0;l<o;l++){r.readUint(t,e),e+=4;var c=r.readUshort(t,e);e+=2,r.readUshort(t,e),e+=2;var f=c>>>8;if((f&=15)!=0)throw"unknown kern table format: "+f;e=n.kern.readFormat0(t,e,s)}return s},n.kern.readFormat0=function(t,e,a){var i=n._bin,r=-1,o=i.readUshort(t,e);e+=2,i.readUshort(t,e),e+=2,i.readUshort(t,e),e+=2,i.readUshort(t,e),e+=2;for(var s=0;s<o;s++){var l=i.readUshort(t,e);e+=2;var c=i.readUshort(t,e);e+=2;var f=i.readShort(t,e);e+=2,l!=r&&(a.glyph1.push(l),a.rval.push({glyph2:[],vals:[]}));var p=a.rval[a.rval.length-1];p.glyph2.push(c),p.vals.push(f),r=l}return e},n.loca={},n.loca.parse=function(t,e,a,i){var r=n._bin,o=[],s=i.head.indexToLocFormat,l=i.maxp.numGlyphs+1;if(s==0)for(var c=0;c<l;c++)o.push(r.readUshort(t,e+(c<<1))<<1);if(s==1)for(c=0;c<l;c++)o.push(r.readUint(t,e+(c<<2)));return o},n.maxp={},n.maxp.parse=function(t,e,a){var i=n._bin,r={},o=i.readUint(t,e);return e+=4,r.numGlyphs=i.readUshort(t,e),e+=2,o==65536&&(r.maxPoints=i.readUshort(t,e),e+=2,r.maxContours=i.readUshort(t,e),e+=2,r.maxCompositePoints=i.readUshort(t,e),e+=2,r.maxCompositeContours=i.readUshort(t,e),e+=2,r.maxZones=i.readUshort(t,e),e+=2,r.maxTwilightPoints=i.readUshort(t,e),e+=2,r.maxStorage=i.readUshort(t,e),e+=2,r.maxFunctionDefs=i.readUshort(t,e),e+=2,r.maxInstructionDefs=i.readUshort(t,e),e+=2,r.maxStackElements=i.readUshort(t,e),e+=2,r.maxSizeOfInstructions=i.readUshort(t,e),e+=2,r.maxComponentElements=i.readUshort(t,e),e+=2,r.maxComponentDepth=i.readUshort(t,e),e+=2),r},n.name={},n.name.parse=function(t,e,a){var i=n._bin,r={};i.readUshort(t,e),e+=2;var o=i.readUshort(t,e);e+=2,i.readUshort(t,e);for(var s,l=["copyright","fontFamily","fontSubfamily","ID","fullName","version","postScriptName","trademark","manufacturer","designer","description","urlVendor","urlDesigner","licence","licenceURL","---","typoFamilyName","typoSubfamilyName","compatibleFull","sampleText","postScriptCID","wwsFamilyName","wwsSubfamilyName","lightPalette","darkPalette"],c=e+=2,f=0;f<o;f++){var p=i.readUshort(t,e);e+=2;var g=i.readUshort(t,e);e+=2;var y=i.readUshort(t,e);e+=2;var O=i.readUshort(t,e);e+=2;var T=i.readUshort(t,e);e+=2;var _=i.readUshort(t,e);e+=2;var m,w=l[O],M=c+12*o+_;if(p==0)m=i.readUnicode(t,M,T/2);else if(p==3&&g==0)m=i.readUnicode(t,M,T/2);else if(g==0)m=i.readASCII(t,M,T);else if(g==1)m=i.readUnicode(t,M,T/2);else if(g==3)m=i.readUnicode(t,M,T/2);else{if(p!=1)throw"unknown encoding "+g+", platformID: "+p;m=i.readASCII(t,M,T),console.debug("reading unknown MAC encoding "+g+" as ASCII")}var x="p"+p+","+y.toString(16);r[x]==null&&(r[x]={}),r[x][w!==void 0?w:O]=m,r[x]._lang=y}for(var S in r)if(r[S].postScriptName!=null&&r[S]._lang==1033)return r[S];for(var S in r)if(r[S].postScriptName!=null&&r[S]._lang==0)return r[S];for(var S in r)if(r[S].postScriptName!=null&&r[S]._lang==3084)return r[S];for(var S in r)if(r[S].postScriptName!=null)return r[S];for(var S in r){s=S;break}return console.debug("returning name table with languageID "+r[s]._lang),r[s]},n["OS/2"]={},n["OS/2"].parse=function(t,e,a){var i=n._bin.readUshort(t,e);e+=2;var r={};if(i==0)n["OS/2"].version0(t,e,r);else if(i==1)n["OS/2"].version1(t,e,r);else if(i==2||i==3||i==4)n["OS/2"].version2(t,e,r);else{if(i!=5)throw"unknown OS/2 table version: "+i;n["OS/2"].version5(t,e,r)}return r},n["OS/2"].version0=function(t,e,a){var i=n._bin;return a.xAvgCharWidth=i.readShort(t,e),e+=2,a.usWeightClass=i.readUshort(t,e),e+=2,a.usWidthClass=i.readUshort(t,e),e+=2,a.fsType=i.readUshort(t,e),e+=2,a.ySubscriptXSize=i.readShort(t,e),e+=2,a.ySubscriptYSize=i.readShort(t,e),e+=2,a.ySubscriptXOffset=i.readShort(t,e),e+=2,a.ySubscriptYOffset=i.readShort(t,e),e+=2,a.ySuperscriptXSize=i.readShort(t,e),e+=2,a.ySuperscriptYSize=i.readShort(t,e),e+=2,a.ySuperscriptXOffset=i.readShort(t,e),e+=2,a.ySuperscriptYOffset=i.readShort(t,e),e+=2,a.yStrikeoutSize=i.readShort(t,e),e+=2,a.yStrikeoutPosition=i.readShort(t,e),e+=2,a.sFamilyClass=i.readShort(t,e),e+=2,a.panose=i.readBytes(t,e,10),e+=10,a.ulUnicodeRange1=i.readUint(t,e),e+=4,a.ulUnicodeRange2=i.readUint(t,e),e+=4,a.ulUnicodeRange3=i.readUint(t,e),e+=4,a.ulUnicodeRange4=i.readUint(t,e),e+=4,a.achVendID=[i.readInt8(t,e),i.readInt8(t,e+1),i.readInt8(t,e+2),i.readInt8(t,e+3)],e+=4,a.fsSelection=i.readUshort(t,e),e+=2,a.usFirstCharIndex=i.readUshort(t,e),e+=2,a.usLastCharIndex=i.readUshort(t,e),e+=2,a.sTypoAscender=i.readShort(t,e),e+=2,a.sTypoDescender=i.readShort(t,e),e+=2,a.sTypoLineGap=i.readShort(t,e),e+=2,a.usWinAscent=i.readUshort(t,e),e+=2,a.usWinDescent=i.readUshort(t,e),e+=2},n["OS/2"].version1=function(t,e,a){var i=n._bin;return e=n["OS/2"].version0(t,e,a),a.ulCodePageRange1=i.readUint(t,e),e+=4,a.ulCodePageRange2=i.readUint(t,e),e+=4},n["OS/2"].version2=function(t,e,a){var i=n._bin;return e=n["OS/2"].version1(t,e,a),a.sxHeight=i.readShort(t,e),e+=2,a.sCapHeight=i.readShort(t,e),e+=2,a.usDefault=i.readUshort(t,e),e+=2,a.usBreak=i.readUshort(t,e),e+=2,a.usMaxContext=i.readUshort(t,e),e+=2},n["OS/2"].version5=function(t,e,a){var i=n._bin;return e=n["OS/2"].version2(t,e,a),a.usLowerOpticalPointSize=i.readUshort(t,e),e+=2,a.usUpperOpticalPointSize=i.readUshort(t,e),e+=2},n.post={},n.post.parse=function(t,e,a){var i=n._bin,r={};return r.version=i.readFixed(t,e),e+=4,r.italicAngle=i.readFixed(t,e),e+=4,r.underlinePosition=i.readShort(t,e),e+=2,r.underlineThickness=i.readShort(t,e),e+=2,r},n==null&&(n={}),n.U==null&&(n.U={}),n.U.codeToGlyph=function(t,e){var a=t.cmap,i=-1;if(a.p0e4!=null?i=a.p0e4:a.p3e1!=null?i=a.p3e1:a.p1e0!=null?i=a.p1e0:a.p0e3!=null&&(i=a.p0e3),i==-1)throw"no familiar platform and encoding!";var r=a.tables[i];if(r.format==0)return e>=r.map.length?0:r.map[e];if(r.format==4){for(var o=-1,s=0;s<r.endCount.length;s++)if(e<=r.endCount[s]){o=s;break}return o==-1||r.startCount[o]>e?0:65535&(r.idRangeOffset[o]!=0?r.glyphIdArray[e-r.startCount[o]+(r.idRangeOffset[o]>>1)-(r.idRangeOffset.length-o)]:e+r.idDelta[o])}if(r.format==12){if(e>r.groups[r.groups.length-1][1])return 0;for(s=0;s<r.groups.length;s++){var l=r.groups[s];if(l[0]<=e&&e<=l[1])return l[2]+(e-l[0])}return 0}throw"unknown cmap table format "+r.format},n.U.glyphToPath=function(t,e){var a={cmds:[],crds:[]};if(t.SVG&&t.SVG.entries[e]){var i=t.SVG.entries[e];return i==null?a:(typeof i=="string"&&(i=n.SVG.toPath(i),t.SVG.entries[e]=i),i)}if(t.CFF){var r={x:0,y:0,stack:[],nStems:0,haveWidth:!1,width:t.CFF.Private?t.CFF.Private.defaultWidthX:0,open:!1},o=t.CFF,s=t.CFF.Private;if(o.ROS){for(var l=0;o.FDSelect[l+2]<=e;)l+=2;s=o.FDArray[o.FDSelect[l+1]].Private}n.U._drawCFF(t.CFF.CharStrings[e],r,o,s,a)}else t.glyf&&n.U._drawGlyf(e,t,a);return a},n.U._drawGlyf=function(t,e,a){var i=e.glyf[t];i==null&&(i=e.glyf[t]=n.glyf._parseGlyf(e,t)),i!=null&&(i.noc>-1?n.U._simpleGlyph(i,a):n.U._compoGlyph(i,e,a))},n.U._simpleGlyph=function(t,e){for(var a=0;a<t.noc;a++){for(var i=a==0?0:t.endPts[a-1]+1,r=t.endPts[a],o=i;o<=r;o++){var s=o==i?r:o-1,l=o==r?i:o+1,c=1&t.flags[o],f=1&t.flags[s],p=1&t.flags[l],g=t.xs[o],y=t.ys[o];if(o==i)if(c){if(!f){n.U.P.moveTo(e,g,y);continue}n.U.P.moveTo(e,t.xs[s],t.ys[s])}else f?n.U.P.moveTo(e,t.xs[s],t.ys[s]):n.U.P.moveTo(e,(t.xs[s]+g)/2,(t.ys[s]+y)/2);c?f&&n.U.P.lineTo(e,g,y):p?n.U.P.qcurveTo(e,g,y,t.xs[l],t.ys[l]):n.U.P.qcurveTo(e,g,y,(g+t.xs[l])/2,(y+t.ys[l])/2)}n.U.P.closePath(e)}},n.U._compoGlyph=function(t,e,a){for(var i=0;i<t.parts.length;i++){var r={cmds:[],crds:[]},o=t.parts[i];n.U._drawGlyf(o.glyphIndex,e,r);for(var s=o.m,l=0;l<r.crds.length;l+=2){var c=r.crds[l],f=r.crds[l+1];a.crds.push(c*s.a+f*s.b+s.tx),a.crds.push(c*s.c+f*s.d+s.ty)}for(l=0;l<r.cmds.length;l++)a.cmds.push(r.cmds[l])}},n.U._getGlyphClass=function(t,e){var a=n._lctf.getInterval(e,t);return a==-1?0:e[a+2]},n.U._applySubs=function(t,e,a,i){for(var r=t.length-e-1,o=0;o<a.tabs.length;o++)if(a.tabs[o]!=null){var s,l=a.tabs[o];if(!l.coverage||(s=n._lctf.coverageIndex(l.coverage,t[e]))!=-1){if(a.ltype==1)t[e],l.fmt==1?t[e]=t[e]+l.delta:t[e]=l.newg[s];else if(a.ltype==4)for(var c=l.vals[s],f=0;f<c.length;f++){var p=c[f],g=p.chain.length;if(!(g>r)){for(var y=!0,O=0,T=0;T<g;T++){for(;t[e+O+(1+T)]==-1;)O++;p.chain[T]!=t[e+O+(1+T)]&&(y=!1)}if(y){for(t[e]=p.nglyph,T=0;T<g+O;T++)t[e+T+1]=-1;break}}}else if(a.ltype==5&&l.fmt==2)for(var _=n._lctf.getInterval(l.cDef,t[e]),m=l.cDef[_+2],w=l.scset[m],M=0;M<w.length;M++){var x=w[M],S=x.input;if(!(S.length>r)){for(y=!0,T=0;T<S.length;T++){var L=n._lctf.getInterval(l.cDef,t[e+1+T]);if(_==-1&&l.cDef[L+2]!=S[T]){y=!1;break}}if(y){var F=x.substLookupRecords;for(f=0;f<F.length;f+=2)F[f],F[f+1]}}}else if(a.ltype==6&&l.fmt==3){if(!n.U._glsCovered(t,l.backCvg,e-l.backCvg.length)||!n.U._glsCovered(t,l.inptCvg,e)||!n.U._glsCovered(t,l.ahedCvg,e+l.inptCvg.length))continue;var Y=l.lookupRec;for(M=0;M<Y.length;M+=2){_=Y[M];var b=i[Y[M+1]];n.U._applySubs(t,e+_,b,i)}}}}},n.U._glsCovered=function(t,e,a){for(var i=0;i<e.length;i++)if(n._lctf.coverageIndex(e[i],t[a+i])==-1)return!1;return!0},n.U.glyphsToPath=function(t,e,a){for(var i={cmds:[],crds:[]},r=0,o=0;o<e.length;o++){var s=e[o];if(s!=-1){for(var l=o<e.length-1&&e[o+1]!=-1?e[o+1]:0,c=n.U.glyphToPath(t,s),f=0;f<c.crds.length;f+=2)i.crds.push(c.crds[f]+r),i.crds.push(c.crds[f+1]);for(a&&i.cmds.push(a),f=0;f<c.cmds.length;f++)i.cmds.push(c.cmds[f]);a&&i.cmds.push("X"),r+=t.hmtx.aWidth[s],o<e.length-1&&(r+=n.U.getPairAdjustment(t,s,l))}}return i},n.U.P={},n.U.P.moveTo=function(t,e,a){t.cmds.push("M"),t.crds.push(e,a)},n.U.P.lineTo=function(t,e,a){t.cmds.push("L"),t.crds.push(e,a)},n.U.P.curveTo=function(t,e,a,i,r,o,s){t.cmds.push("C"),t.crds.push(e,a,i,r,o,s)},n.U.P.qcurveTo=function(t,e,a,i,r){t.cmds.push("Q"),t.crds.push(e,a,i,r)},n.U.P.closePath=function(t){t.cmds.push("Z")},n.U._drawCFF=function(t,e,a,i,r){for(var o=e.stack,s=e.nStems,l=e.haveWidth,c=e.width,f=e.open,p=0,g=e.x,y=e.y,O=0,T=0,_=0,m=0,w=0,M=0,x=0,S=0,L=0,F=0,Y={val:0,size:0};p<t.length;){n.CFF.getCharString(t,p,Y);var b=Y.val;if(p+=Y.size,b=="o1"||b=="o18")o.length%2!=0&&!l&&(c=o.shift()+i.nominalWidthX),s+=o.length>>1,o.length=0,l=!0;else if(b=="o3"||b=="o23")o.length%2!=0&&!l&&(c=o.shift()+i.nominalWidthX),s+=o.length>>1,o.length=0,l=!0;else if(b=="o4")o.length>1&&!l&&(c=o.shift()+i.nominalWidthX,l=!0),f&&n.U.P.closePath(r),y+=o.pop(),n.U.P.moveTo(r,g,y),f=!0;else if(b=="o5")for(;o.length>0;)g+=o.shift(),y+=o.shift(),n.U.P.lineTo(r,g,y);else if(b=="o6"||b=="o7")for(var A=o.length,U=b=="o6",W=0;W<A;W++){var j=o.shift();U?g+=j:y+=j,U=!U,n.U.P.lineTo(r,g,y)}else if(b=="o8"||b=="o24"){A=o.length;for(var Q=0;Q+6<=A;)O=g+o.shift(),T=y+o.shift(),_=O+o.shift(),m=T+o.shift(),g=_+o.shift(),y=m+o.shift(),n.U.P.curveTo(r,O,T,_,m,g,y),Q+=6;b=="o24"&&(g+=o.shift(),y+=o.shift(),n.U.P.lineTo(r,g,y))}else{if(b=="o11")break;if(b=="o1234"||b=="o1235"||b=="o1236"||b=="o1237")b=="o1234"&&(T=y,_=(O=g+o.shift())+o.shift(),F=m=T+o.shift(),M=m,S=y,g=(x=(w=(L=_+o.shift())+o.shift())+o.shift())+o.shift(),n.U.P.curveTo(r,O,T,_,m,L,F),n.U.P.curveTo(r,w,M,x,S,g,y)),b=="o1235"&&(O=g+o.shift(),T=y+o.shift(),_=O+o.shift(),m=T+o.shift(),L=_+o.shift(),F=m+o.shift(),w=L+o.shift(),M=F+o.shift(),x=w+o.shift(),S=M+o.shift(),g=x+o.shift(),y=S+o.shift(),o.shift(),n.U.P.curveTo(r,O,T,_,m,L,F),n.U.P.curveTo(r,w,M,x,S,g,y)),b=="o1236"&&(O=g+o.shift(),T=y+o.shift(),_=O+o.shift(),F=m=T+o.shift(),M=m,x=(w=(L=_+o.shift())+o.shift())+o.shift(),S=M+o.shift(),g=x+o.shift(),n.U.P.curveTo(r,O,T,_,m,L,F),n.U.P.curveTo(r,w,M,x,S,g,y)),b=="o1237"&&(O=g+o.shift(),T=y+o.shift(),_=O+o.shift(),m=T+o.shift(),L=_+o.shift(),F=m+o.shift(),w=L+o.shift(),M=F+o.shift(),x=w+o.shift(),S=M+o.shift(),Math.abs(x-g)>Math.abs(S-y)?g=x+o.shift():y=S+o.shift(),n.U.P.curveTo(r,O,T,_,m,L,F),n.U.P.curveTo(r,w,M,x,S,g,y));else if(b=="o14"){if(o.length>0&&!l&&(c=o.shift()+a.nominalWidthX,l=!0),o.length==4){var ne=o.shift(),B=o.shift(),R=o.shift(),v=o.shift(),k=n.CFF.glyphBySE(a,R),C=n.CFF.glyphBySE(a,v);n.U._drawCFF(a.CharStrings[k],e,a,i,r),e.x=ne,e.y=B,n.U._drawCFF(a.CharStrings[C],e,a,i,r)}f&&(n.U.P.closePath(r),f=!1)}else if(b=="o19"||b=="o20")o.length%2!=0&&!l&&(c=o.shift()+i.nominalWidthX),s+=o.length>>1,o.length=0,l=!0,p+=s+7>>3;else if(b=="o21")o.length>2&&!l&&(c=o.shift()+i.nominalWidthX,l=!0),y+=o.pop(),g+=o.pop(),f&&n.U.P.closePath(r),n.U.P.moveTo(r,g,y),f=!0;else if(b=="o22")o.length>1&&!l&&(c=o.shift()+i.nominalWidthX,l=!0),g+=o.pop(),f&&n.U.P.closePath(r),n.U.P.moveTo(r,g,y),f=!0;else if(b=="o25"){for(;o.length>6;)g+=o.shift(),y+=o.shift(),n.U.P.lineTo(r,g,y);O=g+o.shift(),T=y+o.shift(),_=O+o.shift(),m=T+o.shift(),g=_+o.shift(),y=m+o.shift(),n.U.P.curveTo(r,O,T,_,m,g,y)}else if(b=="o26")for(o.length%2&&(g+=o.shift());o.length>0;)O=g,T=y+o.shift(),g=_=O+o.shift(),y=(m=T+o.shift())+o.shift(),n.U.P.curveTo(r,O,T,_,m,g,y);else if(b=="o27")for(o.length%2&&(y+=o.shift());o.length>0;)T=y,_=(O=g+o.shift())+o.shift(),m=T+o.shift(),g=_+o.shift(),y=m,n.U.P.curveTo(r,O,T,_,m,g,y);else if(b=="o10"||b=="o29"){var D=b=="o10"?i:a;if(o.length==0)console.debug("error: empty stack");else{var E=o.pop(),N=D.Subrs[E+D.Bias];e.x=g,e.y=y,e.nStems=s,e.haveWidth=l,e.width=c,e.open=f,n.U._drawCFF(N,e,a,i,r),g=e.x,y=e.y,s=e.nStems,l=e.haveWidth,c=e.width,f=e.open}}else if(b=="o30"||b=="o31"){var P=o.length,I=(Q=0,b=="o31");for(Q+=P-(A=-3&P);Q<A;)I?(T=y,_=(O=g+o.shift())+o.shift(),y=(m=T+o.shift())+o.shift(),A-Q==5?(g=_+o.shift(),Q++):g=_,I=!1):(O=g,T=y+o.shift(),_=O+o.shift(),m=T+o.shift(),g=_+o.shift(),A-Q==5?(y=m+o.shift(),Q++):y=m,I=!0),n.U.P.curveTo(r,O,T,_,m,g,y),Q+=4}else{if((b+"").charAt(0)=="o")throw console.debug("Unknown operation: "+b,t),b;o.push(b)}}}e.x=g,e.y=y,e.nStems=s,e.haveWidth=l,e.width=c,e.open=f};var d=n,u={Typr:d};return h.Typr=d,h.default=u,Object.defineProperty(h,"__esModule",{value:!0}),h}({}).Typr}/*!
Custom bundle of woff2otf (https://github.com/arty-name/woff2otf) with fflate
(https://github.com/101arrowz/fflate) for use in Troika text rendering. 
Original licenses apply: 
- fflate: https://github.com/101arrowz/fflate/blob/master/LICENSE (MIT)
- woff2otf.js: https://github.com/arty-name/woff2otf/blob/master/woff2otf.js (Apache2)
*/function Ro(){return function(h){var n=Uint8Array,d=Uint16Array,u=Uint32Array,t=new n([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),e=new n([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),a=new n([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),i=function(b,A){for(var U=new d(31),W=0;W<31;++W)U[W]=A+=1<<b[W-1];var j=new u(U[30]);for(W=1;W<30;++W)for(var Q=U[W];Q<U[W+1];++Q)j[Q]=Q-U[W]<<5|W;return[U,j]},r=i(t,2),o=r[0],s=r[1];o[28]=258,s[258]=28;for(var l=i(e,0)[0],c=new d(32768),f=0;f<32768;++f){var p=(43690&f)>>>1|(21845&f)<<1;p=(61680&(p=(52428&p)>>>2|(13107&p)<<2))>>>4|(3855&p)<<4,c[f]=((65280&p)>>>8|(255&p)<<8)>>>1}var g=function(b,A,U){for(var W=b.length,j=0,Q=new d(A);j<W;++j)++Q[b[j]-1];var ne,B=new d(A);for(j=0;j<A;++j)B[j]=B[j-1]+Q[j-1]<<1;{ne=new d(1<<A);var R=15-A;for(j=0;j<W;++j)if(b[j])for(var v=j<<4|b[j],k=A-b[j],C=B[b[j]-1]++<<k,D=C|(1<<k)-1;C<=D;++C)ne[c[C]>>>R]=v}return ne},y=new n(288);for(f=0;f<144;++f)y[f]=8;for(f=144;f<256;++f)y[f]=9;for(f=256;f<280;++f)y[f]=7;for(f=280;f<288;++f)y[f]=8;var O=new n(32);for(f=0;f<32;++f)O[f]=5;var T=g(y,9),_=g(O,5),m=function(b){for(var A=b[0],U=1;U<b.length;++U)b[U]>A&&(A=b[U]);return A},w=function(b,A,U){var W=A/8|0;return(b[W]|b[W+1]<<8)>>(7&A)&U},M=function(b,A){var U=A/8|0;return(b[U]|b[U+1]<<8|b[U+2]<<16)>>(7&A)},x=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],S=function(b,A,U){var W=new Error(A||x[b]);if(W.code=b,Error.captureStackTrace&&Error.captureStackTrace(W,S),!U)throw W;return W},L=function(b,A,U){var W=b.length;if(!W||U&&!U.l&&W<5)return A||new n(0);var j=!A||U,Q=!U||U.i;U||(U={}),A||(A=new n(3*W));var ne,B=function(ue){var De=A.length;if(ue>De){var Ue=new n(Math.max(2*De,ue));Ue.set(A),A=Ue}},R=U.f||0,v=U.p||0,k=U.b||0,C=U.l,D=U.d,E=U.m,N=U.n,P=8*W;do{if(!C){U.f=R=w(b,v,1);var I=w(b,v+1,3);if(v+=3,!I){var q=b[($=((ne=v)/8|0)+(7&ne&&1)+4)-4]|b[$-3]<<8,ee=$+q;if(ee>W){Q&&S(0);break}j&&B(k+q),A.set(b.subarray($,ee),k),U.b=k+=q,U.p=v=8*ee;continue}if(I==1)C=T,D=_,E=9,N=5;else if(I==2){var H=w(b,v,31)+257,z=w(b,v+10,15)+4,ge=H+w(b,v+5,31)+1;v+=14;for(var fe=new n(ge),J=new n(19),te=0;te<z;++te)J[a[te]]=w(b,v+3*te,7);v+=3*z;var le=m(J),V=(1<<le)-1,re=g(J,le);for(te=0;te<ge;){var $,G=re[w(b,v,V)];if(v+=15&G,($=G>>>4)<16)fe[te++]=$;else{var de=0,K=0;for($==16?(K=3+w(b,v,3),v+=2,de=fe[te-1]):$==17?(K=3+w(b,v,7),v+=3):$==18&&(K=11+w(b,v,127),v+=7);K--;)fe[te++]=de}}var ae=fe.subarray(0,H),Z=fe.subarray(H);E=m(ae),N=m(Z),C=g(ae,E),D=g(Z,N)}else S(1);if(v>P){Q&&S(0);break}}j&&B(k+131072);for(var we=(1<<E)-1,oe=(1<<N)-1,ie=v;;ie=v){var ce=(de=C[M(b,v)&we])>>>4;if((v+=15&de)>P){Q&&S(0);break}if(de||S(2),ce<256)A[k++]=ce;else{if(ce==256){ie=v,C=null;break}var pe=ce-254;if(ce>264){var ke=t[te=ce-257];pe=w(b,v,(1<<ke)-1)+o[te],v+=ke}var Ae=D[M(b,v)&oe],me=Ae>>>4;if(Ae||S(3),v+=15&Ae,Z=l[me],me>3&&(ke=e[me],Z+=M(b,v)&(1<<ke)-1,v+=ke),v>P){Q&&S(0);break}j&&B(k+131072);for(var ye=k+pe;k<ye;k+=4)A[k]=A[k-Z],A[k+1]=A[k+1-Z],A[k+2]=A[k+2-Z],A[k+3]=A[k+3-Z];k=ye}}U.l=C,U.p=ie,U.b=k,C&&(R=1,U.m=E,U.d=D,U.n=N)}while(!R);return k==A.length?A:function(ue,De,Ue){(Ue==null||Ue>ue.length)&&(Ue=ue.length);var Be=new(ue instanceof d?d:ue instanceof u?u:n)(Ue-De);return Be.set(ue.subarray(De,Ue)),Be}(A,0,k)},F=new n(0),Y=typeof TextDecoder<"u"&&new TextDecoder;try{Y.decode(F,{stream:!0})}catch{}return h.convert_streams=function(b){var A=new DataView(b),U=0;function W(){var H=A.getUint16(U);return U+=2,H}function j(){var H=A.getUint32(U);return U+=4,H}function Q(H){q.setUint16(ee,H),ee+=2}function ne(H){q.setUint32(ee,H),ee+=4}for(var B={signature:j(),flavor:j(),length:j(),numTables:W(),reserved:W(),totalSfntSize:j(),majorVersion:W(),minorVersion:W(),metaOffset:j(),metaLength:j(),metaOrigLength:j(),privOffset:j(),privLength:j()},R=0;Math.pow(2,R)<=B.numTables;)R++;R--;for(var v=16*Math.pow(2,R),k=16*B.numTables-v,C=12,D=[],E=0;E<B.numTables;E++)D.push({tag:j(),offset:j(),compLength:j(),origLength:j(),origChecksum:j()}),C+=16;var N,P=new Uint8Array(12+16*D.length+D.reduce(function(H,z){return H+z.origLength+4},0)),I=P.buffer,q=new DataView(I),ee=0;return ne(B.flavor),Q(B.numTables),Q(v),Q(R),Q(k),D.forEach(function(H){ne(H.tag),ne(H.origChecksum),ne(C),ne(H.origLength),H.outOffset=C,(C+=H.origLength)%4!=0&&(C+=4-C%4)}),D.forEach(function(H){var z,ge=b.slice(H.offset,H.offset+H.compLength);if(H.compLength!=H.origLength){var fe=new Uint8Array(H.origLength);z=new Uint8Array(ge,2),L(z,fe)}else fe=new Uint8Array(ge);P.set(fe,H.outOffset);var J=0;(C=H.outOffset+H.origLength)%4!=0&&(J=4-C%4),P.set(new Uint8Array(J).buffer,H.outOffset+H.origLength),N=C+J}),I.slice(0,N)},Object.defineProperty(h,"__esModule",{value:!0}),h}({}).convert_streams}function Go(h,n){const d={M:2,L:2,Q:4,C:6,Z:0},u={C:"18g,ca,368,1kz",D:"17k,6,2,2+4,5+c,2+6,2+1,10+1,9+f,j+11,2+1,a,2,2+1,15+2,3,j+2,6+3,2+8,2,2,2+1,w+a,4+e,3+3,2,3+2,3+5,23+w,2f+4,3,2+9,2,b,2+3,3,1k+9,6+1,3+1,2+2,2+d,30g,p+y,1,1+1g,f+x,2,sd2+1d,jf3+4,f+3,2+4,2+2,b+3,42,2,4+2,2+1,2,3,t+1,9f+w,2,el+2,2+g,d+2,2l,2+1,5,3+1,2+1,2,3,6,16wm+1v",R:"17m+3,2,2,6+3,m,15+2,2+2,h+h,13,3+8,2,2,3+1,2,p+1,x,5+4,5,a,2,2,3,u,c+2,g+1,5,2+1,4+1,5j,6+1,2,b,2+2,f,2+1,1s+2,2,3+1,7,1ez0,2,2+1,4+4,b,4,3,b,42,2+2,4,3,2+1,2,o+3,ae,ep,x,2o+2,3+1,3,5+1,6",L:"x9u,jff,a,fd,jv",T:"4t,gj+33,7o+4,1+1,7c+18,2,2+1,2+1,2,21+a,2,1b+k,h,2u+6,3+5,3+1,2+3,y,2,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,3,7,6+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+d,1,1+1,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,ek,3+1,r+4,1e+4,6+5,2p+c,1+3,1,1+2,1+b,2db+2,3y,2p+v,ff+3,30+1,n9x,1+2,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,5s,6y+2,ea,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+9,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2,2b+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,470+8,at4+4,1o+6,t5,1s+3,2a,f5l+1,2+3,43o+2,a+7,1+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,1,gzau,v+2n,3l+6n"},t=1,e=2,a=4,i=8,r=16,o=32;let s;function l(x){if(!s){const S={R:e,L:t,D:a,C:r,U:o,T:i};s=new Map;for(let L in u){let F=0;u[L].split(",").forEach(Y=>{let[b,A]=Y.split("+");b=parseInt(b,36),A=A?parseInt(A,36):0,s.set(F+=b,S[L]);for(let U=A;U--;)s.set(++F,S[L])})}}return s.get(x)||o}const c=1,f=2,p=3,g=4,y=[null,"isol","init","fina","medi"];function O(x){const S=new Uint8Array(x.length);let L=o,F=c,Y=-1;for(let b=0;b<x.length;b++){const A=x.codePointAt(b);let U=l(A)|0,W=c;U&i||(L&(t|a|r)?U&(e|a|r)?(W=p,(F===c||F===p)&&S[Y]++):U&(t|o)&&(F===f||F===g)&&S[Y]--:L&(e|o)&&(F===f||F===g)&&S[Y]--,F=S[b]=W,L=U,Y=b,A>65535&&b++)}return S}function T(x,S){const L=[];for(let Y=0;Y<S.length;Y++){const b=S.codePointAt(Y);b>65535&&Y++,L.push(h.U.codeToGlyph(x,b))}const F=x.GSUB;if(F){const{lookupList:Y,featureList:b}=F;let A;const U=/^(rlig|liga|mset|isol|init|fina|medi|half|pres|blws|ccmp)$/,W=[];b.forEach(j=>{if(U.test(j.tag))for(let Q=0;Q<j.tab.length;Q++){if(W[j.tab[Q]])continue;W[j.tab[Q]]=!0;const ne=Y[j.tab[Q]],B=/^(isol|init|fina|medi)$/.test(j.tag);B&&!A&&(A=O(S));for(let R=0;R<L.length;R++)(!A||!B||y[A[R]]===j.tag)&&h.U._applySubs(L,R,ne,Y)}})}return L}function _(x,S){const L=new Int16Array(S.length*3);let F=0;for(;F<S.length;F++){const U=S[F];if(U===-1)continue;L[F*3+2]=x.hmtx.aWidth[U];const W=x.GPOS;if(W){const j=W.lookupList;for(let Q=0;Q<j.length;Q++){const ne=j[Q];for(let B=0;B<ne.tabs.length;B++){const R=ne.tabs[B];if(ne.ltype===1){if(h._lctf.coverageIndex(R.coverage,U)!==-1&&R.pos){A(R.pos,F);break}}else if(ne.ltype===2){let v=null,k=Y();if(k!==-1){const C=h._lctf.coverageIndex(R.coverage,S[k]);if(C!==-1){if(R.fmt===1){const D=R.pairsets[C];for(let E=0;E<D.length;E++)D[E].gid2===U&&(v=D[E])}else if(R.fmt===2){const D=h.U._getGlyphClass(S[k],R.classDef1),E=h.U._getGlyphClass(U,R.classDef2);v=R.matrix[D][E]}if(v){v.val1&&A(v.val1,k),v.val2&&A(v.val2,F);break}}}}else if(ne.ltype===4){const v=h._lctf.coverageIndex(R.markCoverage,U);if(v!==-1){const k=Y(b),C=k===-1?-1:h._lctf.coverageIndex(R.baseCoverage,S[k]);if(C!==-1){const D=R.markArray[v],E=R.baseArray[C][D.markClass];L[F*3]=E.x-D.x+L[k*3]-L[k*3+2],L[F*3+1]=E.y-D.y+L[k*3+1];break}}}else if(ne.ltype===6){const v=h._lctf.coverageIndex(R.mark1Coverage,U);if(v!==-1){const k=Y();if(k!==-1){const C=S[k];if(m(x,C)===3){const D=h._lctf.coverageIndex(R.mark2Coverage,C);if(D!==-1){const E=R.mark1Array[v],N=R.mark2Array[D][E.markClass];L[F*3]=N.x-E.x+L[k*3]-L[k*3+2],L[F*3+1]=N.y-E.y+L[k*3+1];break}}}}}}}}else if(x.kern&&!x.cff){const j=Y();if(j!==-1){const Q=x.kern.glyph1.indexOf(S[j]);if(Q!==-1){const ne=x.kern.rval[Q].glyph2.indexOf(U);ne!==-1&&(L[j*3+2]+=x.kern.rval[Q].vals[ne])}}}}return L;function Y(U){for(let W=F-1;W>=0;W--)if(S[W]!==-1&&(!U||U(S[W])))return W;return-1}function b(U){return m(x,U)===1}function A(U,W){for(let j=0;j<3;j++)L[W*3+j]+=U[j]||0}}function m(x,S){const L=x.GDEF&&x.GDEF.glyphClassDef;return L?h.U._getGlyphClass(S,L):0}function w(...x){for(let S=0;S<x.length;S++)if(typeof x[S]=="number")return x[S]}function M(x){const S=Object.create(null),L=x["OS/2"],F=x.hhea,Y=x.head.unitsPerEm,b=w(L&&L.sTypoAscender,F&&F.ascender,Y),A={unitsPerEm:Y,ascender:b,descender:w(L&&L.sTypoDescender,F&&F.descender,0),capHeight:w(L&&L.sCapHeight,b),xHeight:w(L&&L.sxHeight,b),lineGap:w(L&&L.sTypoLineGap,F&&F.lineGap),supportsCodePoint(U){return h.U.codeToGlyph(x,U)>0},forEachGlyph(U,W,j,Q){let ne=0;const B=1/A.unitsPerEm*W,R=T(x,U);let v=0;const k=_(x,R);return R.forEach((C,D)=>{if(C!==-1){let E=S[C];if(!E){const{cmds:N,crds:P}=h.U.glyphToPath(x,C);let I="",q=0;for(let fe=0,J=N.length;fe<J;fe++){const te=d[N[fe]];I+=N[fe];for(let le=1;le<=te;le++)I+=(le>1?",":"")+P[q++]}let ee,H,z,ge;if(P.length){ee=H=1/0,z=ge=-1/0;for(let fe=0,J=P.length;fe<J;fe+=2){let te=P[fe],le=P[fe+1];te<ee&&(ee=te),le<H&&(H=le),te>z&&(z=te),le>ge&&(ge=le)}}else ee=z=H=ge=0;E=S[C]={index:C,advanceWidth:x.hmtx.aWidth[C],xMin:ee,yMin:H,xMax:z,yMax:ge,path:I}}Q.call(null,E,ne+k[D*3]*B,k[D*3+1]*B,v),ne+=k[D*3+2]*B,j&&(ne+=j*W)}v+=U.codePointAt(v)>65535?2:1}),ne}};return A}return function(S){const L=new Uint8Array(S,0,4),F=h._bin.readASCII(L,0,4);if(F==="wOFF")S=n(S);else if(F==="wOF2")throw new Error("woff2 fonts not supported");return M(h.parse(S)[0])}}const Bo=ct({name:"Typr Font Parser",dependencies:[Lo,Ro,Go],init(h,n,d){const u=h(),t=n();return d(u,t)}});/*!
Custom bundle of @unicode-font-resolver/client v1.0.2 (https://github.com/lojjic/unicode-font-resolver)
for use in Troika text rendering. 
Original MIT license applies
*/function Io(){return function(h){var n=function(){this.buckets=new Map};n.prototype.add=function(_){var m=_>>5;this.buckets.set(m,(this.buckets.get(m)||0)|1<<(31&_))},n.prototype.has=function(_){var m=this.buckets.get(_>>5);return m!==void 0&&(m&1<<(31&_))!=0},n.prototype.serialize=function(){var _=[];return this.buckets.forEach(function(m,w){_.push((+w).toString(36)+":"+m.toString(36))}),_.join(",")},n.prototype.deserialize=function(_){var m=this;this.buckets.clear(),_.split(",").forEach(function(w){var M=w.split(":");m.buckets.set(parseInt(M[0],36),parseInt(M[1],36))})};var d=Math.pow(2,8),u=d-1,t=~u;function e(_){var m=function(M){return M&t}(_).toString(16),w=function(M){return(M&t)+d-1}(_).toString(16);return"codepoint-index/plane"+(_>>16)+"/"+m+"-"+w+".json"}function a(_,m){var w=_&u,M=m.codePointAt(w/6|0);return((M=(M||48)-48)&1<<w%6)!=0}function i(_,m){var w;(w=_,w.replace(/U\+/gi,"").replace(/^,+|,+$/g,"").split(/,+/).map(function(M){return M.split("-").map(function(x){return parseInt(x.trim(),16)})})).forEach(function(M){var x=M[0],S=M[1];S===void 0&&(S=x),m(x,S)})}function r(_,m){i(_,function(w,M){for(var x=w;x<=M;x++)m(x)})}var o={},s={},l=new WeakMap,c="https://cdn.jsdelivr.net/gh/lojjic/unicode-font-resolver@v1.0.1/packages/data";function f(_){var m=l.get(_);return m||(m=new n,r(_.ranges,function(w){return m.add(w)}),l.set(_,m)),m}var p,g=new Map;function y(_,m,w){return _[m]?m:_[w]?w:function(M){for(var x in M)return x}(_)}function O(_,m){var w=m;if(!_.includes(w)){w=1/0;for(var M=0;M<_.length;M++)Math.abs(_[M]-m)<Math.abs(w-m)&&(w=_[M])}return w}function T(_){return p||(p=new Set,r("9-D,20,85,A0,1680,2000-200A,2028-202F,205F,3000",function(m){p.add(m)})),p.has(_)}return h.CodePointSet=n,h.clearCache=function(){o={},s={}},h.getFontsForString=function(_,m){m===void 0&&(m={});var w,M=m.lang;M===void 0&&(M=new RegExp("\\p{Script=Hangul}","u").test(w=_)?"ko":new RegExp("\\p{Script=Hiragana}|\\p{Script=Katakana}","u").test(w)?"ja":"en");var x=m.category;x===void 0&&(x="sans-serif");var S=m.style;S===void 0&&(S="normal");var L=m.weight;L===void 0&&(L=400);var F=(m.dataUrl||c).replace(/\/$/g,""),Y=new Map,b=new Uint8Array(_.length),A={},U={},W=new Array(_.length),j=new Map,Q=!1;function ne(v){var k=g.get(v);return k||(k=fetch(F+"/"+v).then(function(C){if(!C.ok)throw new Error(C.statusText);return C.json().then(function(D){if(!Array.isArray(D)||D[0]!==1)throw new Error("Incorrect schema version; need 1, got "+D[0]);return D[1]})}).catch(function(C){if(F!==c)return Q||(console.error('unicode-font-resolver: Failed loading from dataUrl "'+F+'", trying default CDN. '+C.message),Q=!0),F=c,g.delete(v),ne(v);throw C}),g.set(v,k)),k}for(var B=function(v){var k=_.codePointAt(v),C=e(k);W[v]=C,o[C]||j.has(C)||j.set(C,ne(C).then(function(D){o[C]=D})),k>65535&&(v++,R=v)},R=0;R<_.length;R++)B(R);return Promise.all(j.values()).then(function(){j.clear();for(var v=function(C){var D=_.codePointAt(C),E=null,N=o[W[C]],P=void 0;for(var I in N){var q=U[I];if(q===void 0&&(q=U[I]=new RegExp(I).test(M||"en")),q){for(var ee in P=I,N[I])if(a(D,N[I][ee])){E=ee;break}break}}if(!E){e:for(var H in N)if(H!==P){for(var z in N[H])if(a(D,N[H][z])){E=z;break e}}}E||(console.debug("No font coverage for U+"+D.toString(16)),E="latin"),W[C]=E,s[E]||j.has(E)||j.set(E,ne("font-meta/"+E+".json").then(function(ge){s[E]=ge})),D>65535&&(C++,k=C)},k=0;k<_.length;k++)v(k);return Promise.all(j.values())}).then(function(){for(var v,k=null,C=0;C<_.length;C++){var D=_.codePointAt(C);if(k&&(T(D)||f(k).has(D)))b[C]=b[C-1];else{k=s[W[C]];var E=A[k.id];if(!E){var N=k.typeforms,P=y(N,x,"sans-serif"),I=y(N[P],S,"normal"),q=O((v=N[P])===null||v===void 0?void 0:v[I],L);E=A[k.id]=F+"/font-files/"+k.id+"/"+P+"."+I+"."+q+".woff"}var ee=Y.get(E);ee==null&&(ee=Y.size,Y.set(E,ee)),b[C]=ee}D>65535&&(C++,b[C]=b[C-1])}return{fontUrls:Array.from(Y.keys()),chars:b}})},Object.defineProperty(h,"__esModule",{value:!0}),h}({})}function jo(h,n){const d=Object.create(null),u=Object.create(null);function t(a,i){const r=o=>{console.error(`Failure loading font ${a}`,o)};try{const o=new XMLHttpRequest;o.open("get",a,!0),o.responseType="arraybuffer",o.onload=function(){if(o.status>=400)r(new Error(o.statusText));else if(o.status>0)try{const s=h(o.response);s.src=a,i(s)}catch(s){r(s)}},o.onerror=r,o.send()}catch(o){r(o)}}function e(a,i){let r=d[a];r?i(r):u[a]?u[a].push(i):(u[a]=[i],t(a,o=>{o.src=a,d[a]=o,u[a].forEach(s=>s(o)),delete u[a]}))}return function(a,i,{lang:r,fonts:o=[],style:s="normal",weight:l="normal",unicodeFontsURL:c}={}){const f=new Uint8Array(a.length),p=[];a.length||T();const g=new Map,y=[];if(s!=="italic"&&(s="normal"),typeof l!="number"&&(l=l==="bold"?700:400),o&&!Array.isArray(o)&&(o=[o]),o=o.slice().filter(m=>!m.lang||m.lang.test(r)).reverse(),o.length){let x=0;(function S(L=0){for(let F=L,Y=a.length;F<Y;F++){const b=a.codePointAt(F);if(x===1&&p[f[F-1]].supportsCodePoint(b)||F>0&&/\s/.test(a[F]))f[F]=f[F-1],x===2&&(y[y.length-1][1]=F);else for(let A=f[F],U=o.length;A<=U;A++)if(A===U){const W=x===2?y[y.length-1]:y[y.length]=[F,F];W[1]=F,x=2}else{f[F]=A;const{src:W,unicodeRange:j}=o[A];if(!j||_(b,j)){const Q=d[W];if(!Q){e(W,()=>{S(F)});return}if(Q.supportsCodePoint(b)){let ne=g.get(Q);typeof ne!="number"&&(ne=p.length,p.push(Q),g.set(Q,ne)),f[F]=ne,x=1;break}}}b>65535&&F+1<Y&&(f[F+1]=f[F],F++,x===2&&(y[y.length-1][1]=F))}O()})()}else y.push([0,a.length-1]),O();function O(){if(y.length){const m=y.map(w=>a.substring(w[0],w[1]+1)).join(`
`);n.getFontsForString(m,{lang:r||void 0,style:s,weight:l,dataUrl:c}).then(({fontUrls:w,chars:M})=>{const x=p.length;let S=0;y.forEach(F=>{for(let Y=0,b=F[1]-F[0];Y<=b;Y++)f[F[0]+Y]=M[S++]+x;S++});let L=0;w.forEach((F,Y)=>{e(F,b=>{p[Y+x]=b,++L===w.length&&T()})})})}else T()}function T(){i({chars:f,fonts:p})}function _(m,w){for(let M=0;M<w.length;M++){const[x,S=x]=w[M];if(x<=m&&m<=S)return!0}return!1}}}const No=ct({name:"FontResolver",dependencies:[jo,Bo,Io],init(h,n,d){return h(n,d())}});function zo(h,n){const u=/[\u00AD\u034F\u061C\u115F-\u1160\u17B4-\u17B5\u180B-\u180E\u200B-\u200F\u202A-\u202E\u2060-\u206F\u3164\uFE00-\uFE0F\uFEFF\uFFA0\uFFF0-\uFFF8]/,t="[^\\S\\u00A0]",e=new RegExp(`${t}|[\\-\\u007C\\u00AD\\u2010\\u2012-\\u2014\\u2027\\u2056\\u2E17\\u2E40]`);function a({text:p,lang:g,fonts:y,style:O,weight:T,preResolvedFonts:_,unicodeFontsURL:m},w){const M=({chars:x,fonts:S})=>{let L,F;const Y=[];for(let b=0;b<x.length;b++)x[b]!==F?(F=x[b],Y.push(L={start:b,end:b,fontObj:S[x[b]]})):L.end=b;w(Y)};_?M(_):h(p,M,{lang:g,fonts:y,style:O,weight:T,unicodeFontsURL:m})}function i({text:p="",font:g,lang:y,sdfGlyphSize:O=64,fontSize:T=400,fontWeight:_=1,fontStyle:m="normal",letterSpacing:w=0,lineHeight:M="normal",maxWidth:x=1/0,direction:S,textAlign:L="left",textIndent:F=0,whiteSpace:Y="normal",overflowWrap:b="normal",anchorX:A=0,anchorY:U=0,metricsOnly:W=!1,unicodeFontsURL:j,preResolvedFonts:Q=null,includeCaretPositions:ne=!1,chunkedBoundsSize:B=8192,colorRanges:R=null},v){const k=l(),C={fontLoad:0,typesetting:0};p.indexOf("\r")>-1&&(console.info("Typesetter: got text with \\r chars; normalizing to \\n"),p=p.replace(/\r\n/g,`
`).replace(/\r/g,`
`)),T=+T,w=+w,x=+x,M=M||"normal",F=+F,a({text:p,lang:y,style:m,weight:_,fonts:typeof g=="string"?[{src:g}]:g,unicodeFontsURL:j,preResolvedFonts:Q},D=>{C.fontLoad=l()-k;const E=isFinite(x);let N=null,P=null,I=null,q=null,ee=null,H=null,z=null,ge=null,fe=0,J=0,te=Y!=="nowrap";const le=new Map,V=l();let re=F,$=0,G=new c;const de=[G];D.forEach(oe=>{const{fontObj:ie}=oe,{ascender:ce,descender:pe,unitsPerEm:ke,lineGap:Ae,capHeight:me,xHeight:ye}=ie;let ue=le.get(ie);if(!ue){const he=T/ke,xe=M==="normal"?(ce-pe+Ae)*he:M*T,Ke=(xe-(ce-pe)*he)/2,_e=Math.min(xe,(ce-pe)*he),be=(ce+pe)/2*he+_e/2;ue={index:le.size,src:ie.src,fontObj:ie,fontSizeMult:he,unitsPerEm:ke,ascender:ce*he,descender:pe*he,capHeight:me*he,xHeight:ye*he,lineHeight:xe,baseline:-Ke-ce*he,caretTop:be,caretBottom:be-_e},le.set(ie,ue)}const{fontSizeMult:De}=ue,Ue=p.slice(oe.start,oe.end+1);let Be,Se;ie.forEachGlyph(Ue,T,w,(he,xe,Ke,_e)=>{xe+=$,_e+=oe.start,Be=xe,Se=he;const be=p.charAt(_e),Fe=he.advanceWidth*De,Ee=G.count;let ve;if("isEmpty"in he||(he.isWhitespace=!!be&&new RegExp(t).test(be),he.canBreakAfter=!!be&&e.test(be),he.isEmpty=he.xMin===he.xMax||he.yMin===he.yMax||u.test(be)),!he.isWhitespace&&!he.isEmpty&&J++,te&&E&&!he.isWhitespace&&xe+Fe+re>x&&Ee){if(G.glyphAt(Ee-1).glyphObj.canBreakAfter)ve=new c,re=-xe;else for(let Re=Ee;Re--;)if(Re===0&&b==="break-word"){ve=new c,re=-xe;break}else if(G.glyphAt(Re).glyphObj.canBreakAfter){ve=G.splitAt(Re+1);const Le=ve.glyphAt(0).x;re-=Le;for(let Me=ve.count;Me--;)ve.glyphAt(Me).x-=Le;break}ve&&(G.isSoftWrapped=!0,G=ve,de.push(G),fe=x)}let Ce=G.glyphAt(G.count);Ce.glyphObj=he,Ce.x=xe+re,Ce.y=Ke,Ce.width=Fe,Ce.charIndex=_e,Ce.fontData=ue,be===`
`&&(G=new c,de.push(G),re=-(xe+Fe+w*T)+F)}),$=Be+Se.advanceWidth*De+w*T});let K=0;de.forEach(oe=>{let ie=!0;for(let ce=oe.count;ce--;){const pe=oe.glyphAt(ce);ie&&!pe.glyphObj.isWhitespace&&(oe.width=pe.x+pe.width,oe.width>fe&&(fe=oe.width),ie=!1);let{lineHeight:ke,capHeight:Ae,xHeight:me,baseline:ye}=pe.fontData;ke>oe.lineHeight&&(oe.lineHeight=ke);const ue=ye-oe.baseline;ue<0&&(oe.baseline+=ue,oe.cap+=ue,oe.ex+=ue),oe.cap=Math.max(oe.cap,oe.baseline+Ae),oe.ex=Math.max(oe.ex,oe.baseline+me)}oe.baseline-=K,oe.cap-=K,oe.ex-=K,K+=oe.lineHeight});let ae=0,Z=0;if(A&&(typeof A=="number"?ae=-A:typeof A=="string"&&(ae=-fe*(A==="left"?0:A==="center"?.5:A==="right"?1:o(A)))),U&&(typeof U=="number"?Z=-U:typeof U=="string"&&(Z=U==="top"?0:U==="top-baseline"?-de[0].baseline:U==="top-cap"?-de[0].cap:U==="top-ex"?-de[0].ex:U==="middle"?K/2:U==="bottom"?K:U==="bottom-baseline"?-de[de.length-1].baseline:o(U)*K)),!W){const oe=n.getEmbeddingLevels(p,S);N=new Uint16Array(J),P=new Uint8Array(J),I=new Float32Array(J*2),q={},z=[1/0,1/0,-1/0,-1/0],ge=[],ne&&(H=new Float32Array(p.length*4)),R&&(ee=new Uint8Array(J*3));let ie=0,ce=-1,pe=-1,ke,Ae;if(de.forEach((me,ye)=>{let{count:ue,width:De}=me;if(ue>0){let Ue=0;for(let _e=ue;_e--&&me.glyphAt(_e).glyphObj.isWhitespace;)Ue++;let Be=0,Se=0;if(L==="center")Be=(fe-De)/2;else if(L==="right")Be=fe-De;else if(L==="justify"&&me.isSoftWrapped){let _e=0;for(let be=ue-Ue;be--;)me.glyphAt(be).glyphObj.isWhitespace&&_e++;Se=(fe-De)/_e}if(Se||Be){let _e=0;for(let be=0;be<ue;be++){let Fe=me.glyphAt(be);const Ee=Fe.glyphObj;Fe.x+=Be+_e,Se!==0&&Ee.isWhitespace&&be<ue-Ue&&(_e+=Se,Fe.width+=Se)}}const he=n.getReorderSegments(p,oe,me.glyphAt(0).charIndex,me.glyphAt(me.count-1).charIndex);for(let _e=0;_e<he.length;_e++){const[be,Fe]=he[_e];let Ee=1/0,ve=-1/0;for(let Ce=0;Ce<ue;Ce++)if(me.glyphAt(Ce).charIndex>=be){let Re=Ce,Le=Ce;for(;Le<ue;Le++){let Me=me.glyphAt(Le);if(Me.charIndex>Fe)break;Le<ue-Ue&&(Ee=Math.min(Ee,Me.x),ve=Math.max(ve,Me.x+Me.width))}for(let Me=Re;Me<Le;Me++){const We=me.glyphAt(Me);We.x=ve-(We.x+We.width-Ee)}break}}let xe;const Ke=_e=>xe=_e;for(let _e=0;_e<ue;_e++){const be=me.glyphAt(_e);xe=be.glyphObj;const Fe=xe.index,Ee=oe.levels[be.charIndex]&1;if(Ee){const ve=n.getMirroredCharacter(p[be.charIndex]);ve&&be.fontData.fontObj.forEachGlyph(ve,0,0,Ke)}if(ne){const{charIndex:ve,fontData:Ce}=be,Re=be.x+ae,Le=be.x+be.width+ae;H[ve*4]=Ee?Le:Re,H[ve*4+1]=Ee?Re:Le,H[ve*4+2]=me.baseline+Ce.caretBottom+Z,H[ve*4+3]=me.baseline+Ce.caretTop+Z;const Me=ve-ce;Me>1&&s(H,ce,Me),ce=ve}if(R){const{charIndex:ve}=be;for(;ve>pe;)pe++,R.hasOwnProperty(pe)&&(Ae=R[pe])}if(!xe.isWhitespace&&!xe.isEmpty){const ve=ie++,{fontSizeMult:Ce,src:Re,index:Le}=be.fontData,Me=q[Re]||(q[Re]={});Me[Fe]||(Me[Fe]={path:xe.path,pathBounds:[xe.xMin,xe.yMin,xe.xMax,xe.yMax]});const We=be.x+ae,Je=be.y+me.baseline+Z;I[ve*2]=We,I[ve*2+1]=Je;const qe=We+xe.xMin*Ce,Qe=Je+xe.yMin*Ce,tt=We+xe.xMax*Ce,Ze=Je+xe.yMax*Ce;qe<z[0]&&(z[0]=qe),Qe<z[1]&&(z[1]=Qe),tt>z[2]&&(z[2]=tt),Ze>z[3]&&(z[3]=Ze),ve%B===0&&(ke={start:ve,end:ve,rect:[1/0,1/0,-1/0,-1/0]},ge.push(ke)),ke.end++;const Ge=ke.rect;if(qe<Ge[0]&&(Ge[0]=qe),Qe<Ge[1]&&(Ge[1]=Qe),tt>Ge[2]&&(Ge[2]=tt),Ze>Ge[3]&&(Ge[3]=Ze),N[ve]=Fe,P[ve]=Le,R){const rt=ve*3;ee[rt]=Ae>>16&255,ee[rt+1]=Ae>>8&255,ee[rt+2]=Ae&255}}}}}),H){const me=p.length-ce;me>1&&s(H,ce,me)}}const we=[];le.forEach(({index:oe,src:ie,unitsPerEm:ce,ascender:pe,descender:ke,lineHeight:Ae,capHeight:me,xHeight:ye})=>{we[oe]={src:ie,unitsPerEm:ce,ascender:pe,descender:ke,lineHeight:Ae,capHeight:me,xHeight:ye}}),C.typesetting=l()-V,v({glyphIds:N,glyphFontIndices:P,glyphPositions:I,glyphData:q,fontData:we,caretPositions:H,glyphColors:ee,chunkedBounds:ge,fontSize:T,topBaseline:Z+de[0].baseline,blockBounds:[ae,Z-K,ae+fe,Z],visibleBounds:z,timings:C})})}function r(p,g){i({...p,metricsOnly:!0},y=>{const[O,T,_,m]=y.blockBounds;g({width:_-O,height:m-T})})}function o(p){let g=p.match(/^([\d.]+)%$/),y=g?parseFloat(g[1]):NaN;return isNaN(y)?0:y/100}function s(p,g,y){const O=p[g*4],T=p[g*4+1],_=p[g*4+2],m=p[g*4+3],w=(T-O)/y;for(let M=0;M<y;M++){const x=(g+M)*4;p[x]=O+w*M,p[x+1]=O+w*(M+1),p[x+2]=_,p[x+3]=m}}function l(){return(self.performance||Date).now()}function c(){this.data=[]}const f=["glyphObj","x","y","width","charIndex","fontData"];return c.prototype={width:0,lineHeight:0,baseline:0,cap:0,ex:0,isSoftWrapped:!1,get count(){return Math.ceil(this.data.length/f.length)},glyphAt(p){let g=c.flyweight;return g.data=this.data,g.index=p,g},splitAt(p){let g=new c;return g.data=this.data.splice(p*f.length),g}},c.flyweight=f.reduce((p,g,y,O)=>(Object.defineProperty(p,g,{get(){return this.data[this.index*f.length+y]},set(T){this.data[this.index*f.length+y]=T}}),p),{data:null,index:0}),{typeset:i,measure:r}}const ot=()=>(self.performance||Date).now(),Qt=Mn();let fn;function Wo(h,n,d,u,t,e,a,i,r,o,s=!0){return s?Xo(h,n,d,u,t,e,a,i,r,o).then(null,l=>(fn||(console.warn("WebGL SDF generation failed, falling back to JS",l),fn=!0),dn(h,n,d,u,t,e,a,i,r,o))):dn(h,n,d,u,t,e,a,i,r,o)}const Wt=[],Vo=5;let Ar=0;function Pn(){const h=ot();for(;Wt.length&&ot()-h<Vo;)Wt.shift()();Ar=Wt.length?setTimeout(Pn,0):0}const Xo=(...h)=>new Promise((n,d)=>{Wt.push(()=>{const u=ot();try{Qt.webgl.generateIntoCanvas(...h),n({timing:ot()-u})}catch(t){d(t)}}),Ar||(Ar=setTimeout(Pn,0))}),Ho=4,Yo=2e3,hn={};let qo=0;function dn(h,n,d,u,t,e,a,i,r,o){const s="TroikaTextSDFGenerator_JS_"+qo++%Ho;let l=hn[s];return l||(l=hn[s]={workerModule:ct({name:s,workerId:s,dependencies:[Mn,ot],init(c,f){const p=c().javascript.generate;return function(...g){const y=f();return{textureData:p(...g),timing:f()-y}}},getTransferables(c){return[c.textureData.buffer]}}),requests:0,idleTimer:null}),l.requests++,clearTimeout(l.idleTimer),l.workerModule(h,n,d,u,t,e).then(({textureData:c,timing:f})=>{const p=ot(),g=new Uint8Array(c.length*4);for(let y=0;y<c.length;y++)g[y*4+o]=c[y];return Qt.webglUtils.renderImageData(a,g,i,r,h,n,1<<3-o),f+=ot()-p,--l.requests===0&&(l.idleTimer=setTimeout(()=>{To(s)},Yo)),{timing:f}})}function Zo(h){h._warm||(Qt.webgl.isSupported(h),h._warm=!0)}const Ko=Qt.webglUtils.resizeWebGLCanvasWithoutClearing,_t={unicodeFontsURL:null,sdfGlyphSize:64,sdfMargin:1/16,sdfExponent:9,textureWidth:2048},Jo=new Tt;function ut(){return(self.performance||Date).now()}const pn=Object.create(null);function Ln(h,n){h=ea({},h);const d=ut(),u=[];if(h.font&&u.push({label:"user",src:ta(h.font)}),h.font=u,h.text=""+h.text,h.sdfGlyphSize=h.sdfGlyphSize||_t.sdfGlyphSize,h.unicodeFontsURL=h.unicodeFontsURL||_t.unicodeFontsURL,h.colorRanges!=null){let c={};for(let f in h.colorRanges)if(h.colorRanges.hasOwnProperty(f)){let p=h.colorRanges[f];typeof p!="number"&&(p=Jo.set(p).getHex()),c[f]=p}h.colorRanges=c}Object.freeze(h);const{textureWidth:t,sdfExponent:e}=_t,{sdfGlyphSize:a}=h,i=t/a*4;let r=pn[a];if(!r){const c=document.createElement("canvas");c.width=t,c.height=a*256/i,r=pn[a]={glyphCount:0,sdfGlyphSize:a,sdfCanvas:c,sdfTexture:new io(c,void 0,void 0,void 0,nn,nn),contextLost:!1,glyphsByFont:new Map},r.sdfTexture.generateMipmaps=!1,Qo(r)}const{sdfTexture:o,sdfCanvas:s}=r;Bn(h).then(c=>{const{glyphIds:f,glyphFontIndices:p,fontData:g,glyphPositions:y,fontSize:O,timings:T}=c,_=[],m=new Float32Array(f.length*4);let w=0,M=0;const x=ut(),S=g.map(A=>{let U=r.glyphsByFont.get(A.src);return U||r.glyphsByFont.set(A.src,U=new Map),U});f.forEach((A,U)=>{const W=p[U],{src:j,unitsPerEm:Q}=g[W];let ne=S[W].get(A);if(!ne){const{path:C,pathBounds:D}=c.glyphData[j][A],E=Math.max(D[2]-D[0],D[3]-D[1])/a*(_t.sdfMargin*a+.5),N=r.glyphCount++,P=[D[0]-E,D[1]-E,D[2]+E,D[3]+E];S[W].set(A,ne={path:C,atlasIndex:N,sdfViewBox:P}),_.push(ne)}const{sdfViewBox:B}=ne,R=y[M++],v=y[M++],k=O/Q;m[w++]=R+B[0]*k,m[w++]=v+B[1]*k,m[w++]=R+B[2]*k,m[w++]=v+B[3]*k,f[U]=ne.atlasIndex}),T.quads=(T.quads||0)+(ut()-x);const L=ut();T.sdf={};const F=s.height,Y=Math.ceil(r.glyphCount/i),b=Math.pow(2,Math.ceil(Math.log2(Y*a)));b>F&&(console.info(`Increasing SDF texture size ${F}->${b}`),Ko(s,t,b),o.dispose()),Promise.all(_.map(A=>Rn(A,r,h.gpuAccelerateSDF).then(({timing:U})=>{T.sdf[A.atlasIndex]=U}))).then(()=>{_.length&&!r.contextLost&&(Gn(r),o.needsUpdate=!0),T.sdfTotal=ut()-L,T.total=ut()-d,n(Object.freeze({parameters:h,sdfTexture:o,sdfGlyphSize:a,sdfExponent:e,glyphBounds:m,glyphAtlasIndices:f,glyphColors:c.glyphColors,caretPositions:c.caretPositions,chunkedBounds:c.chunkedBounds,ascender:c.ascender,descender:c.descender,lineHeight:c.lineHeight,capHeight:c.capHeight,xHeight:c.xHeight,topBaseline:c.topBaseline,blockBounds:c.blockBounds,visibleBounds:c.visibleBounds,timings:c.timings}))})}),Promise.resolve().then(()=>{r.contextLost||Zo(s)})}function Rn({path:h,atlasIndex:n,sdfViewBox:d},{sdfGlyphSize:u,sdfCanvas:t,contextLost:e},a){if(e)return Promise.resolve({timing:-1});const{textureWidth:i,sdfExponent:r}=_t,o=Math.max(d[2]-d[0],d[3]-d[1]),s=Math.floor(n/4),l=s%(i/u)*u,c=Math.floor(s/(i/u))*u,f=n%4;return Wo(u,u,h,d,o,r,t,l,c,f,a)}function Qo(h){const n=h.sdfCanvas;n.addEventListener("webglcontextlost",d=>{console.log("Context Lost",d),d.preventDefault(),h.contextLost=!0}),n.addEventListener("webglcontextrestored",d=>{console.log("Context Restored",d),h.contextLost=!1;const u=[];h.glyphsByFont.forEach(t=>{t.forEach(e=>{u.push(Rn(e,h,!0))})}),Promise.all(u).then(()=>{Gn(h),h.sdfTexture.needsUpdate=!0})})}function $o({font:h,characters:n,sdfGlyphSize:d},u){let t=Array.isArray(n)?n.join(`
`):""+n;Ln({font:h,sdfGlyphSize:d,text:t},u)}function ea(h,n){for(let d in n)n.hasOwnProperty(d)&&(h[d]=n[d]);return h}let It;function ta(h){return It||(It=typeof document>"u"?{}:document.createElement("a")),It.href=h,It.href}function Gn(h){if(typeof createImageBitmap!="function"){console.info("Safari<15: applying SDF canvas workaround");const{sdfCanvas:n,sdfTexture:d}=h,{width:u,height:t}=n,e=h.sdfCanvas.getContext("webgl");let a=d.image.data;(!a||a.length!==u*t*4)&&(a=new Uint8Array(u*t*4),d.image={width:u,height:t,data:a},d.flipY=!1,d.isDataTexture=!0),e.readPixels(0,0,u,t,e.RGBA,e.UNSIGNED_BYTE,a)}}const ra=ct({name:"Typesetter",dependencies:[zo,No,Eo],init(h,n,d){return h(n,d())}}),Bn=ct({name:"Typesetter",dependencies:[ra],init(h){return function(n){return new Promise(d=>{h.typeset(n,d)})}},getTransferables(h){const n=[];for(let d in h)h[d]&&h[d].buffer&&n.push(h[d].buffer);return n}});Bn.onMainThread;const vn={};function na(h){let n=vn[h];return n||(n=vn[h]=new Or(1,1,h,h).translate(.5,.5,0)),n}const oa="aTroikaGlyphBounds",gn="aTroikaGlyphIndex",aa="aTroikaGlyphColor";class ia extends no{constructor(){super(),this.detail=1,this.curveRadius=0,this.groups=[{start:0,count:1/0,materialIndex:0},{start:0,count:1/0,materialIndex:1}],this.boundingSphere=new oo,this.boundingBox=new An}computeBoundingSphere(){}computeBoundingBox(){}set detail(n){if(n!==this._detail){this._detail=n,(typeof n!="number"||n<1)&&(n=1);let d=na(n);["position","normal","uv"].forEach(u=>{this.attributes[u]=d.attributes[u].clone()}),this.setIndex(d.getIndex().clone())}}get detail(){return this._detail}set curveRadius(n){n!==this._curveRadius&&(this._curveRadius=n,this._updateBounds())}get curveRadius(){return this._curveRadius}updateGlyphs(n,d,u,t,e){this.updateAttributeData(oa,n,4),this.updateAttributeData(gn,d,1),this.updateAttributeData(aa,e,3),this._blockBounds=u,this._chunkedBounds=t,this.instanceCount=d.length,this._updateBounds()}_updateBounds(){const n=this._blockBounds;if(n){const{curveRadius:d,boundingBox:u}=this;if(d){const{PI:t,floor:e,min:a,max:i,sin:r,cos:o}=Math,s=t/2,l=t*2,c=Math.abs(d),f=n[0]/c,p=n[2]/c,g=e((f+s)/l)!==e((p+s)/l)?-c:a(r(f)*c,r(p)*c),y=e((f-s)/l)!==e((p-s)/l)?c:i(r(f)*c,r(p)*c),O=e((f+t)/l)!==e((p+t)/l)?c*2:i(c-o(f)*c,c-o(p)*c);u.min.set(g,n[1],d<0?-O:0),u.max.set(y,n[3],d<0?0:O)}else u.min.set(n[0],n[1],0),u.max.set(n[2],n[3],0);u.getBoundingSphere(this.boundingSphere)}}applyClipRect(n){let d=this.getAttribute(gn).count,u=this._chunkedBounds;if(u)for(let t=u.length;t--;){d=u[t].end;let e=u[t].rect;if(e[1]<n.w&&e[3]>n.y&&e[0]<n.z&&e[2]>n.x)break}this.instanceCount=d}updateAttributeData(n,d,u){const t=this.getAttribute(n);d?t&&t.array.length===d.length?(t.array.set(d),t.needsUpdate=!0):(this.setAttribute(n,new ao(d,u)),delete this._maxInstanceCount,this.dispose()):t&&this.deleteAttribute(n)}}const sa=`
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform vec4 uTroikaTotalBounds;
uniform vec4 uTroikaClipRect;
uniform mat3 uTroikaOrient;
uniform bool uTroikaUseGlyphColors;
uniform float uTroikaEdgeOffset;
uniform float uTroikaBlurRadius;
uniform vec2 uTroikaPositionOffset;
uniform float uTroikaCurveRadius;
attribute vec4 aTroikaGlyphBounds;
attribute float aTroikaGlyphIndex;
attribute vec3 aTroikaGlyphColor;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec3 vTroikaGlyphColor;
varying vec2 vTroikaGlyphDimensions;
`,la=`
vec4 bounds = aTroikaGlyphBounds;
bounds.xz += uTroikaPositionOffset.x;
bounds.yw -= uTroikaPositionOffset.y;

vec4 outlineBounds = vec4(
  bounds.xy - uTroikaEdgeOffset - uTroikaBlurRadius,
  bounds.zw + uTroikaEdgeOffset + uTroikaBlurRadius
);
vec4 clippedBounds = vec4(
  clamp(outlineBounds.xy, uTroikaClipRect.xy, uTroikaClipRect.zw),
  clamp(outlineBounds.zw, uTroikaClipRect.xy, uTroikaClipRect.zw)
);

vec2 clippedXY = (mix(clippedBounds.xy, clippedBounds.zw, position.xy) - bounds.xy) / (bounds.zw - bounds.xy);

position.xy = mix(bounds.xy, bounds.zw, clippedXY);

uv = (position.xy - uTroikaTotalBounds.xy) / (uTroikaTotalBounds.zw - uTroikaTotalBounds.xy);

float rad = uTroikaCurveRadius;
if (rad != 0.0) {
  float angle = position.x / rad;
  position.xz = vec2(sin(angle) * rad, rad - cos(angle) * rad);
  normal.xz = vec2(sin(angle), cos(angle));
}
  
position = uTroikaOrient * position;
normal = uTroikaOrient * normal;

vTroikaGlyphUV = clippedXY.xy;
vTroikaGlyphDimensions = vec2(bounds[2] - bounds[0], bounds[3] - bounds[1]);


float txCols = uTroikaSDFTextureSize.x / uTroikaSDFGlyphSize;
vec2 txUvPerSquare = uTroikaSDFGlyphSize / uTroikaSDFTextureSize;
vec2 txStartUV = txUvPerSquare * vec2(
  mod(floor(aTroikaGlyphIndex / 4.0), txCols),
  floor(floor(aTroikaGlyphIndex / 4.0) / txCols)
);
vTroikaTextureUVBounds = vec4(txStartUV, vec2(txStartUV) + txUvPerSquare);
vTroikaTextureChannel = mod(aTroikaGlyphIndex, 4.0);
`,ua=`
uniform sampler2D uTroikaSDFTexture;
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform float uTroikaSDFExponent;
uniform float uTroikaEdgeOffset;
uniform float uTroikaFillOpacity;
uniform float uTroikaBlurRadius;
uniform vec3 uTroikaStrokeColor;
uniform float uTroikaStrokeWidth;
uniform float uTroikaStrokeOpacity;
uniform bool uTroikaSDFDebug;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec2 vTroikaGlyphDimensions;

float troikaSdfValueToSignedDistance(float alpha) {
  // Inverse of exponential encoding in webgl-sdf-generator
  
  float maxDimension = max(vTroikaGlyphDimensions.x, vTroikaGlyphDimensions.y);
  float absDist = (1.0 - pow(2.0 * (alpha > 0.5 ? 1.0 - alpha : alpha), 1.0 / uTroikaSDFExponent)) * maxDimension;
  float signedDist = absDist * (alpha > 0.5 ? -1.0 : 1.0);
  return signedDist;
}

float troikaGlyphUvToSdfValue(vec2 glyphUV) {
  vec2 textureUV = mix(vTroikaTextureUVBounds.xy, vTroikaTextureUVBounds.zw, glyphUV);
  vec4 rgba = texture2D(uTroikaSDFTexture, textureUV);
  float ch = floor(vTroikaTextureChannel + 0.5); //NOTE: can't use round() in WebGL1
  return ch == 0.0 ? rgba.r : ch == 1.0 ? rgba.g : ch == 2.0 ? rgba.b : rgba.a;
}

float troikaGlyphUvToDistance(vec2 uv) {
  return troikaSdfValueToSignedDistance(troikaGlyphUvToSdfValue(uv));
}

float troikaGetAADist() {
  
  #if defined(GL_OES_standard_derivatives) || __VERSION__ >= 300
  return length(fwidth(vTroikaGlyphUV * vTroikaGlyphDimensions)) * 0.5;
  #else
  return vTroikaGlyphDimensions.x / 64.0;
  #endif
}

float troikaGetFragDistValue() {
  vec2 clampedGlyphUV = clamp(vTroikaGlyphUV, 0.5 / uTroikaSDFGlyphSize, 1.0 - 0.5 / uTroikaSDFGlyphSize);
  float distance = troikaGlyphUvToDistance(clampedGlyphUV);
 
  // Extrapolate distance when outside bounds:
  distance += clampedGlyphUV == vTroikaGlyphUV ? 0.0 : 
    length((vTroikaGlyphUV - clampedGlyphUV) * vTroikaGlyphDimensions);

  

  return distance;
}

float troikaGetEdgeAlpha(float distance, float distanceOffset, float aaDist) {
  #if defined(IS_DEPTH_MATERIAL) || defined(IS_DISTANCE_MATERIAL)
  float alpha = step(-distanceOffset, -distance);
  #else

  float alpha = smoothstep(
    distanceOffset + aaDist,
    distanceOffset - aaDist,
    distance
  );
  #endif

  return alpha;
}
`,ca=`
float aaDist = troikaGetAADist();
float fragDistance = troikaGetFragDistValue();
float edgeAlpha = uTroikaSDFDebug ?
  troikaGlyphUvToSdfValue(vTroikaGlyphUV) :
  troikaGetEdgeAlpha(fragDistance, uTroikaEdgeOffset, max(aaDist, uTroikaBlurRadius));

#if !defined(IS_DEPTH_MATERIAL) && !defined(IS_DISTANCE_MATERIAL)
vec4 fillRGBA = gl_FragColor;
fillRGBA.a *= uTroikaFillOpacity;
vec4 strokeRGBA = uTroikaStrokeWidth == 0.0 ? fillRGBA : vec4(uTroikaStrokeColor, uTroikaStrokeOpacity);
if (fillRGBA.a == 0.0) fillRGBA.rgb = strokeRGBA.rgb;
gl_FragColor = mix(fillRGBA, strokeRGBA, smoothstep(
  -uTroikaStrokeWidth - aaDist,
  -uTroikaStrokeWidth + aaDist,
  fragDistance
));
gl_FragColor.a *= edgeAlpha;
#endif

if (edgeAlpha == 0.0) {
  discard;
}
`;function fa(h){const n=Cr(h,{chained:!0,extensions:{derivatives:!0},uniforms:{uTroikaSDFTexture:{value:null},uTroikaSDFTextureSize:{value:new Ne},uTroikaSDFGlyphSize:{value:0},uTroikaSDFExponent:{value:0},uTroikaTotalBounds:{value:new on(0,0,0,0)},uTroikaClipRect:{value:new on(0,0,0,0)},uTroikaEdgeOffset:{value:0},uTroikaFillOpacity:{value:1},uTroikaPositionOffset:{value:new Ne},uTroikaCurveRadius:{value:0},uTroikaBlurRadius:{value:0},uTroikaStrokeWidth:{value:0},uTroikaStrokeColor:{value:new Tt},uTroikaStrokeOpacity:{value:1},uTroikaOrient:{value:new so},uTroikaUseGlyphColors:{value:!0},uTroikaSDFDebug:{value:!1}},vertexDefs:sa,vertexTransform:la,fragmentDefs:ua,fragmentColorTransform:ca,customRewriter({vertexShader:d,fragmentShader:u}){let t=/\buniform\s+vec3\s+diffuse\b/;return t.test(u)&&(u=u.replace(t,"varying vec3 vTroikaGlyphColor").replace(/\bdiffuse\b/g,"vTroikaGlyphColor"),t.test(d)||(d=d.replace(On,`uniform vec3 diffuse;
$&
vTroikaGlyphColor = uTroikaUseGlyphColors ? aTroikaGlyphColor / 255.0 : diffuse;
`))),{vertexShader:d,fragmentShader:u}}});return n.transparent=!0,n.forceSinglePass=!0,Object.defineProperties(n,{isTroikaTextMaterial:{value:!0},shadowSide:{get(){return this.side},set(){}}}),n}const Pr=new to({color:16777215,side:lo,transparent:!0}),mn=8421504,yn=new ro,jt=new Pe,xr=new Pe,xt=[],ha=new Pe,_r="+x+y";function bn(h){return Array.isArray(h)?h[0]:h}let In=()=>{const h=new Mr(new Or(1,1),Pr);return In=()=>h,h},jn=()=>{const h=new Mr(new Or(1,1,32,1),Pr);return jn=()=>h,h};const da={type:"syncstart"},pa={type:"synccomplete"},Nn=["font","fontSize","fontStyle","fontWeight","lang","letterSpacing","lineHeight","maxWidth","overflowWrap","text","direction","textAlign","textIndent","whiteSpace","anchorX","anchorY","colorRanges","sdfGlyphSize"],va=Nn.concat("material","color","depthOffset","clipRect","curveRadius","orientation","glyphGeometryDetail");let zn=class extends Mr{constructor(){const n=new ia;super(n,null),this.text="",this.anchorX=0,this.anchorY=0,this.curveRadius=0,this.direction="auto",this.font=null,this.unicodeFontsURL=null,this.fontSize=.1,this.fontWeight="normal",this.fontStyle="normal",this.lang=null,this.letterSpacing=0,this.lineHeight="normal",this.maxWidth=1/0,this.overflowWrap="normal",this.textAlign="left",this.textIndent=0,this.whiteSpace="normal",this.material=null,this.color=null,this.colorRanges=null,this.outlineWidth=0,this.outlineColor=0,this.outlineOpacity=1,this.outlineBlur=0,this.outlineOffsetX=0,this.outlineOffsetY=0,this.strokeWidth=0,this.strokeColor=mn,this.strokeOpacity=1,this.fillOpacity=1,this.depthOffset=0,this.clipRect=null,this.orientation=_r,this.glyphGeometryDetail=1,this.sdfGlyphSize=null,this.gpuAccelerateSDF=!0,this.debugSDF=!1}sync(n){this._needsSync&&(this._needsSync=!1,this._isSyncing?(this._queuedSyncs||(this._queuedSyncs=[])).push(n):(this._isSyncing=!0,this.dispatchEvent(da),Ln({text:this.text,font:this.font,lang:this.lang,fontSize:this.fontSize||.1,fontWeight:this.fontWeight||"normal",fontStyle:this.fontStyle||"normal",letterSpacing:this.letterSpacing||0,lineHeight:this.lineHeight||"normal",maxWidth:this.maxWidth,direction:this.direction||"auto",textAlign:this.textAlign,textIndent:this.textIndent,whiteSpace:this.whiteSpace,overflowWrap:this.overflowWrap,anchorX:this.anchorX,anchorY:this.anchorY,colorRanges:this.colorRanges,includeCaretPositions:!0,sdfGlyphSize:this.sdfGlyphSize,gpuAccelerateSDF:this.gpuAccelerateSDF,unicodeFontsURL:this.unicodeFontsURL},d=>{this._isSyncing=!1,this._textRenderInfo=d,this.geometry.updateGlyphs(d.glyphBounds,d.glyphAtlasIndices,d.blockBounds,d.chunkedBounds,d.glyphColors);const u=this._queuedSyncs;u&&(this._queuedSyncs=null,this._needsSync=!0,this.sync(()=>{u.forEach(t=>t&&t())})),this.dispatchEvent(pa),n&&n()})))}onBeforeRender(n,d,u,t,e,a){this.sync(),e.isTroikaTextMaterial&&this._prepareForRender(e)}dispose(){this.geometry.dispose()}get textRenderInfo(){return this._textRenderInfo||null}createDerivedMaterial(n){return fa(n)}get material(){let n=this._derivedMaterial;const d=this._baseMaterial||this._defaultMaterial||(this._defaultMaterial=Pr.clone());if((!n||!n.isDerivedFrom(d))&&(n=this._derivedMaterial=this.createDerivedMaterial(d),d.addEventListener("dispose",function u(){d.removeEventListener("dispose",u),n.dispose()})),this.hasOutline()){let u=n._outlineMtl;return u||(u=n._outlineMtl=Object.create(n,{id:{value:n.id+.1}}),u.isTextOutlineMaterial=!0,u.depthWrite=!1,u.map=null,n.addEventListener("dispose",function t(){n.removeEventListener("dispose",t),u.dispose()})),[u,n]}else return n}set material(n){n&&n.isTroikaTextMaterial?(this._derivedMaterial=n,this._baseMaterial=n.baseMaterial):this._baseMaterial=n}hasOutline(){return!!(this.outlineWidth||this.outlineBlur||this.outlineOffsetX||this.outlineOffsetY)}get glyphGeometryDetail(){return this.geometry.detail}set glyphGeometryDetail(n){this.geometry.detail=n}get curveRadius(){return this.geometry.curveRadius}set curveRadius(n){this.geometry.curveRadius=n}get customDepthMaterial(){return bn(this.material).getDepthMaterial()}set customDepthMaterial(n){}get customDistanceMaterial(){return bn(this.material).getDistanceMaterial()}set customDistanceMaterial(n){}_prepareForRender(n){const d=n.isTextOutlineMaterial,u=n.uniforms,t=this.textRenderInfo;if(t){const{sdfTexture:i,blockBounds:r}=t;u.uTroikaSDFTexture.value=i,u.uTroikaSDFTextureSize.value.set(i.image.width,i.image.height),u.uTroikaSDFGlyphSize.value=t.sdfGlyphSize,u.uTroikaSDFExponent.value=t.sdfExponent,u.uTroikaTotalBounds.value.fromArray(r),u.uTroikaUseGlyphColors.value=!d&&!!t.glyphColors;let o=0,s=0,l=0,c,f,p,g=0,y=0;if(d){let{outlineWidth:T,outlineOffsetX:_,outlineOffsetY:m,outlineBlur:w,outlineOpacity:M}=this;o=this._parsePercent(T)||0,s=Math.max(0,this._parsePercent(w)||0),c=M,g=this._parsePercent(_)||0,y=this._parsePercent(m)||0}else l=Math.max(0,this._parsePercent(this.strokeWidth)||0),l&&(p=this.strokeColor,u.uTroikaStrokeColor.value.set(p??mn),f=this.strokeOpacity,f==null&&(f=1)),c=this.fillOpacity;u.uTroikaEdgeOffset.value=o,u.uTroikaPositionOffset.value.set(g,y),u.uTroikaBlurRadius.value=s,u.uTroikaStrokeWidth.value=l,u.uTroikaStrokeOpacity.value=f,u.uTroikaFillOpacity.value=c??1,u.uTroikaCurveRadius.value=this.curveRadius||0;let O=this.clipRect;if(O&&Array.isArray(O)&&O.length===4)u.uTroikaClipRect.value.fromArray(O);else{const T=(this.fontSize||.1)*100;u.uTroikaClipRect.value.set(r[0]-T,r[1]-T,r[2]+T,r[3]+T)}this.geometry.applyClipRect(u.uTroikaClipRect.value)}u.uTroikaSDFDebug.value=!!this.debugSDF,n.polygonOffset=!!this.depthOffset,n.polygonOffsetFactor=n.polygonOffsetUnits=this.depthOffset||0;const e=d?this.outlineColor||0:this.color;if(e==null)delete n.color;else{const i=n.hasOwnProperty("color")?n.color:n.color=new Tt;(e!==i._input||typeof e=="object")&&i.set(i._input=e)}let a=this.orientation||_r;if(a!==n._orientation){let i=u.uTroikaOrient.value;a=a.replace(/[^-+xyz]/g,"");let r=a!==_r&&a.match(/^([-+])([xyz])([-+])([xyz])$/);if(r){let[,o,s,l,c]=r;jt.set(0,0,0)[s]=o==="-"?1:-1,xr.set(0,0,0)[c]=l==="-"?-1:1,yn.lookAt(ha,jt.cross(xr),xr),i.setFromMatrix4(yn)}else i.identity();n._orientation=a}}_parsePercent(n){if(typeof n=="string"){let d=n.match(/^(-?[\d.]+)%$/),u=d?parseFloat(d[1]):NaN;n=(isNaN(u)?0:u/100)*this.fontSize}return n}localPositionToTextCoords(n,d=new Ne){d.copy(n);const u=this.curveRadius;return u&&(d.x=Math.atan2(n.x,Math.abs(u)-Math.abs(n.z))*Math.abs(u)),d}worldPositionToTextCoords(n,d=new Ne){return jt.copy(n),this.localPositionToTextCoords(this.worldToLocal(jt),d)}raycast(n,d){const{textRenderInfo:u,curveRadius:t}=this;if(u){const e=u.blockBounds,a=t?jn():In(),i=a.geometry,{position:r,uv:o}=i.attributes;for(let s=0;s<o.count;s++){let l=e[0]+o.getX(s)*(e[2]-e[0]);const c=e[1]+o.getY(s)*(e[3]-e[1]);let f=0;t&&(f=t-Math.cos(l/t)*t,l=Math.sin(l/t)*t),r.setXYZ(s,l,c,f)}i.boundingSphere=this.geometry.boundingSphere,i.boundingBox=this.geometry.boundingBox,a.matrixWorld=this.matrixWorld,a.material.side=this.material.side,xt.length=0,a.raycast(n,xt);for(let s=0;s<xt.length;s++)xt[s].object=this,d.push(xt[s])}}copy(n){const d=this.geometry;return super.copy(n),this.geometry=d,va.forEach(u=>{this[u]=n[u]}),this}clone(){return new this.constructor().copy(this)}};Nn.forEach(h=>{const n="_private_"+h;Object.defineProperty(zn.prototype,h,{get(){return this[n]},set(d){d!==this[n]&&(this[n]=d,this._needsSync=!0)}})});new An;new Tt;const ga=h=>typeof h=="object"&&typeof h.then=="function",Nt=[];function ma(h,n,d=(u,t)=>u===t){if(h===n)return!0;if(!h||!n)return!1;const u=h.length;if(n.length!==u)return!1;for(let t=0;t<u;t++)if(!d(h[t],n[t]))return!1;return!0}function ya(h,n=null,d=!1,u={}){n===null&&(n=[h]);for(const e of Nt)if(ma(n,e.keys,e.equal)){if(d)return;if(Object.prototype.hasOwnProperty.call(e,"error"))throw e.error;if(Object.prototype.hasOwnProperty.call(e,"response"))return u.lifespan&&u.lifespan>0&&(e.timeout&&clearTimeout(e.timeout),e.timeout=setTimeout(e.remove,u.lifespan)),e.response;if(!d)throw e.promise}const t={keys:n,equal:u.equal,remove:()=>{const e=Nt.indexOf(t);e!==-1&&Nt.splice(e,1)},promise:(ga(h)?h:h(...n)).then(e=>{t.response=e,u.lifespan&&u.lifespan>0&&(t.timeout=setTimeout(t.remove,u.lifespan))}).catch(e=>t.error=e)};if(Nt.push(t),!d)throw t.promise}const ba=(h,n,d)=>ya(h,n,!1,d),wa=Te.forwardRef(({sdfGlyphSize:h=64,anchorX:n="center",anchorY:d="middle",font:u,fontSize:t=1,children:e,characters:a,onSync:i,...r},o)=>{const s=Dn(({invalidate:p})=>p),[l]=Te.useState(()=>new zn),[c,f]=Te.useMemo(()=>{const p=[];let g="";return Te.Children.forEach(e,y=>{typeof y=="string"||typeof y=="number"?g+=y:p.push(y)}),[p,g]},[e]);return ba(()=>new Promise(p=>$o({font:u,characters:a},p)),["troika-text",u,a]),Te.useLayoutEffect(()=>void l.sync(()=>{s(),i&&i(l)})),Te.useEffect(()=>()=>l.dispose(),[l]),Te.createElement("primitive",Fr({object:l,ref:o,font:u,text:f,anchorX:n,anchorY:d,fontSize:t,sdfGlyphSize:h},r),c)}),xa=Te.forwardRef(({makeDefault:h,camera:n,domElement:d,regress:u,onChange:t,onStart:e,onEnd:a,...i},r)=>{const{invalidate:o,camera:s,gl:l,events:c,set:f,get:p,performance:g,viewport:y}=Dn(),O=n||s,T=d||c.connected||l.domElement,_=Te.useMemo(()=>new bo(O),[O]);return Dr(()=>{_.enabled&&_.update()},-1),Te.useEffect(()=>(_.connect(T),()=>void _.dispose()),[T,u,_,o]),Te.useEffect(()=>{const m=w=>{o(),u&&g.regress(),t&&t(w)};return _.addEventListener("change",m),e&&_.addEventListener("start",e),a&&_.addEventListener("end",a),()=>{e&&_.removeEventListener("start",e),a&&_.removeEventListener("end",a),_.removeEventListener("change",m)}},[t,e,a,_,o]),Te.useEffect(()=>{_.handleResize()},[y]),Te.useEffect(()=>{if(h){const m=p().controls;return f({controls:_}),()=>f({controls:m})}},[h,_]),Te.createElement("primitive",Fr({ref:r,object:_},i))});var Vt={exports:{}},_a=Vt.exports,wn;function ka(){return wn||(wn=1,function(h){(function(n,d,u){function t(r){var o=this,s=i();o.next=function(){var l=2091639*o.s0+o.c*23283064365386963e-26;return o.s0=o.s1,o.s1=o.s2,o.s2=l-(o.c=l|0)},o.c=1,o.s0=s(" "),o.s1=s(" "),o.s2=s(" "),o.s0-=s(r),o.s0<0&&(o.s0+=1),o.s1-=s(r),o.s1<0&&(o.s1+=1),o.s2-=s(r),o.s2<0&&(o.s2+=1),s=null}function e(r,o){return o.c=r.c,o.s0=r.s0,o.s1=r.s1,o.s2=r.s2,o}function a(r,o){var s=new t(r),l=o&&o.state,c=s.next;return c.int32=function(){return s.next()*4294967296|0},c.double=function(){return c()+(c()*2097152|0)*11102230246251565e-32},c.quick=c,l&&(typeof l=="object"&&e(l,s),c.state=function(){return e(s,{})}),c}function i(){var r=4022871197,o=function(s){s=String(s);for(var l=0;l<s.length;l++){r+=s.charCodeAt(l);var c=.02519603282416938*r;r=c>>>0,c-=r,c*=r,r=c>>>0,c-=r,r+=c*4294967296}return(r>>>0)*23283064365386963e-26};return o}d&&d.exports?d.exports=a:this.alea=a})(_a,h)}(Vt)),Vt.exports}var Xt={exports:{}},Sa=Xt.exports,xn;function Ta(){return xn||(xn=1,function(h){(function(n,d,u){function t(i){var r=this,o="";r.x=0,r.y=0,r.z=0,r.w=0,r.next=function(){var l=r.x^r.x<<11;return r.x=r.y,r.y=r.z,r.z=r.w,r.w^=r.w>>>19^l^l>>>8},i===(i|0)?r.x=i:o+=i;for(var s=0;s<o.length+64;s++)r.x^=o.charCodeAt(s)|0,r.next()}function e(i,r){return r.x=i.x,r.y=i.y,r.z=i.z,r.w=i.w,r}function a(i,r){var o=new t(i),s=r&&r.state,l=function(){return(o.next()>>>0)/4294967296};return l.double=function(){do var c=o.next()>>>11,f=(o.next()>>>0)/4294967296,p=(c+f)/(1<<21);while(p===0);return p},l.int32=o.next,l.quick=l,s&&(typeof s=="object"&&e(s,o),l.state=function(){return e(o,{})}),l}d&&d.exports?d.exports=a:this.xor128=a})(Sa,h)}(Xt)),Xt.exports}var Ht={exports:{}},Ua=Ht.exports,_n;function Ea(){return _n||(_n=1,function(h){(function(n,d,u){function t(i){var r=this,o="";r.next=function(){var l=r.x^r.x>>>2;return r.x=r.y,r.y=r.z,r.z=r.w,r.w=r.v,(r.d=r.d+362437|0)+(r.v=r.v^r.v<<4^(l^l<<1))|0},r.x=0,r.y=0,r.z=0,r.w=0,r.v=0,i===(i|0)?r.x=i:o+=i;for(var s=0;s<o.length+64;s++)r.x^=o.charCodeAt(s)|0,s==o.length&&(r.d=r.x<<10^r.x>>>4),r.next()}function e(i,r){return r.x=i.x,r.y=i.y,r.z=i.z,r.w=i.w,r.v=i.v,r.d=i.d,r}function a(i,r){var o=new t(i),s=r&&r.state,l=function(){return(o.next()>>>0)/4294967296};return l.double=function(){do var c=o.next()>>>11,f=(o.next()>>>0)/4294967296,p=(c+f)/(1<<21);while(p===0);return p},l.int32=o.next,l.quick=l,s&&(typeof s=="object"&&e(s,o),l.state=function(){return e(o,{})}),l}d&&d.exports?d.exports=a:this.xorwow=a})(Ua,h)}(Ht)),Ht.exports}var Yt={exports:{}},Ca=Yt.exports,kn;function Aa(){return kn||(kn=1,function(h){(function(n,d,u){function t(i){var r=this;r.next=function(){var s=r.x,l=r.i,c,f;return c=s[l],c^=c>>>7,f=c^c<<24,c=s[l+1&7],f^=c^c>>>10,c=s[l+3&7],f^=c^c>>>3,c=s[l+4&7],f^=c^c<<7,c=s[l+7&7],c=c^c<<13,f^=c^c<<9,s[l]=f,r.i=l+1&7,f};function o(s,l){var c,f=[];if(l===(l|0))f[0]=l;else for(l=""+l,c=0;c<l.length;++c)f[c&7]=f[c&7]<<15^l.charCodeAt(c)+f[c+1&7]<<13;for(;f.length<8;)f.push(0);for(c=0;c<8&&f[c]===0;++c);for(c==8?f[7]=-1:f[c],s.x=f,s.i=0,c=256;c>0;--c)s.next()}o(r,i)}function e(i,r){return r.x=i.x.slice(),r.i=i.i,r}function a(i,r){i==null&&(i=+new Date);var o=new t(i),s=r&&r.state,l=function(){return(o.next()>>>0)/4294967296};return l.double=function(){do var c=o.next()>>>11,f=(o.next()>>>0)/4294967296,p=(c+f)/(1<<21);while(p===0);return p},l.int32=o.next,l.quick=l,s&&(s.x&&e(s,o),l.state=function(){return e(o,{})}),l}d&&d.exports?d.exports=a:this.xorshift7=a})(Ca,h)}(Yt)),Yt.exports}var qt={exports:{}},Da=qt.exports,Sn;function Fa(){return Sn||(Sn=1,function(h){(function(n,d,u){function t(i){var r=this;r.next=function(){var s=r.w,l=r.X,c=r.i,f,p;return r.w=s=s+1640531527|0,p=l[c+34&127],f=l[c=c+1&127],p^=p<<13,f^=f<<17,p^=p>>>15,f^=f>>>12,p=l[c]=p^f,r.i=c,p+(s^s>>>16)|0};function o(s,l){var c,f,p,g,y,O=[],T=128;for(l===(l|0)?(f=l,l=null):(l=l+"\0",f=0,T=Math.max(T,l.length)),p=0,g=-32;g<T;++g)l&&(f^=l.charCodeAt((g+32)%l.length)),g===0&&(y=f),f^=f<<10,f^=f>>>15,f^=f<<4,f^=f>>>13,g>=0&&(y=y+1640531527|0,c=O[g&127]^=f+y,p=c==0?p+1:0);for(p>=128&&(O[(l&&l.length||0)&127]=-1),p=127,g=4*128;g>0;--g)f=O[p+34&127],c=O[p=p+1&127],f^=f<<13,c^=c<<17,f^=f>>>15,c^=c>>>12,O[p]=f^c;s.w=y,s.X=O,s.i=p}o(r,i)}function e(i,r){return r.i=i.i,r.w=i.w,r.X=i.X.slice(),r}function a(i,r){i==null&&(i=+new Date);var o=new t(i),s=r&&r.state,l=function(){return(o.next()>>>0)/4294967296};return l.double=function(){do var c=o.next()>>>11,f=(o.next()>>>0)/4294967296,p=(c+f)/(1<<21);while(p===0);return p},l.int32=o.next,l.quick=l,s&&(s.X&&e(s,o),l.state=function(){return e(o,{})}),l}d&&d.exports?d.exports=a:this.xor4096=a})(Da,h)}(qt)),qt.exports}var Zt={exports:{}},Ma=Zt.exports,Tn;function Oa(){return Tn||(Tn=1,function(h){(function(n,d,u){function t(i){var r=this,o="";r.next=function(){var l=r.b,c=r.c,f=r.d,p=r.a;return l=l<<25^l>>>7^c,c=c-f|0,f=f<<24^f>>>8^p,p=p-l|0,r.b=l=l<<20^l>>>12^c,r.c=c=c-f|0,r.d=f<<16^c>>>16^p,r.a=p-l|0},r.a=0,r.b=0,r.c=-1640531527,r.d=1367130551,i===Math.floor(i)?(r.a=i/4294967296|0,r.b=i|0):o+=i;for(var s=0;s<o.length+20;s++)r.b^=o.charCodeAt(s)|0,r.next()}function e(i,r){return r.a=i.a,r.b=i.b,r.c=i.c,r.d=i.d,r}function a(i,r){var o=new t(i),s=r&&r.state,l=function(){return(o.next()>>>0)/4294967296};return l.double=function(){do var c=o.next()>>>11,f=(o.next()>>>0)/4294967296,p=(c+f)/(1<<21);while(p===0);return p},l.int32=o.next,l.quick=l,s&&(typeof s=="object"&&e(s,o),l.state=function(){return e(o,{})}),l}d&&d.exports?d.exports=a:this.tychei=a})(Ma,h)}(Zt)),Zt.exports}var Kt={exports:{}};const Pa={},La=Object.freeze(Object.defineProperty({__proto__:null,default:Pa},Symbol.toStringTag,{value:"Module"})),Ra=Zn(La);var Ga=Kt.exports,Un;function Ba(){return Un||(Un=1,function(h){(function(n,d,u){var t=256,e=6,a=52,i="random",r=u.pow(t,e),o=u.pow(2,a),s=o*2,l=t-1,c;function f(m,w,M){var x=[];w=w==!0?{entropy:!0}:w||{};var S=O(y(w.entropy?[m,_(d)]:m??T(),3),x),L=new p(x),F=function(){for(var Y=L.g(e),b=r,A=0;Y<o;)Y=(Y+A)*t,b*=t,A=L.g(1);for(;Y>=s;)Y/=2,b/=2,A>>>=1;return(Y+A)/b};return F.int32=function(){return L.g(4)|0},F.quick=function(){return L.g(4)/4294967296},F.double=F,O(_(L.S),d),(w.pass||M||function(Y,b,A,U){return U&&(U.S&&g(U,L),Y.state=function(){return g(L,{})}),A?(u[i]=Y,b):Y})(F,S,"global"in w?w.global:this==u,w.state)}function p(m){var w,M=m.length,x=this,S=0,L=x.i=x.j=0,F=x.S=[];for(M||(m=[M++]);S<t;)F[S]=S++;for(S=0;S<t;S++)F[S]=F[L=l&L+m[S%M]+(w=F[S])],F[L]=w;(x.g=function(Y){for(var b,A=0,U=x.i,W=x.j,j=x.S;Y--;)b=j[U=l&U+1],A=A*t+j[l&(j[U]=j[W=l&W+b])+(j[W]=b)];return x.i=U,x.j=W,A})(t)}function g(m,w){return w.i=m.i,w.j=m.j,w.S=m.S.slice(),w}function y(m,w){var M=[],x=typeof m,S;if(w&&x=="object")for(S in m)try{M.push(y(m[S],w-1))}catch{}return M.length?M:x=="string"?m:m+"\0"}function O(m,w){for(var M=m+"",x,S=0;S<M.length;)w[l&S]=l&(x^=w[l&S]*19)+M.charCodeAt(S++);return _(w)}function T(){try{var m;return c&&(m=c.randomBytes)?m=m(t):(m=new Uint8Array(t),(n.crypto||n.msCrypto).getRandomValues(m)),_(m)}catch{var w=n.navigator,M=w&&w.plugins;return[+new Date,n,M,n.screen,_(d)]}}function _(m){return String.fromCharCode.apply(0,m)}if(O(u.random(),d),h.exports){h.exports=f;try{c=Ra}catch{}}else u["seed"+i]=f})(typeof self<"u"?self:Ga,[],Math)}(Kt)),Kt.exports}var kr,En;function Ia(){if(En)return kr;En=1;var h=ka(),n=Ta(),d=Ea(),u=Aa(),t=Fa(),e=Oa(),a=Ba();return a.alea=h,a.xor128=n,a.xorwow=d,a.xorshift7=u,a.xor4096=t,a.tychei=e,kr=a,kr}Ia();const Jt=["ability","able","aboard","about","above","accept","accident","according","account","accurate","acres","across","act","action","active","activity","actual","actually","add","addition","additional","adjective","adult","adventure","advice","affect","afraid","after","afternoon","again","against","age","ago","agree","ahead","aid","air","airplane","alike","alive","all","allow","almost","alone","along","aloud","alphabet","already","also","although","am","among","amount","ancient","angle","angry","animal","announced","another","answer","ants","any","anybody","anyone","anything","anyway","anywhere","apart","apartment","appearance","apple","applied","appropriate","are","area","arm","army","around","arrange","arrangement","arrive","arrow","art","article","as","aside","ask","asleep","at","ate","atmosphere","atom","atomic","attached","attack","attempt","attention","audience","author","automobile","available","average","avoid","aware","away","baby","back","bad","badly","bag","balance","ball","balloon","band","bank","bar","bare","bark","barn","base","baseball","basic","basis","basket","bat","battle","be","bean","bear","beat","beautiful","beauty","became","because","become","becoming","bee","been","before","began","beginning","begun","behavior","behind","being","believed","bell","belong","below","belt","bend","beneath","bent","beside","best","bet","better","between","beyond","bicycle","bigger","biggest","bill","birds","birth","birthday","bit","bite","black","blank","blanket","blew","blind","block","blood","blow","blue","board","boat","body","bone","book","border","born","both","bottle","bottom","bound","bow","bowl","box","boy","brain","branch","brass","brave","bread","break","breakfast","breath","breathe","breathing","breeze","brick","bridge","brief","bright","bring","broad","broke","broken","brother","brought","brown","brush","buffalo","build","building","built","buried","burn","burst","bus","bush","business","busy","but","butter","buy","by","cabin","cage","cake","call","calm","came","camera","camp","can","canal","cannot","cap","capital","captain","captured","car","carbon","card","care","careful","carefully","carried","carry","case","cast","castle","cat","catch","cattle","caught","cause","cave","cell","cent","center","central","century","certain","certainly","chain","chair","chamber","chance","change","changing","chapter","character","characteristic","charge","chart","check","cheese","chemical","chest","chicken","chief","child","children","choice","choose","chose","chosen","church","circle","circus","citizen","city","class","classroom","claws","clay","clean","clear","clearly","climate","climb","clock","close","closely","closer","cloth","clothes","clothing","cloud","club","coach","coal","coast","coat","coffee","cold","collect","college","colony","color","column","combination","combine","come","comfortable","coming","command","common","community","company","compare","compass","complete","completely","complex","composed","composition","compound","concerned","condition","congress","connected","consider","consist","consonant","constantly","construction","contain","continent","continued","contrast","control","conversation","cook","cookies","cool","copper","copy","corn","corner","correct","correctly","cost","cotton","could","count","country","couple","courage","course","court","cover","cow","cowboy","crack","cream","create","creature","crew","crop","cross","crowd","cry","cup","curious","current","curve","customs","cut","cutting","daily","damage","dance","danger","dangerous","dark","darkness","date","daughter","dawn","day","dead","deal","dear","death","decide","declared","deep","deeply","deer","definition","degree","depend","depth","describe","desert","design","desk","detail","determine","develop","development","diagram","diameter","did","die","differ","difference","different","difficult","difficulty","dig","dinner","direct","direction","directly","dirt","dirty","disappear","discover","discovery","discuss","discussion","disease","dish","distance","distant","divide","division","do","doctor","does","dog","doing","doll","dollar","done","donkey","door","dot","double","doubt","down","dozen","draw","drawn","dream","dress","drew","dried","drink","drive","driven","driver","driving","drop","dropped","drove","dry","duck","due","dug","dull","during","dust","duty","each","eager","ear","earlier","early","earn","earth","easier","easily","east","easy","eat","eaten","edge","education","effect","effort","egg","eight","either","electric","electricity","element","elephant","eleven","else","empty","end","enemy","energy","engine","engineer","enjoy","enough","enter","entire","entirely","environment","equal","equally","equator","equipment","escape","especially","essential","establish","even","evening","event","eventually","ever","every","everybody","everyone","everything","everywhere","evidence","exact","exactly","examine","example","excellent","except","exchange","excited","excitement","exciting","exclaimed","exercise","exist","expect","experience","experiment","explain","explanation","explore","express","expression","extra","eye","face","facing","fact","factor","factory","failed","fair","fairly","fall","fallen","familiar","family","famous","far","farm","farmer","farther","fast","fastened","faster","fat","father","favorite","fear","feathers","feature","fed","feed","feel","feet","fell","fellow","felt","fence","few","fewer","field","fierce","fifteen","fifth","fifty","fight","fighting","figure","fill","film","final","finally","find","fine","finest","finger","finish","fire","fireplace","firm","first","fish","five","fix","flag","flame","flat","flew","flies","flight","floating","floor","flow","flower","fly","fog","folks","follow","food","foot","football","for","force","foreign","forest","forget","forgot","forgotten","form","former","fort","forth","forty","forward","fought","found","four","fourth","fox","frame","free","freedom","frequently","fresh","friend","friendly","frighten","frog","from","front","frozen","fruit","fuel","full","fully","fun","function","funny","fur","furniture","further","future","gain","game","garage","garden","gas","gasoline","gate","gather","gave","general","generally","gentle","gently","get","getting","giant","gift","girl","give","given","giving","glad","glass","globe","go","goes","gold","golden","gone","good","goose","got","government","grabbed","grade","gradually","grain","grandfather","grandmother","graph","grass","gravity","gray","great","greater","greatest","greatly","green","grew","ground","group","grow","grown","growth","guard","guess","guide","gulf","gun","habit","had","hair","half","halfway","hall","hand","handle","handsome","hang","happen","happened","happily","happy","harbor","hard","harder","hardly","has","hat","have","having","hay","he","headed","heading","health","heard","hearing","heart","heat","heavy","height","held","hello","help","helpful","her","herd","here","herself","hidden","hide","high","higher","highest","highway","hill","him","himself","his","history","hit","hold","hole","hollow","home","honor","hope","horn","horse","hospital","hot","hour","house","how","however","huge","human","hundred","hung","hungry","hunt","hunter","hurried","hurry","hurt","husband","ice","idea","identity","if","ill","image","imagine","immediately","importance","important","impossible","improve","in","inch","include","including","income","increase","indeed","independent","indicate","individual","industrial","industry","influence","information","inside","instance","instant","instead","instrument","interest","interior","into","introduced","invented","involved","iron","is","island","it","its","itself","jack","jar","jet","job","join","joined","journey","joy","judge","jump","jungle","just","keep","kept","key","kids","kill","kind","kitchen","knew","knife","know","knowledge","known","label","labor","lack","lady","laid","lake","lamp","land","language","large","larger","largest","last","late","later","laugh","law","lay","layers","lead","leader","leaf","learn","least","leather","leave","leaving","led","left","leg","length","lesson","let","letter","level","library","lie","life","lift","light","like","likely","limited","line","lion","lips","liquid","list","listen","little","live","living","load","local","locate","location","log","lonely","long","longer","look","loose","lose","loss","lost","lot","loud","love","lovely","low","lower","luck","lucky","lunch","lungs","lying","machine","machinery","mad","made","magic","magnet","mail","main","mainly","major","make","making","man","managed","manner","manufacturing","many","map","mark","market","married","mass","massage","master","material","mathematics","matter","may","maybe","me","meal","mean","means","meant","measure","meat","medicine","meet","melted","member","memory","men","mental","merely","met","metal","method","mice","middle","might","mighty","mile","military","milk","mill","mind","mine","minerals","minute","mirror","missing","mission","mistake","mix","mixture","model","modern","molecular","moment","money","monkey","month","mood","moon","more","morning","most","mostly","mother","motion","motor","mountain","mouse","mouth","move","movement","movie","moving","mud","muscle","music","musical","must","my","myself","mysterious","nails","name","nation","national","native","natural","naturally","nature","near","nearby","nearer","nearest","nearly","necessary","neck","needed","needle","needs","negative","neighbor","neighborhood","nervous","nest","never","new","news","newspaper","next","nice","night","nine","no","nobody","nodded","noise","none","noon","nor","north","nose","not","note","noted","nothing","notice","noun","now","number","numeral","nuts","object","observe","obtain","occasionally","occur","ocean","of","off","offer","office","officer","official","oil","old","older","oldest","on","once","one","only","onto","open","operation","opinion","opportunity","opposite","or","orange","orbit","order","ordinary","organization","organized","origin","original","other","ought","our","ourselves","out","outer","outline","outside","over","own","owner","oxygen","pack","package","page","paid","pain","paint","pair","palace","pale","pan","paper","paragraph","parallel","parent","park","part","particles","particular","particularly","partly","parts","party","pass","passage","past","path","pattern","pay","peace","pen","pencil","people","per","percent","perfect","perfectly","perhaps","period","person","personal","pet","phrase","physical","piano","pick","picture","pictured","pie","piece","pig","pile","pilot","pine","pink","pipe","pitch","place","plain","plan","plane","planet","planned","planning","plant","plastic","plate","plates","play","pleasant","please","pleasure","plenty","plural","plus","pocket","poem","poet","poetry","point","pole","police","policeman","political","pond","pony","pool","poor","popular","population","porch","port","position","positive","possible","possibly","post","pot","potatoes","pound","pour","powder","power","powerful","practical","practice","prepare","present","president","press","pressure","pretty","prevent","previous","price","pride","primitive","principal","principle","printed","private","prize","probably","problem","process","produce","product","production","program","progress","promised","proper","properly","property","protection","proud","prove","provide","public","pull","pupil","pure","purple","purpose","push","put","putting","quarter","queen","question","quick","quickly","quiet","quietly","quite","rabbit","race","radio","railroad","rain","raise","ran","ranch","range","rapidly","rate","rather","raw","rays","reach","read","reader","ready","real","realize","rear","reason","recall","receive","recent","recently","recognize","record","red","refer","refused","region","regular","related","relationship","religious","remain","remarkable","remember","remove","repeat","replace","replied","report","represent","require","research","respect","rest","result","return","review","rhyme","rhythm","rice","rich","ride","riding","right","ring","rise","rising","river","road","roar","rock","rocket","rocky","rod","roll","roof","room","root","rope","rose","rough","round","route","row","rubbed","rubber","rule","ruler","run","running","rush","sad","saddle","safe","safety","said","sail","sale","salmon","salt","same","sand","sang","sat","satellites","satisfied","save","saved","saw","say","scale","scared","scene","school","science","scientific","scientist","score","screen","sea","search","season","seat","second","secret","section","see","seed","seeing","seems","seen","seldom","select","selection","sell","send","sense","sent","sentence","separate","series","serious","serve","service","sets","setting","settle","settlers","seven","several","shade","shadow","shake","shaking","shall","shallow","shape","share","sharp","she","sheep","sheet","shelf","shells","shelter","shine","shinning","ship","shirt","shoe","shoot","shop","shore","short","shorter","shot","should","shoulder","shout","show","shown","shut","sick","sides","sight","sign","signal","silence","silent","silk","silly","silver","similar","simple","simplest","simply","since","sing","single","sink","sister","sit","sitting","situation","six","size","skill","skin","sky","slabs","slave","sleep","slept","slide","slight","slightly","slip","slipped","slope","slow","slowly","small","smaller","smallest","smell","smile","smoke","smooth","snake","snow","so","soap","social","society","soft","softly","soil","solar","sold","soldier","solid","solution","solve","some","somebody","somehow","someone","something","sometime","somewhere","son","song","soon","sort","sound","source","south","southern","space","speak","special","species","specific","speech","speed","spell","spend","spent","spider","spin","spirit","spite","split","spoken","sport","spread","spring","square","stage","stairs","stand","standard","star","stared","start","state","statement","station","stay","steady","steam","steel","steep","stems","step","stepped","stick","stiff","still","stock","stomach","stone","stood","stop","stopped","store","storm","story","stove","straight","strange","stranger","straw","stream","street","strength","stretch","strike","string","strip","strong","stronger","struck","structure","struggle","stuck","student","studied","studying","subject","substance","success","successful","such","sudden","suddenly","sugar","suggest","suit","sum","summer","sun","sunlight","supper","supply","support","suppose","sure","surface","surprise","surrounded","swam","sweet","swept","swim","swimming","swing","swung","syllable","symbol","system","table","tail","take","taken","tales","talk","tall","tank","tape","task","taste","taught","tax","tea","teach","teacher","team","tears","teeth","telephone","television","tell","temperature","ten","tent","term","terrible","test","than","thank","that","thee","them","themselves","then","theory","there","therefore","these","they","thick","thin","thing","think","third","thirty","this","those","thou","though","thought","thousand","thread","three","threw","throat","through","throughout","throw","thrown","thumb","thus","thy","tide","tie","tight","tightly","till","time","tin","tiny","tip","tired","title","to","tobacco","today","together","told","tomorrow","tone","tongue","tonight","too","took","tool","top","topic","torn","total","touch","toward","tower","town","toy","trace","track","trade","traffic","trail","train","transportation","trap","travel","treated","tree","triangle","tribe","trick","tried","trip","troops","tropical","trouble","truck","trunk","truth","try","tube","tune","turn","twelve","twenty","twice","two","type","typical","uncle","under","underline","understanding","unhappy","union","unit","universe","unknown","unless","until","unusual","up","upon","upper","upward","us","use","useful","using","usual","usually","valley","valuable","value","vapor","variety","various","vast","vegetable","verb","vertical","very","vessels","victory","view","village","visit","visitor","voice","volume","vote","vowel","voyage","wagon","wait","walk","wall","want","war","warm","warn","was","wash","waste","watch","water","wave","way","we","weak","wealth","wear","weather","week","weigh","weight","welcome","well","went","were","west","western","wet","whale","what","whatever","wheat","wheel","when","whenever","where","wherever","whether","which","while","whispered","whistle","white","who","whole","whom","whose","why","wide","widely","wife","wild","will","willing","win","wind","window","wing","winter","wire","wise","wish","with","within","without","wolf","women","won","wonder","wonderful","wood","wooden","wool","word","wore","work","worker","world","worried","worry","worse","worth","would","wrapped","write","writer","writing","written","wrong","wrote","yard","year","yellow","yes","yesterday","yet","you","young","younger","your","yourself","youth","zero","zebra","zipper","zoo","zulu"],Sr=Jt.reduce((h,n)=>n.length<h.length?n:h).length,Tr=Jt.reduce((h,n)=>n.length>h.length?n:h).length;function ja(h){const{minLength:n,maxLength:d,...u}={};function t(){let r=typeof n!="number"?Sr:a(n);const o=typeof d!="number"?Tr:a(d);r>o&&(r=o);let s=!1,l;for(;!s;)l=e(),s=l.length<=o&&l.length>=r;return l}function e(){return Jt[i(Jt.length)]}function a(r){return r<Sr&&(r=Sr),r>Tr&&(r=Tr),r}function i(r){const o=Math.random();return Math.floor(o*r)}return t()}function Na({children:h,...n}){const d=new Tt,u={font:"/Inter-Bold.woff",fontSize:fo*.0025,letterSpacing:-.05,lineHeight:1,"material-toneMapped":!1},t=Te.useRef(null),[e,a]=Te.useState(!1),i=o=>(o.stopPropagation(),a(!0)),r=()=>a(!1);return Te.useEffect(()=>{e&&(document.body.style.cursor="pointer")},[e]),Dr(({})=>{t.current.material.color.lerp(d.set(e?"#fa2720":"white"),.1)}),Ye.jsx(wo,{...n,children:Ye.jsx(wa,{ref:t,onPointerOver:i,onPointerOut:r,onClick:()=>console.log("clicked"),...u,children:h})})}function za({count:h=4,radius:n=20}){return Te.useMemo(()=>{const u=[],t=new co,e=Math.PI/(h+1),a=Math.PI*2/h;for(let i=1;i<h+1;i++)for(let r=0;r<h;r++)u.push([new Pe().setFromSpherical(t.set(n,e*i,a*r)),ja()]);return u},[h,n]).map(([u,t],e)=>Ye.jsx(Na,{position:u,children:t},e))}function Ya(){return Ye.jsx("div",{children:Ye.jsxs(uo,{dpr:[1,2],camera:{position:[0,0,35],fov:90},children:[Ye.jsx("fog",{attach:"fog",args:["#202025",0,80]}),Ye.jsx(Te.Suspense,{fallback:null,children:Ye.jsx("group",{rotation:[10,10.5,10],children:Ye.jsx(za,{count:8,radius:20})})}),Ye.jsx(xa,{})]})})}export{Ya as default};
